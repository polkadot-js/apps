"use strict";(("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps=("undefined"!=typeof self?self:this).webpackChunk_polkadot_apps||[]).push([[893],{51213:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(52322),a=t(2784),o=t(95499);const i=a.memo((function({basePath:e,className:s}){return(0,n.jsx)(o.Z,{basePath:e,className:s,type:"membership"})}))},16743:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(90778),a=t(9118),o=t(11677);const i={transform:e=>e.length},r=(0,o.e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,n.h)();return(0,a.W7)(s&&e.query.membership?.proposals,void 0,i)||0}))},50313:(e,s,t)=>{t.d(s,{Z:()=>_});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(34814),l=t(14681),c=t(61349);function d(){return(0,c.$G)("app-nfts")}const u=a.memo((function({className:e,collectionName:s,value:{account:t,id:a,ipfsData:o}}){const r=o?.name||s;let l="";return o?.image&&(l=o.image.toLowerCase().startsWith("http")?o.image:`https://ipfs.io/ipfs/${o.image}`),(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)(i.iA.Column.Id,{value:a}),(0,n.jsx)("td",{className:"together all",children:r&&l?(0,n.jsx)(i.JH,{href:l,icon:"braille",label:r,rel:"noopener",target:"_blank"}):r}),(0,n.jsx)("td",{className:"address media--1000",children:(0,n.jsx)(i.N,{value:t})})]})}));var m=t(74065),h=t(90778),p=t(11677);const x=(0,p.e)("useAccountItems",(function(){const e=(0,m.X)(),{api:s}=(0,h.h)(),{allAccounts:t}=(0,r.x)(),[n,o]=(0,a.useState)();return(0,a.useEffect)((()=>{if(!t.length)return;const n=t.map((e=>s.query.uniques.account.keys(e)));Promise.all(n).then((s=>e.current&&o(function(e){return e.filter((e=>!!e.length)).map((e=>e.map((e=>{const[s,t,n]=e.args;return{accountId:s,collectionId:t,itemId:n}})))).flat()}(s)))).catch(console.error)}),[t,s.query.uniques.account,e]),n}));var g=t(9118),f=t(6688);const b={withParams:!0},j={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?(0,f.O)(s.image):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}},v=(0,p.e)("useItemsInfos",(function(e){const{api:s}=(0,h.h)(),[t,n]=(0,a.useState)(),o=(0,a.useMemo)((()=>e.map((({collectionId:e,itemId:s})=>[e,s]))),[e]),i=(0,g.W7)(s.query.uniques.instanceMetadataOf.multi,[o],b),r=(0,a.useMemo)((()=>{if(i?.[1].length)return i[1].map((e=>e.isSome?e.unwrap().data.toPrimitive():""))}),[i]),l=(0,f.V)(r,j);return(0,a.useEffect)((()=>{if(l&&e.length&&i?.[0][0].length){const[s]=i[0][0][0];if(!s.eq(o[0][0]))return;const t=i[0][0].map(((s,t)=>function([,e],s,t){const n=t.find((({itemId:s})=>s.eq(e)));if(!n)throw new Error("Unable to extract accountId");return{account:n.accountId,id:e,ipfsData:null,key:e.toString(),metadata:s.unwrapOr(null)}}(s,i[1][t],e)));n(t.map((e=>s=>{const t=(0,f.O)(s.metadata?.data.toPrimitive());return{...s,ipfsData:t&&e.has(t)&&e.get(t)||null}})(l)))}}),[e,o,l,i]),t})),y=i.zo.div`
  table {
    overflow: auto;
  }
`,w=a.memo((function({className:e,infos:s=[]}){const{t}=d(),o=` - ${t("no name")} -`,[r,c]=(0,a.useState)(0),[m,h]=(0,a.useState)(null),p=x(),g=(0,a.useMemo)((()=>m&&p?p.filter((({collectionId:e})=>e.eq(m.id))):[]),[m,p]),f=v(g),b=m?.ipfsData?.name||o,j=(0,a.useMemo)((()=>p?s.filter((e=>!(!e.details||!e.metadata)&&p.some((({collectionId:s})=>e.id.eq(s))))).sort(((e,s)=>e.id.cmp(s.id))):[]),[s,p]),w=(0,a.useMemo)((()=>j.map((({id:e,ipfsData:s},t)=>({text:`${s?.name||o} (ID: ${(0,l.u)(e)})`,value:t})))),[j,o]),k=(0,a.useRef)([[t("items"),"start",2],[t("owner"),"address media--1000"]]);return(0,a.useEffect)((()=>{h((()=>r>=0&&r<j.length?j[r]:null))}),[j,r]),(0,n.jsx)(y,{className:e,children:(0,n.jsx)(i.iA,{empty:!m&&p&&t("No accounts with items found for the collection"),filter:w.length?(0,n.jsx)(i.Lt,{isFull:!0,label:t("the collection to query for items"),onChange:c,options:w,value:r}):void 0,header:k.current,children:f?.map((e=>(0,n.jsx)(u,{collectionName:b,value:e},e.key)))})})})),k=a.memo((function({className:e,value:{details:s,id:t,ipfsData:a}}){const{t:o}=d(),r=a?.name||"";let c="";return a?.image&&(c=a.image.toLowerCase().startsWith("http")?a.image:`https://ipfs.io/ipfs/${a.image}`),(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)(i.iA.Column.Id,{value:t}),(0,n.jsx)("td",{className:"together all",children:r&&c?(0,n.jsx)(i.JH,{href:c,icon:"braille",label:r,rel:"noopener",target:"_blank"}):r}),(0,n.jsx)("td",{className:"address media--1000",children:s&&(0,n.jsx)(i.N,{value:s.owner})}),(0,n.jsx)("td",{className:"string",children:s&&s.isFrozen.isTrue&&o("Frozen")}),(0,n.jsx)("td",{className:"number",children:s&&(0,l.u)(s.items||s.instances)})]})})),C=a.memo((function({className:e,infos:s}){const{t}=d(),o=(0,a.useRef)([[t("collections"),"start",2],[t("owner"),"address media--1000"],[t("status")],[t("items")]]);return(0,n.jsx)(i.iA,{className:e,empty:s&&t("No collections found"),header:o.current,children:s?.map((e=>(0,n.jsx)(k,{value:e},e.key)))})})),N=a.memo((function({className:e,numCollections:s}){const{t}=d();return(0,n.jsx)(i.Ty,{className:e,children:(0,n.jsx)(i.Jy,{label:t("collections"),children:(0,l.u)(s)})})})),I=a.memo((function({className:e,ids:s,infos:t}){return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(N,{numCollections:s?.length}),(0,n.jsx)(C,{infos:t})]})}));var S=t(12298),A=t(39824);const P={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function E(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"Created"===n||"ForceCreated"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const M=(0,p.e)("useCollectionIds",(function(){const{api:e}=(0,h.h)(),s=(0,S.k)(e.query.uniques.class,[],P);return(0,A.N)([e.events.uniques.Created,e.events.uniques.Destroyed,e.events.uniques.ForceCreated],E,s)})),D={isAdminMe:!1,isFreezerMe:!1,isIssuerMe:!1,isOwnerMe:!1},T={withParams:!0},F={transform:e=>{if(!e)return null;try{const s=JSON.parse(e);if(s&&"object"==typeof s)return{image:"string"==typeof s.image?(0,f.O)(s.image):null,name:"string"==typeof s.name?s.name:null}}catch{}return null}};function q(e,s){const t=s.toString();return e.some((e=>e===t))}const O=(0,p.e)("useCollectionInfos",(function(e){const{api:s}=(0,h.h)(),{allAccounts:t}=(0,r.x)(),n=(0,g.W7)(s.query.uniques.classMetadataOf.multi,[e],T),o=(0,g.W7)(s.query.uniques.class.multi,[e],T),[i,l]=(0,a.useState)(),c=(0,a.useMemo)((()=>n?.[1].length?n[1].map((e=>e.isSome?e.unwrap().data.toPrimitive():"")):[]),[n]),d=(0,f.V)(c,F);return(0,a.useEffect)((()=>{if(d&&o&&n&&o[0][0].length===n[0][0].length){const e=o[0][0].map(((e,s)=>function(e,s,t,n){const a=t.unwrapOr(null);return{...a?{isAdminMe:q(e,a.admin),isFreezerMe:q(e,a.freezer),isIssuerMe:q(e,a.issuer),isOwnerMe:q(e,a.owner)}:D,details:a,id:s,ipfsData:null,key:s.toString(),metadata:n.unwrapOr(null)}}(t,e,o[1][s],n[1][s])));l(e.map((e=>s=>{const t=(0,f.O)(s.metadata?.data.toPrimitive());return{...s,ipfsData:t&&e.has(t)&&e.get(t)||null}})(d)))}}),[t,o,e,d,n]),i})),_=a.memo((function({basePath:e,className:s}){const{t}=d(),{hasAccounts:l}=(0,r.x)(),c=M(),u=O(c),m=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")},{name:"my-nfts",text:t("My NFTs")}]),h=(0,a.useMemo)((()=>l&&u&&u.some((({details:e,metadata:s})=>!(!e||!s)))?[]:["my-nfts"]),[l,u]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,hidden:h,items:m.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(w,{infos:u}),path:"my-nfts"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(I,{ids:c,infos:u}),index:!0})]})})]})}))},90992:(e,s,t)=>{t.d(s,{Z:()=>A});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(34814),c=t(74065),d=t(11677);const u=(0,d.e)("useProxies",(function(){const{api:e}=(0,r.h)(),{allAccounts:s}=(0,l.x)(),t=(0,c.X)(),[n,o]=(0,a.useState)({});return(0,a.useEffect)((()=>{s.length&&e.query.proxy.proxies.multi(s).then((e=>t.current&&o(e.map((([e],t)=>[s[t],e.map((({delegate:e})=>e.toString()))])).filter((([,e])=>e.length)).reduce(((e,[s,t])=>({...e,[s]:t})),{})))).catch(console.error)}),[s,e,t]),n}));var m=t(38894),h=t(67609),p=t(95292),x=t(61349);function g(){return(0,x.$G)("app-nis")}const f=a.memo((function({className:e,isDisabled:s,proxies:t}){const{t:o}=g(),{api:l}=(0,r.h)(),[c,d]=(0,m.O)(),[u,x]=(0,a.useState)(null),[f,b]=(0,a.useState)(null),[j,v]=(0,a.useState)(),[y,w]=(0,a.useState)(),k=(0,a.useMemo)((()=>u&&j&&y?l.tx.proxy.proxy(u,null,l.tx.nis.placeBid(j,y)):null),[l,u,j,y]),C=Object.keys(t),N=!j||j.isZero()||j.lt(l.consts.nis.minBid),I=!y||!y.gte(p.If)||y.gt(l.consts.nis.queueCount);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!C.length||s,label:o("Bid via Proxy"),onClick:d}),c&&(0,n.jsxs)(i.u_,{className:e,header:o("submit nis bid"),onClose:d,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsxs)(i.u_.Columns,{hint:o("This account will make the bid for the nis and pay all associated fees."),children:[(0,n.jsx)(i.rp,{filter:C,label:o("use proxied account"),labelExtra:(0,n.jsx)(h.Z,{label:(0,n.jsx)("span",{className:"label",children:o("transferable")}),params:u}),onChange:x,type:"account"}),u&&(0,n.jsx)(i.rp,{filter:t[u],label:o("send via proxy"),onChange:b,type:"account"})]}),(0,n.jsxs)(i.u_.Columns,{hint:o("The amount you wish to lock for the duration. It needs to be more than the nis minimum."),children:[(0,n.jsx)(i.H,{autoFocus:!0,defaultValue:l.consts.nis.minBid,isError:N,isZeroable:!1,label:o("bid amount"),onChange:v}),(0,n.jsx)(i.H,{defaultValue:l.consts.nis.minBid,isDisabled:!0,label:o("minimum bid amount")})]}),(0,n.jsxs)(i.u_.Columns,{hint:o("The number of periods this bid is to be locked for, less than the maximum period."),children:[(0,n.jsx)(i.Rn,{defaultValue:p.If,isError:I,isZeroable:!1,label:o("lock periods"),onChange:w}),(0,n.jsx)(i.Rn,{defaultValue:l.consts.nis.queueCount,isDisabled:!0,label:o("maximum lock periods")}),!I&&(0,n.jsx)(i.Rn,{defaultValue:l.consts.nis.basePeriod.mul(y),isDisabled:!0,label:o("length of lock (blocks, calculated)")})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:f,extrinsic:k,icon:"check",isDisabled:N||I||!u,label:o("Bid"),onStart:d})})]})]})}));var b=t(58607),j=t(14681);const v=a.memo((function({className:e,value:{balance:s,index:t,numItems:a}}){return(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)(i.iA.Column.Id,{value:t}),(0,n.jsx)("td",{className:"number all",children:(0,j.u)(a)}),(0,n.jsx)("td",{className:"number",children:(0,n.jsx)(b.Z,{value:s})})]})})),y=a.memo((function({className:e,queueTotals:s}){const{t}=g(),o=(0,a.useRef)([[t("queues"),"start"],[t("participants"),"number"],[t("balance"),"number"]]);return(0,n.jsx)(i.iA,{className:e,empty:s&&t("No active nis queues found."),header:o.current,children:s?.map((e=>(0,n.jsx)(v,{value:e},e.index)))})}));var w=t(54383);const k=a.memo((function({className:e,info:s}){const{t}=g(),{api:a}=(0,r.h)(),o=(0,w.C)();return(0,n.jsxs)(i.Ty,{className:e,children:[(0,n.jsx)("section",{children:o&&(0,n.jsx)(i.Jy,{label:t("intake"),progress:{total:a.consts.nis.intakePeriod,value:o.mod(a.consts.nis.intakePeriod),withTime:!0}})}),(0,n.jsx)("section",{children:s?.summary&&(0,n.jsx)(i.Jy,{label:t("proportion"),progress:{isPercent:!0,total:p.Wi,value:s.summary.proportionOwed}})})]})}));var C=t(54890);const N={defaultValue:{},transform:([e,s])=>({queueTotals:s.map((([e,s],t)=>({balance:s,index:t+1,numItems:e}))).filter((({balance:e})=>!e.isZero())),summary:e})},I=(0,d.e)("useInfo",(function(){const{api:e}=(0,r.h)(),s=(0,C.L)([e.query.nis.summary,e.query.nis.queueTotals],N);return(0,a.useMemo)((()=>({info:s})),[s])})),S=a.memo((function({className:e}){const s=u(),{info:t}=I(),a=!t?.summary||t.summary.proportionOwed.isZero();return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(k,{info:t,isDisabled:a}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(f,{isDisabled:!0,proxies:s})}),(0,n.jsx)(y,{queueTotals:t?.queueTotals})]})})),A=a.memo((function({basePath:e,className:s}){const{t}=g(),r=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,items:r.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsx)(o.AW,{path:e,children:(0,n.jsx)(o.AW,{element:(0,n.jsx)(S,{}),index:!0})})})]})}))},9847:(e,s,t)=>{t.d(s,{Z:()=>v});var n=t(52322),a=t(2784),o=t(68235),i=t(90778),r=t(41411),l=t(9118),c=t(18837),d=t(67609),u=t(58607),m=t(95292),h=t(33661),p=t(17965),x=t(58464);const g=Number.MAX_SAFE_INTEGER,f=["xcm","xcmPallet","polkadotXcm"];function b(e,s){return e?-1===s?{interior:"Here",parents:1}:{interior:{X1:[{ParaChain:s}]},parents:1}:{interior:{X1:[{ParaChain:s}]},parents:0}}function j({paraId:e,text:s,ui:t}){return{text:(0,n.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,n.jsx)(o.Mj,{className:"ui--Dropdown-icon",logo:t.logo}),(0,n.jsx)("div",{className:"ui--Dropdown-name",children:s})]},e),value:e||-1}}const v=a.memo((function({onClose:e}){const{t:s}=(0,x.$)(),{api:t}=(0,i.h)(),[v,w]=(0,a.useState)(m.nw),[k,C]=(0,a.useState)(null),[N,I]=(0,a.useState)(null),[S,A]=(0,a.useState)(g),{allowTeleport:P,destinations:E,isParaTeleport:M,oneWay:D}=(0,r.M)(),T=(0,l.W7)(t.derive.balances?.all,[N]),[F,q]=(0,a.useState)(null),O=(0,a.useMemo)((()=>{const e=f.filter((e=>t.tx[e]&&(0,h.m)(t.tx[e].limitedTeleportAssets)))[0];return t.tx[e].limitedTeleportAssets}),[t]),_=(0,a.useMemo)((()=>E.map(j)),[E]),V=(0,a.useMemo)((()=>E.find((({paraId:e},s)=>-1===S?0===s:S===e))?.providers),[E,S]),B=(0,c.J)(V),R=(0,a.useMemo)((()=>[{V4:b(M,S)},{V4:{interior:{X1:[{AccountId32:{id:t.createType("AccountId32",k).toHex(),network:null}}]},parents:0}},{V4:[{fun:{Fungible:v},id:{interior:"Here",parents:M?1:0}}]},0,{Unlimited:null}]),[t,v,M,k,S]),Z=!!v&&(!F||v.lte(F));return(0,a.useEffect)((()=>{T&&T.accountId.eq(N)&&N&&k&&t.call.transactionPaymentApi&&t.tx.balances?(0,p.Y)((async()=>{try{const e=O(...R),{partialFee:s}=await e.paymentInfo(N),n=s.muln(110).div(m.S8),a=(T.transferable||T.availableBalance).sub(n);q(t.consts.balances&&a.gt(t.consts.balances.existentialDeposit)?a.sub(t.consts.balances.existentialDeposit):null)}catch(e){console.error(e)}})):q(null)}),[t.call.transactionPaymentApi,t.consts.balances,t.tx.balances,T,O,R,k,N]),(0,n.jsxs)(o.u_,{header:s("Teleport assets"),onClose:e,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:s("The transferred balance will be subtracted (along with fees) from the sender account."),children:(0,n.jsx)(o.rp,{label:s("send from account"),labelExtra:(0,n.jsx)(d.Z,{label:s("transferable"),params:N}),onChange:I,type:"account"})}),0!==_.length&&(0,n.jsxs)(o.u_.Columns,{hint:s("The destination chain for this asset teleport. The transferred value will appear on this chain."),children:[(0,n.jsx)(o.Lt,{defaultValue:_[0].value,label:s("destination chain"),onChange:A,options:_}),!M&&D.includes(S)&&(0,n.jsx)(o.Pd,{content:s("Currently this is a one-way transfer since the on-chain runtime functionality to send the funds from the destination chain back to this account not yet available.")})]}),(0,n.jsx)(o.u_.Columns,{hint:s("The beneficiary will have access to the transferred amount when the transaction is included in a block."),children:(0,n.jsx)(o.rp,{label:s("send to address"),onChange:C,type:"allPlus"})}),(0,n.jsxs)(o.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:s("This is the amount to be teleported to the destination chain and does not account for the source or the destination transfer fee")}),(0,n.jsx)("p",{children:s("The amount deposited to the recipient will be net the calculated cross-chain fee. If the recipient address is new, the amount deposited should be greater than the Existential Deposit")})]}),children:[(0,n.jsx)(o.H,{autoFocus:!0,isError:!Z,isZeroable:!0,label:s("amount"),onChange:w}),F&&(0,n.jsxs)(y,{children:[(0,n.jsx)("span",{children:"Max -"}),(0,n.jsx)(u.Z,{value:F})]}),(0,n.jsx)(o.H,{defaultValue:B?.consts.balances?.existentialDeposit,isDisabled:!0,isLoading:!B,label:s("destination existential deposit")})]}),(0,n.jsx)(o.u_.Columns,{children:(0,n.jsxs)(o.Pd,{className:"warning",withIcon:!1,children:[(0,n.jsx)("p",{children:s("To ensure a successful XCM transaction, please make sure the following conditions are met:")}),(0,n.jsxs)("ol",{children:[(0,n.jsx)("li",{children:s("The source account must retain a balance greater than the existential deposit after covering the fee.")}),(0,n.jsx)("li",{children:s("The destination account must hold at least the minimum existential deposit after receiving the transfer and paying any applicable destination fees.")})]})]})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:N,icon:"share-square",isDisabled:!(P&&Z&&k&&v&&B&&(M||S!==g)),label:s("Teleport"),onStart:e,params:R,tx:O})})]})})),y=o.zo.p`
  align-items: center;
  display: flex;
  font-size: var(--font-size-small);
  gap: 3px;
  justify-content: flex-end;
  span:first-of-type {
    font-weight: var(--font-weight-bold);
  }
`},93277:(e,s,t)=>{t.d(s,{Z:()=>As});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(9118),c=t(58464),d=t(31132),u=t(14681);const m=a.memo((function({auctionInfo:e,blockNumber:s,className:t="",isFirst:a,isLatest:o,value:{accountId:r,firstSlot:l,isCrowdloan:d,lastSlot:m,paraId:h,value:p}}){const{t:x}=(0,c.$)();return(0,n.jsxs)("tr",{className:t,children:[(0,n.jsx)("td",{children:a&&(0,n.jsx)("h1",{children:o?x("latest"):(0,n.jsxs)(n.Fragment,{children:["#",(0,u.u)(!s||s.isZero()?e.endBlock:s)]})})}),(0,n.jsx)(i.iA.Column.Id,{value:h}),(0,n.jsx)("td",{className:"badge",children:(0,n.jsx)(i.f,{id:h})}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(i.ax,{value:r})}),(0,n.jsx)("td",{className:"all number",children:x(d?"Yes":"No")}),(0,n.jsx)("td",{className:"all number together",children:l.eq(m)?(0,u.u)(l):`${(0,u.u)(l)} - ${(0,u.u)(m)}`}),(0,n.jsx)(i.iA.Column.Balance,{value:p})]})})),h=a.memo((function({auctionInfo:e,campaigns:s,className:t,winningData:o}){const{t:u}=(0,c.$)(),{api:h}=(0,r.h)(),p=(0,d.f)(),x=(0,l.W7)(h.query.crowdloan.newRaise),g=(0,a.useRef)([[u("bids"),"start",3],[u("bidder"),"address"],[u("crowdloan")],[u("leases")],[u("value")]]),f=(0,a.useMemo)((()=>{if(x&&e?.leasePeriod&&s.funds){const t=e.leasePeriod,n=t.add(p);return s.funds.filter((({firstSlot:e,isWinner:s,lastSlot:a,paraId:o})=>!s&&x.some((e=>e.eq(o)))&&e.gte(t)&&a.lte(n))).sort(((e,s)=>s.value.cmp(e.value)))}}),[e,s,x,p]),b=(0,a.useCallback)(((s,t)=>!t&&x&&e?.leasePeriod&&f?s.concat(...f.filter((({firstSlot:e,lastSlot:t,paraId:n,value:a})=>!s.some((s=>s.firstSlot.eq(e)&&s.lastSlot.eq(t)))&&!f.some((s=>!n.eq(s.paraId)&&e.eq(s.firstSlot)&&t.eq(s.lastSlot)&&a.lt(s.value)))))).map((e=>f.find((({firstSlot:s,lastSlot:t,value:n})=>e.firstSlot.eq(s)&&e.lastSlot.eq(t)&&e.value.lt(n)))||e)).sort(((e,s)=>e.firstSlot.eq(s.firstSlot)?e.lastSlot.cmp(s.lastSlot):e.firstSlot.cmp(s.firstSlot))):s),[e,f,x]);return(0,n.jsx)(i.iA,{className:t,empty:x&&e?.numAuctions&&o&&(e.endBlock&&!o.length?u("No winners in this auction"):u("No ongoing auction")),header:g.current,noBodyTag:!0,children:e?.leasePeriod&&o&&f&&(o.length?o.map((({blockNumber:s,winners:t},a)=>(0,n.jsx)("tbody",{children:b(t,0!==a||1!==o.length).map(((t,o)=>(0,n.jsx)(m,{auctionInfo:e,blockNumber:s,isFirst:0===o,isLatest:0===a,value:t},`${s.toString()}:${t.key}`)))},a))):0!==f.length&&(0,n.jsx)("tbody",{children:b([],!1).map(((s,t)=>(0,n.jsx)(m,{auctionInfo:e,isFirst:0===t,isLatest:!0,value:s},`latest-crowd:${s.key}`)))},"latest-crowd"))})}));var p=t(34814),x=t(54383),g=t(38894),f=t(95292);const b=a.memo((function({noCodeCheck:e,onChange:s,ownedIds:t}){const{t:o}=(0,c.$)(),[r,l]=(0,a.useState)(null),[d,u]=(0,a.useState)(0);(0,a.useEffect)((()=>{s(r&&d?{accountId:r,paraId:d}:{accountId:null,paraId:0})}),[r,s,t,d]);const m=(0,a.useMemo)((()=>t.map((({manager:e})=>e))),[t]),h=(0,a.useMemo)((()=>t.filter((({manager:e})=>e===r)).map((({paraId:e})=>({text:e.toString(),value:e.toNumber()})))),[r,t]),p=(0,a.useCallback)((s=>u(e||t.some((({hasCode:e,paraId:t})=>t.eq(s)&&e))?s:0)),[e,t]);return(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:o("This account that has been used to register the parachain. This will pay all associated fees.")}),(0,n.jsx)("p",{children:o("The parachain id is associated with the selected account via parathread registration.")})]}),children:[(0,n.jsx)(i.rp,{filter:m,label:o("parachain owner"),onChange:l,type:"account",value:r}),r&&(0,n.jsx)(i.Lt,{defaultValue:h[0].value,label:o("parachain id"),onChange:p,options:h},r),!e&&!d&&(0,n.jsx)(i.oy,{content:o("Before using this registered paraId, you need to have a WASM validation function registered on-chain")})]})})),j={accountId:null,paraId:0},v=a.memo((function({auctionInfo:e,className:s,lastWinners:t,ownedIds:o}){const{t:l}=(0,c.$)(),{api:m}=(0,r.h)(),{hasAccounts:h}=(0,p.x)(),v=(0,x.C)(),y=(0,d.E)(),[{accountId:w,paraId:k},C]=(0,a.useState)(j),[N,I]=(0,a.useState)(f.nw),[S,A]=(0,a.useState)(0),[P,E]=(0,g.O)(),M=(0,a.useMemo)((()=>{if(!e?.leasePeriod)return[];const s=e.leasePeriod.toNumber();return y.map((([e,t],n)=>({firstSlot:s+e,lastSlot:s+t,text:`${(0,u.u)(s+e)} - ${(0,u.u)(s+t)}`,value:n})))}),[e,y]),D=(0,a.useMemo)((()=>t?.winners.find((({firstSlot:e,lastSlot:s})=>e.eqn(M[S].firstSlot)&&s.eqn(M[S].lastSlot)))),[t,S,M]),T=!(!N||!D)&&N.lte(D.value),F=!N||N.isZero()||T;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!o.length||!h||!e?.numAuctions||!e.leasePeriod||!e.endBlock||!m.consts.auctions||v?.gte(e.endBlock.add(m.consts.auctions.endingPeriod)),label:l("Bid"),onClick:E}),P&&(0,n.jsxs)(i.u_,{className:s,header:l("Place bid"),onClose:E,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(b,{onChange:C,ownedIds:o}),(0,n.jsx)(i.u_.Columns,{hint:l("The first and last lease period for this bid. The last lease period should be after the first with the maximum determined by the auction config."),children:(0,n.jsx)(i.Lt,{label:l("bid period range (first lease - last lease)"),onChange:A,options:M,value:S})}),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:l("The amount to bid for this parachain lease period range.")}),(0,n.jsx)("p",{children:l("The bid should be more than the current range winner to be accepted and influence the auction outcome.")})]}),children:[(0,n.jsx)(i.H,{autoFocus:!0,isError:F,isZeroable:!1,label:l("bid amount"),onChange:I}),(0,n.jsx)(i.H,{defaultValue:D?.value,isDisabled:!0,label:l("current range winning bid")},S)]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:w,icon:"plus",isDisabled:!k||F||!e?.leasePeriod,label:l("Bid"),onStart:E,params:[k,e?.numAuctions,e?.leasePeriod?.addn(y[S][0]),e?.leasePeriod?.addn(y[S][1]),N],tx:m.tx.auctions.bid})})]})]})}));var y=t(58607);const w=a.memo((function({auctionInfo:e,className:s,lastWinners:t}){const{t:a}=(0,c.$)(),{api:o}=(0,r.h)(),d=(0,x.C)(),m=(0,l.W7)(o.query.balances?.totalIssuance);return(0,n.jsxs)(i.Ty,{className:s,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:a("auctions"),children:e?(0,u.u)(e.numAuctions):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(i.Jy,{label:a("active"),children:e?e.leasePeriod?a("yes"):a("no"):(0,n.jsx)("span",{className:"--tmp",children:a("no")})})]}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{children:[e.leasePeriod&&(0,n.jsxs)(i.Jy,{label:a("first - last"),children:[(0,u.u)(e.leasePeriod)," - ",(0,u.u)(e.leasePeriod.add(o.consts.auctions.leasePeriodsPerSlot).isub(f.If))]}),m&&t&&(0,n.jsx)(i.Jy,{label:a("total"),progress:{hideValue:!0,total:m,value:t.total,withTime:!0},children:(0,n.jsx)(y.Z,{value:t.total,withSi:!0})})]}),(0,n.jsx)("section",{children:e?.endBlock&&d&&(d.lt(e.endBlock)?(0,n.jsxs)(i.Jy,{label:a("end period at"),progress:{hideGraph:!0,total:e.endBlock,value:d,withTime:!0},children:["#",(0,u.u)(e.endBlock)]}):(0,n.jsx)(i.Jy,{label:a("ending period"),progress:{total:o.consts.auctions?.endingPeriod,value:d.sub(e.endBlock),withTime:!0}}))})]})]})})),k=a.memo((function({auctionInfo:e,campaigns:s,className:t,ownedIds:a,winningData:o}){const{t:r}=(0,c.$)(),l=o?.[0];return(0,n.jsxs)("div",{className:t,children:[(0,n.jsx)(i.Pd,{className:"warning centered",content:r("Auctions will be deprecated in favor of Coretime. When Coretime is active in Polkadot, this page will be removed.")}),(0,n.jsx)(w,{auctionInfo:e,lastWinners:l}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(v,{auctionInfo:e,lastWinners:l,ownedIds:a})}),(0,n.jsx)(h,{auctionInfo:e,campaigns:s,winningData:o})]})})),C={accountId:null,paraId:0},N=a.memo((function({auctionInfo:e,bestNumber:s,className:t,leasePeriod:o,ownedIds:l}){const{t:u}=(0,c.$)(),{api:m}=(0,r.h)(),h=(0,d.E)(),[{accountId:p,paraId:x},j]=(0,a.useState)(C),[v,y]=(0,a.useState)(),[w,k]=(0,a.useState)(),[N,I]=(0,a.useState)(),[S,A]=(0,a.useState)(),[P,E]=(0,g.O)(),M=h[h.length-1][1]-h[0][0],D=!s||!w||w.lt(s),T=!N||!!o&&N.lt(o.currentPeriod),F=!S||!N||S.lt(N)||S.gt(N.addn(M)),q=(e?.leasePeriod||o?.currentPeriod.add(f.If)||1).toString();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!l.length,label:u("Add fund"),onClick:E}),P&&(0,n.jsxs)(i.u_,{className:t,header:u("Add campaign"),onClose:E,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(b,{onChange:j,ownedIds:l}),(0,n.jsx)(i.u_.Columns,{hint:u("The amount to be raised in this funding campaign."),children:(0,n.jsx)(i.H,{isZeroable:!1,label:u("crowdfund cap"),onChange:y})}),(0,n.jsx)(i.u_.Columns,{hint:u("The end block for contributions to this fund."),children:(0,n.jsx)(i.Rn,{isError:D,label:u("ending block"),onChange:k})}),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:u("The first and last lease periods for this funding campaign.")}),(0,n.jsx)("p",{children:u("The ending lease period should be after the first and a maximum of {{maxPeriods}} periods more than the first",{replace:{maxPeriods:M}})})]}),children:[(0,n.jsx)(i.Rn,{defaultValue:q,isError:T,label:u("first period"),onChange:I}),(0,n.jsx)(i.Rn,{defaultValue:q,isError:F,label:u("last period"),onChange:A})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:p,icon:"plus",isDisabled:!x||!v?.gt(f.nw)||D||T||F,label:u("Add"),onStart:E,params:[x,v,N,S,w,null],tx:m.tx.crowdloan.create})})]})]})}));var I=t(62395),S=t(84450),A=t(15991),P=t(65874),E=t(67609),M=t(74076),D=t(92730);const T=[132,134],F=a.memo((function({cap:e,className:s,needsSignature:t,paraId:o,raised:l}){const{t:d}=(0,c.$)(),{api:u}=(0,r.h)(),{hasAccounts:m}=(0,p.x)(),[h,x]=(0,g.O)(),[f,b]=(0,a.useState)(null),[j,v]=(0,a.useState)(),[y,w]=(0,a.useState)(null),k=(0,a.useMemo)((()=>t&&!function(e,s){if((0,M.vq)(s)&&T.includes(s.length))try{return e.createType("MultiSignature",s),!0}catch(e){console.error(e)}return!1}(u,y)),[u,t,y]),C=e.sub(l),N=!j||j.lt(u.consts.crowdloan.minContribution),I=!(!j||!j.gt(C)),S=N||I,A=u.consts.crowdloan.minContribution;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!m,label:d("Contribute"),onClick:x}),h&&(0,n.jsxs)(i.u_,{className:s,header:d("Contribute to fund"),onClose:x,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:d("This account will contribute to the crowdloan."),children:(0,n.jsx)(i.rp,{label:d("contribute from"),onChange:b,type:"account",value:f})}),(0,n.jsxs)(i.u_.Columns,{hint:d("The amount to contribute from this account."),children:[(0,n.jsx)(i.H,{autoFocus:!0,defaultValue:u.consts.crowdloan.minContribution,isError:S,isZeroable:!1,label:d("contribution"),onChange:v}),N&&(0,n.jsx)(i.Pd,{content:d("The amount is less than the minimum allowed contribution of {{value}}",{replace:{value:(0,D.a)(A)}})}),I&&(0,n.jsx)(i.Pd,{content:d("The amount is more than the remaining contribution needed {{value}}",{replace:{value:(0,D.a)(C)}})})]}),t&&(0,n.jsxs)(i.u_.Columns,{hint:d("The verifier signature that is to be associated with this contribution."),children:[(0,n.jsx)(i.II,{isError:k,label:d("verifier signature"),onChange:w,placeholder:d("0x...")}),k&&(0,n.jsx)(i.Pd,{content:d("The hex-encoded verifier signature should be provided to you by the team running the crowdloan (based on the information you provide).")})]}),(0,n.jsxs)(i.u_.Columns,{hint:d("The above contribution should more than minimum contribution amount and less than the remaining value."),children:[(0,n.jsx)(i.H,{defaultValue:u.consts.crowdloan.minContribution,isDisabled:!0,label:d("minimum allowed")}),(0,n.jsx)(i.H,{defaultValue:C,isDisabled:!0,label:d("remaining till cap")})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:f,icon:"plus",isDisabled:S||k,label:d("Contribute"),onStart:x,params:[o,j,y],tx:u.tx.crowdloan.contribute})})]})]})})),q=a.memo((function({className:e,paraId:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),{hasAccounts:l}=(0,p.x)(),[d,u]=(0,g.O)(),[m,h]=(0,a.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"minus",isDisabled:!l,label:t("Refund"),onClick:u}),d&&(0,n.jsxs)(i.u_,{className:e,header:t("Withdraw from fund"),onClose:u,size:"large",children:[(0,n.jsx)(i.u_.Content,{children:(0,n.jsx)(i.u_.Columns,{hint:t("This account will be used to send the transaction."),children:(0,n.jsx)(i.rp,{label:t("requesting from"),onChange:h,type:"account",value:m})})}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:m,icon:"credit-card",label:t("Refund"),onStart:u,params:[s],tx:o.tx.crowdloan.refund})})]})]})}));var O=t(11677),_=t(90107);const V={blockHash:"-",contributorsHex:[],hasLoaded:!1,myAccounts:[],myAccountsHex:[],myContributions:{}},B=(0,O.e)("useContributions",(function(e){const{api:s}=(0,r.h)(),{allAccountsHex:t}=(0,p.x)(),[n,o]=(0,a.useState)((()=>V)),i=(0,l.W7)(s.derive.crowdloan.contributions,[e]),c=(0,l.W7)(s.derive.crowdloan.ownContributions,[e,n.myAccountsHex]);return(0,a.useEffect)((()=>{i&&o((e=>{let n,a=i.contributorsHex.filter((e=>t.includes(e)));return a.length===e.myAccountsHex.length?(a=e.myAccountsHex,n=e.myAccounts):n=a.map((e=>(0,_.m)(e,s.registry.chainSS58))),{...e,...i,hasLoaded:!0,myAccounts:n,myAccountsHex:a}}))}),[s,t,i]),(0,a.useEffect)((()=>{c&&o((e=>({...e,myContributions:c})))}),[c]),n}));function R({hasEnded:e,isDepositor:s,isEnded:t,paraId:o}){const{t:l}=(0,c.$)(),{api:d}=(0,r.h)(),[u,m]=(0,g.O)(),[h,p]=(0,a.useState)(null),x=(0,a.useMemo)((()=>d.tx.crowdloan.dissolve(o)),[d.tx.crowdloan,o]);return(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsxs)(i.u_,{header:l("dissolve crowdloan"),onClose:m,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:l("This account will pay the fees for the dissolving crowdloan"),children:(0,n.jsx)(i.rp,{label:l("send from account"),labelExtra:(0,n.jsx)(E.Z,{label:(0,n.jsx)("span",{className:"label",children:l("transferable")}),params:h}),onChange:p,type:"account"})}),(0,n.jsx)(i.u_.Columns,{children:(0,n.jsx)(A.Z,{isExpanded:!0,isHeader:!0,value:x,withHash:!0})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:h,extrinsic:x,icon:"check",isDisabled:!(s||e),label:l("Submit"),onStart:m})})]}),(0,n.jsx)(i.zx,{icon:"times",isDisabled:!(s||e),label:l(t?"Close":"Cancel"),onClick:m})]})}const Z=a.memo((function({bestHash:e,bestNumber:s,className:t="",isOngoing:o,leasePeriod:r,value:{info:{cap:l,depositor:d,end:m,firstPeriod:h,lastPeriod:x,raised:g,verifier:f},isCapped:b,isEnded:j,isWinner:v,paraId:w}}){const{t:k}=(0,c.$)(),{isAccount:C}=(0,p.x)(),N=(0,S.jC)(w),{blockHash:I,contributorsHex:A,hasLoaded:E,myAccounts:M,myAccountsHex:D,myContributions:T}=B(w),[O,_]=(0,a.useState)((()=>({prevHash:"",prevLength:0}))),V=(0,a.useMemo)((()=>C(d.toString())),[d,C]),Z=(0,a.useMemo)((()=>s&&m.gt(s)?m.sub(s):null),[s,m]),$=(0,a.useMemo)((()=>l.isZero()?"100.00%":`${(g.muln(1e4).div(l).toNumber()/100).toFixed(2)}%`),[l,g]),L=!Z&&!!r&&(v?r.currentPeriod.gt(x):r.currentPeriod.gt(h)),z=o&&!b&&!v&&!!Z,W=g.isZero(),H=!g.isZero()&&L,U=0!==N.length&&N[0].homepage;return(0,a.useEffect)((()=>{_((e=>{const s=A.length;return e.prevLength!==s?{prevHash:I,prevLength:s}:e}))}),[A,I]),(0,n.jsxs)("tr",{className:t,children:[(0,n.jsx)(i.iA.Column.Id,{value:w}),(0,n.jsx)("td",{className:"badge",children:(0,n.jsx)(i.f,{id:w})}),(0,n.jsx)("td",{className:"media--800",children:k(v?"Winner":Z?b?"Capped":o?"Active":"Past":"Ended")}),(0,n.jsx)("td",{className:"address media--2000",children:(0,n.jsx)(i.ax,{value:d})}),(0,n.jsxs)("td",{className:"all number together media--1200",children:[Z&&(0,n.jsx)(P.Z,{value:Z}),"#",(0,u.u)(m)]}),(0,n.jsx)("td",{className:"number all together",children:h.eq(x)?(0,u.u)(h):`${(0,u.u)(h)} - ${(0,u.u)(x)}`}),(0,n.jsxs)("td",{className:"number together",children:[(0,n.jsx)(y.Z,{value:g,withCurrency:!1})," / ",(0,n.jsx)(y.Z,{value:l}),(0,n.jsx)("div",{children:$}),0!==M.length&&(0,n.jsx)(i.xH,{summary:k("My contributions ({{count}})",{replace:{count:M.length}}),withBreaks:!0,children:M.map(((e,s)=>(0,n.jsx)(i.ax,{balance:T[D[s]],value:e,withBalance:!0},e)))})]}),(0,n.jsx)("td",{className:"number together media--1100",children:E?(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)(i.JO,{color:O.prevHash===e?"green":"transparent",icon:"chevron-up",isPadded:!0}),0!==A.length&&(0,u.u)(A.length)]}):(0,n.jsx)("span",{className:"--tmp",children:"999"})}),(0,n.jsxs)("td",{className:"button media--1000",children:[H&&0!==A.length&&(0,n.jsx)(q,{paraId:w}),W&&(0,n.jsx)(R,{hasEnded:L,isDepositor:V,isEnded:j,paraId:w}),o&&z&&(0,n.jsx)(F,{cap:l,needsSignature:f.isSome,paraId:w,raised:g}),o&&U&&(0,n.jsxs)("div",{children:[(0,n.jsx)("a",{href:U,rel:"noopener noreferrer",target:"_blank",children:k("Homepage")}),"   "]})]})]})}));function $(e,s){return s?.sort((({key:s},{key:t})=>{const n=e[s]||!1;return n===(e[t]||!1)?0:n?-1:1}))}const L=a.memo((function({bestNumber:e,className:s,leasePeriod:t,value:o}){const{t:r}=(0,c.$)(),l=(0,I.P)(),[d,u,m]=(0,a.useMemo)((()=>function(e,s){const t=s?.currentPeriod;let n=null,a=null,o=null;return e&&t&&(n=e.filter((({firstSlot:e,isCapped:s,isEnded:n,isWinner:a})=>!(s||n||a)&&t.lte(e))),a=e.filter((({firstSlot:e,isCapped:s,isEnded:n,isWinner:a})=>s||n||a||t.gt(e))),o=e.map((({paraId:e})=>e))),[n,a,o]}(o,t)),[t,o]),h=(0,S.gW)(m),[p,x]=(0,a.useMemo)((()=>[$(h,d),$(h,u)]),[d,u,h]),g=(0,a.useRef)([[r("ongoing"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[r("ending"),"media--1200"],[r("leases")],[r("raised")],[r("count"),"media--1100"],[void 0,"media--1000"]]),f=(0,a.useRef)([[r("completed"),"start",2],[void 0,"media--800"],[void 0,"media--2000"],[r("ending"),"media--1200"],[r("leases")],[r("raised")],[r("count"),"media--1100"],[void 0,"media--1000"]]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Pd,{className:"warning centered",content:r('Do not transfer any funds directly to a specific account that is associated with a loan or a team. Use the "Contribute" action to record the contribution on-chain using the crowdloan runtime module. When the fund is dissolved, after either the parachain lease expires or the loan ending without winning, the full value will be returned to your account by the runtime. Funds sent directly to an account, without using the crowdloan functionality, may not be returned by the receiving account.')}),(0,n.jsx)(i.iA,{className:s,empty:o&&p&&r("No active campaigns found"),header:g.current,children:p?.map((s=>(0,n.jsx)(Z,{bestHash:l,bestNumber:e,isOngoing:!0,value:s},s.accountId)))}),(0,n.jsx)(i.iA,{className:s,empty:o&&x&&r("No completed campaigns found"),header:f.current,children:x?.map((s=>(0,n.jsx)(Z,{bestNumber:e,leasePeriod:t,value:s},s.accountId)))})]})})),z=a.memo((function({activeCap:e,activeRaised:s,className:t,fundCount:a,isLoading:o,totalCap:r,totalRaised:l}){const{t:d}=(0,c.$)();return(0,n.jsxs)(i.Ty,{className:t,children:[(0,n.jsx)(i.Jy,{label:d("funds"),children:void 0===a?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,u.u)(a)}),(0,n.jsx)(i.Jy,{label:`${d("active raised / cap")}`,progress:{hideValue:!0,isBlurred:o,total:o?f.Jo:e,value:o?f.um:s},children:(0,n.jsxs)("span",{className:o?"--tmp":"",children:[(0,n.jsx)(y.Z,{value:s,withCurrency:!1,withSi:!0})," / ",(0,n.jsx)(y.Z,{value:e,withSi:!0})]})}),(0,n.jsx)(i.Jy,{label:`${d("total raised / cap")}`,progress:{hideValue:!0,isBlurred:o,total:o?f.Jo:r,value:o?f.um:l},children:(0,n.jsxs)("span",{className:o?"--tmp":"",children:[(0,n.jsx)(y.Z,{value:l,withCurrency:!1,withSi:!0})," / ",(0,n.jsx)(y.Z,{value:r,withSi:!0})]})})]})})),W=a.memo((function({auctionInfo:e,campaigns:{activeCap:s,activeRaised:t,funds:a,isLoading:o,totalCap:r,totalRaised:l},className:d,leasePeriod:u,ownedIds:m}){const{t:h}=(0,c.$)(),p=(0,x.C)();return(0,n.jsxs)("div",{className:d,children:[(0,n.jsx)(i.Pd,{className:"warning centered",content:h("Crowdloans will be deprecated in favor of Coretime. When Coretime is active in Polkadot, this page will be removed.")}),(0,n.jsx)(z,{activeCap:s,activeRaised:t,fundCount:a?.length,isLoading:o,totalCap:r,totalRaised:l}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(N,{auctionInfo:e,bestNumber:p,leasePeriod:u,ownedIds:m})}),(0,n.jsx)(L,{bestNumber:p,leasePeriod:u,value:a})]})}));var H=t(99924);const U=a.memo((function({lifecycle:e,nextAction:s}){return e&&(0,n.jsxs)(n.Fragment,{children:[e.toString(),s&&(0,n.jsx)(H.Z,{value:s.sessionIndex})]})}));var J=t(36198);const G={transform:e=>e.number.unwrap()},Q=(0,O.e)("useChainDetails",(function(e){const{api:s}=(0,J.x)(e);return{bestNumber:(0,l.W7)(s?.rpc.chain.subscribeNewHeads,void 0,G),runtimeVersion:(0,l.W7)(s?.rpc.state.subscribeRuntimeVersion)}})),X=i.zo.div`
  .version {
    font-size: var(--font-size-small);
    white-space: nowrap;

    > div {
      display: inline-block;
      overflow: hidden;
      max-width: 10em;
      text-overflow: ellipsis;
    }
  }
`,K=a.memo((function({className:e,id:s}){const{bestNumber:t,runtimeVersion:a}=Q(s);return(0,n.jsxs)(X,{className:e,children:[t&&(0,n.jsx)("div",{children:(0,u.u)(t)}),a&&(0,n.jsxs)("div",{className:"version",children:[(0,n.jsx)("div",{className:"media--1100",children:a.specName.toString()}),(0,n.jsx)("div",{className:"media--1100",children:"/"}),(0,n.jsx)("div",{children:a.specVersion.toString()})]})]})}));var Y=t(12372);const ee=a.memo((function({children:e,className:s,leasePeriod:t,value:o}){const i=(0,a.useMemo)((()=>function(e,s){return e&&s&&(0,Y.G)(s).sub(f.If).imul(e.length).iadd(e.remainder)}(t,o)),[t,o]);return i?(0,n.jsx)(P.Z,{className:s,value:i,children:e}):null})),se=a.memo((function({className:e,fromFirst:s,leasePeriod:t,periods:o}){const i=(0,a.useMemo)((()=>function(e,s){return s&&e?.reduce(((e,t)=>{const n=s.addn(t);return!e.length||e[e.length-1][1].add(f.If).lt(n)?e.push([n,n]):e[e.length-1][1]=n,e}),[]).map((([e,s])=>e.eq(s)?(0,u.u)(e):`${(0,u.u)(e)} - ${(0,u.u)(s)}`)).join(", ")}(o,t?.currentPeriod)),[t?.currentPeriod,o]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)("div",{children:i}),o&&(0,n.jsx)(ee,{leasePeriod:t,value:s?o[0]:o[o.length-1]+1})]})}));var te=t(54890);const ne={defaultValue:{headHex:null,leases:[],lifecycle:null,paraInfo:null,pendingAvail:null,qDmp:0,qHrmpE:0,qHrmpI:0,qUmp:0,updateAt:null,watermark:null},transform:([e,s,t,n,a,o,i,r,l,c,d])=>({headHex:e.isSome?e.unwrap().toHex():null,leases:d.map(((e,s)=>e.isSome?s:-1)).filter((e=>-1!==e)),lifecycle:t.unwrapOr(null),paraInfo:c.unwrapOr(null),pendingAvail:l?.isSome?l.unwrapOr(null):null,qDmp:n.length,qHrmpE:o.length,qHrmpI:i.length,qUmp:a?.length??0,updateAt:s.unwrapOr(null),watermark:r.unwrapOr(null)})},ae=(0,O.e)("useParaInfo",(function(e){const{api:s}=(0,r.h)();return(0,te.L)([[s.query.paras.heads,e],[s.query.paras.futureCodeUpgrades,e],[s.query.paras.paraLifecycles,e],[(s.query.parasDmp||s.query.paraDmp||s.query.dmp)?.downwardMessageQueues,e],[(s.query.parasUmp||s.query.ump)?.relayDispatchQueues,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpEgressChannelsIndex,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpIngressChannelsIndex,e],[(s.query.parasHrmp||s.query.paraHrmp||s.query.hrmp)?.hrmpWatermarks,e],[(s.query.parasInclusion||s.query.paraInclusion||s.query.inclusion)?.pendingAvailability,e],[s.query.registrar.paras,e],[s.query.slots.leases,e]],ne)}));function oe(e,s){return e?.map(((e,t)=>(0,n.jsx)(i.ax,{nameExtra:s&&(0,n.jsxs)(n.Fragment,{children:[" ",`(${(0,u.u)(s[t])})`]}),value:e},e.toString())))}const ie=i.zo.tr`
  &.isDisabled {
    td {
      opacity: 0.5
    }
  }

  td.badge.together > div {
    display: inline-block;
    margin: 0 0.25rem 0 0;
    vertical-align: middle;
  }
`,re=a.memo((function({bestNumber:e,className:s="",id:t,lastBacked:o,lastInclusion:r,lastTimeout:l,leasePeriod:d,nextAction:m,sessionValidators:h,validators:p}){const{t:x}=(0,c.$)(),g=ae(t),[f,b]=(0,a.useState)([]),j=(0,a.useMemo)((()=>e&&(r?e.sub(r.blockNumber):g.watermark?e.sub(g.watermark):void 0)),[e,r,g]),v=(0,a.useCallback)((()=>oe(p?.[1].map((({validatorId:e})=>e)),p?.[1].map((({indexValidator:e})=>e)))),[p]),y=(0,a.useCallback)((()=>oe(f)),[f]);return(0,a.useEffect)((()=>{if(h)if(g.pendingAvail){const e=g.pendingAvail.availabilityVotes.toHuman().slice(2).replace(/_/g,"").split("").map(((e,s)=>"0"===e?h[s]:null)).filter(((e,s)=>!!e&&s<h.length));e.length!==h.length&&b(e)}else b([])}),[g,h]),(0,n.jsxs)(ie,{className:`${s} ${o||r||g.watermark?"":"isDisabled"}`,children:[(0,n.jsx)(i.iA.Column.Id,{value:t}),(0,n.jsxs)("td",{className:"badge together",children:[g.paraInfo?.locked?.isSome&&g.paraInfo?.locked?.unwrap().isFalse?(0,n.jsx)(i.Ct,{color:"orange",hover:x("The parachain can be modified, replaced, or removed - it's neither protected nor in a transitional state"),icon:"unlock"}):(0,n.jsx)(i.Ct,{color:"transparent"}),(0,n.jsx)(i.f,{id:t})]}),(0,n.jsxs)("td",{className:"number media--1400",children:[(0,n.jsx)(i.xH,{className:p?"":"--tmp",renderChildren:v,summary:x("Val. Group {{group}} ({{count}})",{replace:{count:(0,u.u)(p?.[1]?.length||0),group:p?p[0]:0}})}),(0,n.jsx)(i.xH,{renderChildren:y,summary:x("Non-voters ({{count}})",{replace:{count:(0,u.u)(f.length)}})})]}),(0,n.jsx)("td",{className:"start together hash media--1500",children:(0,n.jsx)("div",{className:"shortHash",children:g.headHex})}),(0,n.jsx)("td",{className:"start",children:g.updateAt&&e&&g.lifecycle?.isParachain?(0,n.jsxs)(n.Fragment,{children:[x("Upgrading"),(0,n.jsx)(P.Z,{value:g.updateAt.sub(e)}),"#",(0,u.u)(g.updateAt)]}):(0,n.jsx)(U,{lifecycle:g.lifecycle,nextAction:m})}),(0,n.jsx)("td",{className:"all"}),(0,n.jsx)("td",{className:"number",children:j&&(0,n.jsx)(P.Z,{value:j})}),(0,n.jsx)("td",{className:"number no-pad-left",children:r?(0,n.jsx)("a",{href:`#/explorer/query/${r.blockHash}`,children:(0,u.u)(r.blockNumber)}):g.watermark&&(0,u.u)(g.watermark)}),(0,n.jsx)("td",{className:"number no-pad-left media--900",children:o&&(0,n.jsx)("a",{href:`#/explorer/query/${o.blockHash}`,children:(0,u.u)(o.blockNumber)})}),(0,n.jsx)("td",{className:"number no-pad-left media--1600",children:l&&(0,n.jsx)("a",{href:`#/explorer/query/${l.blockHash}`,children:(0,u.u)(l.blockNumber)})}),(0,n.jsx)("td",{className:"number no-pad-left",children:(0,n.jsx)(K,{id:t})}),(0,n.jsx)("td",{className:"number media--1700",children:(0,u.u)(g.qHrmpI)}),(0,n.jsx)("td",{className:"number no-pad-left media--1700",children:(0,u.u)(g.qHrmpE)}),(0,n.jsx)("td",{className:"number together media--1100",children:(0,n.jsx)(se,{leasePeriod:d,periods:g.leases})})]})}));var le=t(11147);const ce={lastBacked:{},lastIncluded:{},lastTimeout:{}};function de(e,s,t,n){try{const{descriptor:a}=s.data[0];a?.paraId&&(e[a.paraId.toString()]={blockHash:t,blockNumber:n,relayParent:a.relayParent.toHex()})}catch(e){throw new Error(`${s.section}.${s.method}(${(0,le.P)(s.data)}):: ${e.message}`)}}const ue=(0,O.e)("useEvents",(function(){const{api:e}=(0,r.h)(),s=(0,l.W7)(e.derive.chain.subscribeNewBlocks),[t,n]=(0,a.useState)(ce);return(0,a.useEffect)((()=>{s&&n((t=>function(e,s,t){const n={},a={},o={},i=s.block.header.number.unwrap(),r=s.block.header.hash.toHex(),l=e.events.paraInclusion||e.events.parasInclusion||e.events.inclusion;let c=!1,d=!1,u=!1;return l&&s.events.forEach((({event:e,phase:s})=>{s.isApplyExtrinsic&&(l.CandidateBacked.is(e)?(de(n,e,r,i),c=!0):l.CandidateIncluded.is(e)?(de(a,e,r,i),d=!0):l.CandidateTimedOut.is(e)&&(de(o,e,r,i),u=!0))})),c||d||u?{lastBacked:c?{...t.lastBacked,...n}:t.lastBacked,lastIncluded:d?{...t.lastIncluded,...a}:t.lastIncluded,lastTimeout:u?{...t.lastTimeout,...o}:t.lastTimeout}:t}(e,s,t)))}),[e,s]),t})),me={defaultValue:[null,null,null,null]},he=(0,O.e)("useValidators",(function(e){const{api:s}=(0,r.h)(),[t,n,o,i]=(0,te.L)([s.query.session.validators,(s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)?.scheduled,(s.query.parasScheduler||s.query.paraScheduler||s.query.scheduler)?.validatorGroups,(s.query.parasShared||s.query.paraShared||s.query.shared)?.activeValidatorIndices],me),[l,c]=(0,a.useState)({});return(0,a.useEffect)((()=>{o&&e&&i&&n&&t&&c((s=>function(e,s,t,n,a,o){return s.reduce(((e,s)=>{const i=o.find((({paraId:e})=>e&&e.eq(s)));return i?{...e,[s.toString()]:[i.groupIdx,(n[i.groupIdx.toNumber()]||[]).map((e=>[e,a[e.toNumber()]])).filter((([,e])=>e)).map((([e,s])=>({indexActive:e,indexValidator:s,validatorId:t[s.toNumber()]})))]}:e}),{...e})}(s,e,t,o,i,n)))}),[o,e,i,n,t]),(0,a.useMemo)((()=>[t,l]),[l,t])})),pe=a.memo((function({actionsQueue:e,ids:s,leasePeriod:t,scheduled:o}){const{t:r}=(0,c.$)(),l=(0,x.C)(),{lastBacked:d,lastIncluded:u,lastTimeout:m}=ue(),h=(0,S.gW)(s),[p,g]=he(s),f=(0,a.useRef)([[r("parachains"),"start",2],["","media--1400"],[r("head"),"start media--1500"],[r("lifecycle"),"start"],[],[r("included"),void 0,2],[r("backed"),"no-pad-left media--900"],[r("timeout"),"no-pad-left media--1600"],[r("chain"),"no-pad-left"],[r("in/out"),"media--1700",2],[r("leases"),"media--1100"]]),b=(0,a.useMemo)((()=>function(e=[]){return e.reduce(((e,{scheduledIds:s})=>s.reduce(((e,s)=>({...e,[s.toString()]:!0})),e)),{})}(o)),[o]),j=(0,a.useMemo)((()=>s&&function(e,s){return s.map((e=>[e,e.toString()])).sort((([s,t],[n,a])=>{const o=e[t]||!1;return o===(e[a]||!1)?s.cmp(n):o?-1:1}))}(h,s)),[s,h]),v=(0,a.useMemo)((()=>function(e,s=[]){return s.reduce(((s,[t,n])=>({...s,[n]:e.find((({paraIds:e})=>e.some((e=>e.eq(t)))))})),{})}(e,j)),[e,j]);return(0,n.jsx)(i.iA,{empty:j&&r("There are no registered parachains"),header:f.current,children:j?.map((([e,s])=>(0,n.jsx)(re,{bestNumber:l,id:e,isScheduled:b[s],lastBacked:d[s],lastInclusion:u[s],lastTimeout:m[s],leasePeriod:t,nextAction:v[s],sessionValidators:p,validators:g[s]},s)))})}));var xe=t(54705),ge=t(26839),fe=t(65968);const be=function({leasePeriod:e,parachainCount:s,proposalCount:t,upcomingCount:a}){const{t:o}=(0,c.$)();return(0,n.jsxs)(i.Ty,{children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:o("parachains"),children:(0,fe.h)(s)?(0,u.u)(s):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(i.Jy,{className:"media--1000",label:o("parathreads"),children:(0,fe.h)(a)?(0,u.u)(a):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,fe.h)(t)&&(0,n.jsx)(i.Jy,{className:"media--1000",label:o("proposals"),children:(0,u.u)(t)})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:o("current lease"),children:e?(0,u.u)(e.currentPeriod):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(i.Jy,{className:"media--1200",label:o("lease period"),progress:{isBlurred:!e,total:e?e.length:f.Jo,value:e?e.progress:f.um,withTime:!0}})]}),(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:o("finalized"),children:(0,n.jsx)(ge.Z,{})}),(0,n.jsx)(xe.Z,{className:"media--1200",withEra:!1})]})]})},je=a.memo((function({actionsQueue:e,className:s,leasePeriod:t,paraIds:a,proposals:o,threadIds:i}){return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)(be,{leasePeriod:t,parachainCount:a?.length,proposalCount:o?.proposalIds.length,upcomingCount:i?.length}),(0,n.jsx)(pe,{actionsQueue:e,ids:a,leasePeriod:t,scheduled:o?.scheduled})]})}));var ve=t(48801),ye=t.n(ve);const we=new(ye())(2e3),ke=we.sub(f.If);var Ce=t(62197),Ne=t.n(Ce);const Ie=i.zo.ul`
  padding-left: 20px;
  margin: 8px 0;
`,Se=i.zo.li`
  margin-bottom: 2px;
`,Ae=a.memo((function({className:e,nextParaId:s,onClose:t,ownedIds:o}){const{t:l}=(0,c.$)(),{api:d}=(0,r.h)(),[u,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(),x=(0,a.useCallback)((({accountId:e,paraId:s})=>{m(e),p(new(Ne())(s))}),[]),g=!h||!h.gt(ke),f=(0,a.useMemo)((()=>d.tx.registrar.deregister(h)),[d.tx.registrar,h]);return(0,n.jsxs)(i.u_,{className:e,header:l("Deregister ParaId"),onClose:t,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[d.tx.registrar.reserve?(0,n.jsx)(b,{noCodeCheck:!0,onChange:x,ownedIds:o}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.u_.Columns,{hint:l("This account will be associated with the parachain and pay the deposit."),children:(0,n.jsx)(i.rp,{label:l("register from"),onChange:m,type:"account",value:u})}),(0,n.jsx)(i.u_.Columns,{hint:l("The id of this parachain as known on the network"),children:(0,n.jsx)(i.Rn,{autoFocus:!0,defaultValue:s,isError:g,isZeroable:!1,label:l("parachain id"),onChange:p})})]}),(0,n.jsx)(i.u_.Columns,{children:(0,n.jsx)(A.Z,{isExpanded:!0,isHeader:!0,value:f})}),(0,n.jsx)(i.u_.Columns,{children:(0,n.jsxs)(i.Pd,{withIcon:!1,children:[(0,n.jsx)("strong",{children:l("Deregistering a paraID will:")}),(0,n.jsxs)(Ie,{children:[(0,n.jsx)(Se,{children:l("Remove it from the active parachain/parathread set.")}),(0,n.jsx)(Se,{children:l("Exclude it from future auctions and onboarding.")}),(0,n.jsx)(Se,{children:l("Potentially release any reserved deposits linked to it.")}),(0,n.jsx)(Se,{children:l("Require re-registration if you wish to use it again.")})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:l("This action is permanent.")})," ",l("Please ensure this is your intended action before continuing.")]})]})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:u,extrinsic:f,icon:"minus",isDisabled:g,label:l("Deregister"),onStart:t})})]})})),Pe=a.memo((function({className:e,nextParaId:s,onClose:t}){const{t:o}=(0,c.$)(),{api:l}=(0,r.h)(),[d,u]=(0,a.useState)(null);return(0,n.jsxs)(i.u_,{className:e,header:o("Reserve ParaId"),onClose:t,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:o("This account will be used to the Id reservation and for the future parathread."),children:(0,n.jsx)(i.rp,{label:o("reserve from"),onChange:u,type:"account",value:d})}),(0,n.jsx)(i.u_.Columns,{hint:o("The Id of this parachain as known on the network (selected from nextFreeId)"),children:(0,n.jsx)(i.Rn,{defaultValue:s,isDisabled:!0,label:o("parachain id")})}),(0,n.jsx)(i.u_.Columns,{hint:o("The reservation fee for this Id"),children:(0,n.jsx)(i.H,{defaultValue:l.consts.registrar.paraDeposit,isDisabled:!0,label:o("reserved deposit")})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:d,icon:"plus",isDisabled:!s,onStart:t,params:[],tx:l.tx.registrar.reserve})})]})}));var Ee=t(88311);const Me=a.memo((function({className:e,nextParaId:s,onClose:t,ownedIds:o}){const{t:d}=(0,c.$)(),{api:u}=(0,r.h)(),[m,h]=(0,a.useState)(null),[p,x]=(0,a.useState)(),[g,f]=(0,a.useState)(null),[j,v]=(0,a.useState)(null),y=(0,l.W7)(u.query.configuration?.activeConfig),w=(0,a.useCallback)((e=>v((0,Ee.N)(e))),[]),k=(0,a.useCallback)((e=>f((0,Ee.N)(e))),[]),C=(0,a.useCallback)((({accountId:e,paraId:s})=>{h(e),x(new(ye())(s))}),[]),N=(0,a.useMemo)((()=>u.consts.registrar.paraDeposit.add(u.consts.registrar.dataDepositPerByte.muln(y?.maxCodeSize?y.maxCodeSize.toNumber():g?g.length:0)).iadd(u.consts.registrar.dataDepositPerByte.muln(j?j.length:0))),[u,g,j,y]),I=!p||!p.gt(ke);return(0,n.jsxs)(i.u_,{className:e,header:d("Register parathread"),onClose:t,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[u.tx.registrar.reserve?(0,n.jsx)(b,{noCodeCheck:!0,onChange:C,ownedIds:o}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.u_.Columns,{hint:d("This account will be associated with the parachain and pay the deposit."),children:(0,n.jsx)(i.rp,{label:d("register from"),onChange:h,type:"account",value:m})}),(0,n.jsx)(i.u_.Columns,{hint:d("The id of this parachain as known on the network"),children:(0,n.jsx)(i.Rn,{autoFocus:!0,defaultValue:s,isError:I,isZeroable:!1,label:d("parachain id"),onChange:x})})]}),(0,n.jsx)(i.u_.Columns,{hint:d("The WASM validation function for this parachain."),children:(0,n.jsx)(i.ht,{isError:!g,label:d("code"),onChange:k})}),(0,n.jsx)(i.u_.Columns,{hint:d("The genesis state for this parachain."),children:(0,n.jsx)(i.ht,{isError:!j,label:d("initial state"),onChange:w})}),(0,n.jsx)(i.u_.Columns,{hint:d("The reservation fee for this parachain, including base fee and per-byte fees"),children:(0,n.jsx)(i.H,{defaultValue:N,isDisabled:!0,label:d("reserved deposit")})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:m,icon:"plus",isDisabled:!g||!j||I,onStart:t,params:[p,j,g],tx:u.tx.registrar.register})})]})})),De={transform:e=>e.isZero()?we:e},Te=a.memo((function({className:e,ownedIds:s}){const{t}=(0,c.$)(),{api:a}=(0,r.h)(),[o,d]=(0,g.O)(),[u,m]=(0,g.O)(),[h,p]=(0,g.O)(),x=(0,l.W7)(a.query.registrar.nextFreeParaId,[],De);return(0,n.jsxs)(i.zx.Group,{className:e,children:[(0,n.jsx)(i.zx,{icon:"minus",isDisabled:!!a.tx.registrar.deregister&&!s.length,label:t("Deregister"),onClick:p}),h&&(0,n.jsx)(Ae,{nextParaId:x,onClose:p,ownedIds:s}),(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!a.tx.registrar.reserve,label:t("ParaId"),onClick:m}),u&&(0,n.jsx)(Pe,{nextParaId:x,onClose:m}),(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!!a.tx.registrar.reserve&&!s.length,label:t("ParaThread"),onClick:d}),o&&(0,n.jsx)(Me,{nextParaId:x,onClose:d,ownedIds:s})]})})),Fe={defaultValue:{headHex:null,lifecycle:null,manager:null},transform:([e,s,t,n])=>({headHex:e.isSome?e.unwrap().toHex():s.isSome?s.unwrap().genesisHead.toHex():null,lifecycle:t.unwrapOr(null),manager:n.isSome?n.unwrap().manager:null})},qe=(0,O.e)("useThreadInfo",(function(e){const{api:s}=(0,r.h)();return(0,te.L)([[s.query.paras.heads,e],[s.query.paras.upcomingParasGenesis,e],[s.query.paras.paraLifecycles,e],[s.query.registrar.paras,e]],Fe)})),Oe=a.memo((function({id:e,leasePeriod:s,leases:t,nextAction:o}){const{t:l}=(0,c.$)(),{api:d}=(0,r.h)(),{isAccount:u}=(0,p.x)(),{headHex:m,lifecycle:h,manager:x}=qe(e),g=(0,a.useMemo)((()=>s?.currentPeriod&&t?.map((({period:e})=>e))),[s?.currentPeriod,t]),f=u(x?.toString());return(0,n.jsxs)("tr",{children:[(0,n.jsx)(i.iA.Column.Id,{value:e}),(0,n.jsx)("td",{className:"badge",children:(0,n.jsx)(i.f,{id:e})}),(0,n.jsx)("td",{className:"address media--2000",children:x&&(0,n.jsx)(i.N,{value:x})}),(0,n.jsx)("td",{className:"start together hash media--1500",children:(0,n.jsx)("div",{className:"shortHash",children:m})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)(U,{lifecycle:h,nextAction:o})}),(0,n.jsx)("td",{className:"all"}),(0,n.jsx)("td",{className:"number no-pad-left"}),(0,n.jsx)("td",{className:"number together",children:s&&t&&g&&(t.length?(0,n.jsx)(se,{fromFirst:!0,leasePeriod:s,periods:g}):l("None"))}),(0,n.jsx)("td",{className:"button media--900",children:(0,n.jsx)(i.cA,{accountId:x,icon:"times",isDisabled:!f,label:l("Deregister"),params:[e],tx:d.tx.registrar.deregister})})]})})),_e=(0,O.e)("useParaMap",(function(e){const{api:s}=(0,r.h)(),t=(0,S.gW)(e),n=(0,a.useCallback)((([[e],s])=>function(e,s,t){return s.reduce(((e,s,n)=>(e.push([s,t[n].map(((e,s)=>{if(e.isNone)return null;const[t,n]=e.unwrap();return{accountId:t,balance:n,period:s}})).filter((e=>!!e))]),e)),[]).sort((([s,t],[n,a])=>{const o=e[s.toString()]||!1,i=e[n.toString()]||!1;return t.length&&a.length?t[0].period-a[0].period||s.cmp(n):t.length?-1:a.length?1:o===i?s.cmp(n):o?-1:1}))}(t,e,s)),[t]);return(0,l.W7)(e&&s.query.slots.leases.multi,[e],{transform:n,withParamsTransform:!0})})),Ve=a.memo((function({actionsQueue:e,className:s,ids:t,leasePeriod:o,ownedIds:r}){const{t:l}=(0,c.$)(),d=_e(t),u=(0,a.useRef)([[l("parathreads"),"start",2],["","media--2000"],[l("head"),"start media--1500"],[l("lifecycle"),"start"],[],[],[l("leases")],["","media--900"]]);return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)(Te,{ownedIds:r}),(0,n.jsx)(i.iA,{empty:o&&t&&(0===t.length||d)&&l("There are no available parathreads"),header:u.current,children:o&&d?.map((([s,t])=>(0,n.jsx)(Oe,{id:s,leasePeriod:o,leases:t,nextAction:e.find((({paraIds:e})=>e.some((e=>e.eq(s)))))},s.toString())))})]})}));function Be({address:e,index:s,setAddress:t,t:o}){const r=(0,a.useCallback)((e=>e&&t(s,e)),[s,t]);return(0,n.jsx)(i.rp,{defaultValue:e,label:o("validator {{index}}",{replace:{index:s+1}}),onChange:r})}const Re=a.memo((function({className:e,onClose:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),[l,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(),[x,g]=(0,a.useState)((()=>f.D_.mul(f.aP.pow(new(ye())(o.registry.chainDecimals[0]))))),[b,j]=(0,a.useState)([""]),[{isWasmValid:v,wasm:y},w]=(0,a.useState)({isWasmValid:!1,wasm:null}),[k,C]=(0,a.useState)(null),N=(0,a.useCallback)((e=>C((0,Ee.N)(e))),[]),I=(0,a.useCallback)(((e,s)=>w({isWasmValid:s,wasm:e})),[]),S=(0,a.useCallback)(((e,s)=>j((t=>t.map(((t,n)=>n===e?s:t))))),[]),A=(0,a.useCallback)((()=>j((e=>[...e,""]))),[]),P=(0,a.useCallback)((()=>j((e=>[...e.slice(0,e.length-1)]))),[]),E=u.length>=3,M=b.some(((e,s)=>b.some(((t,n)=>s!==n&&e===t))));return(0,n.jsxs)(i.u_,{className:e,header:t("Propose parachain"),onClose:s,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:t("This account will be associated with the parachain and pay the deposit."),children:(0,n.jsx)(i.rp,{label:t("propose from"),onChange:d,type:"account",value:l})}),(0,n.jsxs)(i.u_.Columns,{hint:t("The name for this parachain, the id and the allocated/requested balance."),children:[(0,n.jsx)(i.II,{autoFocus:!0,isError:!E,label:t("parachain name"),onChange:m}),(0,n.jsx)(i.Rn,{isZeroable:!1,label:t("requested id"),onChange:p}),(0,n.jsx)(i.H,{defaultValue:x,label:t("initial balance"),onChange:g})]}),(0,n.jsxs)(i.u_.Columns,{hint:t("The WASM validation function as well as the genesis state for this parachain."),children:[(0,n.jsx)(i.RF,{isError:!v,label:t("validation code"),onChange:I,placeholder:y&&!v&&t("The code is not recognized as being in valid WASM format")}),(0,n.jsx)(i.ht,{isError:!k,label:t("genesis state"),onChange:N})]}),(0,n.jsxs)(i.u_.Columns,{hint:t("The validators for this parachain. At least one is required and where multiple is supplied, they need to be unique."),children:[b.map(((e,s)=>(0,n.jsx)(Be,{address:e,index:s,setAddress:S,t},s))),!b.length&&(0,n.jsx)(i.Pd,{content:t("You need to supply at last one running validator for your parachain alongside this request.")}),M&&(0,n.jsx)(i.Pd,{content:t("You have duplicated validator entries, ensure each is unique.")}),(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.zx,{icon:"plus",label:t("Add validator"),onClick:A}),(0,n.jsx)(i.zx,{icon:"minus",isDisabled:0===b.length,label:t("Remove validator"),onClick:P})]})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:l,icon:"plus",isDisabled:!(v&&k&&E&&b.length&&h?.gt(f.nw)),onStart:s,params:[h,u,y,k,b,x],tx:o.tx.proposeParachain?.proposeParachain})})]})})),Ze=a.memo((function(){const{t:e}=(0,c.$)(),{hasAccounts:s}=(0,p.x)(),[t,a]=(0,g.O)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!s,label:e("Propose"),onClick:a})}),t&&(0,n.jsx)(Re,{onClose:a})]})}));var $e=t(74421);const Le=(0,O.e)("useProposal",(function(e,s,t){const{api:n}=(0,r.h)(),o=(0,l.W7)(n.query.proposeParachain.proposals,[e]);return(0,a.useMemo)((()=>({id:e,isApproved:s.some((s=>s.eq(e))),isScheduled:t.some((({scheduledIds:s})=>s.some((s=>s.eq(e))))),proposal:o&&o.isSome?o.unwrap():void 0})),[s,e,o,t])})),ze=a.memo((function({approvedIds:e,id:s,scheduled:t}){const{t:o}=(0,c.$)(),{api:l}=(0,r.h)(),{allAccounts:d}=(0,p.x)(),{hasSudoKey:m,sudoKey:h}=(0,$e.p)(),x=Le(s,e,t),g=(0,a.useMemo)((()=>l.tx.sudo&&m?l.tx.sudo.sudo(l.tx.proposeParachain.cancelProposal(s)):d.some((e=>x.proposal?.proposer.eq(e)))?l.tx.proposeParachain.cancelProposal(s):null),[l,d,m,s,x]),f=(0,a.useMemo)((()=>l.tx.sudo?.sudo(l.tx.proposeParachain.approveProposal(s))),[l,s]),b=(0,a.useMemo)((()=>x?.proposal&&function(e,s=6){const t=e.toHex();return t.length>2*s+2?`${t.slice(0,s+2)}…${t.slice(-s)}`:"0x"===t?"":t}(x.proposal.genesisHead)),[x]),j=(0,a.useCallback)((()=>x.proposal?.validators.map((e=>(0,n.jsx)(i.ax,{value:e},e.toString())))),[x.proposal]);return(0,n.jsxs)("tr",{children:[(0,n.jsx)(i.iA.Column.Id,{value:s}),(0,n.jsx)("td",{className:"badge together",children:(x.isApproved||x.isScheduled)&&(0,n.jsx)(i.Ct,{color:"green",icon:x.isScheduled?"clock":"check"})}),(0,n.jsx)("td",{className:"badge",children:(0,n.jsx)(i.f,{id:s})}),(0,n.jsx)("td",{className:"start together",children:x.proposal?.name.toUtf8()}),(0,n.jsx)("td",{className:"address",children:x.proposal?.validators&&(0,n.jsx)(i.xH,{renderChildren:j,summary:o("Validators ({{count}})",{replace:{count:(0,u.u)(x.proposal?.validators.length)}})})}),(0,n.jsx)("td",{className:"address",children:x.proposal&&(0,n.jsx)(i.N,{value:x.proposal.proposer})}),(0,n.jsx)("td",{className:"number media--1100",children:x.proposal&&(0,n.jsx)(y.Z,{value:x.proposal.balance})}),(0,n.jsx)("td",{className:"start hash together all",children:b}),(0,n.jsx)("td",{className:"button",children:!(x.isApproved||x.isScheduled)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.cA,{accountId:h,className:"media--800",extrinsic:f,icon:"check",isDisabled:!m,label:o("Approve")}),(0,n.jsx)(i.cA,{accountId:m?h:x.proposal?.proposer,className:"media--1100",extrinsic:g,icon:"ban",isDisabled:!m||!x.proposal,label:o("Cancel")})]})})]})})),We=a.memo((function({proposals:e}){const{t:s}=(0,c.$)(),t=(0,a.useMemo)((()=>e?.proposalIds.sort(((e,s)=>e.cmp(s)))),[e]),o=(0,a.useRef)([[s("proposals"),"start",3],[],[],[s("proposer"),"address"],[s("balance"),"media--1100"],[s("initial state"),"start media--1400"],[]]);return(0,n.jsx)(i.iA,{empty:e&&t&&s("There are no pending proposals"),header:o.current,children:e&&t?.map((s=>(0,n.jsx)(ze,{approvedIds:e.approvedIds,id:s,scheduled:e.scheduled},s.toString())))})})),He=a.memo((function({className:e,proposals:s}){return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(Ze,{}),(0,n.jsx)(We,{proposals:s})]})})),Ue=[f.If,f.um,f.Jo,f.bX,f.nr,f.Ln,f.wJ,f.ru,f.xZ,f.aP],Je={withParams:!0},Ge=(0,O.e)("useActionsQueue",(function(){const{api:e}=(0,r.h)(),s=(0,l.W7)(e.query.session.currentIndex),t=(0,a.useMemo)((()=>s&&Ue.map((e=>s.add(e)))),[s]),n=(0,l.W7)(t&&e.query.paras.actionsQueue.multi,[t],Je);return(0,a.useMemo)((()=>n?n[0][0].map(((e,s)=>({paraIds:n[1][s],sessionIndex:e}))).filter((({paraIds:e})=>e.length)):[]),[n])})),Qe={transform:([e,s])=>{const[t,n]=s.unwrapOr([null,null]);return{endBlock:n,leasePeriod:t,numAuctions:e}}},Xe=(0,O.e)("useAuctionInfo",(function(){const{api:e}=(0,r.h)();return(0,te.L)([e.query.auctions?.auctionCounter,e.query.auctions?.auctionInfo],Qe)}));var Ke=t(74065),Ye=t(24305),es=t(12298),ss=t(51330),ts=t(65417);const ns=(0,t(64021).d)("modlpy/cfund"),as={activeCap:f.nw,activeRaised:f.nw,funds:null,isLoading:!0,totalCap:f.nw,totalRaised:f.nw},os=new Uint8Array(32);function is(e,s){return s.some((s=>s.eq(e)))}function rs(e,s){return e.isWinner!==s.isWinner?e.isWinner?-1:1:e.isCapped!==s.isCapped?e.isCapped?-1:1:e.isEnded!==s.isEnded?e.isEnded?1:-1:0}const ls={transform:([[e],s])=>e.map(((e,t)=>[e,s[t].unwrapOr(null)])).filter((e=>!!e[1])).map((([e,s])=>{return{accountId:(0,_.m)((t=e,(0,ss.e)(ns,t.toU8a(),os).subarray(0,32))),firstSlot:s.firstPeriod,info:s,isCrowdloan:!0,key:e.toString(),lastSlot:s.lastPeriod,paraId:e,value:s.raised};var t})).sort(((e,s)=>e.info.end.cmp(s.info.end)||e.info.firstPeriod.cmp(s.info.firstPeriod)||e.info.lastPeriod.cmp(s.info.lastPeriod)||e.paraId.cmp(s.paraId))),withParamsTransform:!0},cs={transform:([[e],s])=>e.filter(((e,t)=>0!==s[t].map((e=>e.unwrapOr(null))).filter((e=>!!e)).filter((([e])=>function(e){return(0,ts.S)(e.slice(0,ns.length),ns)}(e))).length)),withParamsTransform:!0},ds={transform:e=>e.map((({args:[e]})=>e))},us=(0,O.e)("useFunds",(function(){const{api:e}=(0,r.h)(),s=(0,x.C)(),t=(0,Ke.X)(),n=(0,Ye.b)([e.events.crowdloan?.Created]),o=(0,es.k)(e.query.crowdloan?.funds,[],ds,n.blockHash),i=(0,l.W7)(e.query.crowdloan?.funds.multi,[o],ls),c=(0,l.W7)(e.query.slots.leases.multi,[o],cs),[d,u]=(0,a.useState)(as);return(0,a.useEffect)((()=>{t.current&&s&&i&&c&&u((t=>function(e,s,t,n,a){const[o,i,r,l]=t.reduce((([s,t,n,a],{info:{cap:o,end:i,raised:r},isWinner:l})=>[e.gt(i)||l?s:s.iadd(r),e.gt(i)||l?t:t.iadd(o),n.iadd(r),a.iadd(o)]),[new(ye())(0),new(ye())(0),new(ye())(0),new(ye())(0)]),c=!a.activeCap.eq(i),d=!a.activeRaised.eq(o),u=!a.totalCap.eq(l),m=!a.totalRaised.eq(r),h=!a.funds||a.funds.length!==t.length||c||d||u||m||t.some((t=>function(e,s,{info:{cap:t,end:n,raised:a},paraId:o},i,r){const l=r.funds?.find((e=>e.paraId.eq(o)));return!l||!l.isEnded&&e.gt(n)||!l.isCapped&&t.sub(a).lt(s)||!l.isWinner&&is(o,i)}(e,s,t,n,a)));return h?{activeCap:c?i:a.activeCap,activeRaised:d?o:a.activeRaised,funds:t.map((t=>function(e,s,t,n){return t.isCapped=t.info.cap.sub(t.info.raised).lt(s),t.isEnded=e.gt(t.info.end),t.isWinner=is(t.paraId,n),t}(e,s,t,n))).sort(rs),totalCap:u?l:a.totalCap,totalRaised:m?r:a.totalRaised}:a}(s,e.consts.crowdloan.minContribution,i,c,t)))}),[e,s,i,c,t]),d})),ms=(0,O.e)("useLeasePeriod",(function(){const{api:e}=(0,r.h)(),s=(0,x.C)();return(0,a.useMemo)((()=>{if(!e.consts.slots.leasePeriod||!s)return;const t=e.consts.slots.leasePeriod,n=s.sub(e.consts.slots.leaseOffset||f.nw),a=n.mod(t);return{currentPeriod:n.div(t),length:t,progress:a,remainder:t.sub(a)}}),[e,s])}));var hs=t(51240);const ps={transform:e=>{const s=e.map((([{args:[e]},s])=>{if(s.isNone)return null;const t=s.unwrap();return{manager:t.manager.toString(),paraId:e,paraInfo:t}})).filter((e=>!!e));return{ids:s.map((({paraId:e})=>e)),owned:s}}},xs={transform:([[e],s])=>e.map(((e,t)=>({hash:s[t].unwrapOr(null),paraId:e}))),withParamsTransform:!0},gs=(0,O.e)("useOwnedIds",(function(){const{api:e}=(0,r.h)(),{allAccounts:s}=(0,p.x)(),t=(0,Ye.b)([e.events.registrar.Registered,e.events.registrar.Reserved]),n=(0,hs.t)(e.query.registrar.paras,[],ps,t.blockHash),o=(0,l.W7)(e.query.paras.currentCodeHash.multi,[n?n.ids:[]],xs);return(0,a.useMemo)((()=>n&&o?n.owned.filter((e=>s.some((s=>s===e.manager)))).map((e=>({...e,hasCode:o.some((s=>!!s.hash&&s.paraId.eq(e.paraId)))}))):[]),[s,o,n])})),fs={defaultValue:[void 0,void 0]},bs={transform:e=>e.map((({args:[e]})=>e))},js={transform:e=>e.map((([{args:[e]},s])=>({scheduledIds:s,sessionIndex:e})))},vs=(0,O.e)("useProposals",(function(){const{api:e}=(0,r.h)(),s=(0,Ke.X)(),t=(0,Ye.b)([e.events.proposeParachain?.ProposeParachain]),n=(0,es.k)(e.query.proposeParachain?.proposals,[],bs,t.blockHash),o=(0,hs.t)(e.query.proposeParachain?.scheduledProposals,[],js,t.blockHash),[i,l]=(0,te.L)([e.query.session.currentIndex,e.query.proposeParachain?.approvedProposals],fs);return(0,a.useMemo)((()=>l&&i&&n&&o&&s.current?{approvedIds:l,proposalIds:n,scheduled:o.filter((e=>e.sessionIndex.gt(i)))}:void 0),[l,s,n,i,o])})),ys={transform:e=>e.map((([{args:[e]},s])=>{const t=s.unwrapOr(null);return t&&(t.isParathread||t.isUpgradingParathread||t.isOffboardingParathread||t.isOnboarding)?e:null})).filter((e=>!!e)).sort(((e,s)=>e.cmp(s)))},ws=(0,O.e)("useUpomingIds",(function(){const{api:e}=(0,r.h)(),s=(0,Ye.b)([e.events.session.NewSession,e.events.registrar.Registered]);return(0,hs.t)(e.query.paras.paraLifecycles,[],ys,s.blockHash)})),ks=[0];function Cs(e,s){return JSON.stringify({w:e})!==JSON.stringify({w:s})}function Ns(e,s,t){return t.isNone?[]:t.unwrap().reduce(((t,n,a)=>{if(n.isSome){const[o,i,r]=n.unwrap(),l=s.leasePeriod||f.nw,[c,d]=e[a];t.push({accountId:o.toString(),firstSlot:l.addn(c),isCrowdloan:(0,ts.S)(ns,o.subarray(0,ns.length)),key:i.toString(),lastSlot:l.addn(d),paraId:i,value:r})}return t}),[])}function Is({endBlock:e},s,t){return{blockNumber:e&&s?s.add(e):s||f.nw,blockOffset:s||f.nw,total:t.reduce(((e,{value:s})=>e.iadd(s)),new(ye())(0)),winners:t}}const Ss=(0,O.e)("useWinningData",(function(e){const{api:s}=(0,r.h)(),t=(0,Ke.X)(),n=(0,d.E)(),[o,i]=(0,a.useState)(),c=(0,x.C)(),u=(0,Ye.b)([s.events.auctions?.BidAccepted]),m=(0,a.useRef)(u),h=(0,l.W7)(s.query.auctions?.winning.entries),p=(0,l.W7)(s.query.auctions?.winning,ks);return(0,a.useEffect)((()=>{t.current&&e&&h&&i(function(e,s,t){return t.sort((([{args:[e]}],[{args:[s]}])=>e.cmp(s))).reduce(((t,[{args:[n]},a])=>{const o=Ns(e,s,a);return o.length&&(0===t.length||Cs(o,t[t.length-1].winners))&&t.push(Is(s,n,o)),t}),[]).reverse()}(n,e,h))}),[e,h,t,n]),(0,a.useEffect)((()=>{t.current&&e&&p&&i((s=>function(e,s,t,n){if(t&&t.length<=1){const a=t||[],o=Is(s,null,Ns(e,s,n));return o.winners.length?a.length?(a[a.length-1]=o,a.slice()):[o]:a}return t}(n,e,s,p)))}),[e,p,t,n]),(0,a.useEffect)((()=>{if(e?.endBlock&&c&&c.gt(e.endBlock)&&m.current!==u){const a=c.sub(e.endBlock).iadd(f.If);m.current=u,s.query.auctions?.winning(a).then((s=>t.current&&i((t=>function(e,s,t,n,a){const o=Is(s,a,Ns(e,s,n));if(o.winners.length){if(!t?.length)return[o];if(Cs(o.winners,t[0].winners))return i=o.winners,r=t[0].winners,i.length!==r.length||i.some((({firstSlot:e,lastSlot:s,paraId:t},n)=>!t.eq(r[n].paraId)||!e.eq(r[n].firstSlot)||!s.eq(r[n].lastSlot)))?[o,...t]:(t[0]=o,[...t])}var i,r;return t}(n,e,t,s,a))))).catch(console.error)}}),[s,c,e,t,n,u,m]),o})),As=a.memo((function({basePath:e,className:s}){const{t}=(0,c.$)(),{api:d}=(0,r.h)(),{pathname:u}=(0,o.TH)(),m=Xe(),h=us(),p=ms(),x=gs(),g=Ss(m),f=vs(),b=Ge(),j=ws(),v=(0,l.W7)(d.query.paras.parachains),y=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")},{name:"parathreads",text:t("Parathreads")},d.query.proposeParachain&&{name:"proposals",text:t("Proposals")},d.query.auctions&&{name:"auctions",text:t("Auctions")},d.query.crowdloan&&{name:"crowdloan",text:t("Crowdloan")}].filter((e=>!!e)));return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,items:y.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(k,{auctionInfo:m,campaigns:h,ownedIds:x,winningData:g}),path:"auctions"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(W,{auctionInfo:m,campaigns:h,leasePeriod:p,ownedIds:x}),path:"crowdloan"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(He,{proposals:f}),path:"proposals"})]})}),(0,n.jsx)(je,{actionsQueue:b,className:u===e?"":"--hidden",leasePeriod:p,paraIds:v,proposals:f,threadIds:j}),(0,n.jsx)(Ve,{actionsQueue:b,className:u===`${e}/parathreads`?"":"--hidden",ids:j,leasePeriod:p,ownedIds:x})]})}))},58464:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-parachains")}},31132:(e,s,t)=>{t.d(s,{E:()=>c,f:()=>d});var n=t(2784),a=t(90778),o=t(11677),i=t(48801),r=t.n(i);const l=[[0,0],[0,1],[0,2],[0,3],[1,1],[1,2],[1,3],[2,2],[2,3],[3,3]],c=(0,o.e)("useLeaseRanges",(function(){const{api:e}=(0,a.h)();return(0,n.useMemo)((()=>{if(s=e.consts.auctions?.leasePeriodsPerSlot,s){const s=[];for(let t=0;e.consts.auctions.leasePeriodsPerSlot.gtn(t);t++)for(let n=t;e.consts.auctions.leasePeriodsPerSlot.gtn(n);n++)s.push([t,n]);return s}var s;return l}),[e])})),d=(0,o.e)("useLeaseRangeMax",(function(){const e=c();return(0,n.useMemo)((()=>new(r())(e[e.length-1][1])),[e])}))},94349:(e,s,t)=>{t.d(s,{Z:()=>v});var n=t(52322),a=t(2784),o=t(61349),i=t(68235),r=t(90778),l=t(54383),c=t(54890),d=t(65874),u=t(58607),m=t(52107),h=t(95292),p=t(48801),x=t.n(p),g=t(92730),f=t(14681);const b={defaultValue:[void 0,void 0]},j=i.zo.main`
  .pollActions {
    opacity: 0.75;
  }

  .pollAll {
    margin-bottom: 0;
    padding: 0.75rem 1rem;
    text-align: center;
  }

  .pollBlocksRight {
    position: absolute;
    right: 0;
    text-align: right;
    opacity: 0.75;
    bottom: 0;

    > div {
      display: inline-block;
      padding: 0 0.75rem;

      &+div {
        border-left: 1px solid #bbb;
      }
    }
  }

  .pollContainer {
    margin: 2rem auto;
    max-width: 60rem;
  }

  .pollHeader {
    position: relative;
  }

  .options {
    margin: 1rem 0;

    .ui--Columar {
      margin: 0 -1.25rem;
      padding: 0 1.25rem;

      &:nth-child(odd) {
        background: #f9f8f7;
      }

      .ui--Column {
        padding: 1rem 1.5rem;
      }
    }

    .optionName {
      font-size: 1.2rem;
      font-weight: var(--font-weight-normal);
      line-height: 1;
      margin-bottom: 0.75rem;
    }

    .pollToggle {
      margin-top: 0.5rem;
      text-align: right;
    }

    &:not(.canVote) {
      .ui--Toggle {
        opacity: 0;

        .toggle {
          display: none;
        }
      }
    }
  }

  .result {
    align-items: center;
    display: flex;
    justify-content: flex-end;
    margin: 0;
    text-align: right;

    .ui--FormatBalance {
      font-size: 1.2rem;
      font-weight: var(--font-weight-normal);
      line-height: 1;
    }

    .ui--Progress {
      margin: 0.75rem;
    }
  }
`,v=a.memo((function({basePath:e,className:s}){const{t}=(0,o.$G)("app-poll"),{api:p}=(0,r.h)(),v=(0,l.C)(),[y,w]=(0,c.L)([p.query.balances?.totalIssuance,p.query.poll.totals],b),[k,C]=(0,a.useState)(null),[N,I]=(0,a.useState)(null),[S,A]=(0,a.useState)(!1),[P,E]=(0,a.useState)(!1),[M,D]=(0,a.useState)(!1),[T,F]=(0,a.useState)(!1),[q,O]=(0,a.useState)(),_=(0,a.useRef)([{isRoot:!0,name:"poll",text:t("Denomination poll")}]);if((0,a.useEffect)((()=>{if(y&&w){const e=(0,m.x)(h.If,...w);O(w.map((s=>s.mul(h.uy).div(e)))),p.query.poll.voteOf.entries().then((e=>{const s=e.reduce(((e,[,[,s]])=>e.iadd(s)),new(x())(0)),t=s.muln(1e4).div(y).toNumber()/100;I({percentage:t,voted:s})})).catch(console.log)}}),[p,y,w]),!w||!q||!v)return(0,n.jsx)("main",{className:s,children:(0,n.jsx)("div",{className:"pollContainer",children:(0,n.jsx)(i.$j,{label:t("Retrieving totals...")})})});const V=p.consts.poll.end.sub(v),B=V.gt(h.nw),R=[[t("No change"),t("No change from the original 2017 sale definitions; will mean a total of 10 million DOT from genesis."),S,A],[t("Split of 10x"),t("Split of 10x from the original sale; will mean a total of 100 million DOT from genesis. Apparent DOT price would be 10x lower and apparent account balances 10x higher."),P,E],[t("Split of 100x"),t("Split of 100x from the original sale; will mean a total of 1 billion DOT from genesis. Apparent DOT price would be 100x lower and apparent account balances 100x higher."),M,D],[t("Split of 1000x"),t("Split of 1000x from the original sale; will mean a total of 10 billion DOT from genesis. Apparent DOT price would be 1000x lower and apparent account balances 1000x higher."),T,F]],Z=S||P||M||T;return(0,n.jsxs)(j,{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,items:_.current}),(0,n.jsxs)("div",{className:"pollContainer",children:[(0,n.jsxs)("div",{className:"pollHeader",children:[(0,n.jsx)("h1",{children:t("denomination vote")}),(0,n.jsxs)("div",{className:"pollBlocksRight",children:[N&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:t("{{balance}} voted",{replace:{balance:(0,g.a)(N.voted)}})}),(0,n.jsx)("div",{children:t("{{percentage}}% turnout",{replace:{percentage:N.percentage.toFixed(2)}})})]}),(0,n.jsxs)("div",{children:[B?(0,n.jsx)(d.Z,{value:V}):t("Completed"),(0,n.jsxs)("div",{children:["#",(0,f.u)(p.consts.poll.end)]})]})]})]}),(0,n.jsxs)("article",{className:"keepAlive",children:[(0,n.jsx)("p",{children:(0,n.jsx)(o.cC,{children:"The Polkadot DOT denomination vote: Seventy-two hours after the DOT token becomes transferable, the most popular option from this poll will decide the denomination used for the DOT token."},"poll1")}),(0,n.jsx)("p",{children:(0,n.jsxs)(o.cC,{children:["This is an ",(0,n.jsx)("a",{href:"https://en.wikipedia.org/wiki/Approval_voting",rel:"noreferrer",target:"_blank",children:"approval vote"}),". There are four options and you may select any combination of them. The most popular of the four will be selected as the final DOT denomination three days after DOT token transfers are enabled."]},"poll2")}),(0,n.jsx)("p",{children:(0,n.jsxs)(o.cC,{children:["Please see the ",(0,n.jsx)("a",{href:"https://medium.com/polkadot-network/the-first-polkadot-vote-1fc1b8bd357b",rel:"noreferrer",target:"_blank",children:"Medium article "})," for more information"]},"poll3")}),B&&(0,n.jsx)("p",{className:"pollAll",children:(0,n.jsx)(o.cC,{children:(0,n.jsx)("b",{children:"Please vote for any combination of options"})},"poll4")}),(0,n.jsx)("div",{className:"options "+(B?"canVote":""),children:R.map((([e,s,a,o],r)=>(0,n.jsxs)(i.P0,{is60:!0,children:[(0,n.jsxs)(i.P0.Column,{className:"option",children:[(0,n.jsx)("div",{className:"optionName",children:e}),(0,n.jsx)("div",{className:"optionDesc",children:s}),B&&(0,n.jsx)(i.ZD,{className:"pollToggle",isDisabled:!B,label:t(B?a?"Aye, I support this":"Nay, I do not support this":"Voting closed"),onChange:o,value:B&&a})]}),(0,n.jsx)(i.P0.Column,{children:w[r].isZero()?(0,n.jsx)("div",{className:"result"}):(0,n.jsxs)("div",{className:"result",children:[(0,n.jsx)(u.Z,{value:w[r]}),(0,n.jsx)(i.Ex,{isDisabled:!N,total:N?.voted,value:w[r]})]})})]},r)))}),B&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.rp,{label:t("vote using my account"),onChange:C,type:"account"}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.cA,{accountId:k,icon:"paper-plane",isDisabled:!Z,label:t("Vote"),params:[[S,P,M,T]],tx:p.tx.poll.vote})})]})]}),(0,n.jsx)("div",{className:"pollActions",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:t("Any combination of the four options may be approved of by the voter. There is no need to select only one option!")}),(0,n.jsx)("li",{children:t("Approving of all or none of the options is equivalent and will not affect the outcome of the poll.")}),(0,n.jsx)("li",{children:t("All voters may alter their votes any number of times prior to the close of the poll.")}),(0,n.jsx)("li",{children:t("Voting costs nothing other than the transaction fee and can be done from all accounts with a non-zero spendable balance.")}),(0,n.jsx)("li",{children:t("Locked funds (e.g. for staking) are counted.")}),(0,n.jsx)("li",{children:t("No discretionary lock-voting is in place; all DOT used to vote counts the same.")}),(0,n.jsx)("li",{children:t("Voting is made on a per-account basis; a single account must all vote the same way and cannot split its vote.")}),(0,n.jsx)("li",{children:t('This vote does not affect any economics of the Polkadot platform. Staking rewards, inflation, effective market capitalisation and the underlying balances of every account remain completely unchanged. It is "merely" about what units we use to denominate the balances into "DOT" for the purpose of display.')})]})})]})]})}))},77311:(e,s,t)=>{t.d(s,{Z:()=>g});var n=t(52322),a=t(2784),o=t(68235),i=t(38894),r=t(67609),l=t(52450),c=t(90778),d=t(60404),u=t(95292),m=t(80809);const h=(0,m.$)(""),p={encodedHash:h,encodedLength:0,encodedProposal:null,notePreimageTx:null,storageFee:u.nw},x=a.memo((function({className:e,onChange:s}){const{t}=(0,l.$)(),{api:i,apiDefaultTxSudo:r}=(0,c.h)(),[{encodedHash:x,encodedLength:g,storageFee:f},b]=(0,a.useState)(p),j=(0,a.useCallback)((e=>{b(e),s(e)}),[s]),v=(0,a.useCallback)((e=>j(function(e,s){let t=h,n=null,a=0,o=null,i=u.nw;return s&&(n=s.method.toHex(),a=Math.ceil((n.length-2)/2),t=(0,m.$)(n),o=e.tx.preimage.notePreimage(n),i=(e.consts.preimage?.baseDeposit||u.nw).add((e.consts.preimage?.byteDeposit||u.nw).muln(a))),{encodedHash:t,encodedLength:a,encodedProposal:n,notePreimageTx:o,storageFee:i}}(i,e))),[i,j]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.u_.Columns,{className:e,hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:t("The image (proposal) will be stored on-chain against the hash of the contents.")}),(0,n.jsx)("p",{children:t("When submitting a proposal the hash needs to be known. Proposals can be submitted with hash-only, but upon dispatch the preimage needs to be available.")})]}),children:[(0,n.jsx)(d.Z,{defaultValue:r,label:t("propose"),onChange:v}),(0,n.jsx)(o.qG,{label:t("preimage hash"),value:x,withCopy:!0}),(0,n.jsx)(o.qG,{label:t("preimage length"),value:g||"0",withCopy:!0})]}),!f.isZero()&&(0,n.jsx)(o.u_.Columns,{className:e,hint:t("The calculated storage costs based on the base and the per-bytes fee."),children:(0,n.jsx)(o.H,{defaultValue:f,isDisabled:!0,label:t("calculated storage fee")})})]})})),g=a.memo((function({className:e,imageHash:s}){const{t}=(0,l.$)(),[c,d]=(0,i.O)(),[u,m]=(0,a.useState)(null),[{encodedHash:h,notePreimageTx:g},f]=(0,a.useState)(p),b=!s||s===h;return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(o.u_,{className:e,header:t("Submit preimage"),onClose:d,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:t("This account will pay the fees for the preimage, based on the size thereof."),children:(0,n.jsx)(o.rp,{label:t("send from account"),labelExtra:(0,n.jsx)(r.Z,{label:(0,n.jsx)("span",{className:"label",children:t("transferable")}),params:u}),onChange:m,type:"account"})}),(0,n.jsx)(x,{onChange:f})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:u,extrinsic:g,icon:"plus",isDisabled:!u||!b||!g,label:t("Submit preimage"),onStart:d})})]}),(0,n.jsx)(o.zx,{icon:"plus",label:t("Add preimage"),onClick:d})]})}))},69338:(e,s,t)=>{t.d(s,{Z:()=>u});var n=t(52322),a=t(2784),o=t(68235),i=t(56949),r=t(15991),l=t(3770),c=t(52450);const d=o.zo.div`
  display: flex;
  align-items: center;
  margin: -0.4rem 0rem -0.4rem 1rem;
  white-space: nowrap;
`,u=a.memo((function({className:e="",value:s}){const{t}=(0,c.$)(),u=(0,a.useMemo)((()=>s?.proposal?`#/extrinsics/decode/${s?.proposal?.toHex()}`:null),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{className:`${e} all`,children:s&&s.isCompleted?(0,n.jsxs)(n.Fragment,{children:[s.proposal&&(0,n.jsx)(r.Z,{labelHash:t("call"),value:s.proposal}),u&&(0,n.jsxs)(d,{children:[(0,n.jsxs)("a",{className:"isDecoded",href:u,rel:"noreferrer",children:[u.slice(0,30),"..."]}),(0,n.jsx)(o.qi,{value:s.proposal?.toHex()})]}),s.proposalError?(0,n.jsx)(o.oy,{content:s.proposalError}):s.proposalWarning?(0,n.jsx)(o.Pd,{content:s.proposalWarning}):null]}):(0,n.jsx)("div",{className:"--tmp",children:"balances.transfer"})}),(0,n.jsx)("td",{className:"address media--1300",children:s&&s.isCompleted?s.deposit?(0,n.jsx)(o.ax,{balance:s.deposit.amount instanceof l.p?void 0:s.deposit.amount,value:s.deposit.who,withBalance:!0}):null:(0,n.jsx)(o.ax,{className:"--tmp",value:i.TS})})]})}))},74525:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(52322),a=t(2784),o=t(68235);const i=o.zo.td`
  white-space: nowrap;

  > div {
    display: inline-block;
    vertical-align: middle;
  }

  .shortHash {
    + div {
      margin-left: 0.5rem;
    }
  }
`,r=a.memo((function({className:e="",value:s}){return(0,n.jsxs)(i,{className:`${e} hash`,children:[(0,n.jsx)("div",{className:"shortHash",children:s}),(0,n.jsx)(o.qi,{value:s})]})}))},97662:(e,s,t)=>{t.d(s,{Z:()=>M});var n=t(52322),a=t(2784),o=t(68235),i=t(34814),r=t(52450),l=t(90778),c=t(12298),d=t(39824),u=t(11677);const m=[],h={transform:e=>e.map((({args:[e]})=>e))};function p(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"Noted"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const x=(0,u.e)("usePreimages",(function(){const{api:e}=(0,l.h)(),s=(0,c.k)(e.query.preimage.statusFor,m,h),t=(0,c.k)(e.query.preimage.requestStatusFor,m,h),n=(0,d.N)([e.events.preimage.Cleared,e.events.preimage.Noted],p,s?.concat(t||[]));return(0,a.useMemo)((()=>n?.map((e=>e.toHex()))),[n])}));var g=t(77311),f=t(14681),b=t(69338),j=t(74525);const v=({onSelectPreimage:e,proposalHash:s})=>{const[t,i]=(0,a.useState)(!1),r=a.useCallback((t=>{i(t),e((e=>t?[...e,s]:e.filter((e=>e!==s))))}),[e,s]);return(0,n.jsx)(o.XZ,{onChange:r,value:t})},y="0.5rem",w=o.zo.tr`
  background: var(--bg-table);
  
  .ui--Icon {
    border-width: 2px;
  }
  
  td {
    border-top: ${e=>e.isFirstItem&&"0.375rem solid var(--bg-page)"};
    border-radius: 0rem !important;
    
    &:first-child {
      padding-block: 1rem !important;
      border-top-left-radius: ${e=>e.isFirstItem?y:"0rem"}!important;
      border-bottom-left-radius: ${e=>e.isLastItem?y:"0rem"}!important;
    }

    &:last-child {
      border-top-right-radius: ${e=>e.isFirstItem?y:"0rem"}!important;
      border-bottom-right-radius: ${e=>e.isLastItem?y:"0rem"}!important;
    }

    td {
      border: none !important;
    }
  }
`,k=a.memo((({className:e,depositor:s,preimageInfos:t})=>{const{t:i}=(0,r.$)(),{api:c}=(0,l.h)(),[d,u]=(0,a.useState)([]);return(0,n.jsxs)(n.Fragment,{children:[t.map(((t,a)=>(0,n.jsxs)(w,{className:`isExpanded ${e}`,isFirstItem:0===a,isLastItem:!1,children:[(0,n.jsx)("td",{className:"address all",style:{paddingTop:15,verticalAlign:"top"},children:0===a&&(0,n.jsx)(o.ax,{value:s})}),(0,n.jsx)(b.Z,{value:t}),(0,n.jsxs)("td",{style:{alignItems:"center",display:"flex"},children:[(0,n.jsx)(v,{onSelectPreimage:u,proposalHash:t.proposalHash}),(0,n.jsx)(j.Z,{value:t.proposalHash})]}),(0,n.jsx)("td",{className:"number media--1000",children:t?.proposalLength?(0,f.u)(t.proposalLength):(0,n.jsx)("span",{className:"--tmp",children:"999,999"})}),(0,n.jsx)("td",{className:"preimageStatus start media--1100 together",children:t?(0,n.jsx)(n.Fragment,{children:t.status&&(0,n.jsxs)("div",{children:[t.status?.type,0!==t.count&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,f.u)(t.count)]})]})}):(0,n.jsx)("span",{className:"--tmp",children:"Unrequested"})})]},t.proposalHash))),(0,n.jsxs)(w,{className:`isExpanded ${e}`,isFirstItem:!1,isLastItem:!0,children:[(0,n.jsx)("td",{className:"all"}),(0,n.jsx)("td",{className:"all"}),(0,n.jsx)("td",{className:"media--1300"}),(0,n.jsx)("td",{children:(0,n.jsx)(o.cA,{accountId:s,className:e,icon:"minus",isToplevel:!0,label:i("Unnote"),params:[d.map((e=>c.tx.preimage.unnotePreimage(e)))],tx:c.tx.utility.batchAll})}),(0,n.jsx)("td",{className:"media--1000"}),(0,n.jsx)("td",{className:"media--1100"})]})]})})),C=a.memo((({className:e,userPreimages:s})=>{const{t}=(0,r.$)(),i=(0,a.useRef)([[t("my preimages"),"start",2],[void 0,"media--1300"],[t("hash"),"start"],[t("length"),"media--1000"],[t("status"),"start media--1100"]]);return(0,n.jsx)(o.iA,{className:e,empty:Object.values(s)&&t("No hashes found"),header:i.current,children:Object.keys(s)?.map((e=>(0,n.jsx)(k,{depositor:e,preimageInfos:s[e]},e)))})}));var N=t(31313);const I=a.memo((function({className:e,value:{count:s,deposit:t,proposalHash:c,status:d}}){const{t:u}=(0,r.$)(),{api:m}=(0,l.h)(),{allAccounts:h}=(0,i.x)();return(0,a.useMemo)((()=>0===s&&d&&d.isUnrequested&&t&&h.includes(t.who)),[h,s,t,d])&&t?(0,n.jsx)(o.cA,{accountId:t.who,className:e,icon:"minus",label:u("Unnote"),params:[c],tx:m.tx.preimage.unnotePreimage}):null})),S=a.memo((function({cb:e,className:s,value:t}){const o=(0,N.CH)(t);return(0,a.useEffect)((()=>{o&&e?.(o)}),[e,o]),(0,n.jsxs)("tr",{className:s,children:[(0,n.jsx)(j.Z,{value:t}),(0,n.jsx)(b.Z,{value:o}),(0,n.jsx)("td",{className:"number media--1000",children:o?.proposalLength?(0,f.u)(o.proposalLength):(0,n.jsx)("span",{className:"--tmp",children:"999,999"})}),(0,n.jsx)("td",{className:"preimageStatus together media--1200",children:o?(0,n.jsxs)(n.Fragment,{children:[o.status&&(0,n.jsxs)("div",{children:[o.status?.type,0!==o.count&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,f.u)(o.count)]})]}),(0,n.jsx)(I,{value:o})]}):(0,n.jsx)("span",{className:"--tmp",children:"Unrequested"})})]})})),A=a.memo((function({className:e,hashes:s}){const{t}=(0,r.$)();return(0,n.jsx)(o.Ty,{className:e,children:(0,n.jsx)(o.Jy,{label:t("images"),children:void 0===s?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,f.u)(s.length)})})})),P=o.zo.div`
  td.preimageStatus {
    div+.ui--Button {
      margin-top: 0.25rem;
    }
  }
`,E=a.memo((function({className:e}){const{t:s}=(0,r.$)(),{allAccounts:t}=(0,i.x)(),[l,c]=(0,a.useState)([]),d=x(),u=(0,a.useCallback)((e=>{c((s=>[...s.filter((s=>s.proposalHash!==e.proposalHash)),e]))}),[]),m=(0,a.useMemo)((()=>l.reduce(((e,s)=>{if(s.deposit?.who&&t.includes(s.deposit?.who)){const t=[...e[s.deposit?.who]||[],s];e[s.deposit?.who]=t}return e}),{})),[t,l]),h=(0,a.useRef)([[s("preimages"),"start",2],[void 0,"media--1300"],[s("length"),"media--1000"],[s("status"),"start media--1200"]]);return(0,n.jsxs)(P,{className:e,children:[(0,n.jsx)(A,{hashes:d}),(0,n.jsx)(o.zx.Group,{children:(0,n.jsx)(g.Z,{})}),(0,n.jsx)(C,{userPreimages:m}),(0,n.jsx)(o.iA,{className:e,empty:d&&s("No hashes found"),header:h.current,children:d?.map((e=>(0,n.jsx)(S,{cb:u,value:e},e)))})]})})),M=a.memo((function({basePath:e,className:s}){const{t}=(0,r.$)(),i=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(o.mQ,{basePath:e,items:i.current}),(0,n.jsx)(E,{})]})}))},52450:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-preimages")}},10257:(e,s,t)=>{t.d(s,{Z:()=>S});var n=t(52322),a=t(2784),o=t(73557),i=t(1398),r=t(99501),l=t(68235),c=t(61349);function d(){return(0,c.$G)("app-ranked")}const u=["grey","grey","yellow","orange","purple","blue","green","black"],m=u[u.length-1],h=a.memo((function({className:e,value:{accountId:s,info:{rank:t}}}){const{t:a}=d();return(0,n.jsx)("tr",{className:e,children:(0,n.jsxs)("td",{className:"address all relative",children:[(0,n.jsx)(l.N,{value:s}),(0,n.jsx)(l.Vp,{className:"absolute",color:u[t.toNumber()]||m,hover:a("Membership rank"),label:t.toString()})]})})}));var p=t(14681);const x=a.memo((function({className:e,members:s}){const{t}=d();return(0,n.jsx)(l.Ty,{className:e,children:(0,n.jsx)(l.Jy,{label:t("members"),children:void 0===s?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,p.u)(s.length)})})})),g=a.memo((function({className:e,members:s}){const{t}=d(),o=(0,a.useRef)([[t("members"),"start"]]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(x,{members:s}),(0,n.jsx)(l.iA,{className:e,empty:s&&t("No members found"),header:o.current,isSplit:!0,children:s?.map((e=>(0,n.jsx)(h,{value:e},e.accountId)))})]})}));var f=t(90778),b=t(9118),j=t(11677),v=t(12298),y=t(39824);const w={transform:e=>e.map((({args:[e]})=>e))};function k(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"MemberAdded"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const C=(0,j.e)("useMemberIds",(function(e){const{api:s}=(0,f.h)(),t=(0,v.k)(s.query[e].members,[],w);return(0,y.N)([s.events[e].MemberAdded,s.events[e].MemberRemoved],k,t)})),N={transform:([[e],s])=>{const t=s.map(((s,t)=>[s.unwrapOr(null),e[t]])).filter((e=>!!e[0])).sort((([e],[s])=>s.rank.cmp(e.rank))).map((([e,s])=>({accountId:s.toString(),info:e})));return{memberIds:t.map((({accountId:e})=>e)),memberRanks:t.map((({info:e})=>e.rank)),members:t}},withParamsTransform:!0},I=(0,j.e)("useMembers",(function(e){const{api:s}=(0,f.h)(),t=C(e),n=(0,b.W7)(t&&0!==t.length&&s.query[e].members.multi,[t],N);return(0,a.useMemo)((()=>t&&0===t.length?{memberIds:[],memberRanks:[],members:[]}:n),[t,n])})),S=a.memo((function({basePath:e,className:s,palletColl:t,palletPoll:c}){const{t:u}=d(),m=I(t),h=(0,i.E)(c),p=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"referenda",text:u("Referenda ({{count}})",{replace:{count:h||0}})}]),[h,u]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(l.mQ,{basePath:e,items:p}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(r.Z,{members:m?.memberIds,palletReferenda:c,palletVote:t,ranks:m?.memberRanks}),path:"referenda"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(g,{members:m?.members}),index:!0})]})})]})}))},41857:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(52322),a=t(2784),o=t(10257);const i=a.memo((function({basePath:e,className:s}){return(0,n.jsx)(o.Z,{basePath:e,className:s,palletColl:"rankedCollective",palletPoll:"rankedPolls"})}))},76288:(e,s,t)=>{t.d(s,{Z:()=>a});var n=t(1398);const a=(0,t(11677).e)("useCounter",(function(){return(0,n.E)("rankedPolls")}))},99501:(e,s,t)=>{t.d(s,{Z:()=>Ze});var n=t(52322),a=t(2784),o=t(77311),i=t(68235),r=t(90778),l=t(9118),c=t(34814),d=t(95292),u=t(54062),m=t(80973),h=t(11677);const p=(0,h.e)("useSummary",(function(e,s){const{api:t}=(0,r.h)(),n=(0,l.W7)(t.query[e].referendumCount),o=(0,a.useMemo)((()=>function(e=[]){return e.reduce(((e,{referenda:s=[]})=>e+s.filter((e=>e.info.isOngoing)).length),0)}(s)),[s]);return(0,a.useMemo)((()=>({refActive:o,refCount:n})),[o,n])}));var x=t(38894),g=t(98551),f=t(79760),b=t(33661),j=t(12372),v=t(57387);const y=(0,h.e)("useTrackOptions",(function(e,s,t,o){const{api:i,specName:l}=(0,r.h)();return(0,a.useMemo)((()=>function(e,s,t,a,o,i){const r=o?.map((e=>(0,j.G)(e))),l=i?.map((e=>(0,j.G)(e)));return a.filter((({id:e})=>(!r||r.some((s=>s.eq(e))))&&(!l||!l.some((s=>s.eq(e)))))).map((({id:o,info:i})=>{const r=(0,v.K2)(e,s,t,a,o.toNumber()),l=(0,v.tp)(o,i);return{text:r?.text?(0,n.jsxs)("div",{className:"trackOption",children:[(0,n.jsx)("div",{className:"normal",children:l}),(0,n.jsx)("div",{className:"faded",children:r.text})]}):l,value:o.toNumber()}}))}(i,l,e,s,t,o)),[i,o,t,e,l,s])})),w=a.memo((0,i.zo)((function({className:e,exclude:s,include:t,onChange:a,palletReferenda:o,tracks:r}){const{t:l}=(0,u.$)(),c=y(o,r,t,s);return(0,n.jsx)(i.Lt,{className:e,defaultValue:c[0].value,label:l("submission track"),onChange:a,options:c})}))`
  .trackOption {
    .faded {
      font-size: var(--font-size-small);
      font-weight: var(--font-weight-normal);
      margin-top: 0.125rem;
      opacity: 0.6;
    }
  }
`),k=i.zo.div`
  .ui--Table {
    font-size: var(--font-percent-small);
    opacity: var(--opacity-light);
    padding-left: 2rem;
  }
`,C=a.memo((function({allowEmpty:e,className:s,palletReferenda:t,tracks:o,value:l}){const{t:c}=(0,u.$)(),{api:d,specName:m}=(0,r.h)(),h=(0,a.useMemo)((()=>l&&l.map((e=>[e,(0,v.K2)(d,m,t,o,e.classId.toNumber())]))),[d,t,m,o,l]);return h?(0,n.jsxs)(k,{className:s,children:[h.length?(0,n.jsx)(i.iA,{isInline:!0,children:h.map((([{casting:e,classId:s,delegating:t},a],o)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"all",children:a?.trackName||s.toString()}),(0,n.jsx)("td",{className:"together",children:t&&c("delegating")||e&&`${e.length} ${1===e.length?c("vote"):c("votes")}`})]},o)))}):(0,n.jsx)(i.Pd,{content:c("This account has no voting/delegating activity in the chain state")}),!e&&h.some((([{delegating:e}])=>e))&&(0,n.jsx)(i.Pd,{content:c("This account has some delegations in itself")})]}):null})),N={transform:([[e],s])=>e.reduce(((e,t,n)=>({...e,[t]:s[n].map((([e,s])=>({balance:s.toBn(),classId:e.toBn()})))})),{}),withParamsTransform:!0},I=(0,h.e)("useVotingLocks",(function(e,s){const{api:t}=(0,r.h)(),n=(0,a.useMemo)((()=>s?s.length?[s]:[]:void 0),[s]),o=(0,l.W7)(n?.[0]&&t.query[e]?.classLocksFor?.multi,n,N);return(0,a.useMemo)((()=>n?n[0]?(0,b.m)(t.query[e]?.classLocksFor)?o:n[0].reduce(((e,s)=>({...e,[s]:[]})),{}):{}:null),[t,o,n,e])})),S={transform:([[e],s])=>e.sort(((e,s)=>e[1].cmp(s[1]))).reduce(((e,[t,n],a)=>{let o,i;if(e[t]||(e[t]=[]),s[a].isCasting)o=s[a].asCasting.votes.map((([e])=>({refId:e})));else if(s[a].isDelegating){const{conviction:e,target:t}=s[a].asDelegating;i={conviction:e.type,targetId:t.toString()}}else console.error(`Unable to handle PalletConvictionVotingVoteVoting type ${s[a].type}`);return e[t].push({casting:o,classId:n,delegating:i}),e}),{}),withParamsTransform:!0};function A(e){return e&&Object.entries(e).reduce(((e,[s,t])=>t.reduce(((e,{classId:t})=>(e.push([s,t]),e)),e)),[])}const P=(0,h.e)("useVotingFor",(function(e,s){const{api:t}=(0,r.h)(),n=I(e,s),o=(0,a.useMemo)((()=>[A(n)]),[n]),i=(0,l.W7)(o?.[0]&&t.query[e]?.votingFor?.multi,o,S);return(0,a.useMemo)((()=>n&&o?o[0]?(0,b.m)(t.query[e]?.votingFor)?i&&function(e,s){return Object.keys(e).reduce(((e,s)=>(e[s]||(e[s]=[]),e)),s)}(n,i):n:{}:null),[t,n,o,e,i])})),E=(0,h.e)("useActivityAccount",(function(e,s){const t=(0,a.useMemo)((()=>s&&[s]||null),[s]),n=P(e,t);return n&&s?n[s]||[]:null})),M={transform:([[e],s])=>s.map(((s,t)=>s.isSome?s.unwrap()[0].toString():e[t])).reduce(((e,s)=>(e.includes(s)||e.push(s),e)),[]),withParamsTransform:!0},D=(0,h.e)("useSuperIds",(function(e){const{apiIdentity:s}=(0,r.h)(),t=(0,a.useMemo)((()=>e&&[e]),[e]),n=(0,l.W7)(t&&!!t[0].length&&s.query.identity?.superOf?.multi,t,M);return(0,a.useMemo)((()=>t?t[0].length?(0,b.m)(s.query.identity?.superOf)?n:e:[]:null),[s,e,n,t])})),T=(0,h.e)("useActivity",(function(e,s){const t=D(s);return P(e,t)}));var F=t(12298);const q={transform:e=>e.map((({args:[e]})=>e.toString()))},O=(0,h.e)("useFellows",(function(){const{api:e}=(0,r.h)(),s=(0,F.k)(e.query.fellowshipCollective?.members,[],q);return(0,a.useMemo)((()=>(0,b.m)(e.query.fellowshipCollective?.members)?s:[]),[e,s])})),_=(0,h.e)("useActivityFellows",(function(e){const s=O();return T(e,s)})),V={transform:e=>e.reduce(((e,s)=>s.isSome?e.concat(s.unwrap().targets.map((e=>e.toString())).filter((s=>!e.includes(s)))):e),[])},B=(0,h.e)("useNominators",(function(){const{api:e}=(0,r.h)(),{allAccounts:s}=(0,c.x)(),t=(0,a.useMemo)((()=>[s]),[s]),n=(0,l.W7)(!!s.length&&t&&e.query.staking?.nominators?.multi,t,V);return(0,a.useMemo)((()=>(0,b.m)(e.query.staking?.nominators)&&s.length?n:[]),[s,e,n])})),R=(0,h.e)("useActivityNominators",(function(e){const s=B();return T(e,s)})),Z={type:"force"},$=a.memo((function({className:e,palletReferenda:s,palletVote:t,tracks:o}){const{t:l}=(0,u.$)(),{api:d}=(0,r.h)(),{hasAccounts:m}=(0,c.x)(),[h,p]=(0,x.O)(),[j,v]=(0,x.O)(),[y,k,N]=(0,g.t)(),[I,S]=(0,a.useState)(null),[A,P]=(0,a.useState)(null),[M,D]=(0,a.useState)(0),[T,F]=(0,a.useState)(),[q,O]=(0,a.useState)(1),V=_(t),B=R(t),$=E(t,I),L=E(t,A),[z,W]=(0,a.useState)({index:0,type:"address"}),H=(0,a.useMemo)((()=>$&&o.filter((e=>!$.some((s=>e.id.eq(s.classId))))).map((({id:e})=>e))),[$,o]),U=(0,a.useMemo)((()=>V&&Object.entries(V).map((([e,s])=>s.length>0&&{key:e,name:e,value:e})).filter((e=>!!e))),[V]),J=(0,a.useMemo)((()=>B&&Object.entries(B).map((([e])=>({key:e,name:e,value:e}))).filter((e=>!!e))),[B]),G=(0,a.useMemo)((()=>[{text:l("Addresses"),value:"address"},(0,b.m)(d.query.staking?.nominators)&&{isDisabled:!J?.length,text:l("Validators"),value:"validators"},(0,b.m)(d.query.fellowshipCollective?.members)&&{isDisabled:!U?.length,text:l("Fellows"),value:"fellows"}]),[U,J,d,l]),Q=(0,a.useCallback)(((e,s)=>W({index:e,type:s.toString()})),[]),X=(0,a.useMemo)((()=>T&&q>=0&&A&&H?(j?H:[M]).map((e=>d.tx[t].delegate(e,A,q,T))):null),[d,T,q,H,j,t,A,M]),K=(0,f.b)(X,Z),Y=!!(I&&$&&H&&H.length>0),ee=!(!A||!L);return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)(i.u_,{className:e,header:l("Delegate votes {{step}}/{{numSteps}}",{replace:{numSteps:2,step:y}}),onClose:p,size:"large",children:[1===y&&(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsxs)(i.u_.Columns,{hint:l("Delegate from this account to another. All votes made on the target would count as a delegated vote for this account."),children:[(0,n.jsx)(i.rp,{label:l("delegate from account"),onChange:S,type:"account",withLabel:!0}),(0,n.jsx)(C,{allowEmpty:!0,palletReferenda:s,trackId:-1,tracks:o,value:$})]}),(0,n.jsxs)(i.u_.Columns,{align:"right",hint:l("Either delegate your votes for a single track as selected or delegate for all available tracks."),children:[(0,n.jsx)(i.ZD,{label:l("apply delegation to all tracks"),onChange:v,value:j}),!j&&H&&H.length>0&&(0,n.jsx)(w,{include:H,onChange:D,palletReferenda:s,tracks:o})]}),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:l("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,n.jsx)("p",{children:l("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,n.jsx)(i.xb,{accountId:I,autoFocus:!0,label:l("delegated vote value"),onChange:F}),(0,n.jsx)(i.v,{label:l("conviction"),onChange:O,value:q,voteLockingPeriod:d.consts[t].voteLockingPeriod})]})]}),2===y&&(0,n.jsxs)(i.u_.Content,{children:[G.length>1&&(0,n.jsx)(i.u_.Columns,{align:"center",hint:l("Select from a list of pre-propulated accounts (based on your account activity) or supply your own"),children:(0,n.jsx)(i.tX,{onChange:Q,options:G,value:z.index})}),(0,n.jsxs)(i.u_.Columns,{hint:l("The account that you wish to delegate to"),children:["address"===z.type?(0,n.jsx)(i.rp,{label:l("delegate to address"),onChange:P,type:"allPlus"},"address"):"validators"===z.type?(0,n.jsx)(i.rp,{defaultValue:J?.[0].value,label:l("delegate to validator"),onChange:P,options:J,type:"allPlus"},"validators"):"fellows"===z.type?(0,n.jsx)(i.rp,{defaultValue:U?.[0].value,label:l("delegate to fellow"),onChange:P,options:U,type:"allPlus"},"fellows"):null,(0,n.jsx)(C,{palletReferenda:s,trackId:j?-1:M,tracks:o,value:"fellows"===z.type?V&&!!A&&V[A]:"validators"===z.type?B&&!!A&&B[A]:L})]})]}),(0,n.jsxs)(i.u_.Actions,{children:[1!==y&&(0,n.jsx)(i.zx,{icon:"step-backward",label:l("Prev"),onClick:N}),2!==y&&(0,n.jsx)(i.zx,{activeOnEnter:!0,icon:"step-forward",isDisabled:1===y?!Y:!ee,label:l("Next"),onClick:k}),(0,n.jsx)(i.cA,{accountId:I,extrinsic:K,icon:"code-merge",isDisabled:!Y||!ee||2!==y,label:l("Delegate"),onStart:p})]})]}),(0,n.jsx)(i.zx,{icon:"code-merge",isDisabled:!m,label:l("Delegate"),onClick:p})]})}));var L=t(54383),z=t(31313),W=t(89176),H=t(67609),U=t(6046),J=t(74076);const G=(0,i.zo)(i.u_)`
  .originSelect, .timeSelect {
    > .ui--Params-Content {
      padding-left: 0;
    }
  }
`,Q=a.memo((function({className:e="",isMember:s,members:t,palletReferenda:o,tracks:l}){const{t:c}=(0,u.$)(),{api:m,specName:h}=(0,r.h)(),p=(0,L.C)(),[g,f]=(0,x.O)(),[b,j]=(0,a.useState)(null),[y,k]=(0,a.useState)(void 0),[C,N]=(0,a.useState)(null),[{imageHash:I,isImageHashValid:S},A]=(0,a.useState)({imageHash:null,isImageHashValid:!1}),[{imageLen:P,imageLenDefault:E,isImageLenValid:M},D]=(0,a.useState)({imageLen:d.nw,isImageLenValid:!1}),[T,F]=(0,a.useState)(0),[q,O]=(0,a.useState)(d.S8),[_,V]=(0,a.useState)(d.If),[B,R]=(0,a.useState)(),Z=(0,z.CH)(I);(0,a.useEffect)((()=>{p&&R((e=>e||p.add(d.D_)))}),[p]),(0,a.useEffect)((()=>{Z?.proposalLength&&D((e=>({imageLen:e.imageLen,imageLenDefault:Z.proposalLength,isImageLenValid:e.isImageLenValid})))}),[Z]);const $=(0,a.useMemo)((()=>(0,v.K2)(m,h,o,l,y)),[m,o,h,y,l]),Q=(0,a.useMemo)((()=>!p||(0===T?q?.lt(d.If):_?.lt(p))),[q,_,p,T]),X=(0,a.useMemo)((()=>[{name:"origin",type:(0,U.s)(m.tx[o].submit.meta.args[0].type.toString())}]),[m,o]),K=(0,a.useMemo)((()=>$&&Array.isArray($.origin)?$.origin.map(((e,s)=>({text:Object.values(e)[0],value:s+1}))):null),[$]),Y=(0,a.useMemo)((()=>!$?.origin||Array.isArray($?.origin)?C:$.origin),[C,$]),ee=(0,a.useMemo)((()=>[{text:c("After delay"),value:"after"},{text:c("At block"),value:"at"}]),[c]),se=(0,a.useCallback)((e=>N($&&Array.isArray($.origin)?$.origin[e-1]:null)),[$]),te=(0,a.useCallback)((([{isValid:e,value:s}])=>N(e?s:null)),[]),ne=(0,a.useCallback)((e=>A({imageHash:e,isImageHashValid:(0,J.vq)(e,256)})),[]),ae=(0,a.useCallback)((e=>{e&&D((s=>({imageLen:e,imageLenDefault:s.imageLenDefault,isImageLenValid:!e.isZero()})))}),[]);return(0,n.jsxs)(n.Fragment,{children:[g&&(0,n.jsxs)(G,{className:e,header:c("Submit proposal"),onClose:f,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:c("The proposal will be registered from this account and the balance lock will be applied here."),children:(0,n.jsx)(i.rp,{filter:t,label:c("propose from account"),labelExtra:(0,n.jsx)(H.Z,{label:(0,n.jsx)("span",{className:"label",children:c("transferable")}),params:b}),onChange:j,type:"account"})}),(0,n.jsxs)(i.u_.Columns,{hint:c("The origin (and by extension track) that you wish to submit for, each has a different period, different root and acceptance criteria."),children:[(0,n.jsx)(w,{onChange:k,palletReferenda:o,tracks:l}),!$?.origin&&(0,n.jsx)(W.ZP,{className:"originSelect",onChange:te,params:X}),K&&(0,n.jsx)(i.Lt,{defaultValue:K[0].value,label:c("track origin"),onChange:se,options:K})]}),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:c("The hash of the preimage for the proposal as previously submitted or intended.")}),(0,n.jsx)("p",{children:c("The length value will be auto-populated from the on-chain value if it is found.")})]}),children:[(0,n.jsx)(i.II,{autoFocus:!0,isError:!S,label:c("preimage hash"),onChange:ne,value:I||""}),(0,n.jsx)(i.Rn,{defaultValue:E,isDisabled:!!Z?.proposalLength&&!Z?.proposalLength.isZero()&&S&&M,isError:!M,label:c("preimage length"),onChange:ae,value:P},"inputLength")]}),(0,n.jsx)(i.u_.Columns,{align:"center",hint:c("The moment of enactment, either at a specific block, or after a specific number of blocks."),children:(0,n.jsx)(i.tX,{onChange:F,options:ee,value:T})}),0===T?(0,n.jsx)(i.u_.Columns,{hint:c("The number of blocks to delay enactment after proposal approval."),children:(0,n.jsx)(i.Rn,{defaultValue:d.S8,isError:Q,label:c("after number of blocks"),onChange:O,value:q})}):(0,n.jsx)(i.u_.Columns,{hint:c("A specific block to enact the proposal at."),children:(0,n.jsx)(i.Rn,{defaultValue:B,isError:Q,label:c("at specific block"),onChange:V,value:_})}),(0,n.jsx)(i.u_.Columns,{hint:c("The deposit for this proposal will be locked for the referendum duration."),children:(0,n.jsx)(i.H,{defaultValue:m.consts[o].submissionDeposit,isDisabled:!0,label:c("submission deposit")})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:b,icon:"plus",isDisabled:!Y||!S||!M||!b||Q||!Z?.proposalHash,label:c("Submit proposal"),onStart:f,params:[Y,{Lookup:Z?{hash:Z.proposalHash,len:P}:{hash:I,len:P}},0===T?{After:q}:{At:_}],tx:m.tx[o].submit})})]}),(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!s,label:c("Submit proposal"),onClick:f})]})}));var X=t(56360),K=t(97794),Y=t(14681),ee=t(52107),se=t(33403),te=t(65874);const ne=a.memo((function({className:e="",label:s,when:t}){const a=(0,L._)();return(0,n.jsx)("td",{className:`${e} number`,children:a&&t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:s}),t.gt(a)&&(0,n.jsx)(te.Z,{value:t.sub(a)}),(0,n.jsxs)("div",{children:["#",(0,Y.u)(t)]})]})})})),ae=a.memo((function({value:{info:e}}){const s=(0,a.useMemo)((()=>e.isKilled?e.asKilled:null),[e]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{className:"all no-pad",colSpan:5}),(0,n.jsx)(ne,{label:e.type,when:s})]})}));var oe=t(15991);const ie=a.memo((function({className:e="",id:s,palletReferenda:t,track:o}){const{t:l}=(0,u.$)(),{api:c}=(0,r.h)(),[d,m]=(0,x.O)(),[h,p]=(0,a.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsxs)(i.u_,{className:e,header:l("Place decision deposit"),onClose:m,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:l("The deposit will be registered from this account and the balance lock will be applied here."),children:(0,n.jsx)(i.rp,{label:l("deposit from account"),labelExtra:(0,n.jsx)(H.Z,{label:(0,n.jsx)("span",{className:"label",children:l("transferable")}),params:h}),onChange:p,type:"account"})}),(0,n.jsx)(i.u_.Columns,{hint:l("The referendum this deposit would apply to."),children:(0,n.jsx)(i.Rn,{defaultValue:s,isDisabled:!0,label:l("referendum id")})}),(0,n.jsx)(i.u_.Columns,{hint:l("The deposit for this proposal will be locked for the referendum duration."),children:(0,n.jsx)(i.H,{defaultValue:o.decisionDeposit,isDisabled:!0,label:l("decision deposit")})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:h,icon:"plus",label:l("Place deposit"),onStart:m,params:[s],tx:c.tx[t].placeDecisionDeposit})})]}),(0,n.jsx)(i.zx,{icon:"plus",label:l("Decision deposit"),onClick:m})]})})),re=a.memo((function({className:e="",id:s,palletReferenda:t}){const{t:o}=(0,u.$)(),{api:l}=(0,r.h)(),[c,d]=(0,x.O)(),[m,h]=(0,a.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(i.u_,{className:e,header:o("Refund decision deposit"),onClose:d,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:o("The transaction will be submitted from this account."),children:(0,n.jsx)(i.rp,{label:o("refund from account"),onChange:h,type:"account"})}),(0,n.jsx)(i.u_.Columns,{hint:o("The referendum this deposit would apply to."),children:(0,n.jsx)(i.Rn,{defaultValue:s,isDisabled:!0,label:o("referendum id")})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:m,icon:"minus",label:o("Refund deposit"),onStart:d,params:[s],tx:l.tx[t].refundDecisionDeposit})})]}),(0,n.jsx)(i.zx,{icon:"minus",label:o("Refund deposit"),onClick:d})]})})),le=i.zo.td`
  .ui--AddressMini+.ui--Button {
    margin-top: 0.25rem;
  }
`,ce=a.memo((function({canDeposit:e,canRefund:s,className:t="",decision:a,id:o,noMedia:r,palletReferenda:l,submit:c,track:d}){return(0,n.jsxs)(le,{className:`${t} address ${r?"":"media--1000-noPad"}`,children:[c&&(0,n.jsx)(i.ax,{balance:c.amount,className:r?"":"media--1000",value:c.who,withBalance:!0}),a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.ax,{balance:a.amount,className:r?"":"media--1000",value:a.who,withBalance:!0}),s&&(0,n.jsx)("div",{className:r?"":"media--1000",children:(0,n.jsx)(re,{id:o,palletReferenda:l})})]}):e&&d&&(0,n.jsx)("div",{className:r?"":"media--1000",children:(0,n.jsx)(ie,{id:o,palletReferenda:l,track:d})})]})}));var de=t(81661);const ue=a.memo((function({accountId:e,id:s,onChange:t}){const{t:o}=(0,u.$)(),[r,l]=(0,a.useState)(),[c,d]=(0,a.useState)(),[m,h]=(0,a.useState)();return(0,a.useEffect)((()=>{t([s,{SplitAbstain:{abstain:r,aye:c,nay:m}}])}),[r,c,m,s,t]),(0,n.jsxs)(i.u_.Columns,{hint:o("The value of the balance that is to be split to the abstain, aye and nay parts of the vote"),children:[(0,n.jsx)(i.xb,{accountId:e,autoFocus:!0,label:o("abstain vote value"),onChange:l}),(0,n.jsx)(i.xb,{accountId:e,autoFocus:!0,label:o("aye vote value"),noDefault:!0,onChange:d}),(0,n.jsx)(i.xb,{accountId:e,label:o("nay vote value"),noDefault:!0,onChange:h})]})})),me=a.memo((function({accountId:e,id:s,onChange:t}){const{t:o}=(0,u.$)(),[r,l]=(0,a.useState)(),[c,d]=(0,a.useState)();return(0,a.useEffect)((()=>{t([s,{Split:{aye:r,nay:c}}])}),[r,c,s,t]),(0,n.jsxs)(i.u_.Columns,{hint:o("The value of the balance that is to be split to the aye and nay parts of the vote"),children:[(0,n.jsx)(i.xb,{accountId:e,autoFocus:!0,label:o("aye vote value"),onChange:l}),(0,n.jsx)(i.xb,{accountId:e,label:o("nay vote value"),noDefault:!0,onChange:d})]})})),he=a.memo((function({accountId:e,id:s,isAye:t,onChange:o,voteLockingPeriod:r}){const{t:l}=(0,u.$)(),[c,d]=(0,a.useState)(),[m,h]=(0,a.useState)(1);return(0,a.useEffect)((()=>{o([s,{Standard:{balance:c,vote:{aye:t,conviction:m}}}])}),[c,m,s,t,o]),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:l("The balance associated with the vote will be locked as per the conviction specified and will not be available for transfer during this period.")}),(0,n.jsx)("p",{children:l("Conviction locks do overlap and are not additive, meaning that funds locked during a previous vote can be locked again.")})]}),children:[(0,n.jsx)(i.xb,{accountId:e,autoFocus:!0,isReferenda:!0,label:l(t?"aye vote value":"nay vote value"),onChange:d}),(0,n.jsx)(i.v,{label:l("conviction"),onChange:h,value:m,voteLockingPeriod:r})]})})),pe=(0,i.zo)(i.u_)`
  .ui--Modal-Columns.centerVoteType > div:first-child {
    text-align: center;
  }
`,xe=a.memo((function({className:e,id:s,isConvictionVote:t,isMember:o,members:l,palletVote:d,preimage:m,ranks:h,trackInfo:p}){const{t:g}=(0,u.$)(),{api:f}=(0,r.h)(),{allAccounts:b,hasAccounts:j}=(0,c.x)(),[v,y]=(0,a.useState)(null),[w,k]=(0,x.O)(),[C,N]=(0,a.useState)(0),[I,S]=(0,a.useState)(),A=(0,a.useMemo)((()=>function(e,s){let t=!1;try{t=!!e.createType("PalletConvictionVotingVoteAccountVote",{SplitAbstain:{abstain:1}}).isSplitAbstain}catch{t=!1}return t?[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"},{text:s("Abstain"),value:"abstain"}]:[{text:s("Aye"),value:"aye"},{text:s("Nay"),value:"nay"},{text:s("Split"),value:"split"}]}(f,g)),[f,g]),P=(0,a.useMemo)((()=>function(e,s,t,n){if(s){const a=s.filter((s=>e.includes(s)));if(t&&n?.compare){const e=n.compare;return a.filter(((s,n)=>e(t[n])))}return a}return s}(b,l,h,p)),[b,l,h,p]),E=(0,a.useMemo)((()=>!o||!(!l||!P)&&!P.length),[P,o,l]);return j?(0,n.jsxs)(n.Fragment,{children:[w&&(0,n.jsxs)(pe,{className:e,header:g("Vote on referendum"),onClose:k,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[m&&(0,n.jsx)(i.u_.Columns,{hint:g("If this proposal is passed, the changes will be applied via dispatch and the deposit returned."),children:(0,n.jsx)(de.Z,{idNumber:s,proposal:m.proposal})}),(0,n.jsx)(i.u_.Columns,{hint:g("The vote will be recorded for this account. If another account delegated to this one, the delegated votes will also be counted."),children:(0,n.jsx)(i.UE,{filter:P,onChange:y})}),t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.u_.Columns,{className:"centerVoteType",hint:g("The type of vote that you wish to cast on the referendum."),children:(0,n.jsx)(i.tX,{onChange:N,options:A,value:C})}),0===C?(0,n.jsx)(he,{accountId:v,id:s,isAye:!0,onChange:S,voteLockingPeriod:f.consts[d].voteLockingPeriod}):1===C?(0,n.jsx)(he,{accountId:v,id:s,onChange:S,voteLockingPeriod:f.consts[d].voteLockingPeriod}):2===C?(0,n.jsx)(me,{accountId:v,id:s,onChange:S}):(0,n.jsx)(ue,{accountId:v,id:s,onChange:S})]})]}),(0,n.jsx)(i.u_.Actions,{children:t?(0,n.jsx)(i.cA,{accountId:v,icon:"check-to-slot",label:g("Vote"),onStart:k,params:I,tx:f.tx[d].vote}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.cA,{accountId:v,icon:"ban",label:g("Vote Nay"),onStart:k,params:[s,!1],tx:f.tx[d].vote}),(0,n.jsx)(i.cA,{accountId:v,icon:"check",label:g("Vote Aye"),onStart:k,params:[s,!0],tx:f.tx[d].vote})]})})]}),(0,n.jsx)(i.zx,{icon:"check-to-slot",isDisabled:E,label:g("Vote"),onClick:k})]}):null}));var ge=t(37602);function fe(e){return e instanceof ge.W?e.unwrapOr(null):e}var be=t(58607),je=t(39824);const ve={transform:e=>e.map((({args:[,e]})=>e))},ye={transform:([[e],s])=>e.reduce(((e,[,t],n)=>(s[n]&&s[n].isSome&&(e[t.toString()]=s[n].unwrap()),e)),{}),withParamsTransform:!0};function we(e,s,t){const n=[];return e.forEach((({event:{data:[e,s]}})=>{t&&s.eq(t)&&n.push(e)})),{added:n}}const ke=(0,h.e)("useVotes",(function(e,s,t){const{api:n}=(0,r.h)(),o=(0,a.useMemo)((()=>n.query[e].voting??n.query[e].votingFor),[n.query,e]),i=(0,F.k)(!1===t&&o,[s],ve),c=(0,je.N)([n.events[e].Voted],we,i,s),d=(0,a.useMemo)((()=>c?.map((e=>[s,e]))),[c,s]);return(0,l.W7)(d&&o?.multi,[d],ye)}));function Ce(e){return e?.sort((([,e],[,s])=>s.cmp(e))).map((([e])=>(0,n.jsx)(i.ax,{value:e},e)))}const Ne=a.memo((function({className:e="",id:s,isConvictionVote:t,palletVote:o,tally:r}){const{t:l}=(0,u.$)(),c=ke(o,s,t),[d,m]=(0,a.useMemo)((()=>function(e={}){const s=[],t=[],n=Object.entries(e);for(let e=0,a=n.length;e<a;e++){const[a,o]=n[e];o.isAye?s.push([a,o.asAye]):t.push([a,o.asNay])}return[s.length?s:void 0,t.length?t:void 0]}(c)),[c]),h=(0,a.useCallback)((()=>Ce(d)),[d]),p=(0,a.useCallback)((()=>Ce(m)),[m]);return(0,n.jsxs)("td",{className:`${e} expand media--1200-noPad`,children:[(0,n.jsx)(i.xH,{className:"media--1200",renderChildren:d&&h,summary:t?(0,n.jsxs)(n.Fragment,{children:[l("Aye"),(0,n.jsx)("div",{children:(0,n.jsx)(be.Z,{value:r.ayes})})]}):l("Aye {{count}}",{replace:{count:(0,Y.u)(r.ayes)}})}),(0,n.jsx)(i.xH,{className:"media--1200",renderChildren:m&&p,summary:t?(0,n.jsxs)(n.Fragment,{children:[l("Nay"),(0,n.jsx)("div",{children:(0,n.jsx)(be.Z,{value:r.nays})})]}):l("Nay {{count}}",{replace:{count:(0,Y.u)(r.nays)}})})]})})),Ie=a.memo((function({isMember:e,members:s,palletReferenda:t,palletVote:o,ranks:l,trackInfo:c,value:{id:d,info:m,isConvictionVote:h,track:p}}){const{t:x}=(0,u.$)(),{api:g}=(0,r.h)(),{decisionDeposit:f,ongoing:b,periods:{confirmEnd:j,decideEnd:v,periodEnd:y},submissionDeposit:w,tally:k,tallyTotal:C}=(0,a.useMemo)((()=>function(e,s,t){const n=s.asOngoing,a=(0,z.uD)(e,n.proposal||n.proposalHash).proposalHash;let o=null,i=null,r=null;if(t){const{deciding:e,submitted:s}=n;if(e.isSome){const{confirming:s,since:n}=e.unwrap();s.isSome?r=s.unwrap():i=n.add(t.decisionPeriod)}else o=s.add(t.preparePeriod)}return{decisionDeposit:fe(n.decisionDeposit),ongoing:n,periods:{confirmEnd:r,decideEnd:i,periodEnd:r||i||o,prepareEnd:o},proposalHash:a,submissionDeposit:fe(n.submissionDeposit),tally:n.tally,tallyTotal:n.tally.ayes.add(n.tally.nays)}}(g,m,p)),[g,m,p]),N=(0,z.CH)(b.proposal||b.proposalHash);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{className:"all",children:N?.proposal?(0,n.jsx)(oe.Z,{labelHash:x("preimage"),value:N.proposal,withHash:!0}):(0,n.jsx)("div",{className:"shortHash",children:N?.proposalHash})}),(0,n.jsx)(ce,{canDeposit:!0,decision:f,id:d,palletReferenda:t,submit:w,track:p}),(0,n.jsx)(ne,{label:x(j?"Confirming":v?"Deciding":"Preparing"),when:y}),(0,n.jsx)(Ne,{id:d,isConvictionVote:h,palletVote:o,tally:k}),(0,n.jsx)("td",{className:"middle chart media--1300-noPad",children:(0,n.jsx)(i.Ex,{className:"media--1300",total:C,value:k.ayes})}),(0,n.jsx)("td",{className:"actions button",children:(0,n.jsx)(xe,{id:d,isConvictionVote:h,isMember:e,members:s,palletVote:o,preimage:N,ranks:l,trackInfo:c})})]})})),Se=a.memo((function({palletReferenda:e,value:{id:s,info:t,track:o}}){const{decision:i,submit:r,when:l}=(0,a.useMemo)((()=>function(e){const s=e.isApproved?e.asApproved:e.isRejected?e.asRejected:e.isCancelled?e.asCancelled:e.isTimedOut?e.asTimedOut:null;return s?{decision:fe(s[2]),submit:fe(s[1]),when:s[0]}:{decision:null,submit:null,when:null}}(t)),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("td",{className:"no-pad",colSpan:4}),(0,n.jsx)(ce,{canRefund:!0,className:"all",decision:i,id:s,noMedia:!0,palletReferenda:e,submit:r,track:o}),(0,n.jsx)(ne,{label:t.type,when:l})]})})),Ae={Killed:ae,Ongoing:Ie},Pe=["#ff8c00","#9c3333","#339c33"],Ee="rgba(255, 140, 0, 0.1)",Me="rgba(0, 0, 140, 0.1)",De="rgba(140, 0, 0, 0.02)",Te="rgba(0, 140, 0, 0.02)",Fe="rgba(140, 140, 140, 0.2)",qe={aspectRatio:2.25,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0}}};const Oe=i.zo.tr`
  .shortHash {
    max-width: var(--width-shorthash);
    min-width: 3em;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: var(--width-shorthash);
  }
`,_e=a.memo((function(e){const{t:s}=(0,u.$)(),t=(0,L.C)(),o=(0,X.n)(),{activeIssuance:r,className:l="",palletReferenda:c,value:{id:m,info:h,isConvictionVote:p,track:g,trackGraph:f}}=e,[b,v]=(0,x.O)(!1),y=(0,a.useMemo)((()=>Ae[h.type]||Se),[h]),w=(0,a.useMemo)((()=>r&&g&&f&&function(e,s,t,n,a){if(e&&s&&t.isOngoing){const o=t.asOngoing;if(o.deciding.isSome){const{approval:t,support:i,x:r}=a,{deciding:l,tally:c}=o,{confirming:u,since:m}=l.unwrap(),h=u.unwrapOr(null),p=s?c.support:c.bareAyes,x=[],g=[[[],[],[]],[[],[],[]]],f=e.isZero()?0:p.mul(d.D_).div(e).toNumber()/10,b=c.ayes.isZero()?0:c.ayes.mul(d.D_).div(c.ayes.add(c.nays)).toNumber()/10;let j=-1,v=-1;const y=[];for(let e=0;e<t.length;e++){x.push((0,Y.u)(m.add(r[e]))),y.push(r[e]);const s=t[e].div(d.uy).toNumber()/10,n=b<s;g[0][0][e]=s,g[0][n?1:2][e]=b,j=n||-1!==j?j:e;const a=i[e].div(d.uy).toNumber()/10,o=f<a;g[1][0][e]=a,g[1][o?1:2][e]=f,v=o||-1!==v?v:e}const w=r[r.length-1].sub(r[0]).muln(100).divn(r.length),k=r.length-1,C=h?.add(n.minEnactmentPeriod);if(C?.gt(m.add(r[k]))){let e=r[k].add(m).muln(100).add(w),s=e.divn(100);do{x.push((0,Y.u)(s)),y.push(s.sub(m)),g[0][1].push(g[0][1][k]),g[0][2].push(g[0][2][k]),g[1][1].push(g[1][1][k]),g[1][2].push(g[1][2][k]),e=e.add(w),s=e.divn(100)}while(s.lt(C))}return[{changeX:j,currentY:b,endConfirm:h,labels:x,points:y,progress:{percent:b,total:o.tally.ayes.add(o.tally.nays),value:o.tally.ayes},since:m,values:g[0]},{changeX:v,currentY:f,endConfirm:h,labels:x,points:y,progress:{percent:f,total:e,value:p},since:m,values:g[1]}]}}return null}(r,p,h,g,f)),[r,h,p,g,f]),k=(0,a.useMemo)((()=>t&&w&&b&&g&&function(e,s,t,n,a,o){const i=t.reduce(((e,{changeX:s})=>-1===e||-1===s?-1:Math.max(e,s)),0);return t.map((({changeX:t,currentY:r,endConfirm:l,labels:c,points:d,progress:u,since:m,values:h},p)=>{const x=c.length,g=0===p?100:50,f=e=>Math.max(0,Math.min(x,x*(e.sub(m).toNumber()/d[d.length-1].toNumber()))),b=-1===t?-1:x*(t/d.length),v=-1!==i&&(0,ee.x)(e,d[i].add(m)),y=l?[l.sub(a.confirmPeriod),l,l.add(a.minEnactmentPeriod)]:v?[v,v.add(a.confirmPeriod),v.add(a.confirmPeriod).add(a.minEnactmentPeriod)]:null,w=function(e,s,t,n){return([{label:a}])=>{try{const o=(0,j.G)(a.replace(/,/g,"")),i=n(o);if(o.gt(s)){const n=o.sub(s),r=new Date(Date.now()+n.mul(t).toNumber()).toLocaleString(),l=(0,K.A)(t,n,e),c=[`#${a}`,e("{{when}} (est.)",{replace:{when:r}}),l[1]];return i&&c.push(i),c}if(i)return[`#${a}`,i]}catch{}return`#${a}`}}(o,e,s,(e=>y&&e.gte(y[0])?e.lte(y[1])?o("Confirmation period"):e.lte(y[2])?o("Enactment period"):"":""));return{colors:Pe,labels:c,options:(0,se.Z)({plugins:{annotation:{annotations:(0,se.Z)({past:{backgroundColor:Fe,borderWidth:0,type:"box",xMax:f(e),xMin:0,yMax:g,yMin:0}},y?{conf:{backgroundColor:Ee,borderWidth:0,type:"box",xMax:f(y[1]),xMin:f(y[0]),yMax:g,yMin:0},enac:{backgroundColor:Me,borderWidth:0,type:"box",xMax:f(y[2]),xMin:f(y[1]),yMax:g,yMin:0}}:{},{fail:{backgroundColor:De,borderWidth:0,type:"box",xMax:-1===b?x:b,xMin:0,yMax:r,yMin:0}},-1!==b?{pass:{backgroundColor:Te,borderWidth:0,type:"box",xMax:x,xMin:b,yMax:r,yMin:0}}:{})},crosshair:{sync:{group:n.toNumber()}},tooltip:{callbacks:{title:w}}}},qe),progress:u,values:h}}))}(t,o,w,m,g,s)),[t,o,w,m,b,s,g]),{confirmEnd:C,enactAt:N,nextAlarm:I,submittedIn:S}=(0,a.useMemo)((()=>function(e,s){let t=null,n=null,a=null,o=null;if(e.isOngoing){const{alarm:i,deciding:r,enactment:l,submitted:c}=e.asOngoing;if(n={at:l.isAt,blocks:l.isAt?l.asAt:l.asAfter,end:null},a=i.unwrapOr([null])[0],o=c,r.isSome){const{confirming:e}=r.unwrap();if(e.isSome&&(t=e.unwrap(),s)){const e=t.add(s.minEnactmentPeriod);n.end=l.isAt?(0,ee.x)(e,l.asAt):e.add(l.asAfter)}}}return{confirmEnd:t,enactAt:n,nextAlarm:a,submittedIn:o}}(h,g)),[h,g]),A=(0,a.useMemo)((()=>[[s("minimum approval"),s("current approval (failing)"),s("current approval (passing)")],[s("minimum support"),s("current support (failing)"),s("current support (passing)")]]),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Oe,{className:`${l} isExpanded isFirst ${b?"":"isLast"}`,children:[(0,n.jsx)(i.iA.Column.Id,{value:m}),(0,n.jsx)(y,{...e}),(0,n.jsx)(i.iA.Column.Expand,{isExpanded:b,toggle:v})]}),(0,n.jsxs)(Oe,{className:`${l} ${b?"isExpanded isLast":"isCollapsed"}`,children:[(0,n.jsx)("td",{}),(0,n.jsxs)("td",{className:"columar",colSpan:6,children:[k&&(0,n.jsxs)(i.P0,{children:[(0,n.jsx)(i.P0.Column,{children:(0,n.jsx)(i.kL.Line,{legends:A[0],title:s("approval / {{percent}}%",{replace:{percent:k[0].progress.percent.toFixed(1)}}),...k[0]})}),(0,n.jsx)(i.P0.Column,{children:(0,n.jsx)(i.kL.Line,{legends:A[1],title:s("support / {{percent}}%",{replace:{percent:k[1].progress.percent.toFixed(1)}}),...k[1]})})]}),(0,n.jsxs)(i.P0,{size:"tiny",children:[(0,n.jsxs)(i.P0.Column,{children:[S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:s("Submitted at")}),"#",(0,Y.u)(S)]}),I&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:s("Next alarm")}),"#",(0,Y.u)(I)]})]}),(0,n.jsxs)(i.P0.Column,{children:[N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:N.at?s("Enact at"):s("Enact after")}),N.at&&"#",s("{{blocks}} blocks",{replace:{blocks:(0,Y.u)(N.blocks)}})]}),C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:s("Confirm end")}),"#",(0,Y.u)(C)]}),N?.end&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:s("Enact end")}),"#",(0,Y.u)(N.end)]})]})]}),(0,n.jsx)(i.P0,{is100:!0,size:"tiny",children:(0,n.jsx)(i.P0.Column,{children:(0,n.jsx)(i.NR,{data:m,type:c,withTitle:!0})})})]}),(0,n.jsx)("td",{})]})]})})),Ve=a.memo((function({activeIssuance:e,className:s,isMember:t,members:o,palletReferenda:l,palletVote:c,ranks:d,referenda:m,trackId:h,trackName:p,tracks:g}){const{t:f}=(0,u.$)(),{api:b,specName:j}=(0,r.h)(),[y,w]=(0,x.O)(),k=(0,a.useMemo)((()=>(0,v.K2)(b,j,l,g,h?.toNumber())),[b,j,l,g,h]),[C,N]=(0,a.useMemo)((()=>[!1,y&&k&&(0,n.jsx)("tr",{children:(0,n.jsx)("th",{colSpan:8})})]),[y,w,k]),[I,S]=(0,a.useMemo)((()=>[[[p?(0,n.jsxs)(n.Fragment,{children:[p,(0,n.jsx)("div",{className:"sub",children:k?.text})]}):f("referenda"),"start",8],[C]],p?`track:${p}`:"untracked"]),[C,f,k,p]);return(0,n.jsx)(i.iA,{className:s,empty:m&&f("No active referenda"),header:I,headerChildren:N,isSplit:!h,children:m?.map((s=>(0,n.jsx)(_e,{activeIssuance:e,isMember:t,members:o,palletReferenda:l,palletVote:c,ranks:d,trackInfo:k,value:s},s.key)))},S)})),Be=a.memo((function({className:e,issuanceActive:s,issuanceInactive:t,issuanceTotal:a,summary:{refActive:o,refCount:l},withIssuance:c}){const{t:d}=(0,u.$)(),{api:m}=(0,r.h)();return(0,n.jsxs)(i.Ty,{className:e,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:d("active"),children:void 0===o?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,Y.u)(o)}),(0,n.jsx)(i.Jy,{label:d("total"),children:void 0===l?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,Y.u)(l)})]}),c&&(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:d("total issuance"),children:(0,n.jsx)(be.Z,{className:a?"":"--tmp",value:a||1,withSi:!0})}),(0,b.m)(m.query.balances.inactiveIssuance)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Jy,{className:"media--1000",label:d("inactive issuance"),children:(0,n.jsx)(be.Z,{className:t?"":"--tmp",value:t||1,withSi:!0})}),(0,n.jsx)(i.Jy,{className:"media--800",label:d("active issuance"),children:(0,n.jsx)(be.Z,{className:s?"":"--tmp",value:s||1,withSi:!0})})]})]})]})})),Re=i.zo.div`
  .ui--Dropdown.topDropdown {
    min-width: 25rem;
    padding-left: 0;

    > label {
      left: 1.55rem !important;
    }
  }
`,Ze=a.memo((function({className:e,isConvictionVote:s,members:t,palletReferenda:h,palletVote:x,ranks:g}){const{t:f}=(0,u.$)(),{api:b}=(0,r.h)(),j=(0,l.W7)(b.query.balances.totalIssuance),v=(0,l.W7)(b.query.balances.inactiveIssuance),{allAccounts:y}=(0,c.x)(),[w,k]=(0,m.Z)(h),C=p(h,w),[N,I]=(0,a.useState)(-1),S=(0,a.useMemo)((()=>j?.sub(v||d.nw)),[v,j]),A=(0,a.useMemo)((()=>[{text:f("All active/available tracks"),value:-1}].concat(w.map((({trackId:e,trackName:s})=>({text:s,value:e?e.toNumber():-1}))).filter((e=>!!e.text)))),[w,f]),P=(0,a.useMemo)((()=>(-1===N?w:w.filter((({trackId:e})=>!!e&&e.eqn(N))))||[{referenda:[]}]),[w,N]),E=(0,a.useMemo)((()=>!t||y.some((e=>t.includes(e)))),[y,t]);return(0,n.jsxs)(Re,{className:e,children:[(0,n.jsx)(Be,{issuanceActive:S,issuanceInactive:v,issuanceTotal:j,summary:C,withIssuance:s}),(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.Lt,{className:"topDropdown media--800",label:f("selected track"),onChange:I,options:A,value:N}),s&&(0,n.jsx)($,{palletReferenda:h,palletVote:x,tracks:k}),(0,n.jsx)(o.Z,{}),(0,n.jsx)(Q,{isMember:E,members:t,palletReferenda:h,tracks:k})]}),P.map((({key:e,referenda:s,trackId:a,trackName:o})=>(0,n.jsx)(Ve,{activeIssuance:S,isMember:E,members:t,palletReferenda:h,palletVote:x,ranks:g,referenda:s,trackId:a,trackName:o,tracks:k},e)))]})}))},89139:(e,s,t)=>{t.d(s,{Z:()=>l});var n=t(52322),a=t(2784),o=t(68235),i=t(99501),r=t(54062);const l=a.memo((function({basePath:e,className:s}){const{t}=(0,r.$)(),l=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(o.mQ,{basePath:e,items:l.current}),(0,n.jsx)(i.Z,{isConvictionVote:!0,palletReferenda:"referenda",palletVote:"convictionVoting"})]})}))},54062:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-referenda")}},15336:(e,s,t)=>{t.d(s,{Z:()=>m});var n=t(2784),a=t(13731),o=t(90778),i=t(9118),r=t(11677),l=t(95292);const c={transform:e=>e.map((([e])=>e))},d={transform:([[e],s])=>s.map(((s,t)=>{if(!s.isCasting)return null;const n=s.asCasting;return[e[t][1],n.votes.map((([e])=>e)),n]})).filter((e=>!!e)),withParamsTransform:!0},u={transform:([[e],s])=>s.map(((s,t)=>s.isSome?[e[t],s.unwrap()]:null)).filter((e=>!!e)),withParamsTransform:!0},m=(0,r.e)("useAccountLocks",(function(e,s,t){const{api:r}=(0,o.h)(),m=(0,n.useMemo)((()=>[t]),[t]),h=(0,i.W7)(m&&r.query[s]?.classLocksFor,m,c),p=(0,n.useMemo)((()=>function(e,s){if(s)return[s.map((s=>[e,s]))]}(t,h)),[t,h]),x=(0,i.W7)(p&&r.query[s]?.votingFor.multi,p,d),g=(0,n.useMemo)((()=>function(e){if(e?.length){const s=e.reduce(((e,[,s])=>e.concat(s)),[]);if(s.length)return[s]}}(x)),[x]),f=(0,i.W7)(g&&r.query[e]?.referendumInfoFor.multi,g,u);return(0,n.useMemo)((()=>x&&f&&function(e,s,t,n){const o=e.consts[s].voteLockingPeriod,i=[];for(let e=0,s=t.length;e<s;e++){const[s,,r]=t[e];for(let e=0,t=r.votes.length;e<t;e++){const[t,c]=r.votes[e],d=n.find((([e])=>e.eq(t)));if(d){const[,e]=d;let n,r,u=0,m="None";const h=1;if(c.isStandard){const{balance:s,vote:t}=c.asStandard;n=s,(e.isApproved&&t.isAye||e.isRejected&&t.isNay)&&(u=t.conviction.index,m=t.conviction.type)}else if(c.isSplit){const{aye:e,nay:s}=c.asSplit;n=e.add(s)}else if(c.isSplitAbstain){const{abstain:e,aye:s,nay:t}=c.asSplitAbstain;n=s.add(t).add(e)}else console.error(`Unable to handle ${c.type}`);e.isOngoing?r=l.Ew:e.isKilled?r=e.asKilled:e.isCancelled||e.isTimedOut?r=e.isCancelled?e.asCancelled[0]:e.asTimedOut[0]:e.isApproved||e.isRejected?r=o.muln(u?a.d[u-1][h]:0).add(e.isApproved?e.asApproved[0]:e.asRejected[0]):console.error(`Unable to handle ${e.type}`),n&&r&&i.push({classId:s,endBlock:r,locked:m,refId:t,total:n})}}}return i}(r,s,x,f)),[r,s,f,x])}))},1398:(e,s,t)=>{t.d(s,{E:()=>i,Z:()=>r});var n=t(2784),a=t(11677),o=t(80973);function i(e){const[s]=(0,o.Z)(e);return(0,n.useMemo)((()=>s?s.reduce(((e,{referenda:s})=>e+(s?s.filter((({info:e})=>e.isOngoing)).length:0)),0):0),[s])}const r=(0,a.e)("useCounter",(function(){return i("referenda")}))},80973:(e,s,t)=>{t.d(s,{Z:()=>v});var n=t(2784),a=t(90778),o=t(9118),i=t(11677),r=t(12298),l=t(39824);const c={transform:e=>e.map((({args:[e]})=>e))};function d(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"Submitted"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const u=(0,i.e)("useReferendaIds",(function(e){const{api:s}=(0,a.h)(),t=(0,r.k)(s.query[e].referendumInfoFor,[],c);return(0,l.N)([s.events[e].Submitted],d,t)}));var m=t(95292),h=t(57387);const p={approval:[m.nw],support:[m.nw],x:[m.nw]},x=(0,i.e)("useTracks",(function(e){const{api:s}=(0,a.h)();return(0,n.useMemo)((()=>s.consts[e].tracks.map((([e,s])=>({graph:s.decisionDeposit&&s.minApproval&&s.minSupport?(0,h.nb)(s):p,id:e,info:s})))),[s,e])}));function g(e,s){return(e.info.isOngoing===s.info.isOngoing?e.info.isOngoing?function(e,s){const t=e.info.asOngoing,n=s.info.asOngoing;return t.track.cmp(n.track)||(t.deciding.isSome===n.deciding.isSome?t.deciding.isSome?e.info.asOngoing.deciding.unwrap().since.cmp(s.info.asOngoing.deciding.unwrap().since):0:t.deciding.isSome?-1:1)}(e,s):0:e.info.isOngoing?-1:1)||s.id.cmp(e.id)}function f(e,s){return e.trackId&&s.trackId?e.trackId.cmp(s.trackId):e.trackId?-1:1}const b={transform:([[e],s])=>e.map(((e,t)=>{const n=s[t],a=n?.isSome?n.unwrap():void 0;return{id:e,info:a,isConvictionVote:!!a&&(0,h.pq)(a),key:e.toString()}})).filter((e=>void 0!==e.info)),withParamsTransform:!0};function j(e,s,t){if(!t||!s)return[{key:"empty"}];if(!e)return[{key:"referenda",referenda:t.sort(g)}];const n=[],a={key:"referenda",referenda:[]};for(let o=0,i=t.length;o<i;o++){const i=t[o];if(!i.info||!i.info.isOngoing){a.referenda.push(i);continue}const r=e.find((({id:e})=>e?.eq&&e.eq(i.info.asOngoing.track)));if(r){if(i.trackGraph=r.graph,i.trackId=r.id,i.track=r.info,i.isConvictionVote){const{deciding:e,tally:t}=i.info.asOngoing;if(e.isSome){const{since:n}=e.unwrap();i.decidingEnd=(0,h.z9)(s,t,r.info,n)}}const e=n.find((({track:e})=>i.track===e));e?e.referenda.push(i):n.push({key:`track:${i.trackId.toString()}`,referenda:[i],track:i.track,trackGraph:i.trackGraph,trackId:i.trackId,trackName:(0,h.tp)(i.trackId,i.track)})}else a.referenda.push(i)}(a.referenda&&0!==a.referenda.length||!n.length)&&n.push(a);for(let e=0,s=n.length;e<s;e++)n[e].referenda.sort(g);return n.sort(f)}const v=(0,i.e)("useReferenda",(function(e){const{api:s,isApiReady:t}=(0,a.h)(),i=(0,o.W7)(t&&s.query.balances.totalIssuance),r=u(e),l=x(e),c=(0,o.W7)(t&&r&&0!==r.length&&s.query[e].referendumInfoFor.multi,[r],b);return(0,n.useMemo)((()=>[r&&0===r.length?[{key:"referenda",referenda:[]}]:j(l,i,c),l]),[r,c,i,l])}))},57387:(e,s,t)=>{t.d(s,{K2:()=>h,nb:()=>j,pq:()=>x,tp:()=>m,z9:()=>b});var n=t(91783),a=t(14681),o=t(69543),i=t(33403),r=t(95292),l=t(52107),c=t(48801),d=t.n(c);const u=500;function m(e,{name:s}){return`${(0,a.u)(e)} / ${s.replace(/_/g," ").split(" ").map(o.KT).join(" ")}`}function h(e,s,t,a,o){let r;if(a&&void 0!==o&&-1!==o){const l=(0,n.Z)(e,s,t),c=a.find((({id:e})=>e.eqn(o)));if(c&&l){const e=c.info.name.toString(),s=l.find((({id:s,name:t})=>s===o&&t===e));s&&(r=(0,i.Z)({track:c,trackName:m(c.id,c.info)},s))}}return r}function p(e){return!!e.support&&!e.bareAyes}function x(e){return e.isOngoing&&p(e.asOngoing.tally)}function g(e,s,t){if(t.isZero())return r.ed;const n=s.mul(r.ed).div(t);if(e.isLinearDecreasing){const{ceil:s,floor:t,length:a}=e.asLinearDecreasing;return s.sub((0,l.N)(n,a).mul(s.sub(t)).div(a))}if(e.isSteppedDecreasing){const{begin:s,end:t,period:a,step:o}=e.asSteppedDecreasing;return(0,l.x)(t,s.sub((0,l.N)(s,o.mul(n).div(a))))}if(e.isReciprocal){const{factor:s,xOffset:t,yOffset:a}=e.asReciprocal,o=n.add(t);return o.isZero()?r.ed:(0,l.N)(r.ed,s.mul(r.ed).div(o).add(a))}throw new Error(`Unknown curve found ${e.type}`)}function f(e,s,t){try{if(t.isZero())return r.ed;const n=s.mul(r.ed).div(t);if(e.isLinearDecreasing){const{ceil:s,floor:t,length:a}=e.asLinearDecreasing;return n.lt(t)?r.ed:n.gt(s)?r.nw:(0,l.N)(r.ed,(0,l.x)(r.nw,s.sub(n).mul(a).div(s.sub(t))))}if(e.isSteppedDecreasing){const{begin:s,end:t,period:a,step:o}=e.asSteppedDecreasing;return n.lt(t)?r.ed:(0,l.N)(r.ed,(0,l.x)(r.nw,a.mul(s.sub((0,l.N)(n,s)).add(o.isZero()?o:o.sub(r.If))).div(o)))}if(e.asReciprocal){const{factor:s,xOffset:t,yOffset:a}=e.asReciprocal,o=n.sub(a);return o.isZero()?r.ed:(0,l.N)(r.ed,(0,l.x)(r.nw,s.mul(r.ed).div(o).sub(t)))}}catch(s){throw console.error(`Failed on curve ${e.type}:`,e.inner.toHuman()),s}throw new Error(`Unknown curve found ${e.type}`)}function b(e,s,{decisionPeriod:t,minApproval:n,minSupport:a},o){const i=p(s)?s.support:s.bareAyes;return o.add(t.mul((0,l.x)(f(n,s.ayes,s.ayes.add(s.nays)),f(a,i,e))).div(r.ed))}function j({decisionPeriod:e,minApproval:s,minSupport:t}){const n=new Array(u),a=new Array(u),o=new Array(u),i=u-1,r=e.muln(100).divn(u);let l=new(d())(0);for(let c=0;c<i;c++){const i=l.divn(100);n[c]=g(s,i,e),a[c]=g(t,i,e),o[c]=i,l=l.add(r)}return n[i]=g(s,e,e),a[i]=g(t,e,e),o[i]=e,{approval:n,support:a,x:o}}},6583:(e,s,t)=>{t.d(s,{Z:()=>y});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(86135),l=t(83488),c=t(1346);const d=i.zo.section`
  .ui--Output > label {
    text-transform: none;
  }
`,u=a.memo((function({queue:e=[]}){const s=e.filter((({error:e,result:s})=>!(0,c.o)(e)||!(0,c.o)(s))).reverse();return s.length?(0,n.jsx)(d,{className:"rpc--Results",children:s.map((({error:e,id:s,result:t,rpc:{method:a,section:o,type:r}})=>(0,n.jsx)(i.r_,{isError:!!e,label:`${s}: ${o}.${a}: ${r}`,value:e?e.message:(0,n.jsx)("pre",{children:(0,l.Z)("",t)})},s)))}):null}));var m=t(89176),h=t(6046),p=t(13529),x=t(17751),g=t(61349);function f(){return(0,g.$G)("app-rpc")}const b=p.Z.author.submitExtrinsic,j=a.memo((function({queueRpc:e}){const{t:s}=f(),[{isValid:t,rpc:o,values:r},l]=(0,a.useState)({isValid:!1,rpc:b,values:[]}),c=(0,a.useMemo)((()=>o.params.map((({isOptional:e,name:s,type:t})=>({name:s,type:(0,h.s)(e?`Option<${t}>`:t)})))),[o]),d=(0,a.useCallback)((e=>l((s=>{const{rpc:t=s.rpc,values:n=s.values}=e,a=t.params.reduce(((e,{isOptional:s})=>e+(s?0:1)),0);return{isValid:n.reduce(((e,s)=>e&&!0===s.isValid),a<=n.length),rpc:t,values:n}}))),[]),u=(0,a.useCallback)((e=>d({rpc:e,values:[]})),[d]),p=(0,a.useCallback)((e=>d({values:e})),[d]),g=(0,a.useCallback)((()=>e({rpc:o,values:r.filter((({value:e},s)=>!o.params[s].isOptional||!(0,x.F)(e))).map((({value:e})=>e))})),[e,o,r]);return(0,n.jsxs)("section",{className:"rpc--Selection",children:[(0,n.jsx)(i.iQ,{defaultValue:b,label:s("call the selected endpoint"),onChange:u}),(0,n.jsx)(m.ZP,{onChange:p,params:c},`${o.section}.${o.method}:params`),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"sign-in-alt",isDisabled:!t,label:s("Submit RPC call"),onClick:g})})]})})),v=a.memo((function(){const{queueRpc:e,txqueue:s}=(0,r.L)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{queueRpc:e}),(0,n.jsx)(u,{queue:s})]})})),y=a.memo((function({basePath:e}){const{t:s}=f(),t=(0,a.useRef)([{isRoot:!0,name:"rpc",text:s("Submission")}]);return(0,n.jsxs)("main",{className:"rpc--App",children:[(0,n.jsx)(i.mQ,{basePath:e,items:t.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsx)(o.AW,{path:e,children:(0,n.jsx)(o.AW,{element:(0,n.jsx)(v,{}),index:!0})})})]})}))},39117:(e,s,t)=>{t.d(s,{Z:()=>b});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(83488);const c=a.memo((function({results:e}){return e.length?(0,n.jsx)("section",{className:"runtime--Results",children:e.map((({def:{method:e,section:s,type:t},error:a,id:o,result:r})=>(0,n.jsx)(i.r_,{isError:!!a,label:`${o}: ${s}.${e}: ${t}`,value:a?a.message:(0,n.jsx)("pre",{children:(0,l.Z)("",r)})},o)))}):null}));var d=t(89176),u=t(6046),m=t(61349);function h(){return(0,m.$G)("app-runtime")}const p=["transactionPaymentApi"],x=a.memo((function({onSubmit:e}){const{t:s}=h(),[{isValid:t,method:o,values:r},l]=(0,a.useState)({isValid:!1,method:null,values:[]}),c=(0,a.useMemo)((()=>o?o.params.map((({name:e,type:s})=>({name:e,type:(0,u.s)(s)}))):[]),[o]),m=(0,a.useCallback)((e=>l((s=>{const{method:t=s.method,values:n=s.values}=e;return{isValid:n.reduce(((e,s)=>e&&!0===s.isValid),!!t&&t.params.length<=n.length),method:t,values:n}}))),[]),x=(0,a.useCallback)((e=>m({method:e,values:[]})),[m]),g=(0,a.useCallback)((e=>m({values:e})),[m]),f=(0,a.useCallback)((()=>{o&&e(o,r)}),[e,o,r]);return(0,n.jsxs)("section",{className:"runtime--Selection",children:[(0,n.jsx)(i.$q,{label:s("call the selected endpoint"),onChange:x}),o&&(0,n.jsx)(d.ZP,{onChange:g,params:c,withLength:!p.includes(o.section)},`${o.section}.${o.method}:params`),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"sign-in-alt",isDisabled:!t||!o,label:s("Submit Runtime call"),onClick:f})})]})}));let g=0;const f=a.memo((function(){const{api:e}=(0,r.h)(),[s,t]=(0,a.useState)([]),o=(0,a.useCallback)((e=>t((s=>[e].concat(...s)))),[]),i=(0,a.useCallback)(((s,t)=>{e.call[s.section][s.method](...t.map((({value:e})=>e))).then((e=>o({def:s,id:++g,result:e}))).catch((e=>{o({def:s,error:e,id:++g}),console.error(e)}))}),[e,o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{onSubmit:i}),(0,n.jsx)(c,{results:s})]})})),b=a.memo((function({basePath:e}){const{t:s}=h(),t=(0,a.useRef)([{isRoot:!0,name:"runtime",text:s("Calls")}]);return(0,n.jsxs)("main",{className:"runtime--App",children:[(0,n.jsx)(i.mQ,{basePath:e,items:t.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsx)(o.AW,{path:e,children:(0,n.jsx)(o.AW,{element:(0,n.jsx)(f,{}),index:!0})})})]})}))},14673:(e,s,t)=>{t.d(s,{Z:()=>k});var n=t(52322),a=t(2784),o=t(68235),i=t(90778),r=t(54383),l=t(9118),c=t(71679),d=t(92914),u=t(65874),m=t(14681);const h=a.memo((function({value:{at:e,image:s,imageHash:t,index:a}}){const i=(0,r.C)();return(0,n.jsxs)("tr",{children:[(0,n.jsx)(o.iA.Column.Id,{value:a}),(0,n.jsx)(d.Z,{imageHash:t,proposal:s?.proposal}),(0,n.jsx)("td",{className:"number together",children:i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{value:e.sub(i)}),"#",(0,m.u)(e)]})}),(0,n.jsx)("td",{className:"button",children:!s?.proposal&&(0,n.jsx)(c.Z,{imageHash:t,isImminent:!0})}),(0,n.jsx)("td",{className:"links media--1000",children:(0,n.jsx)(o.NR,{data:a,type:"democracyReferendum"})})]})}));var p=t(61349);function x(){return(0,p.$G)("app-scheduler")}const g=a.memo((function({className:e}){const{t:s}=x(),{api:t}=(0,i.h)(),c=(0,r.C)(),d=(0,l.W7)(t.derive.democracy.dispatchQueue),u=(0,a.useMemo)((()=>c&&d?.filter((({at:e})=>e.gte(c))).sort(((e,s)=>e.at.cmp(s.at)))),[c,d]),m=(0,a.useRef)([[s("dispatch queue"),"start",2],[s("enact")],[],[void 0,"media--1000"]]);return(0,n.jsx)(o.iA,{className:e,empty:u&&s("Nothing queued for execution"),header:m.current,children:u?.map((e=>(0,n.jsx)(h,{value:e},e.index.toString())))})}));var f=t(74525),b=t(31313),j=t(15991);const v=a.memo((function({bestNumber:e,className:s="",value:{blockNumber:t,call:a,maybeId:o,maybePeriodic:i,preimageHash:r}}){const l=(0,b.CH)(r),c=i.unwrapOr(null),d=o.unwrapOr(null);return(0,n.jsxs)("tr",{className:s,children:[(0,n.jsx)("td",{className:"all",children:(0,n.jsx)(j.Z,{value:a||l?.proposal})}),d?d.isAscii?(0,n.jsx)("td",{className:"start",children:d.toUtf8()}):(0,n.jsx)(f.Z,{value:d.toHex()}):(0,n.jsx)("td",{}),(0,n.jsx)("td",{className:"number together",children:e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{value:t.sub(e)}),"#",(0,m.u)(t)]})}),(0,n.jsx)("td",{className:"number together",children:c&&(0,m.u)(c[0])}),(0,n.jsx)("td",{className:"number together",children:c&&(0,m.u)(c[1])})]})})),y={transform:(e,s)=>e.filter((([,e])=>e.some((e=>e.isSome)))).reduce(((e,[t,n])=>{const a=t.args[0];return n.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,{call:t,maybeId:n,maybePeriodic:o,priority:i},r)=>{let l,c=null;if(t.inner)if(t.isValue)c=t.asValue;else if(t.isInline)try{c=s.registry.createType("Call",t.asInline.toHex())}catch(e){console.error(e)}else t.isLookup&&(l=t);else c=t;return e.push({blockNumber:a,call:c,key:`${a.toString()}-${r}`,maybeId:n,maybePeriodic:o,preimageHash:l,priority:i}),e}),e)}),[])},w=a.memo((function({className:e=""}){const{t:s}=x(),{api:t}=(0,i.h)(),c=(0,r.C)(),d=(0,l.W7)(t.query.scheduler.agenda.entries,void 0,y),u=(0,a.useMemo)((()=>c&&d?.filter((({blockNumber:e})=>e.gte(c))).sort(((e,s)=>e.blockNumber.cmp(s.blockNumber)))),[c,d]),m=(0,a.useRef)([[s("scheduled"),"start"],[s("id"),"start"],[s("remaining")],[s("period")],[s("count")]]);return(0,n.jsx)(o.iA,{className:e,empty:u&&s("No active schedules"),header:m.current,children:u?.map((e=>(0,n.jsx)(v,{bestNumber:c,value:e},e.key)))})})),k=a.memo((function({basePath:e,className:s}){const{t}=x(),{api:r}=(0,i.h)(),l=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")}]),[t]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(o.mQ,{basePath:e,items:l}),r.query.democracy&&(0,n.jsx)(g,{}),r.query.scheduler&&(0,n.jsx)(w,{})]})}))},92403:(e,s,t)=>{t.d(s,{Z:()=>be});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(46782),c=t.n(l),d=t(94953),u=t(54926),m=t(38894),h=t(16039),p=t(61349);function x(){return(0,p.$G)("app-settings")}const g=i.zo.div`
  .label {
    font-style: italic;
    margin-top: 0.5rem;

    +div {
      margin-left: 1rem;
    }
  }
`,f=a.memo((function({className:e="",onChange:s,original:t,tkey:o,tval:r}){const l=(0,a.useCallback)((e=>s(o,e)),[s,o]);return(0,n.jsxs)(g,{className:e,children:[(0,n.jsx)("div",{className:"label",children:t}),(0,n.jsx)(i.II,{onChange:l,value:r,withLabel:!1})]})})),b=new Map;async function j(e){if(b.has(e))return b.get(e);const s=await fetch(`locales/${e}`).then((e=>e.json())).catch((e=>console.error(e)));return b.set(e,s),s||{}}function v(e,s){const t={};let n=0,a=0;return Object.keys(e).forEach((o=>{const i=e[o],r=Object.keys(i).length;let l=0;Object.keys(i).forEach((e=>{s[e]&&l++})),n+=l,a+=r,t[o]=[l,r,0]})),[[n,a,0],t]}function y([e,s,t]=[0,0,0]){return{done:e,progress:(s?100*e/s:100).toFixed(2),total:s}}const w=i.zo.main`
  .ui--Column {
    display: flex;

    > div:first-child {
      flex: 1;
      text-align: right;
    }
  }

  .ui--Progress {
    margin: 0 0 0 0.25rem;
  }

  .toggleWrapper {
    display: flex;
    justify-content: flex-end;
    margin-top: 0.75rem;
  }
`,k=a.memo((function({className:e}){const{t:s}=x(),[t,o]=(0,m.O)(),[{english:r,keys:l,modules:p},g]=(0,a.useState)({english:{},keys:[],modules:[]}),[b,k]=(0,a.useState)("zh"),[[C,N],I]=(0,a.useState)([[0,0,0],{}]),[S,A]=(0,a.useState)("app-accounts.json"),[P,E]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async function(){const e=(await j("index.json")).filter((e=>"en"!==e)),s=e.filter((e=>!u.Z[e])),t=await async function(){const e=await j("en/index.json");return(await Promise.all(e.map((e=>j(`en/${e}`))))).reduce(((s,t,n)=>(s[e[n]]=t,s)),{})}(),n=s.length?await Promise.all(s.map((e=>j(`${e}/translation.json`)))):[];return s.forEach(((e,s)=>{u.Z[e]=n[s]})),e.forEach((e=>{Object.keys(t).forEach((s=>{Object.keys(t[s]).forEach((s=>{u.Z[e][s]||(u.Z[e][s]="")}))}))})),{english:t,keys:e.map((e=>({text:e,value:e}))),modules:Object.keys(t).map((e=>({text:e.replace(".json","").replace("app-","page-"),value:e}))).sort(((e,s)=>e.text.localeCompare(s.text)))}})().then(g).catch(console.error)}),[]),(0,a.useEffect)((()=>{E(u.Z[b]),I(v(r,u.Z[b]))}),[r,b]),(0,a.useEffect)((()=>{k(l.some((({value:e})=>e===h.X.i18nLang))?h.X.i18nLang:"zh")}),[l]);const M=(0,a.useCallback)(((e,s)=>{E((t=>t?{...t,[e]:s}:null));const t=!!u.Z[b][e],n=s.trim();if(u.Z[b][e]=s,t!==!!n){const[e,s]=v(r,u.Z[b]);I((([t])=>(e[2]=Math.max(0,e[0]-t[0]),[e,s])))}}),[r,b]),D=(0,a.useCallback)((()=>{d.Z.reloadResources().catch(console.error)}),[]),T=(0,a.useCallback)((()=>function(e,s){const t=Object.keys(e).sort().reduce(((t,n)=>{const a=e[n].trim();return(a||s)&&(t[n]=a),t}),{});c().saveAs(new Blob([JSON.stringify(t,null,2)],{type:"application/json; charset=utf-8"}),"translation.json")}(P||{},t)),[P,t]);return l.length?(0,n.jsxs)(w,{className:e,children:[(0,n.jsx)("header",{children:(0,n.jsxs)(i.P0,{children:[(0,n.jsxs)(i.P0.Column,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Lt,{isFull:!0,label:s("the language to display translations for"),onChange:k,options:l,value:b}),s("{{done}}/{{total}}, {{progress}}% done",{replace:y(C)})]}),(0,n.jsx)(i.Ex,{total:C[1],value:C[0]})]}),(0,n.jsxs)(i.P0.Column,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.Lt,{isFull:!0,label:s("the module to display strings for"),onChange:A,options:p,value:S}),s("{{done}}/{{total}}, {{progress}}% done",{replace:y(N[S])})]}),(0,n.jsx)(i.Ex,{total:N[S]?.[1],value:N[S]?.[0]})]})]})}),(0,n.jsx)("div",{className:"toggleWrapper",children:(0,n.jsx)(i.ZD,{label:s(t?"include all empty strings in the generated file":"do not include empty strings in the generated file"),onChange:o,value:t})}),(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.zx,{icon:"sync",label:s("Apply to UI"),onClick:D}),(0,n.jsx)(i.zx,{icon:"download",label:s("Generate {{lng}}/translation.json",{replace:{lng:b}}),onClick:T})]}),S&&P&&Object.keys(r[S]).map(((e,s)=>(0,n.jsx)(f,{onChange:M,original:r[S][e],tkey:e,tval:P[e]},s)))]}):(0,n.jsx)(i.$j,{})}));var C=t(9652),N=t(57139),I=t(11677),S=t(85617),A=t(65968),P=t(92730),E=t(41444);const M=(0,I.e)("useChainInfo",(function(){const{api:e,apiEndpoint:s,isApiReady:t,isEthereum:n,specName:o,systemChain:i,systemName:l}=(0,r.h)();return(0,a.useMemo)((()=>t?{chain:i,chainType:n?"ethereum":"substrate",color:s?.ui.color,genesisHash:e.genesisHash.toHex(),icon:(0,C.t)(l,o),metaCalls:(0,E.h$)(e.runtimeMetadata.asCallsOnly.toU8a()),specVersion:e.runtimeVersion.specVersion.toNumber(),ss58Format:(0,A.h)(e.registry.chainSS58)?e.registry.chainSS58:N.DEFAULT_SS58.toNumber(),tokenDecimals:(e.registry.chainDecimals||[N.DEFAULT_DECIMALS.toNumber()])[0],tokenSymbol:(e.registry.chainTokens||P.a.getDefaults().unit)[0],types:(0,S.kh)(e.registry,i,e.runtimeVersion.specName,e.runtimeVersion.specVersion)}:null),[e,s,t,o,i,l,n])})),D=(0,I.e)("useRawMetadata",(function(){const{api:e,isApiReady:s}=(0,r.h)(),[t,n]=(0,a.useState)(null);return(0,a.useEffect)((()=>{s&&e.call.metadata.metadataAtVersion&&e.call.metadata.metadataAtVersion(15).then((e=>{const s=e.toHex();n(s)})).catch(console.error)}),[e,s]),t}));var T=t(79444),F=t(84522),q=t(33403),O=t(11818);const _=(0,i.zo)(i.iA)`
  table {
    overflow: visible;
    z-index: 2;
  }
`,V=a.memo((function({chainInfo:e,className:s,rawMetadata:t}){const o=null!==t,{t:r}=x(),{extensions:l}=(0,O.Z)(),[c,d]=(0,a.useState)(0),[u,h]=(0,m.O)(!0);(0,a.useEffect)((()=>{o&&h()}),[o,h]);const p=(0,a.useMemo)((()=>(l||[]).map((({extension:{name:e,version:s}},t)=>function(e,s,t){return{text:(0,n.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,n.jsx)("img",{alt:e,className:"ui--Dropdown-icon",src:t}),(0,n.jsx)("div",{className:"ui--Dropdown-name",children:e})]},s),value:s}}(`${e} ${s}`,t,T.J[e]?.ui.logo||F.h)))),[l]),g=(0,a.useCallback)((()=>{if(e&&l?.[c]){h();const s=(0,q.Z)({},{...e,rawMetadata:t});l[c].update(s).catch((()=>!1)).then((()=>h())).catch(console.error)}}),[e,l,t,c,h]),f=(0,a.useRef)([[r("Extensions"),"start"]]);return(0,n.jsx)(_,{className:s,empty:r("No Upgradable extensions"),header:f.current,children:l?0!==p.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("tr",{className:"isExpanded isFirst",children:(0,n.jsx)("td",{children:(0,n.jsx)(i.Lt,{label:r("upgradable extensions"),onChange:d,options:p,value:c})})}),(0,n.jsx)("tr",{className:"isExpanded isLast",children:(0,n.jsx)("td",{children:(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"upload",isDisabled:u,label:r("Update metadata"),onClick:g})})})})]}):(0,n.jsx)(i.$j,{})})}));var B=t(27421),R=t(9118),Z=t(14681);const $=i.zo.div((({color:e})=>`\n  background-color: ${e||"white"} !important;\n  width: 100px;\n  flex: 1;\n  border-radius: 4px;\n`)),L=a.memo((function({className:e,color:s}){return(0,n.jsx)($,{className:e,color:s})}));function z(){let e="#";for(let s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}const W={chainType:"substrate",color:"#FFFFFF",decimals:0,genesisHash:"",prefix:0,title:"",unit:"UNIT"},H=(0,i.zo)(i.iA)`
  td {
    padding: 0;

    .input.ui--Input input {
      border: none !important;
      background: transparent;
    }
  }

  @media (max-width: 900px) {
    tr {
      &:first-child {
        display: flex;
        flex-direction: column;
      }
    }
  }

  .settings--networkSpecs-name {
    position: relative;

    .settings--networkSpecs-logo {
      height: 32px;
      left: 12px;
      position: absolute;
      top: 1rem;
      width: 32px;
    }
  }

  .settings--networkSpecs-color {
    position: relative;

    > div:first-child {
      display: flex;

      .settings--networkSpecs-colorInput {
        min-width: 124px;
      }

      .settings--networkSpecs-colorChangeButton {
        user-select: none;
        cursor: pointer;
        background: transparent;
        border: none;
        outline: none;
        align-self: flex-end;
        padding-bottom: 0.9rem;
      }
    }

    .settings--networkSpecs-colorBar {
      border-radius: 50%;
      border: 1px solid grey;
      height: 32px;
      left: 12px;
      position: absolute;
      top: 1rem;
      width: 32px;
    }
  }

  .settings--networkSpecs-qr {
    margin: 0.25rem auto;
    max-width: 15rem;

    img {
      border: 1px solid white;
    }
  }
`,U=a.memo((function({chainInfo:e,className:s}){const{t}=x(),{api:o,isApiReady:l,systemChain:c}=(0,r.h)(),[d,u]=(0,a.useState)(W),m=(0,B.N)(d,500),h=(0,R.W7)(l&&o.rpc.state.subscribeRuntimeVersion),p=(0,R.W7)(l&&o.derive.chain.bestNumber),[g,f]=(0,a.useReducer)(((e,s)=>{const t={...e,...s};return u(t),t}),W);(0,a.useEffect)((()=>{e&&f({chainType:e.chainType,color:e.color||z(),decimals:e.tokenDecimals,genesisHash:e.genesisHash,prefix:e.ss58Format,title:c,unit:e.tokenSymbol})}),[e,c]);const b=(0,a.useCallback)((e=>f({color:e})),[]),j=(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),f({color:z()})}),[]),v=(0,a.useCallback)((()=>/^#[\da-fA-F]{6}|#[\da-fA-F]{3}$/.test(g.color)),[g]),y=(0,a.useRef)([[t("chain specifications"),"start",2]]);return l?(0,n.jsxs)(H,{className:s,empty:t("No open tips"),header:y.current,children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"settings--networkSpecs-name",children:[(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Network Name"),value:g.title}),(0,n.jsx)(i.Mj,{className:"settings--networkSpecs-logo"})]})}),(0,n.jsx)("td",{rowSpan:9,children:d.genesisHash&&(0,n.jsx)(i.K0,{className:"settings--networkSpecs-qr",networkSpecs:m})})]}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:"settings--networkSpecs-color",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(i.II,{className:"full settings--networkSpecs-colorInput",isError:!v(),label:t("Color"),onChange:b,value:g.color}),(0,n.jsx)("a",{className:"settings--networkSpecs-colorChangeButton",onClick:j,children:t("generate random color")})]}),(0,n.jsx)(L,{className:"settings--networkSpecs-colorBar",color:g.color})]})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Genesis Hash"),value:g.genesisHash})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Unit"),value:g.unit})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Address Prefix"),value:g.prefix.toString()})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Decimals"),value:g.decimals.toString()})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Chain Type"),value:g.chainType})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Runtime Version"),value:h?`${h.specName.toString()}/${h.specVersion.toNumber()}`:""})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:t("Current Block"),value:p?(0,Z.u)(p):""})})})]}):(0,n.jsx)(i.$j,{})})),J=`apps v${t(54194).b.version.replace("-x","")}`,G=(0,i.zo)(i.iA)`
  td {
    padding: 0;
    text-align: left;

    .input.ui--Input input {
      border: none !important;
      background: transparent;
      padding: 0;
      margin-left: 0;
    }

    .ui--Labelled-content .ui.input > input {
      padding-left: 0 !important;
    }

    .ui--Labelled:not(.isSmall) {
      padding-left: 0;
    }

    .ui--Labelled > label, .ui--Labelled > .ui--Labelled-content {
      left: 0 !important;
      padding-left: 0;
    }
  }
`,Q=a.memo((function({className:e}){const{t:s}=x(),{api:t,isApiReady:o,systemName:l,systemVersion:c}=(0,r.h)(),d=(0,a.useRef)([[s("system version"),"start",2]]);return o?(0,n.jsxs)(G,{className:e,empty:s("No version information available"),header:d.current,children:[(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:s("Node version"),value:l+" v"+c})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:s("API Version"),value:`${t.libraryInfo.replace("@polkadot/api ","")}`})})}),(0,n.jsx)("tr",{children:(0,n.jsx)("td",{children:(0,n.jsx)(i.II,{className:"full",isDisabled:!0,label:s("Apps Version"),value:`${J.replace("apps ","")}`})})})]}):(0,n.jsx)(i.$j,{})}));function X(){const{isDevelopment:e}=(0,r.h)(),s=D(),t=M();return(0,n.jsxs)(n.Fragment,{children:[!e&&(0,n.jsx)(V,{chainInfo:t,rawMetadata:s}),(0,n.jsx)(U,{chainInfo:t}),(0,n.jsx)(Q,{})]})}var K=t(23729),Y=t.n(K),ee=t(81369),se=t(56623),te=t(43357),ne=t(64021);const ae="{\n\n}",oe={},ie=i.zo.div`
  .editor {
    height: 21rem;
    margin-left: 2rem;
    position: relative;
  }

  .help {
    padding: 0.5rem 2rem;
  }
`,re=a.memo((function({className:e="",onStatusChange:s}){const{t}=x(),{api:o}=(0,r.h)(),[l,c]=(0,a.useState)(ae),[d,u]=(0,a.useState)(!0),[m,h]=(0,a.useState)(!0),[g,f]=(0,a.useState)(oe),[b,j]=(0,a.useState)(null),[v,y]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=(0,ee.decodeUrlTypes)()||Y().get("types")||{};Object.keys(e).length&&(c(JSON.stringify(e,null,2)),f({}),j(Object.keys(e).join(", ")),y((0,ee.encodeUrlTypes)(e)))}),[]);const w=(0,a.useCallback)((({code:e,isJsonValid:s,isTypesValid:t,types:n,typesPlaceholder:a})=>{c(e),u(s),h(t),f(n),j(a)}),[]),k=(0,a.useCallback)((()=>{Y().remove("types"),w({code:ae,isJsonValid:!0,isTypesValid:!0,types:oe,typesPlaceholder:null})}),[w]),C=(0,a.useCallback)((e=>{const s=(0,se.z)(e);try{const e=JSON.parse(s),t=Object.keys(e).join(", ");console.log("Detected types:",t),w({code:s,isJsonValid:!0,isTypesValid:!0,types:0===Object.keys(e).length?{}:e,typesPlaceholder:t})}catch(e){console.error("Error registering types:",e),w({code:s,isJsonValid:!1,isTypesValid:!1,types:{},typesPlaceholder:e.message})}}),[w]),N=(0,a.useCallback)((e=>{try{if(!(0,te.b)(e))throw Error("This is not a valid JSON object.");C((0,ne.d)(e))}catch(s){c(e),u(!1),j(s.message)}}),[C]),I=(0,a.useCallback)((()=>{let e=null;try{o.registerTypes(g),Y().set("types",g),h(!0),s({action:t("Your custom types have been added"),status:"success"}),Object.keys(g).length&&(e=(0,ee.encodeUrlTypes)(g),console.log(e))}catch(e){console.error(e),h(!1),s({action:t(`Error saving your custom types. ${e.message}`),status:"error"})}y(e)}),[o,s,t,g]),S=0===Object.keys(g).length;return(0,n.jsxs)(ie,{className:e,children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)("div",{className:"full",children:(0,n.jsx)(i.ht,{clearContent:S&&m,isError:!m,label:t("Additional types as a JSON file (or edit below)"),onChange:C,placeholder:b})})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)("div",{className:"full",children:(0,n.jsx)(i.ML,{className:"editor",code:l,isValid:d,onEdit:N})})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)("div",{className:"full",children:(0,n.jsx)(p.cC,{i18nKey:"devConfig",children:(0,n.jsxs)("div",{className:"help",children:["If you are a development team with at least a test network available, consider adding the types directly ",(0,n.jsx)("a",{href:"https://github.com/polkadot-js/apps/tree/master/packages/apps-config",rel:"noopener noreferrer",target:"_blank",children:"to the apps-config"}),", allowing out of the box operation for your spec & chains, both for you and anybody trying to connect to it. This is not a replacement for your chain-specific UI, however doing so does help in allowing users to easily discover and use with zero-config."]})})})}),(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.qi,{label:t("Share"),type:t("url"),value:v}),(0,n.jsx)(i.zx,{icon:"sync",label:t("Reset"),onClick:k}),(0,n.jsx)(i.zx,{icon:"save",isDisabled:!m||!d,label:t("Save"),onClick:I})]})]})}));var le=t(9242),ce=t(37417),de=t(72570),ue=t(83337),me=t(45479),he=t(35189);const pe=h.X.availableLedgerConn,xe=h.X.availableLedgerApp,ge=a.memo((function({className:e=""}){const{t:s}=x(),{chainSS58:t,isApiReady:o,isElectron:l}=(0,r.h)(),{isIpfs:c}=(0,ue.g)(),{hasLedgerChain:d,hasWebUsb:u}=(0,me.c)(),[m,p]=(0,a.useState)(null),[g,f]=(0,a.useState)((()=>{const e=h.X.get();return{...e,uiTheme:"dark"===e.uiTheme?"dark":"light"}})),b=(0,a.useMemo)((()=>pe.filter((({value:e})=>!l||"webusb"!==e))),[l]),j=(0,a.useMemo)((()=>h.X.availableIcons.map((e=>(0,he.tI)(e,["default"]))).concat((0,he.tI)({info:"robohash",text:"RoboHash",value:"robohash"}))),[]),v=(0,a.useMemo)((()=>{const e=de.FA.find((({prefix:e})=>e===t));return(0,le.M)(s).map((s=>(0,he.SX)(s,["default"],"empty",-1===s.value?o?e?` (${e.displayName}, ${t||0})`:` (${t||0})`:void 0:` (${s.value})`)))}),[t,o,s]),y=(0,a.useMemo)((()=>[{text:s("Allow local in-browser account storage"),value:"on"},{text:s("Do not allow local in-browser account storage"),value:"off"}]),[s]),w=(0,a.useMemo)((()=>[{text:s("Light theme"),value:"light"},{text:s("Dark theme"),value:"dark"}]),[s]),k=(0,a.useMemo)((()=>(0,ce.L)(s)),[s]);(0,a.useEffect)((()=>{const e=h.X.get(),s=Object.entries(g).some((([s,t])=>e[s]!==t)),t=e.apiUrl!==g.apiUrl||e.prefix!==g.prefix;p(s?t:null)}),[g]);const C=(0,a.useCallback)((e=>s=>f((t=>({...t,[e]:s})))),[]),N=(0,a.useCallback)((()=>(0,he.wg)(g)),[g]),I=(0,a.useCallback)((()=>{(0,he.a1)(g),p(null)}),[g]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)("h1",{children:s("UI options")}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.icon,label:s("default icon theme"),onChange:C("icon"),options:j})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.uiTheme,label:s("default interface theme"),onChange:C("uiTheme"),options:w})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.i18nLang,label:s("default interface language"),onChange:C("i18nLang"),options:k})}),(0,n.jsx)("h1",{children:s("account options")}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.prefix,label:s("address prefix"),onChange:C("prefix"),options:v})}),!c&&!l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.storage,label:s("in-browser account creation"),onChange:C("storage"),options:y})}),"on"===g.storage&&(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Pd,{content:s("It is recommended that you store all keys externally to the in-page browser local storage, either on browser extensions, signers operating via QR codes or hardware devices. This option is provided for advanced users with strong backup policies.")})})]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:u?g.ledgerConn:b[0].value,isDisabled:!u,label:s("manage hardware connections"),onChange:C("ledgerConn"),options:b})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:g.ledgerApp,isDisabled:!d,label:s("manage ledger app"),onChange:C("ledgerApp"),options:xe})}),u?"none"!==g.ledgerConn?(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Pd,{content:s("Ledger support is still experimental and some issues may remain. Trust, but verify the addresses on your devices before transferring large amounts. There are some features that will not work, including batch calls (used extensively in staking and democracy) as well as any identity operations.")})}):null:(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Pd,{content:s("Ledger hardware device support is only available on Chromium-based browsers where WebUSB and WebHID support is available in the browser.")})})]}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"save",isDisabled:null===m,label:s(m?"Save & Reload":"Save"),onClick:m?N:I})})]})}));var fe=t(76075);const be=a.memo((function({basePath:e,onStatusChange:s}){const{t}=x(),{api:l,isApiConnected:c,isApiReady:d,isDevelopment:u}=(0,r.h)(),m=(0,fe.Z)(),h=(0,a.useMemo)((()=>[{isRoot:!0,name:"general",text:t("General")},{count:m,name:"metadata",text:t("Metadata")},{name:"developer",text:t("Developer")},{name:"i18n",text:t("Translate")}]),[m,t]),p=(0,a.useMemo)((()=>c&&d?u||l.runtimeMetadata.version<=13?[]:["developer"]:["metadata","i18n"]),[l,c,d,u]);return(0,n.jsxs)("main",{className:"settings--App",children:[(0,n.jsx)(i.mQ,{basePath:e,hidden:p,items:h}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(re,{onStatusChange:s}),path:"developer"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(k,{}),path:"i18n"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(X,{}),path:"metadata"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(ge,{}),index:!0})]})})]})}))},76075:(e,s,t)=>{t.d(s,{Z:()=>o});var n=t(11677),a=t(11818);const o=(0,n.e)("useCounter",(function(){const{count:e}=(0,a.Z)();return e}))},11818:(e,s,t)=>{t.d(s,{Z:()=>m});var n=t(2784),a=t(23729),o=t.n(a),i=t(90778),r=t(11677);let l=0;const c=new Map;function d(e,{name:s,version:t}){const n=`properties:${e.genesisHash.toHex()}`,a=o().get(n,{});a[s]={extensionVersion:t,ss58Format:e.registry.chainSS58,tokenDecimals:e.registry.chainDecimals[0],tokenSymbol:e.registry.chainTokens[0]},o().set(n,a)}const u={count:0,extensions:[]},m=(0,r.e)("useExtensions",(function(){const{api:e,extensions:s,isApiReady:t,isDevelopment:a}=(0,i.h)(),[r,m]=(0,n.useState)(),[h,p]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const e=`${++l}-${Date.now()}`;return c.set(e,p),()=>{c.delete(e)}}),[]),(0,n.useEffect)((()=>{s&&async function(e,s,t){return(await Promise.all(s.map((s=>async function(e,s){if(!s.metadata)return null;try{const t=s.metadata,n=await t.get();return{extension:s,known:n,update:async n=>{let a=!1;try{a=await t.provide(n),a&&(d(e,s),[...c.values()].forEach((e=>e(Date.now()))))}catch{}return a}}}catch{return null}}(e,s))))).filter((e=>!!e))}(e,s).then(m).catch(console.error)}),[e,s,h]),(0,n.useMemo)((()=>!a&&t&&r?function(e,s){const t=s.map((s=>{const t=s.known.find((({genesisHash:s})=>e.genesisHash.eq(s)))||null;return t&&!e.runtimeVersion.specVersion.gtn(t.specVersion)&&function(e,{extension:s}){const t=o().get(`properties:${e.genesisHash.toHex()}`,{});if(!t[s.name])return d(e,s),!0;const{ss58Format:n,tokenDecimals:a,tokenSymbol:i}=t[s.name];return n===e.registry.chainSS58&&a===e.registry.chainDecimals[0]&&i===e.registry.chainTokens[0]}(e,s)?null:{...s,current:t}})).filter((e=>!!e));return{count:t.length,extensions:t}}(e,r):u),[r,e,t,a])}))},35189:(e,s,t)=>{t.d(s,{SX:()=>i,a1:()=>l,tI:()=>r,wg:()=>c});var n=t(52322),a=(t(2784),t(68235)),o=t(16039);function i({info:e,isHeader:s,text:t,value:o},i=[],r="empty",l){return s?(0,n.jsx)(a.Lt.Header,{content:t},t):{text:(0,n.jsxs)("div",{className:"ui--Dropdown-item",children:[(0,n.jsx)(a.Mj,{className:"ui--Dropdown-icon",logo:e&&i.includes(e)?r:e}),(0,n.jsxs)("div",{className:"ui--Dropdown-name",children:[t,l]})]},o),value:o}}function r({info:e,text:s,value:t},o=[],i="empty"){const r=e&&o.includes(e)?i:e;return{text:(0,n.jsxs)("div",{className:"ui--Dropdown-item",children:["empty"===r?(0,n.jsx)(a.Mj,{className:"ui--Dropdown-icon",logo:"empty"}):(0,n.jsx)(a.k,{className:"ui--Dropdown-icon",size:32,theme:r,value:"5F9999K9UgTUgSsbXZQcEmRMvQqwJoBUHMv9e1k2MdgghuRA"}),(0,n.jsx)("div",{className:"ui--Dropdown-name",children:s})]},t),value:t}}function l(e){o.X.set(e)}function c(e){l(e),window.location.reload()}},24569:(e,s,t)=>{t.d(s,{Z:()=>N});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(345),l=t(38894),c=t(69187),d=t(33661),u=t(74076),m=t(52256),h=t(55858),p=t(61349);function x(){return(0,p.$G)("app-signing")}var g=t(17965);const f=a.memo((function({onClose:e,onUnlock:s,pair:t}){const{t:o}=x(),[r,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(null);(0,a.useEffect)((()=>{d(t?.address||"")}),[t]),(0,a.useEffect)((()=>{p(null)}),[u]);const f=(0,a.useCallback)((()=>{t&&t.isLocked&&(l(!0),(0,g.Y)((()=>{try{t.decodePkcs8(u)}catch(e){return l(!1),p(e.message)}l(!1),s()})))}),[s,t,u]);return t?(0,n.jsxs)(i.u_,{className:"toolbox--Unlock",header:o("Unlock account"),onClose:e,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:o("This account that will perform the message signing."),children:(0,n.jsx)(i.rp,{isDisabled:!0,label:o("account"),value:c})}),(0,n.jsx)(i.u_.Columns,{hint:o("Unlock the account for signing. Once active the signature will be generated based on the content provided."),children:(0,n.jsx)(i.ro,{autoFocus:!0,isError:!!h,label:o("password"),onChange:m,onEnter:f,value:u})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.zx,{icon:"unlock",isBusy:r,label:o("Unlock"),onClick:f})})]}):null})),b=i.zo.div`
  .toolbox--Sign-input {
    position: relative;
    width: 100%;
    height: 100%;

    .unlock-overlay {
      position: absolute;
      width: 100%;
      height: 100%;
      top:0;
      left:0;
      background-color: #0f0e0e7a;
    }

    .unlock-overlay-warning {
      display: flex;
      align-items: center;
      justify-content: center;
      height:100%;
    }

    .unlock-overlay-content {
      color:#fff;
      padding: 0 2.5rem;
      text-align:center;

      .ui--Button-Group {
        text-align: center;
      }
    }
  }
`,j=a.memo((function({className:e=""}){const{t:s}=x(),[t,o]=(0,a.useState)((()=>c.Nn.getPairs()[0]||null)),[{data:p,isHexData:g},j]=(0,a.useState)({data:"",isHexData:!1}),[{isInjected:v},y]=(0,a.useState)({isExternal:!1,isHardware:!1,isInjected:!1}),[w,k]=(0,a.useState)(!1),[{isUsable:C,signer:N},I]=(0,a.useState)({isUsable:!0,signer:null}),[S,A]=(0,a.useState)(""),[P,E]=(0,l.O)();(0,a.useEffect)((()=>{const e=t?.meta||{},s=e.isExternal||!1,n=e.isHardware||!1,a=e.isInjected||!1,o=!(s||n||a);y({isExternal:s,isHardware:n,isInjected:a}),k(!a&&(t&&t.isLocked||!1)),A(""),I({isUsable:o,signer:null}),e.source&&a&&(0,r.R0)(e.source).catch((()=>null)).then((e=>I({isUsable:(0,d.m)(e?.signer?.signRaw),signer:e?.signer||null}))).catch(console.error)}),[t]);const M=(0,a.useCallback)((e=>e&&o(c.Nn.getPair(e))),[]),D=(0,a.useCallback)((e=>j({data:e,isHexData:(0,u.vq)(e)})),[]),T=(0,a.useCallback)((()=>{if(w||!C||!t)return;const e=(0,m.Rl)(p);N&&(0,d.m)(N.signRaw)?(A(""),N.signRaw({address:t.address,data:(0,h.c)(e),type:"bytes"}).then((({signature:e})=>A(e))).catch(console.error)):A((0,h.c)(t.sign(e)))}),[t,p,w,C,N]),F=(0,a.useCallback)((()=>{k(!1),E()}),[E]);return(0,n.jsxs)(b,{className:`${e} toolbox--Sign`,children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.rp,{className:"full",isInput:!1,label:s("account"),onChange:M,type:"account"})}),(0,n.jsxs)("div",{className:"toolbox--Sign-input",children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.II,{autoFocus:!0,className:"full",label:s("sign the following data"),onChange:D,value:p})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.qG,{className:"medium",label:s("hex input data"),value:s(g?"Yes":"No")})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.r_,{className:"full",isHidden:0===S.length,isMonospace:!0,label:s("signature of supplied data"),value:S,withCopy:!0})}),(0,n.jsx)("div",{className:"unlock-overlay",hidden:!C||!w||v,children:w&&(0,n.jsx)("div",{className:"unlock-overlay-warning",children:(0,n.jsxs)("div",{className:"unlock-overlay-content",children:[s("You need to unlock this account to be able to sign data."),(0,n.jsx)("br",{}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"unlock",label:s("Unlock account"),onClick:E})})]})})}),(0,n.jsx)("div",{className:"unlock-overlay",hidden:C,children:(0,n.jsx)("div",{className:"unlock-overlay-warning",children:(0,n.jsx)("div",{className:"unlock-overlay-content",children:s(v?"This injected account cannot be used to sign data since the extension does not support raw signing.":"This external account cannot be used to sign data. Only Limited support is currently available for signing from any non-internal accounts.")})})}),P&&(0,n.jsx)(f,{onClose:E,onUnlock:F,pair:t})]}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.zx,{icon:"key",isDisabled:!(C&&!w),label:s("Sign message"),onClick:T})})]})}));var v=t(90778),y=t(16039),w=t(53501);const k=i.zo.div`
  .ui--AlignedIconContainer {
    position: absolute;
    z-index: 1;
  }

  .alignedBadge {
    left: 1.25rem;
    position: relative;
    top: 1.25rem;
  }
`,C=a.memo((function({className:e=""}){const{t:s}=x(),{isEthereum:t}=(0,v.h)(),[{cryptoType:o,isValid:r},l]=(0,a.useState)({cryptoType:"unknown",isValid:!1}),[{data:d,isHexData:m},h]=(0,a.useState)({data:"",isHexData:!1}),[{isValidPk:p,publicKey:g},f]=(0,a.useState)({isValidPk:!1,publicKey:null}),[{isValidSignature:b,signature:j},C]=(0,a.useState)({isValidSignature:!1,signature:""}),[N]=(0,a.useState)([{text:s("Crypto not detected"),value:"unknown"}].concat(y.X.availableCryptos));(0,a.useEffect)((()=>{let e="unknown",s=p&&b;if(s&&g){const t=(0,w.D)(d,j,g);"none"!==t.crypto?(e=t.crypto,s=t.isValid):s=!1}l({cryptoType:e,isValid:s})}),[d,p,b,g,j]);const I=(0,a.useCallback)((e=>{let s=null;try{s=c.Nn.decodeAddress(e||"")}catch(e){console.error(e)}f({isValidPk:!!s&&(32===s.length||t&&20===s.length),publicKey:s})}),[t]),S=(0,a.useCallback)((e=>h({data:e,isHexData:(0,u.vq)(e)})),[]),A=(0,a.useCallback)((e=>C({isValidSignature:(0,u.vq)(e)&&(130===e.length||t&&132===e.length),signature:e})),[t]);return(0,n.jsxs)(k,{className:`${e} toolbox--Verify`,children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.rp,{className:"full",isError:!p,isInput:!0,label:s("verify using address"),onChange:I})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.II,{autoFocus:!0,className:"full",label:s("using the following data"),onChange:S,value:d})}),(0,n.jsxs)("div",{className:"ui--row",children:[(0,n.jsx)("div",{className:"ui--AlignedIconContainer",children:(0,n.jsx)(i.Ct,{className:"alignedBadge",color:r?"green":b?"red":"gray",icon:r?"check":b?"exclamation":"question"})}),(0,n.jsx)(i.II,{className:"full",isError:!b,label:s("the supplied signature"),onChange:A,value:j})]}),(0,n.jsxs)("div",{className:"ui--row",children:[(0,n.jsx)(i.Lt,{defaultValue:o,isDisabled:!0,label:s("signature crypto type"),options:N}),(0,n.jsx)(i.qG,{className:"medium",label:s("hex input data"),value:s(m?"Yes":"No")})]})]})})),N=a.memo((function({basePath:e}){const{t:s}=x(),t=(0,a.useRef)([{isRoot:!0,name:"sign",text:s("Sign message")},{name:"verify",text:s("Verify signature")}]);return(0,n.jsxs)("main",{className:"toolbox--App",children:[(0,n.jsx)(i.mQ,{basePath:e,items:t.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(C,{}),path:"verify"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(j,{}),index:!0})]})})]})}))},96246:(e,s,t)=>{t.d(s,{Z:()=>re});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(9118),c=t(48801),d=t.n(c),u=t(95292),m=t(38894),h=t(61349);function p(){return(0,h.$G)("app-society")}const x=a.memo((function({onClose:e}){const{t:s}=p(),{api:t}=(0,r.h)(),[o,l]=(0,a.useState)(),[c,d]=(0,a.useState)();return(0,n.jsxs)(i.u_,{header:s("Bid to join"),onClose:e,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:s("Your candidate/bid account. Once accepted this account will become a member."),children:(0,n.jsx)(i.rp,{label:s("bid account"),onChange:d,type:"account"})}),(0,n.jsx)(i.u_.Columns,{hint:s("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,n.jsx)(i.H,{autoFocus:!0,label:s("bid amount"),onChange:l})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:c,icon:"sign-in-alt",isDisabled:!o,label:s("Bid"),onStart:e,params:[o],tx:t.tx.society.bid})})]})}));var g=t(34814);const f=i.zo.div`
  align-items: center;
  display: flex;
  flex-wrap: no-wrap;

  > div {
    flex: 0;

    &:first-child {
      padding-right: 1.5rem;
    }
  }
`,b=a.memo((function({className:e,value:s}){const t=(0,a.useMemo)((()=>s?.isVouch?s.asVouch[0]:null),[s]);return(0,n.jsxs)(f,{className:e,children:[(0,n.jsx)("div",{children:s?.type}),t&&(0,n.jsx)(i.N,{value:t})]})})),j=a.memo((function({index:e,value:{kind:s,value:t,who:o}}){const{t:l}=p(),{api:c}=(0,r.h)(),{allAccounts:d}=(0,g.x)(),[u,m]=(0,a.useMemo)((()=>s.isVouch?s.asVouch:[null,null]),[s]),[h,x]=(0,a.useMemo)((()=>{const e=o.toString(),s=u?.toString();return[d.some((s=>s===e)),!!s&&d.some((e=>e===s))]}),[d,u,o]);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:o})}),(0,n.jsxs)("td",{className:"start",children:[(0,n.jsx)(b,{value:s}),s.isVouch?x&&(0,n.jsx)(i.cA,{accountId:u,icon:"times",label:l("Unvouch"),params:[e],tx:c.tx.society.unvouch}):h&&(0,n.jsx)(i.cA,{accountId:o,icon:"times",label:l("Unbid"),params:[e],tx:c.tx.society.unbid})]}),(0,n.jsx)(i.iA.Column.Balance,{value:t}),(0,n.jsx)(i.iA.Column.Balance,{value:m})]})})),v=a.memo((function({className:e}){const{t:s}=p(),{api:t}=(0,r.h)(),o=(0,l.W7)(t.query.society.bids),c=(0,a.useRef)([[s("bids"),"start"],[s("bid kind"),"start"],[s("value")],[s("tip")]]);return(0,n.jsx)(i.iA,{className:e,empty:o&&s("No bids"),header:c.current,children:o?.map(((e,s)=>(0,n.jsx)(j,{index:s,value:e},e.who.toString())))})})),y=a.memo((function({label:e,votes:s}){return 0===s.length?null:(0,n.jsx)(i.xH,{summary:`${e} (${s.length})`,children:s.map((([e])=>(0,n.jsx)(i.ax,{value:e},e.toString())))})})),w=a.memo((function({votes:e}){const{t:s}=p(),[{allAye:t,allNay:o,allSkeptic:i},r]=(0,a.useState)({allAye:[],allNay:[],allSkeptic:[]});return(0,a.useEffect)((()=>{e&&r({allAye:e.filter((([,e])=>e.isApprove)),allNay:e.filter((([,e])=>e.isReject)),allSkeptic:e.filter((([,e])=>e.isSkeptic))})}),[e]),(0,n.jsxs)("td",{className:"expand",children:[(0,n.jsx)(y,{label:s("Skeptics"),votes:i}),(0,n.jsx)(y,{label:s("Approvals"),votes:t}),(0,n.jsx)(y,{label:s("Rejections"),votes:o})]})})),k=a.memo((function({candidateId:e,isMember:s,ownMembers:t}){const{t:o}=p(),{api:l}=(0,r.h)(),[c,d]=(0,m.O)(),[u,h]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),f=(0,a.useRef)([{text:o("Aye, I approve"),value:!0},{text:o("Nay, I do not approve"),value:!1}]);return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(i.u_,{header:o("Vote for candidate"),onClose:d,children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.rp,{filter:t,label:o("vote from account"),onChange:g}),(0,n.jsx)(i.Lt,{label:o("vote for candidate"),onChange:h,options:f.current,value:u})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:x,icon:"check",label:o("Vote"),onStart:d,params:[e,u],tx:l.tx.society.vote})})]}),(0,n.jsx)(i.zx,{icon:"check",isDisabled:!s,label:o("Vote"),onClick:d})]})})),C=a.memo((function({allMembers:e,isMember:s,ownMembers:t,value:{accountId:o,kind:c,value:d}}){const{api:u}=(0,r.h)(),m=(0,a.useMemo)((()=>[e.map((e=>[o,e]))]),[o,e]),h=(0,l.W7)(u.query.society.votes.multi,m,{transform:s=>s.map(((s,t)=>[e[t],s])).filter((([,e])=>e.isSome)).map((([e,s])=>[e,s.unwrap()]))});return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:o})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)(b,{value:c})}),(0,n.jsx)(i.iA.Column.Balance,{value:d}),(0,n.jsx)(w,{votes:h}),(0,n.jsx)("td",{className:"button",children:(0,n.jsx)(k,{candidateId:o.toString(),isMember:s,ownMembers:t})})]})})),N=a.memo((function({allMembers:e,candidates:s,className:t="",isMember:o,ownMembers:r}){const{t:l}=p(),c=(0,a.useRef)([[l("candidates"),"start"],[l("bid kind"),"start"],[l("value")],[void 0,"expand"],[]]);return(0,n.jsx)(i.iA,{className:t,empty:s&&l("No candidates"),header:c.current,children:s?.map((s=>(0,n.jsx)(C,{allMembers:e,isMember:o,ownMembers:r,value:s},s.accountId.toString())))})})),I=a.memo((function({allMembers:e,onClose:s}){const{t}=p(),{api:o}=(0,r.h)(),[l,c]=(0,a.useState)(),[d,u]=(0,a.useState)(),[m,h]=(0,a.useState)(),[x,g]=(0,a.useState)();return(0,n.jsxs)(i.u_,{header:t("Vouch for a new candidate"),onClose:s,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:t("Your member account that the vouch is made from."),children:(0,n.jsx)(i.rp,{filter:e,label:t("member account"),onChange:h,type:"account"})}),(0,n.jsx)(i.u_.Columns,{hint:t("The candidate/bid account. Once accepted this account will become a member."),children:(0,n.jsx)(i.rp,{label:t("bid account"),onChange:g})}),(0,n.jsx)(i.u_.Columns,{hint:t("The amount to tie to your bid. The lowest bidder moves forward."),children:(0,n.jsx)(i.H,{autoFocus:!0,label:t("bid amount"),onChange:c})}),(0,n.jsx)(i.u_.Columns,{hint:t("The amount you wish to be tipped for your bid."),children:(0,n.jsx)(i.H,{label:t("tip amount"),onChange:u})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:m,icon:"sign-in-alt",isDisabled:!l||!x||!d,label:t("Vouch"),onStart:s,params:[x,l,d],tx:o.tx.society.vouch})})]})})),S=a.memo((function({allMembers:e,candidates:s,className:t,isMember:a,ownMembers:o}){const{t:r}=p(),[l,c]=(0,m.O)(),[d,u]=(0,m.O)();return(0,n.jsxs)("div",{className:t,children:[(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.zx,{icon:"plus",label:r("Submit bid"),onClick:c}),(0,n.jsx)(i.zx,{icon:"plus",isDisabled:!a,label:r("Vouch for"),onClick:u}),l&&(0,n.jsx)(x,{onClose:c}),d&&(0,n.jsx)(I,{allMembers:e,onClose:u})]}),(0,n.jsx)(N,{allMembers:e,candidates:s,isMember:a,ownMembers:o}),(0,n.jsx)(v,{})]})})),A=a.memo((function({isMember:e,ownMembers:s}){const{t}=p(),{api:o}=(0,r.h)(),[l,c]=(0,m.O)(),[d,u]=(0,a.useState)(!0),[h,x]=(0,a.useState)(null),g=(0,a.useRef)([{text:t("Aye, I approve"),value:!0},{text:t("Nay, I do not approve"),value:!1}]);return(0,n.jsxs)(n.Fragment,{children:[l&&(0,n.jsxs)(i.u_,{header:t("Vote for defender"),onClose:c,children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.rp,{filter:s,label:t("vote from account"),onChange:x}),(0,n.jsx)(i.Lt,{label:t("vote for defender"),onChange:u,options:g.current,value:d})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:h,icon:"check",label:t("Vote"),onStart:c,params:[d],tx:o.tx.society.defenderVote})})]}),(0,n.jsx)(i.zx,{icon:"check",isDisabled:!e,label:t("Vote"),onClick:c})]})})),P={transform:e=>e.filter((({vote:e})=>!!e)).map((({accountId:e,vote:s})=>[e.toString(),s]))},E=a.memo((function({className:e="",info:s,isMember:t,ownMembers:o}){const{t:c}=p(),{api:d}=(0,r.h)(),u=(0,l.W7)(d.derive.society.members,void 0,P),m=(0,a.useRef)([[c("defender"),"start"],[void 0,"expand"],[]]);return s&&s.hasDefender&&s.defender?(0,n.jsx)(i.iA,{className:e,header:m.current,children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:s.defender})}),(0,n.jsx)(w,{votes:u}),(0,n.jsx)("td",{className:"button",children:(0,n.jsx)(A,{isMember:t,ownMembers:o})})]})}):null}));var M=t(54383),D=t(58607),T=t(65874),F=t(14681),q=t(15968);const O=300;function _(e,s,t,n,a){const o=new Path2D("M373.1,126.9c-5.2-4.1-11.4-9.7-22.7-11.1c-10.6-1.4-21.4,5.7-28.7,10.4c-7.3,4.7-21.1,18.5-26.8,22.7 c-5.7,4.2-20.3,8.1-43.8,22.2s-115.7,73.3-115.7,73.3l24,0.3L52.4,299.8h10.7l-15.4,11.7c0,0,13.6,3.6,25-3.6l0,3.3 c0,0,127.4-50.2,152-37.2l-15,4.4c1.3,0,25.5,1.6,25.5,1.6s0.8,15.1,15.4,24.8c14.6,9.6,14.9,14.9,14.9,14.9s-7.6,3.1-7.6,7 c0,0,11.2-3.4,21.6-3.1c10.4,0.3,19.5,3.1,19.5,3.1s-0.8-4.2-10.9-7c-10.2-2.9-20.1-13.8-25-19.8c-4.9-6-8.3-16.7-4.1-27.4 c3.5-9.1,15.7-14.1,40.9-27.1c29.7-15.4,36.5-26.8,40.7-35.7c4.2-8.9,10.4-26.6,13.9-34.9c4.4-10.7,9.8-16.4,14.3-19.8 c4.4-3.4,24.5-10.9,24.5-10.9S378,130.8,373.1,126.9z");e.save(),e.translate(s/2,t/2),e.scale(n/440,n/440),e.translate(-220,-220),a(e,o),e.restore()}function V(e,s,t,n){e.save(),e.translate(.5,.5);for(let a=0;a<t.length;a++)e.save(),e.rotate(2*Math.PI/t.length*a),e.translate(0,-s),n(e,t[a]),e.restore();e.restore()}function B(e,s){let t=0;return s.map((s=>e.slice(t,t+=s)))}const R={display:"block",margin:"0 auto"},Z=a.memo((function({accountId:e}){const{t:s}=p(),{api:t}=(0,r.h)(),o=(0,a.useRef)(null),[l]=(0,a.useState)((()=>t.genesisHash.eq(q.Cx))),[c,d]=(0,m.O)();return(0,a.useEffect)((()=>{if(o.current){const s=o.current.getContext("2d");s&&function(e,s){console.log(`Generating ink for ${s.toString()} as ${s.toHex()}`);const t=s.toU8a().reduce(((e,s)=>{for(let t=0;t<8;++t)e.push(0!=(s&1<<7-t));return e}),[]);e.save(),e.translate(0,0),e.scale(O,O),function(e,s){const t=B(s,[71,61,51,41,32]);for(let s=0;s<t.length;++s)V(e,.5-.062*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.arc(0,0,.016,0,2*Math.PI),e.fillStyle="black",e.fill())}));e.lineWidth=10,_(e,1,1,.4,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(325,0),e.scale(O,O),function(e,s){const t=B(s,[71,61,51,41,32]);for(let s=0;s<t.length;++s)V(e,.5-.062*(s+.5),t[s],((e,s)=>{e.beginPath(),e.arc(0,0,(s?8:4)/500,0,2*Math.PI),e.fillStyle=s?"black":"#e6007a",e.fill()}));_(e,1,1,.44,((e,s)=>e.fill(s)))}(e,t),e.restore(),e.save(),e.translate(0,325),e.scale(O,O),function(e,s){const t=B(s,[64,64,64,64]);for(let s=0;s<t.length;++s)V(e,.5-.072*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));_(e,1,1,.44,((e,s)=>e.fill(s)))}(e,t),e.restore(),e.save(),e.translate(325,325),e.scale(O,O),function(e,s){e.lineWidth=.01;for(let t=0;t<8;++t)for(let n=0;n<32;++n)s[32*t+n]&&(e.save(),e.translate((n+.5)/32,t/8),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1/8),e.stroke(),e.restore());e.fillStyle="rgba(255, 255, 255, 0.8)",_(e,1,1,1,((e,s)=>e.fill(s))),e.lineWidth=6,_(e,1,1,1,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(650,0),e.scale(O,O),function(e,s){e.save(),e.translate(.484,.516),e.fillStyle="black";let t=.484;for(let n=0,a=s.length;n<a;n++)t-=.5/a*.75/(4*t),e.rotate(2*Math.PI/a*8/(4*t)),e.save(),e.translate(0,-t),e.beginPath(),e.arc(0,0,s[n]?.016:.008,0,2*Math.PI),e.fillStyle=s[n]?"black":"#e6007a",e.fill(),e.restore();e.restore(),e.lineWidth=10,_(e,.984,1.016,.44,((e,s)=>e.stroke(s)))}(e,t),e.restore(),e.save(),e.translate(650,325),e.scale(O,O),function(e,s){const t=B(s,[128,128]);for(let s=0;s<t.length;++s)V(e,.5-.072*(s+.5),t[s],((e,s)=>{s&&(e.beginPath(),e.moveTo(0,-.036),e.lineTo(0,.036),e.lineWidth=.01,e.stroke())}));e.lineWidth=6,_(e,1,1,.7,((e,s)=>e.stroke(s)))}(e,t),e.restore()}(s,e)}})),l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"pen-nib",onClick:d}),c&&(0,n.jsx)(i.u_,{header:s("design samples"),onClose:d,size:"large",children:(0,n.jsx)(i.u_.Content,{children:(0,n.jsx)("canvas",{height:625,ref:o,style:R,width:950})})})]}):null})),$=i.zo.tr`
  .payoutExpander {
    .payout+.payout {
      margin-top: 0.5rem;
    }

    .ui--Columar {
      flex-wrap: unset;

      .ui--Column {
        min-width: 15ch;

        &:first-child {
          max-width: 100% !important;
        }

        &:last-child {
          min-width: 15ch;
          max-width: 15ch;
          white-space: nowrap;
        }
      }
    }
  }
`,L=a.memo((function({bestNumber:e,className:s="",value:{accountId:t,isCandidateVoter:o,isDefenderVoter:l,isFounder:c,isHead:d,isSkeptic:u,isSuspended:m,isWarned:h,key:x,payouts:f,strikes:b}}){const{t:j}=p(),{api:v}=(0,r.h)(),{allAccounts:y}=(0,g.x)(),w=(0,a.useCallback)((()=>e&&f&&function(e,s){return s.map((([s,t],a)=>(0,n.jsx)("div",{className:"payout",children:(0,n.jsxs)(i.P0,{children:[(0,n.jsx)(i.P0.Column,{children:(0,n.jsx)(D.Z,{value:t})}),(0,n.jsxs)(i.P0.Column,{children:[(0,n.jsxs)("div",{children:["#",(0,F.u)(s)]}),s.gt(e)&&(0,n.jsx)(T.Z,{value:s.sub(e)},a)]})]})},a)))}(e,f)),[e,f]),k=(0,a.useMemo)((()=>y.some((e=>e===x))),[y,x]),C=(0,a.useMemo)((()=>e&&f.find((([s])=>e.gt(s)))),[e,f]),N=(0,a.useMemo)((()=>[o&&j("Candidate"),l&&j("Defender")].filter((e=>!!e)).join(", ")),[o,l,j]);return(0,n.jsxs)($,{className:s,children:[(0,n.jsxs)("td",{className:"address relative all",children:[(0,n.jsx)(i.N,{value:t}),(0,n.jsxs)("div",{className:"absolute",children:[(o||l)&&(0,n.jsx)(i.Vp,{color:"blue",label:j("voted")}),h&&(0,n.jsx)(i.Vp,{color:"orange",label:j("strikes")}),d&&(0,n.jsx)(i.Vp,{color:"green",label:j("society head")}),c&&(0,n.jsx)(i.Vp,{color:"green",label:j("founder")}),u&&(0,n.jsx)(i.Vp,{color:"yellow",label:j("skeptic")}),m&&(0,n.jsx)(i.Vp,{color:"red",label:j("suspended")}),C&&(0,n.jsx)(i.Vp,{color:"grey",label:j("payout")})]})]}),(0,n.jsxs)("td",{className:"number together",children:[!!f?.length&&(0,n.jsx)(i.xH,{className:"payoutExpander",renderChildren:w,summary:j("Payouts ({{count}})",{replace:{count:(0,F.u)(f.length)}})}),k&&C&&(0,n.jsx)(i.cA,{accountId:t,icon:"ellipsis-h",label:"Payout",params:[],tx:v.tx.society.payout})]}),(0,n.jsx)("td",{className:"together",children:N}),(0,n.jsx)("td",{className:"number",children:(0,F.u)(b)}),(0,n.jsx)("td",{className:"button start",children:(0,n.jsx)(Z,{accountId:t})})]})})),z=a.memo((function({className:e="",mapMembers:s}){const{t}=p(),o=(0,M.C)(),r=(0,a.useRef)([[t("members"),"start",2],[t("voted on"),"start"],[t("strikes")],[]]);return(0,n.jsx)(i.iA,{className:e,empty:s&&t("No active members"),header:r.current,children:s?.map((e=>(0,n.jsx)(L,{bestNumber:o,value:e},e.key)))})})),W=(0,i.zo)(i.Ty)`
  .society--header--account {
    white-space: nowrap;

    .ui--AccountName {
      display: inline-block;
    }

    .ui--IdentityIcon {
      margin-right: 0.5rem;
    }
  }
`,H=a.memo((function({className:e="",info:s,payoutTotal:t}){const{t:o}=p(),{api:c}=(0,r.h)(),d=(0,l.W7)(c.derive.society.members),u=(0,M.C)(),m=(0,a.useMemo)((()=>s&&s.pot.gtn(0)?s.pot:null),[s]);return(0,n.jsxs)(W,{className:e,children:[(0,n.jsx)("section",{className:"media--1100",children:s&&d&&(0,n.jsxs)(i.Jy,{label:o("members"),children:[d.length," / ",s.maxMembers?.toString()]})}),u&&(0,n.jsxs)(n.Fragment,{children:[c.consts.society.rotationPeriod&&(0,n.jsx)("section",{children:(0,n.jsx)(i.Jy,{label:o("rotation"),progress:{total:c.consts.society.rotationPeriod,value:u.mod(c.consts.society.rotationPeriod),withTime:!0}})}),(0,n.jsx)("section",{className:"media--1200",children:(0,n.jsx)(i.Jy,{label:o("challenge"),progress:{total:c.consts.society.challengePeriod,value:u.mod(c.consts.society.challengePeriod),withTime:!0}})})]}),(0,n.jsxs)("section",{children:[t&&(0,n.jsx)(i.Jy,{label:o("payouts"),children:(0,n.jsx)(D.Z,{value:t,withSi:!0})}),m&&(0,n.jsx)(i.Jy,{label:o("pot"),children:(0,n.jsx)(D.Z,{value:m,withSi:!0})})]})]})})),U=i.zo.div`
  .overviewSection {
    margin-bottom: 1.5rem;
  }
`,J=a.memo((function({className:e,info:s,isMember:t,mapMembers:a,ownMembers:o,payoutTotal:i}){return(0,n.jsxs)(U,{className:e,children:[(0,n.jsx)(H,{info:s,payoutTotal:i}),(0,n.jsx)(E,{info:s,isMember:t,ownMembers:o}),(0,n.jsx)(z,{mapMembers:a})]})})),G=a.memo((function({balance:e,bid:s,value:t}){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:t})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)(b,{value:s})}),(0,n.jsx)(i.iA.Column.Balance,{value:e})]})})),Q={transform:e=>e.filter((([{args:[e]},s])=>s.isSome&&e)).map((([{args:[e]},s])=>{const[t,n]=s.unwrap();return{accountId:e,balance:t,bid:n}})).sort(((e,s)=>e.balance.cmp(s.balance)))},X={transform:e=>e.map((({args:[e]})=>e)).filter((e=>!!e))},K=a.memo((function({className:e}){const{t:s}=p(),{api:t}=(0,r.h)(),o=(0,l.W7)(t.query.society.suspendedCandidates?.entries,void 0,Q)??[],c=(0,l.W7)(t.query.society.suspendedMembers.keys,void 0,X),d=(0,a.useRef)({candidates:[[s("candidates"),"start"],[s("bid kind"),"start"],[s("value")]],members:[[s("members"),"start",3]]});return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(i.iA,{className:e,empty:c&&s("No suspended members"),header:d.current.members,children:c?.map((e=>(0,n.jsx)(G,{value:e},e.toString())))}),(0,n.jsx)(i.iA,{className:e,empty:o&&s("No suspended candidates"),header:d.current.candidates,children:o?.map((({accountId:e,balance:s,bid:t})=>(0,n.jsx)(G,{balance:s,bid:t,value:e},e.toString())))})]})}));var Y=t(58900),ee=t(11677);const se={allMembers:[],isMember:!1,ownMembers:[]},te=(0,ee.e)("useMembers",(function(){const{api:e}=(0,r.h)(),{allAccounts:s}=(0,g.x)(),[t,n]=(0,a.useState)(se),o=(0,l.W7)(e.derive.society.members);return(0,a.useEffect)((()=>{s&&o&&n(function(e,s){const t=s.filter((({isSuspended:e})=>!e)).map((({accountId:e})=>e.toString())),n=t.filter((s=>e.includes(s)));return{allMembers:t,isMember:0!==n.length,ownMembers:n}}(s,o))}),[s,o]),t}));var ne=t(24305);const ae={},oe=(0,ee.e)("useVoters",(function(){const{api:e}=(0,r.h)(),s=(0,ne.b)([e.events.society.Vote]),t=(0,l.W7)(e.derive.society.candidates),[n,o]=(0,a.useState)(ae);return(0,a.useEffect)((()=>{s&&t&&async function(e,s){const t=[],n=[];return(s.length?await Promise.all(s.map((({accountId:s})=>e.query.society.votes.entries(s)))):[]).forEach((e=>{e.forEach((([{args:[,e]},s])=>{if(s.isSome){const a=e.toString();s.unwrap().isSkeptic?!t.includes(a)&&t.push(a):!n.includes(a)&&n.push(a)}}))})),{candidates:s,skeptics:t,voters:n}}(e,t).then(o).catch(console.error)}),[e,t,s]),n}));function ie(e,s){const t=e.isCandidateVoter||e.isDefenderVoter;return e.isHead!==s.isHead?e.isHead?-1:1:e.isFounder!==s.isFounder?e.isFounder?-1:1:e.isSkeptic!==s.isSkeptic?e.isSkeptic?-1:1:t!==(s.isCandidateVoter||s.isDefenderVoter)?t?-1:1:e.isSuspended!==s.isSuspended?e.isSuspended?-1:1:e.isWarned!==s.isWarned?e.isWarned?-1:1:s.strikes.cmp(e.strikes)||s.payouts.length-e.payouts.length}const re=a.memo((function({basePath:e,className:s}){const{t}=p(),{api:c}=(0,r.h)(),m=(0,Y.Z)(),{allMembers:h,isMember:x,ownMembers:g}=te(),f=(0,l.W7)(c.derive.society.info),b=(0,l.W7)(c.derive.society.members),{candidates:j,skeptics:v,voters:y}=oe(),[w,k]=(0,a.useMemo)((()=>b&&f&&v&&y?function(e,s,t,{defender:n,founder:a,hasDefender:o,head:i},r){const l=e.filter((e=>!o||!e.accountId.eq(n))).map((({accountId:e,isDefenderVoter:n,isSuspended:o,payouts:l,strikes:c})=>{const d=e.toString();return{accountId:e,isCandidateVoter:t.includes(d),isDefenderVoter:n,isFounder:!!a?.eq(e),isHead:!!i?.eq(e),isSkeptic:s.includes(d),isSuspended:o,isWarned:!o&&c.gt(r),key:d,payouts:l,strikes:c}})).sort(ie);return[l,l.reduce(((e,{payouts:s})=>s.reduce(((e,[,s])=>e.iadd(s)),e)),new(d())(0))]}(b,v,y,f,(c.consts.society.graceStrikes||c.consts.society.maxStrikes).mul(u.um).div(u.Jo)):[void 0,void 0]),[c,f,b,v,y]),C=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{count:m,name:"candidates",text:t("Candidates")},{name:"suspended",text:t("Suspended")}]),[m,t]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,items:C}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(S,{allMembers:h,candidates:j,isMember:x,ownMembers:g}),path:"candidates"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(K,{}),path:"suspended"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(J,{info:f,isMember:x,mapMembers:w,ownMembers:g,payoutTotal:k}),index:!0})]})})]})}))},58900:(e,s,t)=>{t.d(s,{Z:()=>o});var n=t(90778),a=t(9118);const o=(0,t(11677).e)("useCounter",(function(){const{api:e}=(0,n.h)(),s=(0,a.W7)(e.query.society?.candidates);return s?.length||0}))},36386:(e,s,t)=>{t.d(s,{Z:()=>Hs});var n=t(52322),a=t(2784),o=t(68235),i=t(46257),r=t(73557),l=t(90778),c=t(4952),d=t(39857),u=t(98202),m=t(14681),h=t(61349);function p(){return(0,h.$G)("app-staking-async")}const x=o.zo.section`
  margin-block: 1rem;
  overflow: auto;
  white-space: nowrap;

  .warning {
    max-width: fit-content;
    margin-left: 0;
  }

  .ui--Labelled-content {
    font-size: var(--font-size-h3);
    font-weight: var(--font-weight-normal);
  }

  .assethub__chain {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    place-items: start;
    background: var(--bg-table);
    margin-bottom: 0.35rem;
    padding: 0.8rem 1rem;
    border-radius: 0.5rem;

    .details {
      display: flex;
      align-items: center;
      gap: 0.8rem;

      .session__summary {
        display: flex;
        align-items: center;

        h4 {
          font-weight: 400;
          font-size: medium;
        }
      }

      .staking__summary {
        display: flex;
        justify-content: end;
      }

      .multiblock__summary, .rcClient__summary {
        display: flex;
        justify-content: end;
        margin-top: 1.5rem;
      }
    }

    .events__summary {
      display: grid;
      gap: 1rem;
      justify-self: center;
      h3 {
        font-weight: 500;
        font-size: var(--font-size-h2);
      }
      .warning__tooltip {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
    }
  }
`,g=a.memo((function({ahApi:e,ahOutput:s,ahUrl:t,children:a,isRelayChain:i}){const{t:r}=p();return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{style:{alignItems:"center",display:"flex",textTransform:"capitalize"},children:[r("Asset Hub chain"),a]}),!e&&(0,n.jsx)(o.$j,{label:"Connecting to Asset Hub"}),(0,n.jsx)(x,{children:s.map((e=>{const s=Array.from(new Set(e.multiblock.snapshotRange.map((e=>Number(e.toString()))))).sort(((e,s)=>e-s)),[a,l]=[s[0],s[s.length-1]];return(0,n.jsxs)("div",{className:"assethub__chain",children:[(0,n.jsxs)("div",{className:"details",children:[(0,n.jsx)("div",{className:"session__summary",children:(0,n.jsx)("h4",{className:"--digits",children:i?(0,n.jsxs)(d.rU,{target:"_blank",to:`${window.location.origin}/?rpc=${t}#/explorer/query/${e.finalizedBlock}`,children:["#",(0,m.u)(e.finalizedBlock)]}):(0,n.jsxs)(d.rU,{to:`/explorer/query/${e.finalizedBlock}`,children:["#",(0,m.u)(e.finalizedBlock)]})})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"staking__summary",children:[(0,n.jsx)(o.Jy,{label:r("current era"),children:e.staking.currentEra}),(0,n.jsx)(o.Jy,{label:r("Relay Session Index"),children:e.staking.erasStartSessionIndex}),(0,n.jsx)(o.Jy,{label:r("Relay Active Era Index"),children:e.staking.activeEra.index})]}),(0,n.jsxs)("div",{className:"multiblock__summary",children:[(0,n.jsx)(o.Jy,{label:r("multiblock phase"),children:e.multiblock.phase}),e.multiblock.queuedScore&&(0,n.jsx)(o.Jy,{label:r("multiblock queued score"),children:e.multiblock.queuedScore}),(0,n.jsx)(o.Jy,{label:r("signed submissions"),children:e.multiblock.signedSubmissions}),!!e.multiblock.snapshotRange.length&&(0,n.jsx)(o.Jy,{label:r("snapshot range"),children:`${a} → ${l}`})]}),(0,n.jsx)("div",{className:"rcClient__summary",children:(0,n.jsx)(o.Jy,{label:r("Last Session Report End Index"),children:e.rcClient.lastSessionReportEndIndex})})]})]}),(0,n.jsxs)("div",{className:"events__summary",children:[(0,n.jsx)("h3",{children:r("events")}),e.events.map((e=>{const s=`${e.section}.${e.method}`;return(0,n.jsx)(o.xH,{isLeft:!0,summary:s,summaryMeta:e.meta,children:(0,n.jsx)(u.Z,{className:"details",eventName:s,value:e,withExpander:!0})},e.index.toString())})),0===e.events.length&&(0,n.jsxs)("div",{className:"warning__tooltip",children:[(0,n.jsx)(o.Pd,{content:r("No events available")}),(0,n.jsx)(o.JO,{icon:"info-circle",tooltip:`${e.finalizedBlock}-ah-no-events`}),(0,n.jsx)(o.u,{text:"No relevant events found for multiBlockElection, multiBlockElectionVerifier, multiBlockElectionUnsigned, stakingRcClient or staking in the current block.",trigger:`${e.finalizedBlock}-ah-no-events`})]})]})]},e.finalizedBlock)}))})]})})),f=o.zo.section`
  margin-block: 1rem;
  overflow: auto;

  .warning {
    max-width: fit-content;
    margin-left: 0;
  }

  .ui--Labelled-content {
    font-size: var(--font-size-h3);
    font-weight: var(--font-weight-normal);
  }

  .warning__tooltip {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .relay__chain {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    background: var(--bg-table);
    margin-bottom: 0.35rem;
    padding: 0.8rem 1rem;
    border-radius: 0.5rem;

    .details {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;

      .session__summary {
        display: flex;
        align-items: center;

        h4 {
          font-weight: 400;
          font-size: medium;
        }
      }

      .stakingAhClient__summary {
        .stakingAhClient__hasQueuedInClient {
          display: flex;
          justify-content: space-evenly;
        }
      }
    }

    .events__summary {
      justify-self: center;
      h3 {
        font-weight: 500;
        font-size: var(--font-size-h2);
      }
    }
  }
`,b=a.memo((function({children:e,isRelayChain:s,rcApi:t,rcOutput:a,rcUrl:i}){const{t:r}=p();return(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{style:{alignItems:"center",display:"flex",textTransform:"capitalize"},children:[r("Relay chain"),e]}),!t&&(0,n.jsx)(o.$j,{label:"Connecting to Relay chain"}),(0,n.jsx)(f,{children:a.map((e=>(0,n.jsxs)("div",{className:"relay__chain",children:[(0,n.jsxs)("div",{className:"details",children:[(0,n.jsxs)("div",{className:"session__summary",children:[(0,n.jsx)("h4",{className:"--digits",children:s?(0,n.jsxs)(d.rU,{to:`/explorer/query/${e.finalizedBlock}`,children:["#",(0,m.u)(e.finalizedBlock)]}):(0,n.jsxs)(d.rU,{target:"_blank",to:`${window.location.origin}/?rpc=${i}#/explorer/query/${e.finalizedBlock}`,children:["#",(0,m.u)(e.finalizedBlock)]})}),(0,n.jsxs)(o.Jy,{label:r("session"),children:["#",(0,m.u)(e.session.index)]}),e.session.historicalRange&&(0,n.jsx)(o.Jy,{label:r("historical range"),children:`${e.session.historicalRange?.[0]} → ${e.session.historicalRange?.[1]}`})]}),(0,n.jsx)("div",{className:"stakingAhClient__summary",children:e.stakingAhClient.hasQueuedInClient&&(0,n.jsxs)("div",{className:"stakingAhClient__hasQueuedInClient",children:[(0,n.jsx)(o.Pd,{content:r("There is a validator set queued in ah-client.")}),(0,n.jsx)(o.Jy,{label:r("id"),children:e.stakingAhClient.hasQueuedInClient[0]}),(0,n.jsx)(o.Jy,{label:r("number of validators"),children:e.stakingAhClient.hasQueuedInClient[1].length})]})})]}),(0,n.jsxs)("div",{className:"events__summary",children:[(0,n.jsx)("h3",{children:r("events")}),e.events.map((e=>{const s=`${e.section}.${e.method}`;return(0,n.jsx)(o.xH,{isLeft:!0,summary:s,summaryMeta:e.meta,children:(0,n.jsx)(u.Z,{className:"details",eventName:s,value:e,withExpander:!0})},e.index.toString())})),0===e.events.length&&(0,n.jsxs)("div",{className:"warning__tooltip",children:[(0,n.jsx)(o.Pd,{content:r("No events available")}),(0,n.jsx)(o.JO,{icon:"info-circle",tooltip:`${e.finalizedBlock}-rc-no-events`}),(0,n.jsx)(o.u,{text:"No relevant events found for stakingAhClient, session, or historical in the current block.",trigger:`${e.finalizedBlock}-rc-no-events`})]})]})]},e.finalizedBlock)))})]})})),j=o.zo.div`
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;

  .dropdown {
    min-width: max-content !important;
  }
  
  @media screen and (max-width: 1200px){
    grid-template-columns: repeat(1, 1fr);
  }

  .ui--Spinner {
    margin-top: 4rem;
  }

  .ui {
    margin-left: 0.5rem !important;
    width: 20rem !important;
  }
`,v=a.memo((function({ahApi:e,ahEndPoints:s,isRelayChain:t,rcApi:i,rcEndPoints:r}){const{api:d,apiUrl:u}=(0,l.h)(),[m,h]=(0,a.useState)([]),[p,x]=(0,a.useState)([]),[f,v]=(0,a.useState)(void 0),[y,w]=(0,a.useState)(void 0),[k,C]=(0,a.useState)(e),[N,I]=(0,a.useState)(i),S=(0,a.useRef)(r.map((e=>({text:e,value:e})))),A=(0,a.useRef)(s.map((e=>({text:e,value:e})))),P=(0,a.useCallback)((e=>{e!==y&&(k?.disconnect().catch(console.log),w(e))}),[k,y]),E=(0,a.useCallback)((e=>{e!==f&&(N?.disconnect().catch(console.log),v(e))}),[N,f]);return(0,a.useEffect)((()=>{if(t){v(u);const e=s.at(Math.floor(Math.random()*s.length));w(e)}else{w(u);const e=r.at(Math.floor(Math.random()*r.length));v(e)}}),[s,u,t,r]),(0,a.useEffect)((()=>{I(void 0),C(void 0),h([]),x([]),t?(I(d),y&&(0,c.ac)(y).then((e=>C(e))).catch(console.log)):d.tx.staking&&d.tx.stakingRcClient&&(C(d),f&&(0,c.ac)(f).then((e=>I(e))).catch(console.log))}),[y,d,t,f]),(0,a.useEffect)((()=>{k&&N&&(async(e,s,t,n)=>{await e.rpc.chain.subscribeFinalizedHeads((async s=>{const n=await e.query.session.currentIndex(),a=await e.query.session.queuedChanged(),o=await e.query.historical.storedRange(),i=await e.query.stakingAhClient.validatorSet(),r=await e.query.stakingAhClient.nextSessionChangesValidators(),l=await e.query.stakingAhClient.mode(),c=(await(await e.at(s.hash.toHex())).query.system.events()).map((e=>e.event)).filter((e=>(e=>"stakingAhClient"===e.section)(e.data)||(e=>"session"===e.section||"historical"===e.section)(e.data)));t((t=>[{events:c,finalizedBlock:s.number.toNumber(),session:{hasQueuedInSession:a.isTrue,historicalRange:o.isSome?[o.unwrap()[0].toNumber(),o.unwrap()[1].toNumber()]:void 0,index:n.toNumber()},stakingAhClient:{hasNextActiveId:r.isEmpty?void 0:e.createType("Option<u32>",r).unwrap().toNumber(),hasQueuedInClient:(()=>{const s=e.createType("Option<(u32,Vec<AccountId32>)>",i);return s.isNone?void 0:[s.unwrap()[0].toNumber(),s.unwrap()[1]]})(),mode:l.toString()}},...t].reduce(((e,s)=>(e.find((e=>e.finalizedBlock===s.finalizedBlock))||e.push(s),e)),[]).slice(0,25)))})),await s.rpc.chain.subscribeFinalizedHeads((async t=>{const a=await e.query.session.currentIndex(),o=(await s.query.staking.activeEra()).unwrap(),i=await s.query.staking.bondedEras(),r=i.find((([e])=>e.eq(o.index)))?.[1],l=await s.query.multiBlockElection.currentPhase(),c=await s.query.multiBlockElection.round(),d=(await s.query.multiBlockElection.pagedVoterSnapshotHash.entries()).map((([e])=>e.args[1])).sort(),u=await s.query.multiBlockElectionVerifier.queuedSolutionScore(c),m=await s.query.multiBlockElectionSigned.sortedScores(c),h=await s.query.stakingRcClient.lastSessionReportEndingIndex(),p=(await(await s.at(t.hash.toHex())).query.system.events()).map((e=>e.event)).filter((e=>(e=>"multiBlockElection"===e.section||"multiBlockElectionVerifier"===e.section||"multiBlockElectionSigned"===e.section||"multiBlockElectionUnsigned"===e.section)(e.data)||(e=>"stakingRcClient"===e.section)(e.data)||(e=>"staking"===e.section&&("EraPaid"===e.method||"SessionRotated"===e.method||"PagedElectionProceeded"===e.method))(e.data)));n((e=>{const n=s.createType("Option<SpNposElectionsElectionScore>",u);return[{events:p,finalizedBlock:t.number.toNumber(),multiblock:{phase:l.toString(),queuedScore:n.isSome?n.unwrap().toString():null,round:s.createType("u32",c).toNumber(),signedSubmissions:s.createType("Vec<(AccountId32,SpNposElectionsElectionScore)>",m).length,snapshotRange:d.map((e=>e.toString()))},rcClient:{lastSessionReportEndIndex:h.toString()},staking:{activeEra:{index:o.index.toNumber(),start:o.toString()},bondedEras:i,currentEra:a.toNumber(),erasStartSessionIndex:r?.toNumber()}},...e].reduce(((e,s)=>(e.find((e=>e.finalizedBlock===s.finalizedBlock))||e.push(s),e)),[]).slice(0,25)}))}))})(N,k,h,x).catch(console.log)}),[k,N]),(0,n.jsxs)(j,{children:[(0,n.jsx)(b,{isRelayChain:!!t,rcApi:N,rcOutput:m,rcUrl:f||"",children:(0,n.jsx)(o.Lt,{defaultValue:f,isButton:!0,isDisabled:!!t,onChange:E,options:S.current})}),(0,n.jsx)(g,{ahApi:k,ahOutput:p,ahUrl:y||"",isRelayChain:!!t,children:(0,n.jsx)(o.Lt,{defaultValue:y,isButton:!0,isDisabled:!t,onChange:P,options:A.current})})]})})),y=a.memo((function({ahApi:e,ahEndPoints:s,basePath:t,isRelayChain:i,rcApi:l,rcEndPoints:c}){const{t:d}=p(),u=(0,a.useMemo)((()=>[{isRoot:!0,name:"command-center",text:d("Command Center")}]),[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.mQ,{basePath:t,items:u}),(0,n.jsx)(r.Z5,{children:(0,n.jsx)(r.AW,{path:t,children:(0,n.jsx)(r.AW,{element:(0,n.jsx)(v,{ahApi:e,ahEndPoints:s,isRelayChain:i,rcApi:l,rcEndPoints:c}),index:!0})})})]})}));var w=t(64765),k=t(26939),C=t(74683),N=t(94345),I=t(19623),S=t(125),A=t(27877),P=t(75030),E=t(65857),M=t(54131),D=t(34814),T=t(12213),F=t(43223),q=t(54890),O=t(9118),_=t(33661),V=t(568),B=t(58607),R=t(48801),Z=t.n(R),$=t(95292),L=t(86135),z=t(38894),W=t(11677);const H={transform:e=>e.isNone?0:e.unwrap().prior.length+1},U=(0,W.e)("useSlashingSpans",(function(e){const{api:s}=(0,l.h)();return(0,O.W7)(s.query.staking.slashingSpans,[e],H)||0}));var J=t(36609),G=t(92730);function Q(e){let s=(e.mul($.D_).div($.aP.pow(new(Z())(G.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);for(;1!==s.length&&[".","0"].includes(s[s.length-1]);){const e=s.endsWith(".");if(s=s.substring(0,s.length-1),e)break}return s}const X=a.memo((function({currentAmount:e,isNominating:s,minNominated:t,minNominatorBond:i,minValidatorBond:r,onError:c,stashId:d,value:u}){const{t:m}=p(),{api:h}=(0,l.h)(),x=(0,O.W7)(h.derive.balances?.all,[d]),[{error:g,warning:f},b]=(0,a.useState)({error:null,warning:null});return(0,a.useEffect)((()=>{if(x&&u){const n=u.add(e||$.nw),a=h.consts.balances.existentialDeposit,o=x.freeBalance.sub(a.divn(2));let l=null,d=null;n.gte(o)?d=m("The specified value is large and may not allow enough funds to pay future transaction fees."):n.lt(a)?l=m("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:Q(a)}}):s?i&&n.lt(i)?l=m("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,G.a)(i)}}):t&&n.lt(t)&&(d=m("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,G.a)(t)}})):r&&n.lt(r)&&(l=m("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,G.a)(r)}})),b((e=>{const s=e.error!==l?l:e.error,t=e.warning!==d?d:e.warning;return c(s||t?{error:s,warning:t}:null),{error:s,warning:t}}))}}),[h,e,s,t,i,r,c,x,m,u]),g?(0,n.jsx)(o.oy,{content:g}):f?(0,n.jsx)(o.Pd,{content:f}):null})),K=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:i}){const{t:r}=p(),{api:c}=(0,l.h)(),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(),x=(0,O.W7)(c.derive.balances?.all,[i]),g=(0,a.useMemo)((()=>t?.stakingLedger?.active?.unwrap()),[t]),f=(0,a.useMemo)((()=>function(e,s,t){if(s?.stakingLedger&&t){const n=(s.unlocking||[]).reduce(((e,{value:s})=>e.iadd(s)),new(Z())(0)),a=s.redeemable||$.nw,o=t.freeBalance.sub(s.stakingLedger.active?.unwrap()||$.nw).sub(n).sub(a);return o.gt(e.consts.balances.existentialDeposit)?o.sub(e.consts.balances.existentialDeposit):$.nw}return null}(c,t,x)),[c,t,x]);return(0,n.jsxs)(o.u_,{header:r("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:r("Since this transaction deals with funding, the stash account will be used."),children:(0,n.jsx)(o.rp,{defaultValue:i,isDisabled:!0,label:r("stash account")})}),f&&(0,n.jsxs)(o.u_.Columns,{hint:r("The amount placed at-stake should allow some free funds for future transactions."),children:[(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:f,isError:!!d?.error||!m||m.isZero(),label:r("additional funds to bond"),labelExtra:(0,n.jsx)(J.Z,{label:(0,n.jsx)("span",{className:"label",children:r("balance")}),params:i}),onChange:h}),(0,n.jsx)(X,{controllerId:e,currentAmount:g,onError:u,stashId:i,value:m})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:i,icon:"sign-in-alt",isDisabled:!m?.gt($.nw)||!!d?.error,label:r("Bond more"),onStart:s,params:[m],tx:c.tx.staking.bondExtra})})]})}));var Y=t(69187),ee=t(48731),se=t(55858),te=t(6851),ne=t(46186);const ae={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]},oe=a.memo((function({onClose:e}){const{t:s}=p(),{queueRpc:t}=(0,L.L)(),[i,r]=(0,a.useState)("sr25519"),[l,c]=(0,a.useState)("0x"),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)("babe"),x=(0,a.useRef)([{text:s("Aura"),value:"aura"},{text:s("Babe"),value:"babe"},{text:s("Grandpa"),value:"gran"},{text:s("I'm Online"),value:"imon"},{text:s("Parachains"),value:"para"}]);(0,a.useEffect)((()=>{r(ae[m][0])}),[m]),(0,a.useEffect)((()=>{try{const{phrase:e}=(0,te.Q)(d);(0,ee.hu)((0,ne.S)(e),"Invalid mnemonic phrase"),c((0,se.c)(Y.Nn.createFromUri(d,{},i).publicKey))}catch{c("0x")}}),[i,d]);const g=(0,a.useCallback)((()=>t({rpc:{method:"insertKey",section:"author"},values:[m,d,l]})),[m,l,t,d]),f=(0,a.useMemo)((()=>ae[m].map((e=>({text:s("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e})))),[m,s]);return(0,n.jsxs)(o.u_,{header:s("Inject Keys"),onClose:e,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{children:(0,n.jsx)(o.Pd,{content:s("This operation will be performed on the relay chain.")})}),(0,n.jsxs)(o.u_.Columns,{hint:s("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks."),children:[(0,n.jsx)(o.II,{autoFocus:!0,isError:66!==l.length,label:s("suri (seed & derivation)"),onChange:u,value:d}),(0,n.jsx)(o.Pd,{content:s("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]}),(0,n.jsxs)(o.u_.Columns,{hint:s("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys."),children:[(0,n.jsx)(o.Lt,{label:s("key type to set"),onChange:h,options:x.current,value:m}),(0,n.jsx)(o.Lt,{isDisabled:1===f.length,label:s("crypto type to use"),onChange:r,options:f,value:i})]}),(0,n.jsx)(o.u_.Columns,{hint:s("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used."),children:(0,n.jsx)(o.II,{isDisabled:!0,label:s("generated public key"),value:l})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.zx,{icon:"sign-in-alt",label:s("Submit key"),onClick:g})})]})})),ie=a.memo((function({className:e="",controllerId:s,stashId:t}){const{t:a}=p();if(!t||!s)return null;const i=t!==s;return(0,n.jsxs)(o.u_.Columns,{className:e,hint:a(i?"The stash that is to be affected. The transaction will be sent from the associated controller account.":"The stash that is to be affected."),children:[(0,n.jsx)(o.rp,{defaultValue:t,isDisabled:!0,label:a("stash account")}),i&&(0,n.jsx)(o.rp,{defaultValue:s,isDisabled:!0,label:a("controller account")})]})})),re={withExposure:!0},le=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:i,stashId:r}){const{t:c}=p(),{api:d}=(0,l.h)(),[u,m]=(0,a.useState)([]),[{kickTx:h},x]=(0,a.useState)({}),g=(0,O.W7)(d.derive.staking.query,[r,re]),f=(0,a.useMemo)((()=>g?.exposurePaged.isSome&&g?.exposurePaged.unwrap().others.map((({who:e})=>e.toString()))),[g]);return(0,a.useEffect)((()=>{try{x({kickTx:u.length?d.tx.staking.kick(u):null})}catch{x({kickTx:null})}}),[d,u]),(0,n.jsxs)(o.u_,{className:e,header:c("Remove nominees"),onClose:i,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ie,{controllerId:s,stashId:r}),f?(0,n.jsx)(o.m3,{available:f,availableLabel:c("existing/active nominators"),defaultValue:t,maxCount:128,onChange:m,valueLabel:c("nominators to be removed")}):(0,n.jsx)(o.$j,{label:c("Retrieving active nominators")})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:s,extrinsic:h,icon:"user-slash",isDisabled:!h,label:c("Remove"),onStart:i})})]})}));var ce=t(3871),de=t(74065);const ue=(0,W.e)("useInactives",(function(e,s){const{api:t}=(0,l.h)(),n=(0,de.X)(),[o,i]=(0,a.useState)({}),[r,c]=(0,a.useState)(),[d,u]=(0,a.useState)([]),m=(0,O.W7)(t.derive.session?.indexes),h=(0,O.W7)(t.query.staking.palletVersion)?.toNumber(),p=(0,O.W7)(m&&t.derive.staking.eraExposure,[m?.activeEra]);return(0,a.useEffect)((()=>{let a;return n.current&&s?.length&&e&&m&&t.queryMulti([[t.query.staking.nominators,e],[t.query.staking.unappliedSlashes,[m.activeEra,null]]],(([e,t])=>{e.isSome&&c(e.unwrap().submittedIn);const n=new Set;if(t.isSome)for(const e of t.unwrap())n.add(e.validator.toString());const a=s.filter((e=>n.has(e)));u(a)})).then((e=>{a=e})).catch(console.error),()=>{a&&a()}}),[t,n,s,e,m]),(0,a.useEffect)((()=>{if(p&&s?.length&&r&&h&&m){const a=s.map((e=>({exposure:p.validators[e],nomineeId:e})));n.current&&i(function(e){const{activeEra:s,activeValidators:t,api:n,nominationsInfo:a,stashId:o,submittedIn:i,unappliedSlashes:r}=e,l=n.consts.staking?.maxNominatorRewardedPerValidator||new(Z())(512),c=new Set(r),d=[],u=[];for(const{exposure:e,nomineeId:s}of a)e?.others.some((({who:e})=>e.eq(o)))?d.push(s):u.push(s);const m=a.map((({nomineeId:e})=>e)).filter((e=>c.has(e))),h=a.filter((({nomineeId:e})=>d.includes(e))).filter((({exposure:e})=>{const s=e?.others.sort(((e,s)=>s.value.unwrap().cmp(e.value.unwrap()))).slice(0,l.toNumber()).some((({who:e})=>e.eq(o)));return!s})).map((({nomineeId:e})=>e));if(i.eq(s))return{nomsActive:[],nomsAtRisk:m,nomsInactive:[],nomsOver:[],nomsWaiting:a.map((({nomineeId:e})=>e)).filter((e=>!c.has(e)))};const p=d.filter((e=>!c.has(e)&&!h.includes(e))),x=u.filter((e=>!t[e]&&!c.has(e)));return{nomsActive:p,nomsAtRisk:m,nomsInactive:u.filter((e=>!x.includes(e)&&!c.has(e))),nomsOver:h,nomsWaiting:x}}({activeEra:m.activeEra,activeValidators:p.validators,api:t,nominationsInfo:a,stashId:e,submittedIn:r,unappliedSlashes:d}))}}),[t,e,s,m,r,p,h,n,d]),o})),me={};function he(e,s=[],t){return s.length?[s.length,()=>{const a=function(e,s,t){if(!t?.validators)return me;const n={};return s.forEach((s=>{t.validators[s]?.others.some((t=>!(!t.who.eq(e)||!(0,ce.S)(t.value)||(n[s]=t.value.toBn(),0))))})),n}(e,s,t);return s.map(((e,s)=>(0,n.jsx)(o.ax,{balance:a[e],value:e,withBalance:!!t&&!!a[e]},s)))}]:null}const pe=a.memo((function({nominating:e,stashId:s}){const{t}=p(),{api:i}=(0,l.h)(),r=(0,O.W7)(i.query.staking&&i.derive.session?.indexes),c=(0,O.W7)(r&&i.derive.staking.eraExposure,[r?.activeEra]),{nomsActive:d,nomsAtRisk:u,nomsInactive:m,nomsOver:h,nomsWaiting:x}=ue(s,e),[g,f,b,j,v]=(0,a.useMemo)((()=>[he(s,d,c),he(s,u),he(s,m),he(s,h),he(s,x)]),[c,d,u,m,h,x,s]);return(0,a.useMemo)((()=>!c||!e||void 0===d),[c,e,d])?(0,n.jsx)(o.$j,{label:"Checking validators",variant:"app"}):(0,n.jsxs)(n.Fragment,{children:[j&&(0,n.jsx)(o.n0,{className:"stakeOver",renderChildren:j[1],summary:t("Oversubscribed nominations ({{count}})",{replace:{count:j[0]}})}),g&&(0,n.jsx)(o.n0,{renderChildren:g[1],summary:t("Active nominations ({{count}})",{replace:{count:g[0]}})}),b&&(0,n.jsx)(o.n0,{renderChildren:b[1],summary:t("Inactive nominations ({{count}})",{replace:{count:b[0]}})}),f&&(0,n.jsx)(o.n0,{renderChildren:f[1],summary:t("Renomination required ({{count}})",{replace:{count:f[0]}})}),v&&(0,n.jsx)(o.n0,{renderChildren:v[1],summary:t("Waiting nominations ({{count}})",{replace:{count:v[0]}})}),d&&m&&0===d.length&&0!==m.length&&(0,n.jsx)(o.Pd,{content:t("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]})}));var xe=t(83139);const ge=a.memo((function({className:e="",controllerId:s,poolId:t}){const{t:a}=p();return t&&s?(0,n.jsxs)(o.u_.Columns,{className:e,hint:a("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account."),children:[(0,n.jsx)(o.Rn,{defaultValue:t,isDisabled:!0,label:a("pool id")}),(0,n.jsx)(o.rp,{defaultValue:s,isDisabled:!0,label:a("member account")})]}):null})),fe=o.zo.div`
  article.warning {
    margin-top: 0;
  }

  .auto--toggle {
    margin: 0.5rem 0 0;
    text-align: right;
    width: 100%;
  }

  .ui--Static .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }

  .shortlist {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;

    .candidate {
      border: 1px solid #eee;
      border-radius: 0.25rem;
      margin: 0.25rem;
      padding-bottom: 0.25rem;
      padding-right: 0.5rem;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        border-color: transparent;
        border-style: solid;
        border-radius: 0.25em;
        border-width: 0.25em;
      }

      &.isAye {
        background: #fff;
        border-color: #ccc;
      }

      &.member::after {
        border-color: green;
      }

      &.runnerup::after {
        border-color: steelblue;
      }

      .ui--AddressMini-icon {
        z-index: 1;
      }

      .candidate-right {
        text-align: right;
      }
    }
  }
`,be=a.memo((function({className:e="",controllerId:s,nominating:t,onChange:i,poolId:r,stashId:c,targets:{nominateIds:d=[]},withSenders:u}){const{t:m}=p(),{api:h}=(0,l.h)(),[x]=(0,M.r)(xe.M),[g,f]=(0,a.useState)(t||[]),[b]=(0,a.useState)((()=>{const e=[...x.filter((e=>d.includes(e))),...(t||[]).filter((e=>!x.includes(e)))];return e.concat(...d.filter((s=>!e.includes(s))))}));(0,a.useEffect)((()=>{try{i({nominateTx:g?.length?r?h.tx.nominationPools.nominate(r,g):h.tx.staking.nominate(g):null})}catch{i({nominateTx:null})}}),[h,i,r,g]);const j=h.consts.staking.maxNominatorRewardedPerValidator?h.consts.staking.maxNominatorRewardedPerValidator.toNumber():h.consts.staking.maxNominations?h.consts.staking.maxNominations.toNumber():xe.E;return(0,n.jsxs)(fe,{className:e,children:[u&&(r?(0,n.jsx)(ge,{controllerId:s,poolId:r}):(0,n.jsx)(ie,{controllerId:s,stashId:c})),(0,n.jsxs)(o.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:m("Nominators can be selected manually from the list of all currently available validators.")}),(0,n.jsx)("p",{children:m("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]}),children:[(0,n.jsx)(o.m3,{available:b,availableLabel:m("candidate accounts"),defaultValue:t,maxCount:j,onChange:f,valueLabel:m("nominated accounts")}),(0,n.jsx)(o.Pd,{content:m("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]})]})})),je=(0,o.zo)(o.u_)`
  .nominatePartial {
    .ui--Static .ui--AddressMini .ui--AddressMini-info {
      max-width: 10rem;
      min-width: 10rem;
    }
  }
`,ve=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:i,poolId:r,stashId:l,targets:c}){const{t:d}=p(),[{nominateTx:u},m]=(0,a.useState)({});return(0,n.jsxs)(je,{className:e,header:d("Nominate Validators"),onClose:i,size:"large",children:[(0,n.jsx)(o.u_.Content,{children:(0,n.jsx)(be,{className:"nominatePartial",controllerId:s,nominating:t,onChange:m,poolId:r,stashId:l,targets:c,withSenders:!0})}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:s,extrinsic:u,icon:"hand-paper",isDisabled:!u,label:d("Nominate"),onStart:i})})]})})),ye=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:i}){const{t:r}=p(),{api:c}=(0,l.h)(),[d,u]=(0,a.useState)(),m=(0,a.useMemo)((()=>t?.unlocking?t.unlocking.reduce(((e,{value:s})=>e.iadd(s)),new(Z())(0)):$.nw),[t]);return(0,n.jsxs)(o.u_,{header:r("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ie,{controllerId:e,stashId:i}),m&&(0,n.jsx)(o.u_.Columns,{hint:r("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded"),children:(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:m,isError:!d||d.eqn(0)||d.gt(m),label:r("rebonded amount"),onChange:u})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!d||d.isZero()||!m||d.gt(m),label:r("Rebond"),onStart:s,params:[d],tx:c.tx.staking.rebond})})]})})),we={transform:e=>e.isSome?e.unwrap().toString():null},ke={transform:e=>e.isSome?e.unwrap().stash.toString():null},Ce=a.memo((function({accountId:e,controllerId:s,defaultController:t,onError:i}){const{t:r}=p(),{api:c}=(0,l.h)(),d=(0,O.W7)(s?c.query.staking.bonded:null,[s],we),u=(0,O.W7)(s?c.query.staking.ledger:null,[s],ke),m=(0,O.W7)(s?c.derive.balances?.all:null,[s]),[{error:h,isFatal:x},g]=(0,a.useState)({error:null,isFatal:!1});return(0,a.useEffect)((()=>{if(t!==s){let t=null,n=!1;d&&s!==e?(n=!0,t=r("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:d}})):u?(n=!0,t=r("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:u}})):m?.freeBalance.isZero()?(n=!0,t=r("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===e&&(t=r("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),i(t,n),g((e=>e.error!==t?{error:t,isFatal:n}:e))}}),[e,m,d,s,t,i,u,r]),h&&e?x?(0,n.jsx)(o.oy,{content:h}):(0,n.jsx)(o.Pd,{content:h}):null})),Ne=a.memo((function({defaultControllerId:e,onClose:s,stashId:t}){const{t:i}=p(),{api:r}=(0,l.h)(),[c,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),h=(0,a.useCallback)(((e,s)=>d(s)),[]),x=(0,a.useMemo)((()=>1===r.tx.staking.setController.meta.args.length),[r]);return(0,n.jsxs)(o.u_,{header:i("Change controller account"),onClose:s,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:i("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account."),children:(0,n.jsx)(o.rp,{isDisabled:!0,label:i("stash account"),value:t})}),x&&(0,n.jsxs)(o.u_.Columns,{hint:i("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account."),children:[(0,n.jsx)(o.rp,{defaultValue:e,label:i("controller account"),onChange:m,type:"account",value:u}),(0,n.jsx)(Ce,{accountId:t,controllerId:u,defaultController:e,onError:h})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:t,icon:"sign-in-alt",isDisabled:c||!!x&&!u,label:i("Set controller"),onStart:s,params:x?[u]:[],tx:r.tx.staking.setController})})]})}));function Ie(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}const Se=a.memo((function({controllerId:e,defaultDestination:s,onClose:t,stashId:i}){const{t:r}=p(),{api:c}=(0,l.h)(),[d,u]=(0,a.useState)((()=>(s?.isAccount?"Account":s?.toString())||"Staked")),[m,h]=(0,a.useState)((()=>s?.isAccount?s.asAccount.toString():null)),x=(0,O.W7)(c.derive.balances?.all,[m]),g=(0,a.useMemo)((()=>Ie(r)),[r]),f="Account"===d,b=f&&x&&x.accountId.eq(m)&&x.freeBalance.isZero();return(0,n.jsxs)(o.u_,{header:r("Bonding Preferences"),onClose:t,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ie,{controllerId:e,stashId:i}),(0,n.jsxs)(o.u_.Columns,{hint:r("All rewards will go towards the selected output destination when a payout is made."),children:[(0,n.jsx)(o.Lt,{defaultValue:s?.toString(),label:r("payment destination"),onChange:u,options:g,value:d}),f&&(0,n.jsx)(o.rp,{label:r("the payment account"),onChange:h,type:"account",value:m}),b&&(0,n.jsx)(o.oy,{content:r("The selected destination account does not exist and cannot be used to receive rewards")})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!e||f&&(!m||b),label:r("Set reward destination"),onStart:t,params:[f?{Account:m}:d],tx:c.tx.staking.setPayee})})]})}));var Ae=t(74076);const Pe=new Uint8Array,Ee=a.memo((function({className:e="",controllerId:s,onChange:t,stashId:r,withFocus:c,withSenders:d}){const{t:u}=p(),{api:m}=(0,l.h)(),{isStakingAsync:h,rcApi:x}=(0,i._)(),[g,f]=(0,a.useState)(null);return(0,a.useEffect)((()=>{try{t({sessionTx:(0,Ae.vq)(g)?(h?x:m)?.tx.session.setKeys(g,Pe):null})}catch{t({sessionTx:null})}}),[m,h,g,t,x]),(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(o.u_.Columns,{children:(0,n.jsx)(o.Pd,{content:u("This operation will be performed on the relay chain.")})}),d&&(0,n.jsx)(ie,{controllerId:s,stashId:r}),(0,n.jsx)(o.u_.Columns,{hint:u("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session."),children:(0,n.jsx)(o.II,{autoFocus:c,isError:!g,label:u("Keys from rotateKeys"),onChange:f,placeholder:"0x..."})})]})})),Me=a.memo((function({controllerId:e,onClose:s,stashId:t}){const{t:i}=p(),[{sessionTx:r},l]=(0,a.useState)({});return(0,n.jsxs)(o.u_,{header:i("Set Session Key"),onClose:s,size:"large",children:[(0,n.jsx)(o.u_.Content,{children:(0,n.jsx)(Ee,{controllerId:e,onChange:l,stashId:t,withFocus:!0,withSenders:!0})}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:e,extrinsic:r,icon:"sign-in-alt",isDisabled:!r,label:i("Set Session Key"),onStart:s})})]})}));var De=t(65874);const Te=(0,W.e)("useUnbondDuration",(function(){const{api:e}=(0,l.h)(),s=(0,O.W7)(e.derive.session.info);return(0,a.useMemo)((()=>s&&s.sessionLength.gt($.If)?s.eraLength.mul(e.consts.staking.bondingDuration):void 0),[e,s])})),Fe=(0,o.zo)(o.u_)`
  .staking--Unbond--max > div {
    justify-content: flex-end;

    & .column {
      flex: 0;
    }
  }
`,qe=a.memo((function({controllerId:e,onClose:s,stakingLedger:t,stashId:i}){const{t:r}=p(),{api:c}=(0,l.h)(),d=Te(),[u]=(0,a.useState)((()=>t?.active?.unwrap()||null)),[m,h]=(0,a.useState)();return(0,n.jsxs)(Fe,{header:r("Unbond funds"),onClose:s,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ie,{controllerId:e,stashId:i}),(0,n.jsxs)(o.u_.Columns,{hint:r("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI."),children:[(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:u,label:r("unbond amount"),labelExtra:(0,n.jsx)(B.Z,{label:(0,n.jsx)("span",{className:"label",children:r("bonded")}),value:u}),maxValue:u,onChange:h,withMax:!0}),d?.gtn(0)&&(0,n.jsx)(o.qG,{label:r("on-chain bonding duration"),children:(0,n.jsx)(De.Z,{value:d})})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:e,icon:"unlock",isDisabled:!m?.gt($.nw),label:r("Unbond"),onStart:s,params:[m],tx:c.tx.staking.unbond})})]})}));var Oe=t(52107);const _e=new(Z())(1e7),Ve=a.memo((function({className:e="",controllerId:s,minCommission:t,onChange:i,stashId:r,withFocus:c,withSenders:d}){const{t:u}=p(),{api:m}=(0,l.h)(),[h,x]=(0,a.useState)($.If),[g,f]=(0,a.useState)(!0),b=(0,a.useMemo)((()=>t?(0,Oe.x)(t.div(_e),$.If):$.If),[t]),j=(0,a.useRef)([{text:u("Yes, allow nominations"),value:!0},{text:u("No, block all nominations"),value:!1}]);(0,a.useEffect)((()=>{try{i({validateTx:m.tx.staking.validate({blocked:!g,commission:h})})}catch{i({validateTx:null})}}),[m,g,h,i]);const v=(0,a.useCallback)((e=>e&&x(e.isZero()?$.If:e.mul(_e))),[]),y=!!t&&h.lt(t);return(0,n.jsxs)("div",{className:e,children:[d&&(0,n.jsx)(ie,{controllerId:s,stashId:r}),(0,n.jsxs)(o.u_.Columns,{hint:u("The commission is deducted from all rewards before the remainder is split with nominators."),children:[(0,n.jsx)(o.Rn,{autoFocus:c,defaultValue:b,isError:y,isZeroable:!0,label:u("reward commission percentage"),maxValue:$.S8,onChange:v}),y&&(0,n.jsx)(o.oy,{content:u("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(t.mul($.S8).div(_e).toNumber()/100).toFixed(2)}})})]}),(0,_.m)(m.tx.staking.kick)&&(0,n.jsx)(o.u_.Columns,{hint:u("The validator can block any new nominations. By default it is set to allow all nominations."),children:(0,n.jsx)(o.Lt,{defaultValue:!0,label:u("allows new nominations"),onChange:f,options:j.current})})]})})),Be=a.memo((function({controllerId:e,minCommission:s,onClose:t,stashId:i}){const{t:r}=p(),[{validateTx:l},c]=(0,a.useState)({});return(0,n.jsxs)(o.u_,{header:r("Set validator preferences"),onClose:t,size:"large",children:[(0,n.jsx)(o.u_.Content,{children:(0,n.jsx)(Ve,{controllerId:e,minCommission:s,onChange:c,stashId:i,withFocus:!0,withSenders:!0})}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:e,extrinsic:l,icon:"certificate",isDisabled:!l,label:r("Validate"),onStart:t})})]})})),Re=a.memo((function({minBond:e,stakingInfo:s}){const{t}=p();return(0,a.useMemo)((()=>e&&s&&s.stakingLedger.active.unwrap().lt(e)),[e,s])?(0,n.jsx)(o.Pd,{content:t("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,G.a)(e)}})}):null})),Ze=o.zo.tr`
  .ui--Button-Group {
    display: inline-block;
    margin-right: 0.25rem;
    vertical-align: inherit;
  }
`,$e=a.memo((function({allSlashes:e,className:s="",info:{controllerId:t,destination:i,hexSessionIdNext:r,hexSessionIdQueue:c,isLoading:d,isOwnController:u,isOwnStash:h,isStashNominating:x,isStashValidating:g,nominating:f,sessionIds:b,stakingLedger:j,stashId:v},isDisabled:y,minCommission:w,targets:k}){const{t:C}=p(),{api:N}=(0,l.h)(),{queueExtrinsic:I}=(0,L.L)(),[S,A]=(0,z.O)(),[P,E]=(0,z.O)(),[M,D]=(0,z.O)(),[T,F]=(0,z.O)(),[q,V]=(0,z.O)(),[B,R]=(0,z.O)(),[Z,$]=(0,z.O)(),[W,H]=(0,z.O)(),[J,G]=(0,z.O)(),[Q,X]=(0,z.O)(),{balancesAll:Y,spanCount:ee,stakingAccount:se}=function(e,s){const t=(0,a.useMemo)((()=>[s]),[s]),n=(0,O.W7)(e.derive.balances?.all,t),o=(0,O.W7)(e.derive.staking.account,t);return{balancesAll:n,spanCount:U(s),stakingAccount:o}}(N,v),te=(0,a.useMemo)((()=>1===N.tx.staking.setController.meta.args.length||v!==t),[N,t,v]),ne=(0,a.useMemo)((()=>function(e,s=[]){return s.map((([s,t])=>({era:s,slashes:t.filter((({others:s,validator:t})=>t.eq(e)||s.some((([s])=>s.eq(e)))))}))).filter((({slashes:e})=>e.length))}(v,e)),[e,v]),ae=(0,a.useCallback)((()=>I({accountId:t,extrinsic:1===N.tx.staking.withdrawUnbonded.meta.args.length?N.tx.staking.withdrawUnbonded(ee):N.tx.staking.withdrawUnbonded()})),[N,t,I,ee]),ie=!!se?.stakingLedger&&!se.stakingLedger.active?.isEmpty;return(0,n.jsxs)(Ze,{className:s,children:[(0,n.jsx)("td",{className:"badge together",children:0!==ne.length&&(0,n.jsx)(o.Ct,{color:"red",hover:C("Slashed in era {{eras}}",{replace:{eras:ne.map((({era:e})=>(0,m.u)(e))).join(", ")}}),icon:"skull-crossbones"})}),(0,n.jsxs)("td",{className:"address",children:[(0,n.jsx)(o.N,{value:v}),S&&(0,n.jsx)(K,{controllerId:t,onClose:A,stakingInfo:se,stashId:v}),P&&(0,n.jsx)(oe,{onClose:E}),M&&t&&(0,n.jsx)(le,{controllerId:t,onClose:D,stashId:v}),T&&t&&(0,n.jsx)(ve,{controllerId:t,nominating:f,onClose:F,stashId:v,targets:k}),q&&(0,n.jsx)(ye,{controllerId:t,onClose:V,stakingInfo:se,stashId:v}),Z&&t&&(0,n.jsx)(Ne,{defaultControllerId:t,onClose:$,stashId:v}),B&&t&&(0,n.jsx)(Se,{controllerId:t,defaultDestination:i,onClose:R,stashId:v}),W&&t&&(0,n.jsx)(Me,{controllerId:t,onClose:H,stashId:v}),J&&(0,n.jsx)(qe,{controllerId:t,onClose:G,stakingLedger:j,stashId:v}),Q&&t&&(0,n.jsx)(Be,{controllerId:t,minCommission:w,onClose:X,stashId:v})]}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(o.ax,{value:t})}),(0,n.jsx)("td",{className:"start media--1200",children:i?.isAccount?(0,n.jsx)(o.ax,{value:i.asAccount}):i?.toString()}),(0,n.jsxs)("td",{className:"number",children:[(0,n.jsx)(o.d4,{stakingInfo:se}),(0,n.jsx)(o.JM,{stakingInfo:se}),(0,n.jsx)(o.by,{stakingInfo:se})]}),g?(0,n.jsxs)("td",{className:"all",children:[(0,n.jsx)(o.hl,{address:v,withBalance:!1,withHexSessionId:"0x"!==r&&[c,r],withValidatorPrefs:!0}),(0,n.jsx)(Re,{minBond:k.minValidatorBond,stakingInfo:se})]}):(0,n.jsx)("td",{className:"all expand",children:x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe,{nominating:f,stashId:v}),(0,n.jsx)(Re,{minBond:k.minNominatorBond,stakingInfo:se})]})}),(0,n.jsx)("td",{className:"button",children:!d&&(0,n.jsxs)(n.Fragment,{children:[x||g?(0,n.jsx)(o.cA,{accountId:t,icon:"stop",isDisabled:!u||y,label:C("Stop"),tx:N.tx.staking.chill},"stop"):(0,n.jsxs)(o.zx.Group,{children:[b.length&&"0x"!==r?(0,n.jsx)(o.zx,{icon:"certificate",isDisabled:!u||y||!ie,label:C("Validate"),onClick:X},"validate"):(0,n.jsx)(o.zx,{icon:"sign-in-alt",isDisabled:!u||y,label:C("Session Key"),onClick:H},"set"),(0,n.jsx)(o.zx,{icon:"hand-paper",isDisabled:!u||y||!ie,label:C("Nominate"),onClick:F},"nominate")]}),(0,n.jsx)(o.GI,{isDisabled:y,value:(0,n.jsxs)(o.v2,{children:[(0,n.jsx)(o.v2.Item,{isDisabled:!h||!Y?.freeBalance.gtn(0),label:C("Bond more funds"),onClick:A}),(0,n.jsx)(o.v2.Item,{isDisabled:!u||!se?.stakingLedger||se.stakingLedger.active?.isEmpty,label:C("Unbond funds"),onClick:G}),(0,n.jsx)(o.v2.Item,{isDisabled:!u||!se?.unlocking?.length,label:C("Rebond funds"),onClick:V}),(0,n.jsx)(o.v2.Item,{isDisabled:!u||!se?.redeemable||!se.redeemable.gtn(0),label:C("Withdraw unbonded funds"),onClick:ae}),(0,n.jsx)(o.v2.Divider,{}),(0,n.jsx)(o.v2.Item,{isDisabled:!h||!te,label:C("Change controller account"),onClick:$}),(0,n.jsx)(o.v2.Item,{isDisabled:!u,label:C("Change reward destination"),onClick:R}),g&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.v2.Item,{isDisabled:!u,label:C("Change validator preferences"),onClick:X}),(0,_.m)(N.tx.staking.kick)&&(0,n.jsx)(o.v2.Item,{isDisabled:!u,label:C("Remove nominees"),onClick:D})]}),(0,n.jsx)(o.v2.Divider,{}),!x&&(0,n.jsx)(o.v2.Item,{isDisabled:!u,label:C("Change session keys"),onClick:H}),x&&(0,n.jsx)(o.v2.Item,{isDisabled:!u||!k.validators?.length,label:C("Set nominees"),onClick:F}),!x&&(0,n.jsx)(o.v2.Item,{label:C("Inject session keys (advanced)"),onClick:E})]})},"settings")]})})]})})),Le=a.memo((function({allSlashes:e,className:s,footer:t,isInElection:i,list:r,minCommission:l,targets:c}){const{t:d}=p(),u=(0,a.useRef)([[d("stashes"),"start",2],[d("controller"),"address"],[d("rewards"),"start media--1200"],[d("bonded"),"number"],[],[]]);return(0,n.jsx)(o.iA,{className:s,empty:r&&d("No funds staked yet. Bond funds to validate or nominate a validator"),footer:t,header:u.current,children:r?.map((s=>(0,n.jsx)($e,{allSlashes:e,info:s,isDisabled:i,minCommission:l,targets:c},s.stashId)))})})),ze={bondTx:null,controllerId:null,controllerTx:null,stashId:null},We=a.memo((function({className:e="",isNominating:s,minNominated:t,minNominatorBond:i,minValidatorBond:r,onChange:c}){const{t:d}=p(),{api:u}=(0,l.h)(),[m,h]=(0,a.useState)(),[x,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[y,w]=(0,a.useState)("Staked"),[k,C]=(0,a.useState)(null),[N,I]=(0,a.useState)(null),[S,A]=(0,a.useState)(null),P=(0,O.W7)(u.derive.balances?.all,[N]),E=(0,O.W7)(u.derive.balances?.all,[k]),M=Te(),D=(0,a.useMemo)((()=>3===u.tx.staking.bond.meta.args.length),[u]),T=(0,a.useMemo)((()=>Ie(d)),[d]),F=(0,a.useCallback)(((e,s)=>b(s)),[]);(0,a.useEffect)((()=>{P&&A(P.freeBalance.gt(u.consts.balances.existentialDeposit)?P.freeBalance.sub(u.consts.balances.existentialDeposit):$.nw)}),[u,P]),(0,a.useEffect)((()=>{A(null)}),[N]),(0,a.useEffect)((()=>{const e="Account"===y?{Account:k}:y,[s,t]=D?[j,f]:[N,null];c(m&&m.gtn(0)&&!x?.error&&!t&&s&&N?{bondTx:D?u.tx.staking.bond(N,m,e):u.tx.staking.bond(m,e),controllerId:s,controllerTx:D?u.tx.staking.setController(s):null,stashId:N}:ze)}),[u,m,x,f,j,y,k,D,c,N]);const q=!!m?.gtn(0),_="Account"===y,V=_&&E&&E.accountId.eq(k)&&E.freeBalance.isZero();return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(o.u_.Columns,{hint:D?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,n.jsx)("p",{children:d("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The stash should be treated as a cold wallet.")}),(0,n.jsx)("p",{children:d("As such it is recommended that you setup a proxy to control operations via the stash.")})]}),children:[(0,n.jsx)(o.rp,{label:d("stash account"),onChange:I,type:"account",value:N}),D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.rp,{label:d("controller account"),onChange:v,type:"account",value:j}),(0,n.jsx)(Ce,{accountId:N,controllerId:j,onError:F})]})]}),S&&(0,n.jsxs)(o.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,n.jsx)("p",{children:d("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]}),children:[(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:S,isError:!q||!!x?.error,label:d("value bonded"),labelExtra:(0,n.jsx)(J.Z,{label:(0,n.jsx)("span",{className:"label",children:d("balance")}),params:N}),onChange:h}),(0,n.jsx)(X,{controllerId:j,isNominating:s,minNominated:t,minNominatorBond:i,minValidatorBond:r,onError:g,stashId:N,value:m}),M?.gtn(0)&&(0,n.jsx)(o.qG,{label:d("on-chain bonding duration"),children:(0,n.jsx)(De.Z,{value:M})})]}),(0,n.jsxs)(o.u_.Columns,{hint:d("Rewards (once paid) can be deposited to either the stash or controller, with different effects."),children:[(0,n.jsx)(o.Lt,{defaultValue:0,label:d("payment destination"),onChange:w,options:T,value:y}),_&&(0,n.jsx)(o.rp,{label:d("the payment account"),onChange:C,type:"account",value:k}),V&&(0,n.jsx)(o.oy,{content:d("The selected destination account does not exist and cannot be used to receive rewards")})]})]})})),He=[],Ue=a.memo((function({isInElection:e,targets:s}){const{t}=p(),{api:i}=(0,l.h)(),[r,c]=(0,z.O)(),[{bondTx:d,controllerId:u,controllerTx:m,stashId:h},x]=(0,a.useState)({}),[{nominateTx:g},f]=(0,a.useState)({}),[b,j]=(0,a.useState)(1),v=e||!(0,_.m)(i.tx.utility?.batch),y=(0,a.useCallback)((()=>j((e=>e+1))),[]),w=(0,a.useCallback)((()=>j((e=>e-1))),[]),k=(0,a.useCallback)((()=>{x({}),f({}),j(1),c()}),[c]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"plus",isDisabled:v||!s.validators?.length,label:t("Nominator"),onClick:k},"new-nominator"),r&&(0,n.jsxs)(o.u_,{header:t("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:b}}),onClose:k,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[1===b&&(0,n.jsx)(We,{isNominating:!0,minNominated:s.minNominated,minNominatorBond:s.minNominatorBond,onChange:x}),u&&h&&2===b&&(0,n.jsx)(be,{controllerId:u,nominating:He,onChange:f,stashId:h,targets:s}),(0,n.jsx)(o.u_.Columns,{children:(0,n.jsx)(o.RN,{})})]}),(0,n.jsxs)(o.u_.Actions,{children:[(0,n.jsx)(o.zx,{icon:"step-backward",isDisabled:1===b,label:t("prev"),onClick:w}),2===b?(0,n.jsx)(o.cA,{accountId:h,icon:"sign-in-alt",isDisabled:!(d&&g&&h&&u),label:t("Bond & Nominate"),onStart:k,params:[h===u?[d,g]:[d,g,m]],tx:i.tx.utility.batchAll||i.tx.utility.batch}):(0,n.jsx)(o.zx,{icon:"step-forward",isDisabled:!d,label:t("next"),onClick:y})]})]})]})})),Je=a.memo((function(){const{t:e}=p(),[s,t]=(0,z.O)(),[{bondTx:i,stashId:r},l]=(0,a.useState)({}),c=(0,a.useCallback)((()=>{l({}),t()}),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"plus",label:e("Stash"),onClick:c},"new-stash"),s&&(0,n.jsxs)(o.u_,{header:e("Bonding Preferences"),onClose:c,size:"large",children:[(0,n.jsx)(o.u_.Content,{children:(0,n.jsx)(We,{onChange:l})}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:r,extrinsic:i,icon:"sign-in-alt",isDisabled:!i||!r,label:e("Bond"),onStart:c})})]})]})})),Ge=a.memo((function({isInElection:e,minCommission:s,targets:t}){const{t:i}=p(),{api:r}=(0,l.h)(),[c,d]=(0,z.O)(),[{bondTx:u,controllerId:m,controllerTx:h,stashId:x},g]=(0,a.useState)({}),[{sessionTx:f},b]=(0,a.useState)({}),[{validateTx:j},v]=(0,a.useState)({}),[y,w]=(0,a.useState)(1),k=e||!(0,_.m)(r.tx.utility?.batch),C=(0,a.useCallback)((()=>w((e=>e+1))),[]),N=(0,a.useCallback)((()=>w((e=>e-1))),[]),I=(0,a.useCallback)((()=>{g({}),b({}),v({}),w(1),d()}),[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"plus",isDisabled:k,label:i("Validator"),onClick:I},"new-validator"),c&&(0,n.jsxs)(o.u_,{header:i("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:y}}),onClose:I,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[1===y&&(0,n.jsx)(We,{minValidatorBond:t.minValidatorBond,onChange:g}),m&&x&&2===y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ee,{controllerId:m,onChange:b,stashId:x,withFocus:!0}),(0,n.jsx)(Ve,{controllerId:m,minCommission:s,onChange:v,stashId:x})]}),(0,n.jsx)(o.u_.Columns,{children:(0,n.jsx)(o.RN,{})})]}),(0,n.jsxs)(o.u_.Actions,{children:[(0,n.jsx)(o.zx,{icon:"step-backward",isDisabled:1===y,label:i("prev"),onClick:N}),2===y?(0,n.jsx)(o.cA,{accountId:x,icon:"sign-in-alt",isDisabled:!u||!f||!j,label:i("Bond & Validate"),onStart:I,params:[m===x?[u,f,j]:[u,f,j,h]],tx:r.tx.utility.batchAll||r.tx.utility.batch}):(0,n.jsx)(o.zx,{icon:"step-forward",isDisabled:!u,label:i("next"),onClick:C})]})]})]})}));var Qe=t(19042),Xe=t(63985);const Ke="rewards",Ye=a.memo((function({className:e,controllerId:s,onClose:t,poolId:i}){const{t:r}=p(),{api:c}=(0,l.h)(),[d,u]=(0,a.useState)(Ke),[m,h]=(0,a.useState)(),x=(0,Xe.Z)(s,m,$.nw),g=(0,a.useRef)([{text:r("Free balance"),value:"free"},{text:r("Pool rewards"),value:"rewards"}]);return(0,n.jsxs)(o.u_,{className:e,header:r("Bond extra into pool"),onClose:t,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ge,{controllerId:s,poolId:i}),(0,n.jsxs)(o.u_.Columns,{hint:r("You can either bond a specific amount from your free balance, or all of the accumulated rewards."),children:[(0,n.jsx)(o.Lt,{defaultValue:Ke,label:r("type of funds to bond"),onChange:u,options:g.current}),"free"===d&&(0,n.jsx)(o.H,{autoFocus:!0,isError:x,label:r("additional free funds to bond"),labelExtra:(0,n.jsx)(J.Z,{label:(0,n.jsx)("span",{className:"label",children:r("balance")}),params:s}),onChange:h})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:s,icon:"sign-in-alt",isDisabled:"free"===d&&x,label:r("Bond Extra"),onStart:t,params:["free"===d?{FreeBalance:m}:"Rewards"],tx:c.tx.nominationPools.bondExtra})})]})})),es=a.memo((function({className:e,controllerId:s,maxUnbond:t,onClose:i,poolId:r}){const{t:c}=p(),{api:d}=(0,l.h)(),[u,m]=(0,a.useState)(),h=Te(),x=!u||!t||u.gt(t);return(0,n.jsxs)(o.u_,{className:e,header:c("Unbond funds from pool"),onClose:i,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(ge,{controllerId:s,poolId:r}),(0,n.jsxs)(o.u_.Columns,{hint:c("The amount to unbond. It should be less or equal to the full bonded amount."),children:[(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:t,isError:x,label:c("amount to unbond"),labelExtra:(0,n.jsx)(B.Z,{label:(0,n.jsx)("span",{className:"label",children:c("bonded")}),value:t}),maxValue:t,onChange:m,withMax:!0}),h?.gtn(0)&&(0,n.jsx)(o.qG,{label:c("on-chain bonding duration"),children:(0,n.jsx)(De.Z,{value:h})})]})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:s,icon:"unlock",isDisabled:x,label:c("Unbond"),onStart:i,params:[s,u],tx:d.tx.nominationPools.unbond})})]})})),ss={transform:e=>e.unwrapOr(null)},ts=(0,W.e)("useAccountInfo",(function(e){const{api:s}=(0,l.h)(),t=(0,de.X)(),[n,o]=(0,a.useState)(null),i=(0,O.W7)(s.query.nominationPools.poolMembers,[e],ss);return(0,a.useEffect)((()=>{i&&s.call.nominationPoolsApi?.pendingRewards(e).then((e=>t.current&&o({claimable:e,member:i}))).catch(console.error)}),[e,i,s,t]),n})),ns=a.memo((function({accountId:e,className:s,info:{bonded:{roles:t},metadata:i,nominating:r,stashId:c},isFirst:d,poolId:u,sessionProgress:h,targets:x}){const{t:g}=p(),{api:f}=(0,l.h)(),b=U(c),{queueExtrinsic:j}=(0,L.L)(),[v,y]=(0,z.O)(),[w,k]=(0,z.O)(),[C,N]=(0,z.O)(),I=ts(e),S=(0,a.useMemo)((()=>h&&I?.member.unbondingEras&&!I.member.unbondingEras.isEmpty?function(e,s,{activeEra:t},{unbondingEras:n}){const a=[],o=new(Z())(0);for(const[e,s]of n.entries())e.lte(t)?o.iadd(s):a.push({remainingEras:e.sub(t),value:s});return{accountId:e,controllerId:e,redeemable:o,stashId:s,unlocking:a}}(e,c,h,I.member):null),[I,e,c,h]),A=(0,a.useCallback)((()=>j({accountId:e,extrinsic:f.tx.nominationPools.claimPayout()})),[f,e,j]),P=(0,a.useCallback)((()=>j({accountId:e,extrinsic:f.tx.nominationPools.withdrawUnbonded(e,b)})),[f,e,b,j]),{isNominator:E}=(0,a.useMemo)((()=>function(e,{nominator:s,root:t}){return{isNominator:s.eq(e)||t.eq(e)}}(e,t)),[e,t]);return(0,n.jsxs)("tr",{className:s,children:[(0,n.jsx)("td",{className:"number",children:(0,n.jsx)("h1",{children:d&&(0,m.u)(u)})}),(0,n.jsx)("td",{className:"start",children:d&&i}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(o.N,{value:e})}),(0,n.jsx)("td",{className:"number",children:I&&(0,n.jsxs)(n.Fragment,{children:[!I.member.points.isZero()&&(0,n.jsx)(B.Z,{value:I.member.points}),S&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.JM,{stakingInfo:S}),(0,n.jsx)(o.by,{isPool:!0,stakingInfo:S})]})]})}),(0,n.jsx)("td",{className:"number",children:I&&!I.claimable.isZero()&&(0,n.jsx)(B.Z,{value:I.claimable})}),(0,n.jsx)("td",{className:"number",children:d&&r&&(0,n.jsx)(pe,{nominating:r,stashId:c})}),(0,n.jsxs)("td",{className:"button",children:[(0,n.jsx)(o.Ct,{color:E?"green":"transparent",icon:"hand-paper"}),v&&(0,n.jsx)(Ye,{controllerId:e,onClose:y,poolId:u}),w&&(0,n.jsx)(ve,{controllerId:e,nominating:r,onClose:k,poolId:u,stashId:e,targets:x}),I&&C&&(0,n.jsx)(es,{controllerId:e,maxUnbond:I.member.points,onClose:N,poolId:u}),(0,n.jsx)(o.GI,{value:(0,n.jsxs)(o.v2,{children:[(0,n.jsx)(o.v2.Item,{label:g("Bond more funds"),onClick:y}),(0,n.jsx)(o.v2.Item,{isDisabled:!I||I.member.points.isZero(),label:g("Unbond funds"),onClick:N}),(0,n.jsx)(o.v2.Divider,{}),(0,n.jsx)(o.v2.Item,{isDisabled:!I||I.claimable.isZero(),label:g("Withdraw claimable"),onClick:A}),(0,n.jsx)(o.v2.Item,{isDisabled:!S||S.redeemable.isZero(),label:g("Withdraw unbonded"),onClick:P}),(0,n.jsx)(o.v2.Divider,{}),(0,n.jsx)(o.v2.Item,{isDisabled:!E,label:g("Set nominees"),onClick:k})]})},"settings")]})]})})),as=a.memo((function({className:e,count:s,members:t,poolId:a,sessionProgress:o,targets:i}){const r=(0,Qe.Z)(a);return r?(0,n.jsx)(n.Fragment,{children:Object.keys(t).map(((t,l)=>(0,n.jsx)(ns,{accountId:t,className:`${e||""} ${s%2?"isEven":"isOdd"}`,info:r,isFirst:0===l,poolId:a,sessionProgress:o,targets:i},`${a.toString()}:${t}`)))}):null})),os=a.memo((function({className:e,list:s,targets:t}){const{t:i}=p(),{api:r}=(0,l.h)(),c=(0,O.W7)(r.derive.session.progress),d=(0,a.useRef)([[i("pools"),"start",2],[i("account"),"address"],[i("bonded")],[i("claimable")],[],[]]);return(0,n.jsx)(o.iA,{className:e,empty:s&&i("Not participating in any pools. Join a pool first."),header:d.current,children:s?.map((({members:e,poolId:s},a)=>(0,n.jsx)(as,{count:a,members:e,poolId:s,sessionProgress:c,targets:t},s.toString())))})}));function is({isStashNominating:e,isStashValidating:s}){return s?1:e?5:99}function rs(e,s){return is(e)-is(s)}function ls(e,s){return s.filter((({isStashNominating:s,isStashValidating:t})=>{switch(e){case 1:return s;case 2:return t;case 3:return!s&&!t;default:return!0}}))}function cs(e,s){const t=function(e,{bondedNoms:s,bondedNone:t,bondedTotal:n,bondedVals:a}){switch(e){case 0:default:return n;case 1:return s;case 2:return a;case 3:return t}}(e,s);return t&&(0,n.jsx)(B.Z,{value:t})}const ds=a.memo((function({className:e="",isInElection:s,minCommission:t,ownPools:i,ownStashes:r,targets:c}){const{t:d}=p(),{api:u}=(0,l.h)(),m=(0,F.g)(),[h,x]=(0,a.useState)(0),[g,f]=(0,a.useState)(0),b=(0,a.useRef)([{text:d("Stashed"),value:"stash"},{text:d("Pooled"),value:"pool"}]),j=(0,a.useRef)([{text:d("All stashes"),value:"all"},{text:d("Nominators"),value:"noms"},{text:d("Validators"),value:"vals"},{text:d("Inactive"),value:"chill"}]),v=(0,a.useMemo)((()=>function(e){if(!e)return{};const s=new(Z())(0),t=new(Z())(0),n=new(Z())(0),a=new(Z())(0);return e.forEach((({isStashNominating:e,isStashValidating:o,stakingLedger:i})=>{const r=i?.total?i.total.unwrap():$.nw;a.iadd(r),e?s.iadd(r):o?n.iadd(r):t.iadd(r)})),{bondedNoms:s,bondedNone:t,bondedTotal:a,bondedVals:n,foundStashes:e.sort(rs)}}(r)),[r]),[y,w]=(0,a.useMemo)((()=>[v.foundStashes&&ls(g,v.foundStashes),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:4}),(0,n.jsx)("td",{className:"number",children:cs(g,v)}),(0,n.jsx)("td",{colSpan:2})]},"footer")]),[v,g]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(o.zx.Group,{children:[u.consts.nominationPools&&(0,n.jsx)(o.tX,{onChange:x,options:b.current,value:h}),0===h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.tX,{onChange:f,options:j.current,value:g}),(0,n.jsx)(Ue,{isInElection:s,targets:c}),(0,n.jsx)(Ge,{isInElection:s,minCommission:t,targets:c}),(0,n.jsx)(Je,{})]})]}),(0,n.jsx)(V.Z,{isInElection:s}),0===h?(0,n.jsx)(Le,{allSlashes:m,footer:w,isInElection:s,list:y,minCommission:t,targets:c}):(0,n.jsx)(os,{allSlashes:m,list:i,targets:c})]})}));var us=t(75387);const ms=a.memo((function(){const{t:e}=p();return(0,n.jsx)(o.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}));var hs=t(34536),ps=t(87292),xs=t(47623),gs=t(73477),fs=t(60773);function bs(e){return e.length?[e.length,()=>e.map((e=>(0,n.jsx)(o.ax,{value:e},e)))]:null}const js=a.memo((function({nominators:e,slashingSpans:s}){const{t}=p(),{api:i}=(0,l.h)(),{active:r,chilled:c}=(0,a.useMemo)((()=>function(e,s=[],t){const n=t&&!e.events.staking.SlashReported?s.filter((({submittedIn:e})=>t.lastNonzeroSlash.gt(e))).map((({nominatorId:e})=>e)):[];return{active:bs(s.filter((({nominatorId:e})=>!n.includes(e))).map((({nominatorId:e})=>e))),chilled:bs(n)}}(i,e,s)),[i,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[r&&(0,n.jsx)(o.n0,{renderChildren:r[1],summary:t("Nominations ({{count}})",{replace:{count:(0,m.u)(r[0])}})}),c&&(0,n.jsx)(o.n0,{renderChildren:c[1],summary:t("Renomination required ({{count}})",{replace:{count:(0,m.u)(c[0])}})})]})}));function vs(e){return[e.length,()=>e.map((({nominatorId:e,value:s})=>(0,n.jsx)(o.ax,{bonded:s,value:e,withBonded:!0},e)))]}function ys(e){const s=new(Z())(0);for(let t=0,n=e.length;t<n;t++)s.iadd(e[t].value);return s}const ws=a.memo((function({nominators:e,stakeOther:s}){const{api:t}=(0,l.h)(),[i,r,c,d]=(0,a.useMemo)((()=>function(e,s,t){if(!s)return[null,$.nw,null,$.nw];const n=s.sort(((e,s)=>s.value.cmp(e.value)));if(!e||e.gtn(n.length))return[vs(n),t||$.nw,null,$.nw];const a=e.toNumber(),o=n.slice(0,a),i=ys(o),r=n.slice(a),l=ys(r);return[vs(o),i,vs(r),l]}(t.consts.staking?.maxNominatorRewardedPerValidator,e,s)),[t,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[(!i||0!==i[0])&&(0,n.jsx)(o.n0,{className:i?"":"--tmp",renderChildren:i?.[1],summary:(0,n.jsx)(B.Z,{labelPost:` (${i?i[0]:"0"})`,value:r})}),c&&(0,n.jsx)(o.n0,{className:"stakeOver",renderChildren:c[1],summary:(0,n.jsx)(B.Z,{labelPost:` (${c[0]})`,value:d})})]})}));var ks=t(33378);const Cs=[],Ns=a.memo((function({isChilled:e,isElected:s,isMain:t,isPara:i,isRelay:r,nominators:l=Cs,onlineCount:c,onlineMessage:d}){const{allAccounts:u}=(0,D.x)(),m=c&&c.toNumber(),h=(0,a.useMemo)((()=>l.some((({nominatorId:e})=>u.includes(e)))),[u,l]);return(0,n.jsxs)(n.Fragment,{children:[h?(0,n.jsx)(o.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,n.jsx)(o.Ct,{className:"media--1100",color:"transparent"}),r&&(i?(0,n.jsx)(o.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,n.jsx)(o.Ct,{className:"media--1100",color:"transparent"})),e?(0,n.jsx)(o.Ct,{className:"media--1000",color:"red",icon:"cancel"}):s?(0,n.jsx)(o.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,n.jsx)(o.Ct,{className:"media--1000",color:"transparent"}),t&&(m?(0,n.jsx)(o.Ct,{className:"media--900",color:"green",info:m}):d?(0,n.jsx)(o.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,n.jsx)(o.Ct,{className:"media--900",color:"transparent"})),(0,n.jsx)(ks.Z,{numNominators:l.length})]})})),Is={transform:e=>e.unwrapOr(null)},Ss=a.memo((function({address:e,className:s="",filterName:t,hasQueries:i,isElected:r,isFavorite:c,isMain:d,isPara:u,lastBlock:m,minCommission:h,nominatedBy:x,points:g,recentlyOnline:f,toggleFavorite:b,validatorInfo:j,withIdentity:v}){const{t:y}=p(),{api:w,apiIdentity:k}=(0,l.h)(),[C,N]=(0,z.O)(!1),{accountInfo:I,slashingSpans:S}=function(e,s,t){const n=(0,a.useMemo)((()=>[s]),[s]);return{accountInfo:(0,fs.Y)(s),slashingSpans:(0,O.W7)(!t&&e.query.staking.slashingSpans,n,Is)}}(w,e,d),{commission:A,isChilled:P,nominators:E,stakeOther:M,stakeOwn:D}=(0,a.useMemo)((()=>j?function({exposureMeta:e,exposurePaged:s,validatorPrefs:t},n){let a,o,i,r;e?.total&&(a=s.others.map((({value:e,who:s})=>({nominatorId:s.toString(),value:e.unwrap()}))),o=e.total?.unwrap()||$.nw,r=e.own.unwrap(),i=o.sub(r));const l=t?.commission?.unwrap();return{commission:l?.toHuman(),isChilled:l&&n&&l.isZero()&&l.lt(n),nominators:a,stakeOther:i,stakeOwn:r,stakeTotal:o}}(j,h):{}),[h,j]),T=(0,a.useMemo)((()=>!I||(0,gs.r7)(k,e,I,t,v)),[I,e,t,k,v]),F=(0,a.useMemo)((()=>`#/staking/query/${e}`),[e]),q=(0,a.useMemo)((()=>g&&"greyAnim-"+Date.now()%25),[g]);return T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("tr",{className:`${s} isExpanded isFirst ${C?"packedBottom":"isLast"}`,children:[(0,n.jsx)(o.iA.Column.Favorite,{address:e,isFavorite:c,toggle:b}),(0,n.jsx)("td",{className:"badge together",children:(0,n.jsx)(Ns,{isChilled:P,isElected:r,isMain:d,isPara:u,isRelay:!!(w.query.parasShared||w.query.shared)?.activeValidatorIndices,nominators:d?E:x,onlineCount:f?.blockCount,onlineMessage:f?.hasMessage})}),(0,n.jsxs)("td",{className:"address all relative",children:[(0,n.jsx)(o.N,{value:e}),d&&q&&(0,n.jsx)(o.Vp,{className:`${q} absolute`,color:"lightgrey",label:g})]}),d?(0,n.jsx)(ws,{nominators:E,stakeOther:M}):(0,n.jsx)(js,{nominators:x,slashingSpans:S}),(0,n.jsx)("td",{className:"number",children:A||(0,n.jsx)("span",{className:"--tmp",children:"50.00%"})}),d&&(0,n.jsx)("td",{className:"number",children:m}),(0,n.jsx)(o.iA.Column.Expand,{isExpanded:C,toggle:N})]}),C&&(0,n.jsxs)("tr",{className:`${s} ${C?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,n.jsx)("td",{colSpan:2}),(0,n.jsxs)("td",{className:"columar",colSpan:d?4:3,children:[(0,n.jsxs)(o.P0,{size:"small",children:[(0,n.jsx)(o.P0.Column,{children:d&&D?.gtn(0)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:y("own stake")}),(0,n.jsx)(B.Z,{value:D})]})}),(0,n.jsx)(o.P0.Column,{children:i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:y("graphs")}),(0,n.jsxs)("a",{href:F,children:[(0,n.jsx)(o.JO,{className:"highlight--color",icon:"chart-line"})," ",y("historic results")]})]})})]}),(0,n.jsx)(o.P0,{is100:!0,children:(0,n.jsx)(o.P0.Column,{children:(0,n.jsx)(o.NR,{data:e,type:"validator",withTitle:!0})})})]}),(0,n.jsx)("td",{})]})]}):null}));function As(e,s=[],t=[],n,a,o){return s.filter((s=>!o.includes(s)&&(!e||t.includes(s)))).map((e=>[e,n.includes(e),a.includes(e)])).sort((([e,,s],[n,,a])=>{const o=t.includes(e),i=t.includes(n);return s===a?o===i?0:o?-1:1:s?-1:1}))}function Ps(e){const s=new Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t].toString();return s}const Es={},Ms=a.memo((function({className:e,favorites:s,hasQueries:t,isIntentions:i,isOwn:r,minCommission:c,nominatedBy:d,ownStashIds:u,paraValidators:m=Es,recentlyOnline:h,stakingOverview:x,targets:g,toggleFavorite:f}){const{t:b}=p(),{api:j}=(0,l.h)(),{byAuthor:v,eraPoints:y}=(0,us.E)(),[w,k]=(0,a.useState)(""),C=(0,xs.q)(),{validators:N,waiting:I}=(0,a.useMemo)((()=>function(e,s,t,n,a){if(!s)return{};const o=Ps(s.nextElected),i=Ps(s.validators);return{validators:As(e,i,a,o,t,[]),waiting:As(e,o,a,o,t,i).concat(As(e,n,a,[],t,o))}}(r,x,s,g.waitingIds,u)),[s,r,u,x,g]),S=(0,a.useMemo)((()=>C?i?d&&I:N:void 0),[i,C,d,N,I]),A=(0,a.useMemo)((()=>g.validators&&function(e){const s={};for(let t=0,n=e.length;t<n;t++){const n=e[t];s[n.key]=n}return s}(g.validators)),[g]),P=(0,a.useRef)(i?[[b("intentions"),"start",3],[b("nominators"),"expand"],[b("commission"),"number"],[]]:[[b("validators"),"start",3],[b("other stake"),"expand"],[b("commission")],[b("last #")],[]]);return(0,n.jsx)(o.iA,{className:e,empty:i?S&&b("No waiting validators found"):S&&h&&A&&b("No active validators found"),emptySpinner:(0,n.jsxs)(n.Fragment,{children:[!I&&(0,n.jsx)("div",{children:b("Retrieving validators")}),!A&&(0,n.jsx)("div",{children:b("Retrieving validator info")}),i?!d&&(0,n.jsx)("div",{children:b("Retrieving nominators")}):!h&&(0,n.jsx)("div",{children:b("Retrieving online status")}),!S&&(0,n.jsx)("div",{children:b("Preparing validator list")})]}),filter:(0,n.jsx)(hs.Z,{nameFilter:w,setNameFilter:k}),header:P.current,legend:(0,n.jsx)(ps.Z,{isRelay:!i&&!!(j.query.parasShared||j.query.shared)?.activeValidatorIndices,minCommission:c}),children:S?.map((([e,s,a])=>(0,n.jsx)(Ss,{address:e,filterName:w,hasQueries:t,isElected:s,isFavorite:a,isMain:!i,isPara:m[e],lastBlock:v[e],minCommission:c,nominatedBy:d?.[e],points:y[e],recentlyOnline:h?.[e],toggleFavorite:f,validatorInfo:A?.[e]},e)))})})),Ds=o.zo.article`
    max-width: 50vw;
    margin-inline: auto !important;

    .ui--Icon {
        color: rgba(255, 196, 12, 1);
        margin-right: 0.5rem;
    }
`,Ts=a.memo((function({children:e,className:s="",withIcon:t=!0}){return(0,n.jsxs)(Ds,{className:`${s} mark warning`,children:[t&&(0,n.jsx)(o.JO,{icon:"exclamation-triangle"}),(0,n.jsx)("strong",{children:"Staking Async is Polkadot's staking system"})," which elects validators ",(0,n.jsx)("em",{children:"for the Relay Chain"}),", ",(0,n.jsx)("em",{children:"on AssetHub"}),". The actual collators of the AssetHub parachain are managed by the collator-selection system. To nominate a Relay Chain validator, please use this page and everything works as before. To setup a validator, please see"," ",(0,n.jsx)("a",{href:"https://docs.google.com/document/d/1X4EjL-7he70vtUumNhEqnUs7XdTCDj8TQpGJhNuAklY/edit?tab=t.0#heading=h.xh97bpw96bkk",rel:"noreferrer",target:"_blank",children:"this guide"}),".",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),"For more information about Staking Async and AssetHub migration, please see the"," ",(0,n.jsx)("a",{href:"https://docs.google.com/document/d/1XR3vL2p4QV0wC7FrlC8eN-q62BqNFTFElbj21wEmMGg/edit?tab=t.tyioldyxov9u",rel:"noreferrer",target:"_blank",children:"Asset Hub Migration FAQ"}),".",e]})}));var Fs=t(54705);const qs={transform:e=>e.unwrapOr(null)},Os=(0,o.zo)(o.Ty)`
  .validator--Account-block-icon {
    display: inline-block;
    margin-right: 0.75rem;
    margin-top: -0.25rem;
    vertical-align: middle;
  }

  .validator--Summary-authors {
    .validator--Account-block-icon+.validator--Account-block-icon {
      margin-left: -1.5rem;
    }
  }

  .percent {
    font-size: var(--font-percent-tiny);
  }
`,_s=a.memo((function({className:e="",stakingOverview:s,targets:{counterForNominators:t,inflation:{idealStake:i,inflation:r,stakedFraction:c},waitingIds:d}}){const{t:u}=p(),h=(()=>{const{api:e}=(0,l.h)(),s=(0,O.W7)(e.query.staking.currentEra,void 0,qs),[t,n]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{const t=(await e.query.staking.erasStakersPaged.entries(s)).map((([e,s])=>s.unwrap().others.map((e=>e.who.toString())))).flat();n([...new Set(t)])})().catch(console.log)}),[e.query.staking.erasStakersPaged,s]),t})(),x=(0,n.jsx)("span",{className:"percent",children:"%"});return(0,n.jsxs)(Os,{className:e,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(o.Jy,{label:u("validators"),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,m.u)(s.validators.length)," / ",(0,m.u)(s.validatorCount)]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})}),(0,n.jsx)(o.Jy,{className:"media--900",label:u("waiting"),children:d?(0,m.u)(d.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(o.Jy,{className:"media--1000",label:u(t?"active / nominators":"nominators"),children:h?(0,n.jsxs)(n.Fragment,{children:[(0,m.u)(h.length),t&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,m.u)(t)]})]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})})]}),(0,n.jsxs)("section",{children:[i>0&&Number.isFinite(i)&&(0,n.jsx)(o.Jy,{className:"media--1400",label:u("ideal staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*i).toFixed(1),x]})}),c>0&&(0,n.jsx)(o.Jy,{className:"media--1300",label:u("staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*c).toFixed(1),x]})}),r>0&&Number.isFinite(r)&&(0,n.jsx)(o.Jy,{className:"media--1200",label:u("inflation"),children:(0,n.jsxs)(n.Fragment,{children:[r.toFixed(1),x]})})]}),(0,n.jsx)("section",{children:(0,n.jsx)(Fs.Z,{})})]})})),Vs={},Bs={},Rs={},Zs=a.memo((function({className:e="",favorites:s,hasAccounts:t,hasQueries:i,minCommission:r,nominatedBy:c,ownStashes:d,paraValidators:u,stakingOverview:m,targets:h,toggleFavorite:x,toggleLedger:g,toggleNominatedBy:f}){const{t:b}=p(),{api:j}=(0,l.h)(),{byAuthor:v,eraPoints:y}=(0,us.E)(),[w,k]=(0,a.useState)(0),[C,N]=(0,a.useState)(1),I=(0,O.W7)(j.derive.imOnline?.receivedHeartbeats),S=(0,a.useCallback)((e=>{e&&f(),k(e)}),[f]),A=(0,a.useRef)([{text:b("Own validators"),value:"mine"},{text:b("All validators"),value:"all"}]),P=(0,a.useRef)([{text:b("Active"),value:"active"},{text:b("Waiting"),value:"waiting"}]),E=(0,a.useMemo)((()=>d?.map((({stashId:e})=>e))),[d]);(0,a.useEffect)((()=>{g&&g()}),[g]);const M=0===C;return(0,n.jsxs)("div",{className:`${e} staking--Overview`,children:[(0,n.jsx)(Ts,{withIcon:!0}),(0,n.jsx)(_s,{stakingOverview:m,targets:h}),t&&0===d?.length&&(0,n.jsx)(ms,{}),(0,n.jsxs)(o.zx.Group,{children:[(0,n.jsx)(o.tX,{onChange:N,options:A.current,value:C}),(0,n.jsx)(o.tX,{onChange:S,options:P.current,value:w})]}),(0,n.jsx)(Ms,{byAuthor:0===w?v:Bs,eraPoints:0===w?y:Rs,favorites:s,hasQueries:i,isIntentions:1===w,isOwn:M,minCommission:0===w?r:void 0,nominatedBy:1===w?c:void 0,ownStashIds:E,paraValidators:0===w&&u||Vs,recentlyOnline:0===w?I:void 0,stakingOverview:m,targets:h,toggleFavorite:x},w)]})})),$s=["actions","payout"],Ls={defaultValue:[!1,void 0,{}],transform:([e,s,t,n])=>[!!e&&e.isOpen,s&&!s.isZero()?s:void 0,t&&n?n.reduce(((e,s)=>({...e,[t[s.toNumber()].toString()]:!0})),{}):{}]},zs=a.memo((function({ahApi:e,ahEndPoints:s,basePath:t,isRelayChain:i,rcApi:c,rcEndPoints:d}){const{t:u}=p(),{api:m}=(0,l.h)(),[h,x]=(0,a.useState)(!1),[g,f]=(0,M.r)("staking:favorites"),[b,j]=(0,a.useState)(!1),{areAccountsLoaded:y,hasAccounts:V}=(0,D.x)(),B=(0,T.w)(),R=(0,F.g)(),Z=(0,A.Z)(g,h),[$,L,z]=(0,q.L)([m.query.staking.eraElectionStatus,m.query.staking.minCommission,m.query.session.validators,(m.query.parasShared||m.query.shared)?.activeValidatorIndices],Ls),W=(0,S.Z)(b),H=(0,E.Z)(),U=(0,O.W7)(c?.derive.staking.overview),J=(0,a.useCallback)((()=>j(!0)),[]),G=(0,a.useCallback)((()=>x(!0)),[]),Q=(0,a.useMemo)((()=>V&&!!m.query.imOnline?.authoredBlocks&&!!m.query.staking.activeEra),[m,V]),X=(0,a.useMemo)((()=>V&&!!B&&0!==B.length),[V,B]),K=(0,a.useMemo)((()=>(B||[]).filter((({isStashValidating:e})=>e))),[B]),Y=(0,a.useMemo)((()=>[{isRoot:!0,name:"active-validators",text:u("Active Validators")},{name:"actions",text:u("Accounts")},X&&(0,_.m)(m.query.staking.activeEra)&&{name:"payout",text:u("Payouts")},(0,_.m)(m.query.nominationPools?.minCreateBond)&&{name:"pools",text:u("Pools")},{alias:"returns",name:"all-validators",text:u("All Validators")},X&&(0,_.m)((m.query.voterBagsList||m.query.bagsList||m.query.voterList)?.counterForListNodes)&&{name:"bags",text:u("Bags")},{count:R.reduce(((e,[,s])=>e+s.length),0),name:"slashes",text:u("Slashes")},{hasParams:!0,name:"query",text:u("Validator stats")},{name:"command-center",text:u("Command Center")}].filter((e=>!!e))),[m,X,R,u]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.mQ,{basePath:t,hidden:y&&!V?$s:void 0,items:Y}),(0,n.jsx)(r.Z5,{children:(0,n.jsxs)(r.AW,{path:t,children:[(0,n.jsx)(r.AW,{element:(0,n.jsx)(w.Z,{ownStashes:B}),path:"bags"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(k.Z,{historyDepth:Z.historyDepth,isInElection:$,ownPools:H,ownValidators:K}),path:"payout"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(P.Z,{ownPools:H}),path:"pools"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(C.Z,{basePath:t}),path:"query/:value?"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(ds,{isInElection:$,minCommission:L,ownPools:H,ownStashes:B,targets:Z}),path:"actions"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(I.Z,{isInElection:$,nominatedBy:W,ownStashes:B,stakingOverview:U,targets:Z,toggleFavorite:f,toggleLedger:G,toggleNominatedBy:J}),path:"all-validators"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(N.Z,{ownStashes:B,slashes:R}),path:"slashes"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(v,{ahApi:e,ahEndPoints:s,isRelayChain:i,rcApi:c,rcEndPoints:d}),path:"command-center"}),(0,n.jsx)(r.AW,{element:(0,n.jsx)(Zs,{favorites:g,hasAccounts:V,hasQueries:Q,minCommission:L,nominatedBy:W,ownStashes:B,paraValidators:z,stakingOverview:U,targets:Z,toggleFavorite:f,toggleNominatedBy:J}),index:!0})]})})]})})),Ws=o.zo.main`
  .staking--Chart {
    margin-top: 1.5rem;

    h1 {
      margin-bottom: 0.5rem;
    }

    .ui--Spinner {
      margin: 2.5rem auto;
    }
  }

  .staking--optionsBar {
    margin: 0.5rem 0 1rem;
    text-align: center;
    white-space: normal;

    .staking--buttonToggle {
      display: inline-block;
      margin-right: 1rem;
      margin-top: 0.5rem;
    }
  }

  .ui--Expander.stakeOver {
    .ui--Expander-summary {
      color: var(--color-error);
    }
  }
`,Hs=a.memo((function({basePath:e,className:s="",onStatusChange:t}){const{ahApi:a,ahEndPoints:o,isRelayChain:r,rcApi:l,rcEndPoints:c}=(0,i._)();return(0,n.jsx)(Ws,{className:`${s} staking--App`,children:r?(0,n.jsx)(y,{ahApi:a,ahEndPoints:o,basePath:e,isRelayChain:r,onStatusChange:t,rcApi:l,rcEndPoints:c}):(0,n.jsx)(zs,{ahApi:a,ahEndPoints:o,basePath:e,isRelayChain:r,onStatusChange:t,rcApi:l,rcEndPoints:c})})}))},77854:(e,s,t)=>{t.d(s,{Z:()=>dn});var n=t(52322),a=t(2784),o=t(73557),i=t(75030),r=t(65857),l=t(68235),c=t(90778),d=t(34814),u=t(54131),m=t(9118),h=t(54890),p=t(12213),x=t(43223),g=t(33661),f=t(58607),b=t(48801),j=t.n(b),v=t(95292),y=t(61349);function w(){return(0,y.$G)("app-staking-legacy")}const k=a.memo((function({isInElection:e}){const{t:s}=w();return e?(0,n.jsx)(l.Pd,{className:"warning centered",content:s("There is currently an ongoing election for new validator candidates. As such staking operations are not permitted.")}):null}));var C=t(86135),N=t(38894),I=t(14681),S=t(11677);const A={transform:e=>e.isNone?0:e.unwrap().prior.length+1},P=(0,S.e)("useSlashingSpans",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(s.query.staking.slashingSpans,[e],A)||0}));var E=t(36609),M=t(92730);function D(e){let s=(e.mul(v.D_).div(v.aP.pow(new(j())(M.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);for(;1!==s.length&&[".","0"].includes(s[s.length-1]);){const e=s.endsWith(".");if(s=s.substring(0,s.length-1),e)break}return s}const T=a.memo((function({currentAmount:e,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onError:r,stashId:d,value:u}){const{t:h}=w(),{api:p}=(0,c.h)(),x=(0,m.W7)(p.derive.balances?.all,[d]),[{error:g,warning:f},b]=(0,a.useState)({error:null,warning:null});return(0,a.useEffect)((()=>{if(x&&u){const n=u.add(e||v.nw),a=p.consts.balances.existentialDeposit,l=x.freeBalance.sub(a.divn(2));let c=null,d=null;n.gte(l)?d=h("The specified value is large and may not allow enough funds to pay future transaction fees."):n.lt(a)?c=h("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:D(a)}}):s?o&&n.lt(o)?c=h("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,M.a)(o)}}):t&&n.lt(t)&&(d=h("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,M.a)(t)}})):i&&n.lt(i)&&(c=h("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,M.a)(i)}})),b((e=>{const s=e.error!==c?c:e.error,t=e.warning!==d?d:e.warning;return r(s||t?{error:s,warning:t}:null),{error:s,warning:t}}))}}),[p,e,s,t,o,i,r,x,h,u]),g?(0,n.jsx)(l.oy,{content:g}):f?(0,n.jsx)(l.Pd,{content:f}):null})),F=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(),x=(0,m.W7)(r.derive.balances?.all,[o]),g=(0,a.useMemo)((()=>t?.stakingLedger?.active?.unwrap()),[t]),f=(0,a.useMemo)((()=>function(e,s,t){if(s?.stakingLedger&&t){const n=(s.unlocking||[]).reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)),a=s.redeemable||v.nw,o=t.freeBalance.sub(s.stakingLedger.active?.unwrap()||v.nw).sub(n).sub(a);return o.gt(e.consts.balances.existentialDeposit)?o.sub(e.consts.balances.existentialDeposit):v.nw}return null}(r,t,x)),[r,t,x]);return(0,n.jsxs)(l.u_,{header:i("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:i("Since this transaction deals with funding, the stash account will be used."),children:(0,n.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:i("stash account")})}),f&&(0,n.jsxs)(l.u_.Columns,{hint:i("The amount placed at-stake should allow some free funds for future transactions."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:f,isError:!!d?.error||!h||h.isZero(),label:i("additional funds to bond"),labelExtra:(0,n.jsx)(E.Z,{label:(0,n.jsx)("span",{className:"label",children:i("balance")}),params:o}),onChange:p}),(0,n.jsx)(T,{controllerId:e,currentAmount:g,onError:u,stashId:o,value:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:o,icon:"sign-in-alt",isDisabled:!h?.gt(v.nw)||!!d?.error,label:i("Bond more"),onStart:s,params:[h],tx:r.tx.staking.bondExtra})})]})}));var q=t(69187),O=t(48731),_=t(55858),V=t(6851),B=t(46186);const R={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]},Z=a.memo((function({onClose:e}){const{t:s}=w(),{queueRpc:t}=(0,C.L)(),[o,i]=(0,a.useState)("sr25519"),[r,c]=(0,a.useState)("0x"),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)("babe"),p=(0,a.useRef)([{text:s("Aura"),value:"aura"},{text:s("Babe"),value:"babe"},{text:s("Grandpa"),value:"gran"},{text:s("I'm Online"),value:"imon"},{text:s("Parachains"),value:"para"}]);(0,a.useEffect)((()=>{i(R[m][0])}),[m]),(0,a.useEffect)((()=>{try{const{phrase:e}=(0,V.Q)(d);(0,O.hu)((0,B.S)(e),"Invalid mnemonic phrase"),c((0,_.c)(q.Nn.createFromUri(d,{},o).publicKey))}catch{c("0x")}}),[o,d]);const x=(0,a.useCallback)((()=>t({rpc:{method:"insertKey",section:"author"},values:[m,d,r]})),[m,r,t,d]),g=(0,a.useMemo)((()=>R[m].map((e=>({text:s("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e})))),[m,s]);return(0,n.jsxs)(l.u_,{header:s("Inject Keys"),onClose:e,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsxs)(l.u_.Columns,{hint:s("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks."),children:[(0,n.jsx)(l.II,{autoFocus:!0,isError:66!==r.length,label:s("suri (seed & derivation)"),onChange:u,value:d}),(0,n.jsx)(l.Pd,{content:s("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]}),(0,n.jsxs)(l.u_.Columns,{hint:s("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys."),children:[(0,n.jsx)(l.Lt,{label:s("key type to set"),onChange:h,options:p.current,value:m}),(0,n.jsx)(l.Lt,{isDisabled:1===g.length,label:s("crypto type to use"),onChange:i,options:g,value:o})]}),(0,n.jsx)(l.u_.Columns,{hint:s("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used."),children:(0,n.jsx)(l.II,{isDisabled:!0,label:s("generated public key"),value:r})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.zx,{icon:"sign-in-alt",label:s("Submit key"),onClick:x})})]})})),$=a.memo((function({className:e="",controllerId:s,stashId:t}){const{t:a}=w();if(!t||!s)return null;const o=t!==s;return(0,n.jsxs)(l.u_.Columns,{className:e,hint:a(o?"The stash that is to be affected. The transaction will be sent from the associated controller account.":"The stash that is to be affected."),children:[(0,n.jsx)(l.rp,{defaultValue:t,isDisabled:!0,label:a("stash account")}),o&&(0,n.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:a("controller account")})]})})),L={withExposure:!0},z=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,stashId:i}){const{t:r}=w(),{api:d}=(0,c.h)(),[u,h]=(0,a.useState)([]),[{kickTx:p},x]=(0,a.useState)({}),g=(0,m.W7)(d.derive.staking.query,[i,L]),f=(0,a.useMemo)((()=>g?.exposureEraStakers?.others.map((({who:e})=>e.toString()))),[g]);return(0,a.useEffect)((()=>{try{x({kickTx:u.length?d.tx.staking.kick(u):null})}catch{x({kickTx:null})}}),[d,u]),(0,n.jsxs)(l.u_,{className:e,header:r("Remove nominees"),onClose:o,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)($,{controllerId:s,stashId:i}),f?(0,n.jsx)(l.m3,{available:f,availableLabel:r("existing/active nominators"),defaultValue:t,maxCount:128,onChange:h,valueLabel:r("nominators to be removed")}):(0,n.jsx)(l.$j,{label:r("Retrieving active nominators")})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,extrinsic:p,icon:"user-slash",isDisabled:!p,label:r("Remove"),onStart:o})})]})}));var W=t(3871),H=t(74065);const U=(0,S.e)("useInactives",(function(e,s){const{api:t}=(0,c.h)(),n=(0,H.X)(),[o,i]=(0,a.useState)({}),r=(0,m.W7)(t.derive.session.indexes);return(0,a.useEffect)((()=>{let a;return n.current&&s?.length&&r&&t.queryMulti([[t.query.staking.nominators,e]].concat(t.query.staking.erasStakers?s.map((e=>[t.query.staking.erasStakers,[r.activeEra,e]])):s.map((e=>[t.query.staking.stakers,e]))).concat(s.map((e=>[t.query.staking.slashingSpans,e]))),(([a,...o])=>{const l=o.slice(0,s.length),c=o.slice(s.length);n.current&&i(function(e,s,t,n,{activeEra:a},o,i){const r=e.consts.staking?.maxNominatorRewardedPerValidator,l=e.events.staking.SlashReported?[]:n.filter(((e,s)=>!t[s].isNone&&t[s].unwrap().lastNonzeroSlash.gt(o))),c=i.map((({others:e})=>e.sort(((e,s)=>(s.value?.unwrap()||v.nw).cmp(e.value?.unwrap()||v.nw))))).map(((e,t)=>!r||r.gtn(e.map((({who:e})=>e.toString())).indexOf(s))?null:n[t])).filter((e=>!!e&&!l.includes(e)));let d=i.map(((e,t)=>e.others.some((({who:e})=>e.eq(s)))?null:n[t])).filter((e=>!!e));const u=i.map(((e,s)=>e.total?.unwrap().isZero()||d.includes(n[s])&&o.gte(a)?n[s]:null)).filter((e=>!!e)).filter((e=>!l.includes(e)&&!c.includes(e))),m=n.filter((e=>!d.includes(e)&&!l.includes(e)&&!c.includes(e)));return d=d.filter((e=>!u.includes(e)&&!l.includes(e)&&!c.includes(e))),{nomsActive:m,nomsChilled:l,nomsInactive:d,nomsOver:c,nomsWaiting:u}}(t,e,c,s,r,a.unwrapOrDefault().submittedIn,l))})).then((e=>{a=e})).catch(console.error),()=>{a&&a()}}),[t,r,n,s,e]),o})),J={};function G(e,s=[],t){return s.length?[s.length,()=>{const a=function(e,s,t){if(!t?.validators)return J;const n={};return s.forEach((s=>{t.validators[s]?.others.some((t=>!(!t.who.eq(e)||!(0,W.S)(t.value)||(n[s]=t.value.toBn(),0))))})),n}(e,s,t);return s.map(((e,s)=>(0,n.jsx)(l.ax,{balance:a[e],value:e,withBalance:!!t&&!!a[e]},s)))}]:null}const Q=a.memo((function({nominating:e,stashId:s}){const{t}=w(),{api:o}=(0,c.h)(),{nomsActive:i,nomsChilled:r,nomsInactive:d,nomsOver:u,nomsWaiting:h}=U(s,e),p=(0,m.W7)(o.query.staking&&o.derive.session?.indexes),x=(0,m.W7)((0,g.m)(o.query.staking.erasStakers)&&o.derive.staking.eraExposure,[p?.activeEra]),[f,b,j,v,y]=(0,a.useMemo)((()=>[G(s,i,x),G(s,r),G(s,d),G(s,u),G(s,h)]),[x,i,r,d,u,h,s]);return(0,n.jsxs)(n.Fragment,{children:[v&&(0,n.jsx)(l.n0,{className:"stakeOver",renderChildren:v[1],summary:t("Oversubscribed nominations ({{count}})",{replace:{count:v[0]}})}),f&&(0,n.jsx)(l.n0,{renderChildren:f[1],summary:t("Active nominations ({{count}})",{replace:{count:f[0]}})}),j&&(0,n.jsx)(l.n0,{renderChildren:j[1],summary:t("Inactive nominations ({{count}})",{replace:{count:j[0]}})}),b&&(0,n.jsx)(l.n0,{renderChildren:b[1],summary:t("Renomination required ({{count}})",{replace:{count:b[0]}})}),y&&(0,n.jsx)(l.n0,{renderChildren:y[1],summary:t("Waiting nominations ({{count}})",{replace:{count:y[0]}})}),i&&d&&0===i.length&&0!==d.length&&(0,n.jsx)(l.Pd,{content:t("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]})})),X="staking:favorites",K=a.memo((function({className:e="",controllerId:s,poolId:t}){const{t:a}=w();return t&&s?(0,n.jsxs)(l.u_.Columns,{className:e,hint:a("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account."),children:[(0,n.jsx)(l.Rn,{defaultValue:t,isDisabled:!0,label:a("pool id")}),(0,n.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:a("member account")})]}):null})),Y=l.zo.div`
  article.warning {
    margin-top: 0;
  }

  .auto--toggle {
    margin: 0.5rem 0 0;
    text-align: right;
    width: 100%;
  }

  .ui--Static .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }

  .shortlist {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;

    .candidate {
      border: 1px solid #eee;
      border-radius: 0.25rem;
      margin: 0.25rem;
      padding-bottom: 0.25rem;
      padding-right: 0.5rem;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        border-color: transparent;
        border-style: solid;
        border-radius: 0.25em;
        border-width: 0.25em;
      }

      &.isAye {
        background: #fff;
        border-color: #ccc;
      }

      &.member::after {
        border-color: green;
      }

      &.runnerup::after {
        border-color: steelblue;
      }

      .ui--AddressMini-icon {
        z-index: 1;
      }

      .candidate-right {
        text-align: right;
      }
    }
  }
`,ee=a.memo((function({className:e="",controllerId:s,nominating:t,onChange:o,poolId:i,stashId:r,targets:{nominateIds:d=[]},withSenders:m}){const{t:h}=w(),{api:p}=(0,c.h)(),[x]=(0,u.r)(X),[g,f]=(0,a.useState)(t||[]),[b]=(0,a.useState)((()=>{const e=[...x.filter((e=>d.includes(e))),...(t||[]).filter((e=>!x.includes(e)))];return e.concat(...d.filter((s=>!e.includes(s))))}));(0,a.useEffect)((()=>{try{o({nominateTx:g?.length?i?p.tx.nominationPools.nominate(i,g):p.tx.staking.nominate(g):null})}catch{o({nominateTx:null})}}),[p,o,i,g]);const j=p.consts.staking.maxNominatorRewardedPerValidator?p.consts.staking.maxNominatorRewardedPerValidator.toNumber():p.consts.staking.maxNominations?p.consts.staking.maxNominations.toNumber():16;return(0,n.jsxs)(Y,{className:e,children:[m&&(i?(0,n.jsx)(K,{controllerId:s,poolId:i}):(0,n.jsx)($,{controllerId:s,stashId:r})),(0,n.jsxs)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:h("Nominators can be selected manually from the list of all currently available validators.")}),(0,n.jsx)("p",{children:h("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]}),children:[(0,n.jsx)(l.m3,{available:b,availableLabel:h("candidate accounts"),defaultValue:t,maxCount:j,onChange:f,valueLabel:h("nominated accounts")}),(0,n.jsx)(l.Pd,{content:h("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]})]})})),se=(0,l.zo)(l.u_)`
  .nominatePartial {
    .ui--Static .ui--AddressMini .ui--AddressMini-info {
      max-width: 10rem;
      min-width: 10rem;
    }
  }
`,te=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,poolId:i,stashId:r,targets:c}){const{t:d}=w(),[{nominateTx:u},m]=(0,a.useState)({});return(0,n.jsxs)(se,{className:e,header:d("Nominate Validators"),onClose:o,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(ee,{className:"nominatePartial",controllerId:s,nominating:t,onChange:m,poolId:i,stashId:r,targets:c,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,extrinsic:u,icon:"hand-paper",isDisabled:!u,label:d("Nominate"),onStart:o})})]})})),ne=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(),m=(0,a.useMemo)((()=>t?.unlocking?t.unlocking.reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)):v.nw),[t]);return(0,n.jsxs)(l.u_,{header:i("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)($,{controllerId:e,stashId:o}),m&&(0,n.jsx)(l.u_.Columns,{hint:i("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded"),children:(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:m,isError:!d||d.eqn(0)||d.gt(m),label:i("rebonded amount"),onChange:u})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!d||d.isZero()||!m||d.gt(m),label:i("Rebond"),onStart:s,params:[d],tx:r.tx.staking.rebond})})]})})),ae={transform:e=>e.isSome?e.unwrap().toString():null},oe={transform:e=>e.isSome?e.unwrap().stash.toString():null},ie=a.memo((function({accountId:e,controllerId:s,defaultController:t,onError:o}){const{t:i}=w(),{api:r}=(0,c.h)(),d=(0,m.W7)(s?r.query.staking.bonded:null,[s],ae),u=(0,m.W7)(s?r.query.staking.ledger:null,[s],oe),h=(0,m.W7)(s?r.derive.balances?.all:null,[s]),[{error:p,isFatal:x},g]=(0,a.useState)({error:null,isFatal:!1});return(0,a.useEffect)((()=>{if(t!==s){let t=null,n=!1;d&&s!==e?(n=!0,t=i("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:d}})):u?(n=!0,t=i("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:u}})):h?.freeBalance.isZero()?(n=!0,t=i("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===e&&(t=i("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),o(t,n),g((e=>e.error!==t?{error:t,isFatal:n}:e))}}),[e,h,d,s,t,o,u,i]),p&&e?x?(0,n.jsx)(l.oy,{content:p}):(0,n.jsx)(l.Pd,{content:p}):null})),re=a.memo((function({defaultControllerId:e,onClose:s,stashId:t}){const{t:o}=w(),{api:i}=(0,c.h)(),[r,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),h=(0,a.useCallback)(((e,s)=>d(s)),[]),p=(0,a.useMemo)((()=>1===i.tx.staking.setController.meta.args.length),[i]);return(0,n.jsxs)(l.u_,{header:o("Change controller account"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:o("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account."),children:(0,n.jsx)(l.rp,{isDisabled:!0,label:o("stash account"),value:t})}),p&&(0,n.jsxs)(l.u_.Columns,{hint:o("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account."),children:[(0,n.jsx)(l.rp,{defaultValue:e,label:o("controller account"),onChange:m,type:"account",value:u}),(0,n.jsx)(ie,{accountId:t,controllerId:u,defaultController:e,onError:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:t,icon:"sign-in-alt",isDisabled:r||!!p&&!u,label:o("Set controller"),onStart:s,params:p?[u]:[],tx:i.tx.staking.setController})})]})}));function le(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}const ce=a.memo((function({controllerId:e,defaultDestination:s,onClose:t,stashId:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)((()=>(s?.isAccount?"Account":s?.toString())||"Staked")),[h,p]=(0,a.useState)((()=>s?.isAccount?s.asAccount.toString():null)),x=(0,m.W7)(r.derive.balances?.all,[h]),g=(0,a.useMemo)((()=>le(i)),[i]),f="Account"===d,b=f&&x&&x.accountId.eq(h)&&x.freeBalance.isZero();return(0,n.jsxs)(l.u_,{header:i("Bonding Preferences"),onClose:t,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)($,{controllerId:e,stashId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("All rewards will go towards the selected output destination when a payout is made."),children:[(0,n.jsx)(l.Lt,{defaultValue:s?.toString(),label:i("payment destination"),onChange:u,options:g,value:d}),f&&(0,n.jsx)(l.rp,{label:i("the payment account"),onChange:p,type:"account",value:h}),b&&(0,n.jsx)(l.oy,{content:i("The selected destination account does not exist and cannot be used to receive rewards")})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!e||f&&(!h||b),label:i("Set reward destination"),onStart:t,params:[f?{Account:h}:d],tx:r.tx.staking.setPayee})})]})}));var de=t(74076);const ue=new Uint8Array,me=a.memo((function({className:e="",controllerId:s,onChange:t,stashId:o,withFocus:i,withSenders:r}){const{t:d}=w(),{api:u}=(0,c.h)(),[m,h]=(0,a.useState)(null);return(0,a.useEffect)((()=>{try{t({sessionTx:(0,de.vq)(m)?u.tx.session.setKeys(m,ue):null})}catch{t({sessionTx:null})}}),[u,m,t]),(0,n.jsxs)("div",{className:e,children:[r&&(0,n.jsx)($,{controllerId:s,stashId:o}),(0,n.jsx)(l.u_.Columns,{hint:d("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session."),children:(0,n.jsx)(l.II,{autoFocus:i,isError:!m,label:d("Keys from rotateKeys"),onChange:h,placeholder:"0x..."})})]})})),he=a.memo((function({controllerId:e,onClose:s,stashId:t}){const{t:o}=w(),[{sessionTx:i},r]=(0,a.useState)({});return(0,n.jsxs)(l.u_,{header:o("Set Session Key"),onClose:s,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(me,{controllerId:e,onChange:r,stashId:t,withFocus:!0,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,extrinsic:i,icon:"sign-in-alt",isDisabled:!i,label:o("Set Session Key"),onStart:s})})]})}));var pe=t(65874);const xe=(0,S.e)("useUnbondDuration",(function(){const{api:e}=(0,c.h)(),s=(0,m.W7)(e.derive.session.info);return(0,a.useMemo)((()=>s&&s.sessionLength.gt(v.If)?s.eraLength.mul(e.consts.staking.bondingDuration):void 0),[e,s])})),ge=(0,l.zo)(l.u_)`
  .staking--Unbond--max > div {
    justify-content: flex-end;

    & .column {
      flex: 0;
    }
  }
`,fe=a.memo((function({controllerId:e,onClose:s,stakingLedger:t,stashId:o}){const{t:i}=w(),{api:r}=(0,c.h)(),d=xe(),[u]=(0,a.useState)((()=>t?.active?.unwrap()||null)),[m,h]=(0,a.useState)();return(0,n.jsxs)(ge,{header:i("Unbond funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)($,{controllerId:e,stashId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:u,label:i("unbond amount"),labelExtra:(0,n.jsx)(f.Z,{label:(0,n.jsx)("span",{className:"label",children:i("bonded")}),value:u}),maxValue:u,onChange:h,withMax:!0}),d?.gtn(0)&&(0,n.jsx)(l.qG,{label:i("on-chain bonding duration"),children:(0,n.jsx)(pe.Z,{value:d})})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"unlock",isDisabled:!m?.gt(v.nw),label:i("Unbond"),onStart:s,params:[m],tx:r.tx.staking.unbond})})]})}));var be=t(52107);const je=new(j())(1e7),ve=a.memo((function({className:e="",controllerId:s,minCommission:t,onChange:o,stashId:i,withFocus:r,withSenders:d}){const{t:u}=w(),{api:m}=(0,c.h)(),[h,p]=(0,a.useState)(v.If),[x,f]=(0,a.useState)(!0),b=(0,a.useMemo)((()=>t?(0,be.x)(t.div(je),v.If):v.If),[t]),j=(0,a.useRef)([{text:u("Yes, allow nominations"),value:!0},{text:u("No, block all nominations"),value:!1}]);(0,a.useEffect)((()=>{try{o({validateTx:m.tx.staking.validate({blocked:!x,commission:h})})}catch{o({validateTx:null})}}),[m,x,h,o]);const y=(0,a.useCallback)((e=>e&&p(e.isZero()?v.If:e.mul(je))),[]),k=!!t&&h.lt(t);return(0,n.jsxs)("div",{className:e,children:[d&&(0,n.jsx)($,{controllerId:s,stashId:i}),(0,n.jsxs)(l.u_.Columns,{hint:u("The commission is deducted from all rewards before the remainder is split with nominators."),children:[(0,n.jsx)(l.Rn,{autoFocus:r,defaultValue:b,isError:k,isZeroable:!0,label:u("reward commission percentage"),maxValue:v.S8,onChange:y}),k&&(0,n.jsx)(l.oy,{content:u("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(t.mul(v.S8).div(je).toNumber()/100).toFixed(2)}})})]}),(0,g.m)(m.tx.staking.kick)&&(0,n.jsx)(l.u_.Columns,{hint:u("The validator can block any new nominations. By default it is set to allow all nominations."),children:(0,n.jsx)(l.Lt,{defaultValue:!0,label:u("allows new nominations"),onChange:f,options:j.current})})]})})),ye=a.memo((function({controllerId:e,minCommission:s,onClose:t,stashId:o}){const{t:i}=w(),[{validateTx:r},c]=(0,a.useState)({});return(0,n.jsxs)(l.u_,{header:i("Set validator preferences"),onClose:t,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(ve,{controllerId:e,minCommission:s,onChange:c,stashId:o,withFocus:!0,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,extrinsic:r,icon:"certificate",isDisabled:!r,label:i("Validate"),onStart:t})})]})})),we=a.memo((function({minBond:e,stakingInfo:s}){const{t}=w();return(0,a.useMemo)((()=>e&&s&&s.stakingLedger.active.unwrap().lt(e)),[e,s])?(0,n.jsx)(l.Pd,{content:t("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,M.a)(e)}})}):null})),ke=l.zo.tr`
  .ui--Button-Group {
    display: inline-block;
    margin-right: 0.25rem;
    vertical-align: inherit;
  }
`,Ce=a.memo((function({allSlashes:e,className:s="",info:{controllerId:t,destination:o,hexSessionIdNext:i,hexSessionIdQueue:r,isLoading:d,isOwnController:u,isOwnStash:h,isStashNominating:p,isStashValidating:x,nominating:f,sessionIds:b,stakingLedger:j,stashId:v},isDisabled:y,minCommission:k,targets:S}){const{t:A}=w(),{api:E}=(0,c.h)(),{queueExtrinsic:M}=(0,C.L)(),[D,T]=(0,N.O)(),[q,O]=(0,N.O)(),[_,V]=(0,N.O)(),[B,R]=(0,N.O)(),[$,L]=(0,N.O)(),[W,H]=(0,N.O)(),[U,J]=(0,N.O)(),[G,X]=(0,N.O)(),[K,Y]=(0,N.O)(),[ee,se]=(0,N.O)(),{balancesAll:ae,spanCount:oe,stakingAccount:ie}=function(e,s){const t=(0,a.useMemo)((()=>[s]),[s]),n=(0,m.W7)(e.derive.balances?.all,t),o=(0,m.W7)(e.derive.staking.account,t);return{balancesAll:n,spanCount:P(s),stakingAccount:o}}(E,v),le=(0,a.useMemo)((()=>1===E.tx.staking.setController.meta.args.length||v!==t),[E,t,v]),de=(0,a.useMemo)((()=>function(e,s=[]){return s.map((([s,t])=>({era:s,slashes:t.filter((({others:s,validator:t})=>t.eq(e)||s.some((([s])=>s.eq(e)))))}))).filter((({slashes:e})=>e.length))}(v,e)),[e,v]),ue=(0,a.useCallback)((()=>M({accountId:t,extrinsic:1===E.tx.staking.withdrawUnbonded.meta.args.length?E.tx.staking.withdrawUnbonded(oe):E.tx.staking.withdrawUnbonded()})),[E,t,M,oe]),me=!!ie?.stakingLedger&&!ie.stakingLedger.active?.isEmpty;return(0,n.jsxs)(ke,{className:s,children:[(0,n.jsx)("td",{className:"badge together",children:0!==de.length&&(0,n.jsx)(l.Ct,{color:"red",hover:A("Slashed in era {{eras}}",{replace:{eras:de.map((({era:e})=>(0,I.u)(e))).join(", ")}}),icon:"skull-crossbones"})}),(0,n.jsxs)("td",{className:"address",children:[(0,n.jsx)(l.N,{value:v}),D&&(0,n.jsx)(F,{controllerId:t,onClose:T,stakingInfo:ie,stashId:v}),q&&(0,n.jsx)(Z,{onClose:O}),_&&t&&(0,n.jsx)(z,{controllerId:t,onClose:V,stashId:v}),B&&t&&(0,n.jsx)(te,{controllerId:t,nominating:f,onClose:R,stashId:v,targets:S}),$&&(0,n.jsx)(ne,{controllerId:t,onClose:L,stakingInfo:ie,stashId:v}),U&&t&&(0,n.jsx)(re,{defaultControllerId:t,onClose:J,stashId:v}),W&&t&&(0,n.jsx)(ce,{controllerId:t,defaultDestination:o,onClose:H,stashId:v}),G&&t&&(0,n.jsx)(he,{controllerId:t,onClose:X,stashId:v}),K&&(0,n.jsx)(fe,{controllerId:t,onClose:Y,stakingLedger:j,stashId:v}),ee&&t&&(0,n.jsx)(ye,{controllerId:t,minCommission:k,onClose:se,stashId:v})]}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(l.ax,{value:t})}),(0,n.jsx)("td",{className:"start media--1200",children:o?.isAccount?(0,n.jsx)(l.ax,{value:o.asAccount}):o?.toString()}),(0,n.jsxs)("td",{className:"number",children:[(0,n.jsx)(l.d4,{stakingInfo:ie}),(0,n.jsx)(l.JM,{stakingInfo:ie}),(0,n.jsx)(l.by,{stakingInfo:ie})]}),x?(0,n.jsxs)("td",{className:"all",children:[(0,n.jsx)(l.hl,{address:v,withBalance:!1,withHexSessionId:"0x"!==i&&[r,i],withValidatorPrefs:!0}),(0,n.jsx)(we,{minBond:S.minValidatorBond,stakingInfo:ie})]}):(0,n.jsx)("td",{className:"all expand",children:p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{nominating:f,stashId:v}),(0,n.jsx)(we,{minBond:S.minNominatorBond,stakingInfo:ie})]})}),(0,n.jsx)("td",{className:"button",children:!d&&(0,n.jsxs)(n.Fragment,{children:[p||x?(0,n.jsx)(l.cA,{accountId:t,icon:"stop",isDisabled:!u||y,label:A("Stop"),tx:E.tx.staking.chill},"stop"):(0,n.jsxs)(l.zx.Group,{children:[b.length&&"0x"!==i?(0,n.jsx)(l.zx,{icon:"certificate",isDisabled:!u||y||!me,label:A("Validate"),onClick:se},"validate"):(0,n.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!u||y,label:A("Session Key"),onClick:X},"set"),(0,n.jsx)(l.zx,{icon:"hand-paper",isDisabled:!u||y||!me,label:A("Nominate"),onClick:R},"nominate")]}),(0,n.jsx)(l.GI,{isDisabled:y,value:(0,n.jsxs)(l.v2,{children:[(0,n.jsx)(l.v2.Item,{isDisabled:!h||!ae?.freeBalance.gtn(0),label:A("Bond more funds"),onClick:T}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.stakingLedger||ie.stakingLedger.active?.isEmpty,label:A("Unbond funds"),onClick:Y}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.unlocking?.length,label:A("Rebond funds"),onClick:L}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.redeemable||!ie.redeemable.gtn(0),label:A("Withdraw unbonded funds"),onClick:ue}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!h||!le,label:A("Change controller account"),onClick:J}),(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:A("Change reward destination"),onClick:H}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:A("Change validator preferences"),onClick:se}),(0,g.m)(E.tx.staking.kick)&&(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:A("Remove nominees"),onClick:V})]}),(0,n.jsx)(l.v2.Divider,{}),!p&&(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:A("Change session keys"),onClick:X}),p&&(0,n.jsx)(l.v2.Item,{isDisabled:!u||!S.validators?.length,label:A("Set nominees"),onClick:R}),!p&&(0,n.jsx)(l.v2.Item,{label:A("Inject session keys (advanced)"),onClick:O})]})},"settings")]})})]})})),Ne=a.memo((function({allSlashes:e,className:s,footer:t,isInElection:o,list:i,minCommission:r,targets:c}){const{t:d}=w(),u=(0,a.useRef)([[d("stashes"),"start",2],[d("controller"),"address"],[d("rewards"),"start media--1200"],[d("bonded"),"number"],[],[]]);return(0,n.jsx)(l.iA,{className:s,empty:i&&d("No funds staked yet. Bond funds to validate or nominate a validator"),footer:t,header:u.current,children:i?.map((s=>(0,n.jsx)(Ce,{allSlashes:e,info:s,isDisabled:o,minCommission:r,targets:c},s.stashId)))})})),Ie={bondTx:null,controllerId:null,controllerTx:null,stashId:null},Se=a.memo((function({className:e="",isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onChange:r}){const{t:d}=w(),{api:u}=(0,c.h)(),[h,p]=(0,a.useState)(),[x,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[k,C]=(0,a.useState)("Staked"),[N,I]=(0,a.useState)(null),[S,A]=(0,a.useState)(null),[P,M]=(0,a.useState)(null),D=(0,m.W7)(u.derive.balances?.all,[S]),F=(0,m.W7)(u.derive.balances?.all,[N]),q=xe(),O=(0,a.useMemo)((()=>3===u.tx.staking.bond.meta.args.length),[u]),_=(0,a.useMemo)((()=>le(d)),[d]),V=(0,a.useCallback)(((e,s)=>b(s)),[]);(0,a.useEffect)((()=>{D&&M(D.freeBalance.gt(u.consts.balances.existentialDeposit)?D.freeBalance.sub(u.consts.balances.existentialDeposit):v.nw)}),[u,D]),(0,a.useEffect)((()=>{M(null)}),[S]),(0,a.useEffect)((()=>{const e="Account"===k?{Account:N}:k,[s,t]=O?[j,f]:[S,null];r(h&&h.gtn(0)&&!x?.error&&!t&&s&&S?{bondTx:O?u.tx.staking.bond(S,h,e):u.tx.staking.bond(h,e),controllerId:s,controllerTx:O?u.tx.staking.setController(s):null,stashId:S}:Ie)}),[u,h,x,f,j,k,N,O,r,S]);const B=!!h?.gtn(0),R="Account"===k,Z=R&&F&&F.accountId.eq(N)&&F.freeBalance.isZero();return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(l.u_.Columns,{hint:O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,n.jsx)("p",{children:d("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The stash should be treated as a cold wallet.")}),(0,n.jsx)("p",{children:d("As such it is recommended that you setup a proxy to control operations via the stash.")})]}),children:[(0,n.jsx)(l.rp,{label:d("stash account"),onChange:A,type:"account",value:S}),O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.rp,{label:d("controller account"),onChange:y,type:"account",value:j}),(0,n.jsx)(ie,{accountId:S,controllerId:j,onError:V})]})]}),P&&(0,n.jsxs)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,n.jsx)("p",{children:d("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]}),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:P,isError:!B||!!x?.error,label:d("value bonded"),labelExtra:(0,n.jsx)(E.Z,{label:(0,n.jsx)("span",{className:"label",children:d("balance")}),params:S}),onChange:p}),(0,n.jsx)(T,{controllerId:j,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onError:g,stashId:S,value:h}),q?.gtn(0)&&(0,n.jsx)(l.qG,{label:d("on-chain bonding duration"),children:(0,n.jsx)(pe.Z,{value:q})})]}),(0,n.jsxs)(l.u_.Columns,{hint:d("Rewards (once paid) can be deposited to either the stash or controller, with different effects."),children:[(0,n.jsx)(l.Lt,{defaultValue:0,label:d("payment destination"),onChange:C,options:_,value:k}),R&&(0,n.jsx)(l.rp,{label:d("the payment account"),onChange:I,type:"account",value:N}),Z&&(0,n.jsx)(l.oy,{content:d("The selected destination account does not exist and cannot be used to receive rewards")})]})]})})),Ae=[],Pe=a.memo((function({isInElection:e,targets:s}){const{t}=w(),{api:o}=(0,c.h)(),[i,r]=(0,N.O)(),[{bondTx:d,controllerId:u,controllerTx:m,stashId:h},p]=(0,a.useState)({}),[{nominateTx:x},f]=(0,a.useState)({}),[b,j]=(0,a.useState)(1),v=e||!(0,g.m)(o.tx.utility?.batch),y=(0,a.useCallback)((()=>j((e=>e+1))),[]),k=(0,a.useCallback)((()=>j((e=>e-1))),[]),C=(0,a.useCallback)((()=>{p({}),f({}),j(1),r()}),[r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",isDisabled:v||!s.validators?.length,label:t("Nominator"),onClick:C},"new-nominator"),i&&(0,n.jsxs)(l.u_,{header:t("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:b}}),onClose:C,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[1===b&&(0,n.jsx)(Se,{isNominating:!0,minNominated:s.minNominated,minNominatorBond:s.minNominatorBond,onChange:p}),u&&h&&2===b&&(0,n.jsx)(ee,{controllerId:u,nominating:Ae,onChange:f,stashId:h,targets:s}),(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.RN,{})})]}),(0,n.jsxs)(l.u_.Actions,{children:[(0,n.jsx)(l.zx,{icon:"step-backward",isDisabled:1===b,label:t("prev"),onClick:k}),2===b?(0,n.jsx)(l.cA,{accountId:h,icon:"sign-in-alt",isDisabled:!(d&&x&&h&&u),label:t("Bond & Nominate"),onStart:C,params:[h===u?[d,x]:[d,x,m]],tx:o.tx.utility.batchAll||o.tx.utility.batch}):(0,n.jsx)(l.zx,{icon:"step-forward",isDisabled:!d,label:t("next"),onClick:y})]})]})]})})),Ee=a.memo((function(){const{t:e}=w(),[s,t]=(0,N.O)(),[{bondTx:o,stashId:i},r]=(0,a.useState)({}),c=(0,a.useCallback)((()=>{r({}),t()}),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",label:e("Stash"),onClick:c},"new-stash"),s&&(0,n.jsxs)(l.u_,{header:e("Bonding Preferences"),onClose:c,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(Se,{onChange:r})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:i,extrinsic:o,icon:"sign-in-alt",isDisabled:!o||!i,label:e("Bond"),onStart:c})})]})]})})),Me=a.memo((function({isInElection:e,minCommission:s,targets:t}){const{t:o}=w(),{api:i}=(0,c.h)(),[r,d]=(0,N.O)(),[{bondTx:u,controllerId:m,controllerTx:h,stashId:p},x]=(0,a.useState)({}),[{sessionTx:f},b]=(0,a.useState)({}),[{validateTx:j},v]=(0,a.useState)({}),[y,k]=(0,a.useState)(1),C=e||!(0,g.m)(i.tx.utility?.batch),I=(0,a.useCallback)((()=>k((e=>e+1))),[]),S=(0,a.useCallback)((()=>k((e=>e-1))),[]),A=(0,a.useCallback)((()=>{x({}),b({}),v({}),k(1),d()}),[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",isDisabled:C,label:o("Validator"),onClick:A},"new-validator"),r&&(0,n.jsxs)(l.u_,{header:o("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:y}}),onClose:A,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[1===y&&(0,n.jsx)(Se,{minValidatorBond:t.minValidatorBond,onChange:x}),m&&p&&2===y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(me,{controllerId:m,onChange:b,stashId:p,withFocus:!0}),(0,n.jsx)(ve,{controllerId:m,minCommission:s,onChange:v,stashId:p})]}),(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.RN,{})})]}),(0,n.jsxs)(l.u_.Actions,{children:[(0,n.jsx)(l.zx,{icon:"step-backward",isDisabled:1===y,label:o("prev"),onClick:S}),2===y?(0,n.jsx)(l.cA,{accountId:p,icon:"sign-in-alt",isDisabled:!u||!f||!j,label:o("Bond & Validate"),onStart:A,params:[m===p?[u,f,j]:[u,f,j,h]],tx:i.tx.utility.batchAll||i.tx.utility.batch}):(0,n.jsx)(l.zx,{icon:"step-forward",isDisabled:!u,label:o("next"),onClick:I})]})]})]})}));var De=t(19042),Te=t(63985);const Fe="rewards",qe=a.memo((function({className:e,controllerId:s,onClose:t,poolId:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(Fe),[m,h]=(0,a.useState)(),p=(0,Te.Z)(s,m,v.nw),x=(0,a.useRef)([{text:i("Free balance"),value:"free"},{text:i("Pool rewards"),value:"rewards"}]);return(0,n.jsxs)(l.u_,{className:e,header:i("Bond extra into pool"),onClose:t,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(K,{controllerId:s,poolId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("You can either bond a specific amount from your free balance, or all of the accumulated rewards."),children:[(0,n.jsx)(l.Lt,{defaultValue:Fe,label:i("type of funds to bond"),onChange:u,options:x.current}),"free"===d&&(0,n.jsx)(l.H,{autoFocus:!0,isError:p,label:i("additional free funds to bond"),labelExtra:(0,n.jsx)(E.Z,{label:(0,n.jsx)("span",{className:"label",children:i("balance")}),params:s}),onChange:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,icon:"sign-in-alt",isDisabled:"free"===d&&p,label:i("Bond Extra"),onStart:t,params:["free"===d?{FreeBalance:m}:"Rewards"],tx:r.tx.nominationPools.bondExtra})})]})})),Oe=a.memo((function({className:e,controllerId:s,maxUnbond:t,onClose:o,poolId:i}){const{t:r}=w(),{api:d}=(0,c.h)(),[u,m]=(0,a.useState)(),h=xe(),p=!u||!t||u.gt(t);return(0,n.jsxs)(l.u_,{className:e,header:r("Unbond funds from pool"),onClose:o,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(K,{controllerId:s,poolId:i}),(0,n.jsxs)(l.u_.Columns,{hint:r("The amount to unbond. It should be less or equal to the full bonded amount."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:t,isError:p,label:r("amount to unbond"),labelExtra:(0,n.jsx)(f.Z,{label:(0,n.jsx)("span",{className:"label",children:r("bonded")}),value:t}),maxValue:t,onChange:m,withMax:!0}),h?.gtn(0)&&(0,n.jsx)(l.qG,{label:r("on-chain bonding duration"),children:(0,n.jsx)(pe.Z,{value:h})})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,icon:"unlock",isDisabled:p,label:r("Unbond"),onStart:o,params:[s,u],tx:d.tx.nominationPools.unbond})})]})})),_e={transform:e=>e.unwrapOr(null)},Ve=(0,S.e)("useAccountInfo",(function(e){const{api:s}=(0,c.h)(),t=(0,H.X)(),[n,o]=(0,a.useState)(null),i=(0,m.W7)(s.query.nominationPools.poolMembers,[e],_e);return(0,a.useEffect)((()=>{i&&s.call.nominationPoolsApi?.pendingRewards(e).then((e=>t.current&&o({claimable:e,member:i}))).catch(console.error)}),[e,i,s,t]),n})),Be=a.memo((function({accountId:e,className:s,info:{bonded:{roles:t},metadata:o,nominating:i,stashId:r},isFirst:d,poolId:u,sessionProgress:m,targets:h}){const{t:p}=w(),{api:x}=(0,c.h)(),g=P(r),{queueExtrinsic:b}=(0,C.L)(),[v,y]=(0,N.O)(),[k,S]=(0,N.O)(),[A,E]=(0,N.O)(),M=Ve(e),D=(0,a.useMemo)((()=>m&&M?.member.unbondingEras&&!M.member.unbondingEras.isEmpty?function(e,s,{activeEra:t},{unbondingEras:n}){const a=[],o=new(j())(0);for(const[e,s]of n.entries())e.lte(t)?o.iadd(s):a.push({remainingEras:e.sub(t),value:s});return{accountId:e,controllerId:e,redeemable:o,stashId:s,unlocking:a}}(e,r,m,M.member):null),[M,e,r,m]),T=(0,a.useCallback)((()=>b({accountId:e,extrinsic:x.tx.nominationPools.claimPayout()})),[x,e,b]),F=(0,a.useCallback)((()=>b({accountId:e,extrinsic:x.tx.nominationPools.withdrawUnbonded(e,g)})),[x,e,g,b]),{isNominator:q}=(0,a.useMemo)((()=>function(e,{nominator:s,root:t}){return{isNominator:s.eq(e)||t.eq(e)}}(e,t)),[e,t]);return(0,n.jsxs)("tr",{className:s,children:[(0,n.jsx)("td",{className:"number",children:(0,n.jsx)("h1",{children:d&&(0,I.u)(u)})}),(0,n.jsx)("td",{className:"start",children:d&&o}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(l.N,{value:e})}),(0,n.jsx)("td",{className:"number",children:M&&(0,n.jsxs)(n.Fragment,{children:[!M.member.points.isZero()&&(0,n.jsx)(f.Z,{value:M.member.points}),D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.JM,{stakingInfo:D}),(0,n.jsx)(l.by,{isPool:!0,stakingInfo:D})]})]})}),(0,n.jsx)("td",{className:"number",children:M&&!M.claimable.isZero()&&(0,n.jsx)(f.Z,{value:M.claimable})}),(0,n.jsx)("td",{className:"number",children:d&&i&&(0,n.jsx)(Q,{nominating:i,stashId:r})}),(0,n.jsxs)("td",{className:"button",children:[(0,n.jsx)(l.Ct,{color:q?"green":"transparent",icon:"hand-paper"}),v&&(0,n.jsx)(qe,{controllerId:e,onClose:y,poolId:u}),k&&(0,n.jsx)(te,{controllerId:e,nominating:i,onClose:S,poolId:u,stashId:e,targets:h}),M&&A&&(0,n.jsx)(Oe,{controllerId:e,maxUnbond:M.member.points,onClose:E,poolId:u}),(0,n.jsx)(l.GI,{value:(0,n.jsxs)(l.v2,{children:[(0,n.jsx)(l.v2.Item,{label:p("Bond more funds"),onClick:y}),(0,n.jsx)(l.v2.Item,{isDisabled:!M||M.member.points.isZero(),label:p("Unbond funds"),onClick:E}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!M||M.claimable.isZero(),label:p("Withdraw claimable"),onClick:T}),(0,n.jsx)(l.v2.Item,{isDisabled:!D||D.redeemable.isZero(),label:p("Withdraw unbonded"),onClick:F}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!q,label:p("Set nominees"),onClick:S})]})},"settings")]})]})})),Re=a.memo((function({className:e,count:s,members:t,poolId:a,sessionProgress:o,targets:i}){const r=(0,De.Z)(a);return r?(0,n.jsx)(n.Fragment,{children:Object.keys(t).map(((t,l)=>(0,n.jsx)(Be,{accountId:t,className:`${e||""} ${s%2?"isEven":"isOdd"}`,info:r,isFirst:0===l,poolId:a,sessionProgress:o,targets:i},`${a.toString()}:${t}`)))}):null})),Ze=a.memo((function({className:e,list:s,targets:t}){const{t:o}=w(),{api:i}=(0,c.h)(),r=(0,m.W7)(i.derive.session.progress),d=(0,a.useRef)([[o("pools"),"start",2],[o("account"),"address"],[o("bonded")],[o("claimable")],[],[]]);return(0,n.jsx)(l.iA,{className:e,empty:s&&o("Not participating in any pools. Join a pool first."),header:d.current,children:s?.map((({members:e,poolId:s},a)=>(0,n.jsx)(Re,{count:a,members:e,poolId:s,sessionProgress:r,targets:t},s.toString())))})}));function $e({isStashNominating:e,isStashValidating:s}){return s?1:e?5:99}function Le(e,s){return $e(e)-$e(s)}function ze(e,s){return s.filter((({isStashNominating:s,isStashValidating:t})=>{switch(e){case 1:return s;case 2:return t;case 3:return!s&&!t;default:return!0}}))}function We(e,s){const t=function(e,{bondedNoms:s,bondedNone:t,bondedTotal:n,bondedVals:a}){switch(e){case 0:default:return n;case 1:return s;case 2:return a;case 3:return t}}(e,s);return t&&(0,n.jsx)(f.Z,{value:t})}const He=a.memo((function({className:e="",isInElection:s,minCommission:t,ownPools:o,ownStashes:i,targets:r}){const{t:d}=w(),{api:u}=(0,c.h)(),m=(0,x.g)(),[h,p]=(0,a.useState)(0),[g,f]=(0,a.useState)(0),b=(0,a.useRef)([{text:d("Stashed"),value:"stash"},{text:d("Pooled"),value:"pool"}]),y=(0,a.useRef)([{text:d("All stashes"),value:"all"},{text:d("Nominators"),value:"noms"},{text:d("Validators"),value:"vals"},{text:d("Inactive"),value:"chill"}]),C=(0,a.useMemo)((()=>function(e){if(!e)return{};const s=new(j())(0),t=new(j())(0),n=new(j())(0),a=new(j())(0);return e.forEach((({isStashNominating:e,isStashValidating:o,stakingLedger:i})=>{const r=i?.total?i.total.unwrap():v.nw;a.iadd(r),e?s.iadd(r):o?n.iadd(r):t.iadd(r)})),{bondedNoms:s,bondedNone:t,bondedTotal:a,bondedVals:n,foundStashes:e.sort(Le)}}(i)),[i]),[N,I]=(0,a.useMemo)((()=>[C.foundStashes&&ze(g,C.foundStashes),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:4}),(0,n.jsx)("td",{className:"number",children:We(g,C)}),(0,n.jsx)("td",{colSpan:2})]},"footer")]),[C,g]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(l.zx.Group,{children:[u.consts.nominationPools&&(0,n.jsx)(l.tX,{onChange:p,options:b.current,value:h}),0===h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.tX,{onChange:f,options:y.current,value:g}),(0,n.jsx)(Pe,{isInElection:s,targets:r}),(0,n.jsx)(Me,{isInElection:s,minCommission:t,targets:r}),(0,n.jsx)(Ee,{})]})]}),(0,n.jsx)(k,{isInElection:s}),0===h?(0,n.jsx)(Ne,{allSlashes:m,footer:I,isInElection:s,list:N,minCommission:t,targets:r}):(0,n.jsx)(Ze,{allSlashes:m,list:o,targets:r})]})}));var Ue=t(79760);const Je=(0,S.e)("useQueryModule",(function(){const{api:e}=(0,c.h)();return(0,a.useMemo)((()=>e.query.voterList||e.query.voterBagsList||e.query.bagsList),[e])})),Ge={transform:e=>e.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,s)=>{const t=s.bagUpper.toString();return e[t]||(e[t]=[]),e[t].push({node:s,stashId:s.id.toString()}),e}),{})},Qe=(0,S.e)("useBagsNodes",(function(e){const s=Je(),[t,n]=(0,a.useState)(),o=(0,m.W7)(s.listNodes.multi,[e],Ge);return(0,a.useEffect)((()=>{o&&n((e=>function(e,s){return Object.entries(s).reduce(((s,[t,n])=>(s[t]=e?.[t]&&JSON.stringify(n)===JSON.stringify(e[t])?e[t]:n,s)),{})}(e,o)))}),[o]),t})),Xe=a.memo((function({bagUpper:e,stashIds:s}){const{t}=w(),{api:o}=(0,c.h)(),[i,r]=(0,a.useState)(null),[d,u]=(0,N.O)(),m=Qe(s),h=(0,a.useMemo)((()=>m?function(e,s){return Object.values(e[s.toString()]||{}).map((({stashId:e})=>e))}(m,e):[]),[e,m]),[p,x]=(0,a.useState)([]),g=(0,a.useMemo)((()=>p.map((e=>(o.tx.voterBagsList||o.tx.bagsList||o.tx.voterList).rebag(e)))),[o,p]),f=(0,Ue.b)(g);return h.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"refresh",label:t("Rebag {{count}}",{replace:{count:h.length}}),onClick:u}),d&&(0,n.jsxs)(l.u_,{header:t("Rebag dislocated entries"),onClose:u,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:t("The account that will submit the rebag transaction."),children:(0,n.jsx)(l.rp,{label:t("rebag from account"),onChange:r,type:"account"})}),(0,n.jsx)(l.u_.Columns,{hint:t("The accounts that will be rebagged as a result of this operation."),children:(0,n.jsx)(l.m3,{available:h,availableLabel:t("unselected"),defaultValue:h,maxCount:Number.MAX_SAFE_INTEGER,onChange:x,valueLabel:t("to rebag")})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:i,extrinsic:f,icon:"refresh",isDisabled:!f||!p.length,label:t("Rebag"),onStart:u})})]})]}):null})),Ke=l.zo.div`
  .ui--AddressMini {
    vertical-align: middle;
  }
`,Ye=a.memo((function({bagLower:e,bagUpper:s,className:t,isLoading:o,list:i,stashId:r}){const{t:d}=w(),{api:u}=(0,c.h)(),{canJump:m,jumpCount:h,stashInfo:p}=(0,a.useMemo)((()=>function(e,s,t,n=[]){const a=n.find((e=>e.stashId===t))||null,o=a?.jump&&n.find((e=>e.stashId===a.jump))||null;return{canJump:!!o,jumpCount:a&&o?a.index-o.index:0,stashInfo:a}}(0,0,r,i)),[e,s,i,r]);return(0,n.jsxs)(Ke,{className:t,children:[(0,n.jsx)(l.ax,{value:r,withBonded:!0}),p&&(m?(0,n.jsx)(l.cA,{accountId:p.stashId,icon:"caret-up",isDisabled:o,label:d("Move up {{jumpCount}}",{replace:{jumpCount:h}}),params:[p.jump],tx:(u.tx.voterBagsList||u.tx.bagsList||u.tx.voterList).putInFrontOf}):null)]})})),es=[null,{isCompleted:!1,list:[]}],ss=[],ts=(0,S.e)("useBagEntries",(function(e,s){const t=Je(),[[n,{isCompleted:o,list:i}],r]=(0,a.useState)(es),l=(0,m.W7)(!!n&&t.listNodes,[n]);return(0,a.useEffect)((()=>r(e&&s?[e,{isCompleted:!1,list:[e]}]:[null,{isCompleted:!0,list:[]}])),[e,s]),(0,a.useEffect)((()=>{if(l&&l.isSome){const{next:e}=l.unwrap();if(e.isSome){const s=e.unwrap();r((([,{list:e}])=>[s,{isCompleted:!1,list:[...e,s]}]))}else r((([e,{list:s}])=>[e,{isCompleted:!0,list:s}]))}}),[l]),[o,o?i:ss]})),ns={transform:e=>{const s=e.map((({stakingLedger:e,stashId:s},t)=>({bonded:e.active.unwrap(),index:t,jump:null,stashId:s.toString()})));return s.map((e=>{const t=s.find((({bonded:s,index:t})=>t<e.index&&s.lt(e.bonded)));return t&&(e.jump=t.stashId),e}))}},as=(0,S.e)("useBonded",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(e&&0!==e.length&&s.derive.staking.accounts,[e],ns)})),os=a.memo((function({bagLower:e,bagUpper:s,info:t,nodesOwn:o}){const[[i,r],c]=(0,a.useState)([null,0]),[d,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(!0),[p,x]=ts(i,r),g=as(x);return(0,a.useEffect)((()=>{t&&o&&c((([,e])=>[t.head.unwrapOr(null),++e]))}),[t,o]),(0,a.useEffect)((()=>{h(!(!o?.length||p&&g))}),[g,p,o]),(0,a.useEffect)((()=>{!m&&g&&u(function(e,s,t){return e.filter((({bonded:e})=>e.gt(s)||e.lt(t))).map((({stashId:e})=>e))}(g,s,e))}),[e,s,g,m]),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"number"}),(0,n.jsx)(l.iA.Column.Balance,{value:s}),(0,n.jsx)(l.iA.Column.Balance,{value:e}),(0,n.jsx)("td",{className:"address",children:t.head.isSome&&(0,n.jsx)(l.ax,{value:t.head.unwrap()})}),(0,n.jsx)("td",{className:"address",children:t.tail.isSome&&(0,n.jsx)(l.ax,{value:t.tail.unwrap()})}),(0,n.jsx)("td",{className:"address",children:o?.map((({stashId:t})=>(0,n.jsx)(Ye,{bagLower:e,bagUpper:s,isLoading:m,list:g,stashId:t},t)))}),(0,n.jsx)("td",{className:"number",children:m?(0,n.jsx)("span",{className:"--tmp",children:"99"}):x.length?(0,I.u)(x.length):null}),(0,n.jsx)("td",{className:"button",children:!m&&(0,n.jsx)(Xe,{bagLower:e,bagUpper:s,stashIds:d})})]})}));var is=t(65968);const rs=a.memo((function({bags:e,className:s="",mapOwn:t}){const{t:o}=w(),i=Je(),r=(0,m.W7)(i.counterForListNodes),c=(0,a.useMemo)((()=>t&&Object.values(t).reduce(((e,s)=>e+s.length),0)),[t]);return(0,n.jsxs)(l.Ty,{className:s,children:[(0,n.jsx)(l.Jy,{label:o("total bags"),children:e?(0,I.u)(e.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsxs)("section",{children:[(0,n.jsx)(l.Jy,{label:o("total nodes"),children:t?(0,I.u)(r):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(l.Jy,{label:o("my nodes"),children:(0,is.h)(c)?(0,I.u)(c):(0,n.jsx)("span",{className:"--tmp",children:"99"})})]})]})}));var ls=t(12298);const cs={transform:e=>e.map((({args:[e]})=>e))},ds={transform:([[e],s])=>{const t=e.map(((e,t)=>[e,s[t]])).filter((([,e])=>e.isSome)).sort((([e],[s])=>s.cmp(e))).map((([e,s],t)=>({bagLower:v.nw,bagUpper:e,index:t,info:s.unwrap(),key:e.toString()})));return t.map(((e,s)=>s===t.length-1?e:{...e,bagLower:t[s+1].bagUpper}))},withParamsTransform:!0},us=(0,S.e)("useBagsList",(function(){const e=Je(),[s,t]=(0,a.useState)(),n=(0,ls.k)(e.listBags,[],cs),o=(0,m.W7)(n&&0!==n.length&&e.listBags.multi,[n],ds);return(0,a.useEffect)((()=>{o&&t((e=>function(e,s){return e&&s.length===e.length?s.map(((s,t)=>JSON.stringify(s)===JSON.stringify(e[t])?e[t]:s)):s}(e,o)))}),[o]),s})),ms=a.memo((function({className:e,ownStashes:s}){const{t}=w(),o=(0,a.useMemo)((()=>s?s.map((({stashId:e})=>e)):[]),[s]),[i,r]=(0,a.useState)((()=>o.length?0:1)),c=us(),d=Qe(o),u=(0,a.useRef)([[t("bags")],[t("max"),"number"],[t("min"),"number"],[t("first"),"address"],[t("last"),"address"],[t("stashes"),"address"],[t("nodes"),"number"],[void 0,"mini"]]),m=(0,a.useMemo)((()=>[{isDisabled:!o.length,text:t("My bags"),value:"mine"},{text:t("All bags"),value:"all"}]),[o,t]),h=(0,a.useMemo)((()=>{return c&&d&&(e=d,s=!i,c.map((s=>[s,e[s.key]])).filter((([,e])=>!s||!!e)));var e,s}),[c,i,d]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(rs,{bags:c,mapOwn:d}),(0,n.jsx)(l.zx.Group,{children:(0,n.jsx)(l.tX,{onChange:r,options:m,value:i})}),(0,n.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,n.jsx)("p",{children:t("The All bags list is composed of bags that each describe a range of active bonded funds of the nominators. In each bag is a list of nodes that correspond to a nominator and their staked funds.")}),(0,n.jsx)("p",{children:t("Within the context of a single bag, nodes are not sorted by their stake, but instead placed in insertion order. In other words, the most recently inserted node will be the last node in the bag, regardless of stake. Events like staking rewards or slashes do not automatically put you in a different bag. The bags-list pallet comes with an important permissionless extrinsic: rebag. This allows anyone to specify another account that is in the wrong bag, and place it in the correct one.")})]}),(0,n.jsx)(l.iA,{empty:h&&t("No available bags"),emptySpinner:t("Retrieving all available bags, this will take some time"),header:u.current,children:h?.map((([{bagLower:e,bagUpper:s,index:t,info:a,key:o},i])=>(0,n.jsx)(os,{bagLower:e,bagUpper:s,index:t,info:a,nodesOwn:i},o)))})]})}));var hs=t(56360),ps=t(59118);function xs(e,s){return s.sort(((e,s)=>e.era.cmp(s.era))).map((({era:s,validatorId:t})=>e.tx.staking.payoutStakers(t,s)))}function gs(e,s){if(!Array.isArray(s)){const{eras:t,validatorId:n}=s;return 1===t.length?[e.tx.staking.payoutStakers(n,t[0].era)]:xs(e,t.map((e=>({era:e.era,validatorId:n}))))}return 1===s.length?gs(e,s[0]):xs(e,s.reduce(((e,{eras:s,validatorId:t})=>(s.forEach((({era:s})=>{e.push({era:s,validatorId:t})})),e)),[]))}const fs=(0,l.zo)(l.u_)`
  .ui--AddressMini.padded.addressStatic {
    display: inline-block;
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,bs=a.memo((function({className:e,isAll:s,isDisabled:t,payout:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,N.O)(),[m,h]=(0,a.useState)(null),[p,x]=(0,a.useState)(null),g=(0,a.useMemo)((()=>({max:2304/(r.consts.staking.maxNominatorRewardedPerValidator?.toNumber()||64)})),[r]),f=(0,Ue.b)(p,g);(0,a.useEffect)((()=>{o&&x((()=>gs(r,o)))}),[r,o]);const b=!o||Array.isArray(o)&&0===o.length;return(0,n.jsxs)(n.Fragment,{children:[o&&d&&(0,n.jsxs)(fs,{className:e,header:i("Payout all stakers"),onClose:u,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:i("Any account can request payout for stakers, this is not limited to accounts that will be rewarded."),children:(0,n.jsx)(l.rp,{label:i("request payout from"),onChange:h,type:"account",value:m})}),(0,n.jsx)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:i("All the listed validators and all their nominators will receive their rewards.")}),(0,n.jsx)("p",{children:i("The UI puts a limit of 40 payouts at a time, where each payout is a single validator for a single era.")})]}),children:Array.isArray(o)?(0,n.jsx)(l.qG,{label:i("payout stakers for (multiple)"),value:o.map((({validatorId:e})=>(0,n.jsx)(l.ax,{className:"addressStatic",value:e},e)))}):(0,n.jsx)(l.rp,{defaultValue:o.validatorId,isDisabled:!0,label:i("payout stakers for (single)")})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:m,extrinsic:f,icon:"credit-card",isDisabled:!f?.length||!m,label:i("Payout"),onStart:u})})]}),(0,n.jsx)(l.zx,{icon:"credit-card",isDisabled:t||b,label:s||Array.isArray(o)?i("Payout all"):i("Payout"),onClick:u})]})})),js=(0,S.e)("useEraBlocks",(function(e,s){const{api:t}=(0,c.h)(),n=(0,m.W7)(t.derive.session.progress),o=(0,m.W7)(t.query.staking.forceEra);return(0,a.useMemo)((()=>e&&s&&o&&n&&n.sessionLength.gt(v.If)?(o.isForceAlways?n.sessionLength:n.eraLength).mul(e.sub(n.activeEra).iadd(s).iadd(v.If)).isub(o.isForceAlways?n.sessionProgress:n.eraProgress):void 0),[s,o,e,n])}));function vs(e){return!Array.isArray(e)}function ys(e){if(!e.length)return"";const s=e.sort(((e,s)=>e.cmp(s))).reduce(((e,s)=>{if(0===e.length)return[s];{const t=e[e.length-1];vs(t)?t.add(v.If).eq(s)?e[e.length-1]=[t,s]:e.push(s):t[1].add(v.If).eq(s)?t[1]=s:e.push(s)}return e}),[]).map((e=>vs(e)?(0,I.u)(e):`${(0,I.u)(e[0])}-${(0,I.u)(e[1])}`));return(0,n.jsx)(n.Fragment,{children:s.map(((e,s)=>(0,n.jsxs)(a.Fragment,{children:[0!==s&&", ",(0,n.jsx)("span",{children:e})]},e)))})}const ws=a.memo((function({className:e="",historyDepth:s,payout:{available:t,rewards:o,stashId:i}}){const[{eraStr:r,oldestEra:c},d]=(0,a.useState)({eraStr:""}),u=js(s,c);return(0,a.useEffect)((()=>{o&&d({eraStr:ys(o.map((({era:e})=>e))),oldestEra:o[0]?.era})}),[o]),(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)("td",{className:"address",colSpan:2,children:(0,n.jsx)(l.N,{value:i})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)("span",{className:"payout-eras",children:r})}),(0,n.jsx)(l.iA.Column.Balance,{value:t}),(0,n.jsx)("td",{className:"number",children:(0,n.jsx)(pe.Z,{className:u?"":"--tmp",value:u||v.uy})}),(0,n.jsx)("td",{className:"button",colSpan:3})]})})),ks=a.memo((function({className:e="",historyDepth:s,isDisabled:t,payout:o}){const{t:i}=w(),{eraStr:r,nominators:c,numNominators:d,oldestEra:u}=(0,a.useMemo)((()=>function(e){const s=ys(e.eras.map((({era:e})=>e))),t=e.eras.reduce(((e,{stashes:s})=>(Object.entries(s).forEach((([s,t])=>{e[s]?e[s]=e[s].add(t):e[s]=t})),e)),{});return{eraStr:s,nominators:t,numNominators:Object.keys(t).length,oldestEra:e.eras[0]?.era}}(o)),[o]),m=js(s,u);return(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)("td",{className:"address",colSpan:2,children:(0,n.jsx)(l.N,{value:o.validatorId})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)("span",{className:"payout-eras",children:r})}),(0,n.jsx)(l.iA.Column.Balance,{value:o.available}),(0,n.jsx)("td",{className:"number",children:m&&(0,n.jsx)(pe.Z,{value:m})}),(0,n.jsx)("td",{className:"expand",colSpan:2,children:(0,n.jsx)(l.xH,{summary:i("{{count}} own stashes",{replace:{count:d}}),children:Object.entries(c).map((([e,s])=>(0,n.jsx)(l.ax,{balance:s,value:e,withBalance:!0},e)))})}),(0,n.jsx)("td",{className:"button",children:(0,n.jsx)(bs,{isDisabled:t,payout:o})})]})})),Cs=new(j())(864e5);const Ns=l.zo.div`
  .payout-eras {
    padding-left: 0.25rem;
    vertical-align: middle;

    span {
      white-space: nowrap;
    }
  }
`,Is=a.memo((function({className:e="",historyDepth:s,isInElection:t,ownPools:o,ownValidators:i}){const{t:r}=w(),{api:d}=(0,c.h)(),[u]=(0,a.useState)((()=>0!==i.length)),[h,p]=(0,a.useState)((()=>u?0:1)),[x,g]=(0,a.useState)(0),f=(0,m.W7)(d.derive.session.eraLength),b=(0,hs.n)(),y=(0,a.useMemo)((()=>o?.map((({stashId:e})=>e))),[o]),C=(0,a.useMemo)((()=>function(e,s,t,n){if(!s||!t)return[{text:"",value:0}];const a=Cs.div(e),o=s.mul(t),i=[],r=new(j())(2);for(;;){const e=a.mul(r);if(e.gte(o))break;i.push({text:n("{{days}} days",{replace:{days:r.toString()}}),value:e.div(s).toNumber()}),r.imul(v.Jo)}return i.push({text:n("Max, {{eras}} eras",{replace:{eras:t.toNumber()}}),value:t.toNumber()}),i}(b,f,s,r)),[b,f,s,r]),{allRewards:N,isLoadingRewards:I}=(0,ps.Q)(C[x].value,h?void 0:i,y),{stashAvail:S,stashes:A,valAvail:P,validators:E}=(0,a.useMemo)((()=>function(e){if(e){const s=function(e){return Object.entries(e).map((([e,s])=>({available:s.reduce(((e,{validators:s})=>Object.values(s).reduce(((e,{value:s})=>e.iadd(s)),e)),new(j())(0)),rewards:s,stashId:e}))).filter((({available:e})=>!e.isZero())).sort(((e,s)=>s.available.cmp(e.available)))}(e),t=function(e){return Object.entries(e).reduce(((e,[s,t])=>(t.forEach((t=>{Object.entries(t.validators).forEach((([n,{total:a,value:o}])=>{const i=e.find((e=>e.validatorId===n));if(i){const e=i.eras.find((e=>e.era.eq(t.era)));e?e.stashes[s]=o:i.eras.push({era:t.era,stashes:{[s]:o}}),i.available=i.available.add(o),i.total=i.total.add(a)}else e.push({available:o,eras:[{era:t.era,stashes:{[s]:o}}],total:a,validatorId:n})}))})),e)),[]).sort(((e,s)=>s.available.cmp(e.available)))}(e),n=s.length?s.reduce(((e,{available:s})=>e.iadd(s)),new(j())(0)):null,[a,o]=t.length?t.reduce((([e,s],{available:t,total:n})=>[e.iadd(t),s.iadd(n)]),[new(j())(0),new(j())(0)]):[null,null];return{stashAvail:n,stashes:s,valAvail:a,valTotal:o,validators:t}}return{}}(N)),[N]),M=(0,a.useMemo)((()=>[[r(h?"payout/stash":"overall/validator"),"start",2],[r("eras"),"start"],[r(h?"own":"total")],["remaining"],[void 0,void 0,3]]),[h,r]),D=(0,a.useRef)([[r("payout/validator"),"start",2],[r("eras"),"start"],[r("own")],["remaining"],[void 0,void 0,3]]),T=(0,a.useMemo)((()=>[{isDisabled:!u,text:r("Own validators"),value:"val"},{text:r("Own stashes"),value:"all"}]),[u,r]),F=(0,a.useMemo)((()=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:3}),(0,n.jsx)(l.iA.Column.Balance,{value:S}),(0,n.jsx)("td",{colSpan:4})]})),[S]),q=(0,a.useMemo)((()=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:3}),(0,n.jsx)(l.iA.Column.Balance,{value:P}),(0,n.jsx)("td",{colSpan:4})]})),[P]);return(0,n.jsxs)(Ns,{className:e,children:[(0,n.jsxs)(l.zx.Group,{children:[(0,n.jsx)(l.tX,{onChange:p,options:T,value:h}),(0,n.jsx)(l.tX,{onChange:g,options:C,value:x}),(0,n.jsx)(bs,{isAll:!0,isDisabled:t,payout:E})]}),(0,n.jsx)(k,{isInElection:t}),!I&&!A?.length&&(0,n.jsxs)(l.Pd,{className:"warning centered",withIcon:!1,children:[(0,n.jsx)("p",{children:r("Payouts of rewards for a validator can be initiated by any account. This means that as soon as a validator or nominator requests a payout for an era, all the nominators for that validator will be rewarded. Each user does not need to claim individually and the suggestion is that validators should claim rewards for everybody as soon as an era ends.")}),(0,n.jsx)("p",{children:r("If you have not claimed rewards straight after the end of the era, the validator is in the active set and you are seeing no rewards, this would mean that the reward payout transaction was made by another account on your behalf. Always check your favorite explorer to see any historic payouts made to your accounts.")})]}),(0,n.jsx)(l.iA,{empty:!I&&A&&r(h?"No pending payouts for your stashes":"No pending payouts for your validators"),emptySpinner:r("Retrieving info for the selected eras, this will take some time"),footer:F,header:M,isFixed:!0,children:!I&&A?.map((e=>(0,n.jsx)(ws,{historyDepth:s,payout:e},e.stashId)))}),1===h&&!I&&E&&0!==E.length&&(0,n.jsx)(l.iA,{footer:q,header:D.current,isFixed:!0,children:!I&&E.filter((({available:e})=>!e.isZero())).map((e=>(0,n.jsx)(ks,{historyDepth:s,isDisabled:t,payout:e},e.validatorId)))})]})})),Ss=l.zo.div`
  &.isLoading {
    position: relative;

    canvas, h1 {
      opacity: 0.25;
    }

    .ui--Spinner {
      position: absolute;
      top: 34%;
      left: 0;
      right: 0;
    }
  }
`,As=a.memo((function({className:e="",colors:s,labels:t,legends:o,title:i,values:r}){const c=(0,a.useMemo)((()=>!t||0===t.length||!r||0===r.length||!r[0]?.length),[t,r]);return(0,n.jsxs)(Ss,{className:`${e} staking--Chart ${c?"isLoading":""}`,children:[(0,n.jsx)(l.kL.Line,{colors:s,labels:t,legends:o,title:i,values:r}),c&&(0,n.jsx)(l.$j,{})]})})),Ps=[void 0,"#acacac"],Es=a.memo((function({labels:e,validatorId:s}){const{t}=w(),{api:o}=(0,c.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),r=(0,m.W7)(o.derive.staking.stakerPoints,i),[l,d]=(0,a.useState)([]);(0,a.useEffect)((()=>d([])),[s]),(0,a.useEffect)((()=>r&&d(function(e,s){const t=new Array(e.length),n=new Array(e.length),[a,o]=s.reduce((([e,s],{points:t})=>(t.gtn(0)&&(e+=t.toNumber(),s++),[e,s])),[0,0]);return s.forEach((({era:s,points:i})=>{const r=o>0?Math.ceil(100*a/o)/100:0,l=e.indexOf(s.toHuman());-1!==l&&(t[l]=r,n[l]=i.toNumber())})),[n,t]}(e,r))),[e,r]);const u=(0,a.useRef)([t("points"),t("average")]);return(0,n.jsx)(As,{colors:Ps,labels:e,legends:u.current,title:t("era points"),values:l})})),Ms=new(j())(1e4),Ds=[void 0,"#acacac"],Ts=a.memo((function({labels:e,validatorId:s}){const{t}=w(),{api:o}=(0,c.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),r=(0,m.W7)(o.derive.staking.stakerPrefs,i),[l,d]=(0,a.useState)([]);(0,a.useEffect)((()=>d([])),[s]),(0,a.useEffect)((()=>r&&d(function(e,s){const t=new Array(e.length),n=new Array(e.length),[a,o]=s.reduce((([e,s],{validatorPrefs:t})=>{const n=t.commission.unwrap().mul(Ms).div(v.ed).toNumber()/100;return 0!==n&&(e+=n,s++),[e,s]}),[0,0]);return s.forEach((({era:s,validatorPrefs:i})=>{const r=i.commission.unwrap().mul(Ms).div(v.ed).toNumber()/100,l=o>0?Math.ceil(100*a/o)/100:0,c=e.indexOf(s.toHuman());-1!==c&&(t[c]=l,n[c]=r)})),[n,t]}(e,r))),[e,r]);const u=(0,a.useRef)([t("commission"),t("average")]);return(0,n.jsx)(As,{colors:Ds,labels:e,legends:u.current,title:t("commission"),values:l})}));var Fs=t(6485);function qs(e=v.nw,s){return((0,Fs.H)(e)?e:(0,g.m)(e.toBn)?e.toBn():v.nw).mul(v.D_).div(s).toNumber()/1e3}const Os=["#8c2200","#008c22","#acacac"],_s=a.memo((function({labels:e,validatorId:s}){const{t}=w(),{api:o}=(0,c.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),r=(0,m.W7)(o.derive.staking.ownSlashes,i),l=(0,m.W7)(o.derive.staking.erasRewards),d=(0,m.W7)(o.derive.staking.stakerPoints,i),[u,h]=(0,a.useState)([]),{currency:p,divisor:x}=(0,a.useMemo)((()=>({currency:M.a.getDefaults().unit,divisor:new(j())("1".padEnd(M.a.getDefaults().decimals+1,"0"))})),[]);(0,a.useEffect)((()=>h([])),[s]),(0,a.useEffect)((()=>l&&r&&d&&h(function(e,s,t,n,a){const o=new Array(e.length),i=new Array(e.length),r=new Array(e.length),[l,c]=s.reduce((([e,s],{era:t,eraReward:o})=>{const i=n.find((e=>e.era.eq(t))),r=i?.eraPoints.gtn(0)?qs(i.points.mul(o).div(i.eraPoints),a):0;return r>0&&(e+=r,s++),[e,s]}),[0,0]);return s.forEach((({era:s,eraReward:d})=>{const u=n.find((e=>e.era.eq(s))),m=t.find((e=>e.era.eq(s))),h=u?.eraPoints.gtn(0)?qs(u.points.mul(d).div(u.eraPoints),a):0,p=m?qs(m.total,a):0,x=c>0?Math.ceil(100*l/c)/100:0,g=e.indexOf(s.toHuman());-1!==g&&(i[g]=h,r[g]=x,o[g]=p)})),[o,i,r]}(e,l,r,d,x))),[e,x,l,r,d]);const g=(0,a.useMemo)((()=>[t("{{currency}} slashed",{replace:{currency:p}}),t("{{currency}} rewards",{replace:{currency:p}}),t("{{currency}} average",{replace:{currency:p}})]),[p,t]);return(0,n.jsx)(As,{colors:Os,labels:e,legends:g,title:t("rewards & slashes"),values:u})})),Vs=[void 0,"#8c2200","#acacac"],Bs=a.memo((function({labels:e,validatorId:s}){const{t}=w(),{api:o}=(0,c.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),r=(0,m.W7)(o.derive.staking.ownExposures,i),[l,d]=(0,a.useState)([]),{currency:u,divisor:h}=(0,a.useMemo)((()=>({currency:M.a.getDefaults().unit,divisor:new(j())("1".padEnd(M.a.getDefaults().decimals+1,"0"))})),[]);(0,a.useEffect)((()=>d([])),[s]),(0,a.useEffect)((()=>r&&d(function(e,s,t){const n=new Array(e.length),a=new Array(e.length),o=new Array(e.length),[i,r]=s.reduce((([e,s],{clipped:n})=>{const a=qs(n.total?.unwrap(),t);return a>0&&(e+=a,s++),[e,s]}),[0,0]);return s.forEach((({clipped:s,era:l,exposure:c})=>{const d=qs(s.total?.unwrap(),t),u=qs(c.total?.unwrap(),t),m=r>0?Math.ceil(100*i/r)/100:0,h=e.indexOf(l.toHuman());-1!==h&&(o[h]=m,n[h]=d,a[h]=u)})),[n,a,o]}(e,r,h))),[e,h,r]);const p=(0,a.useMemo)((()=>[t("{{currency}} clipped",{replace:{currency:u}}),t("{{currency}} total",{replace:{currency:u}}),t("{{currency}} average",{replace:{currency:u}})]),[u,t]);return(0,n.jsx)(As,{colors:Vs,labels:e,legends:p,title:t("elected stake"),values:l})})),Rs=(0,l.zo)(l.P0)`
  .staking--Chart {
    background: var(--bg-table);
    border: 1px solid var(--border-table);
    border-radius: 0.25rem;
    padding: 1rem 1.5rem;
  }
`,Zs=a.memo((function({className:e="",labels:s,validatorId:t}){return(0,n.jsxs)(Rs,{className:e,children:[(0,n.jsxs)(l.P0.Column,{children:[(0,n.jsx)(Es,{labels:s,validatorId:t}),(0,n.jsx)(_s,{labels:s,validatorId:t})]}),(0,n.jsxs)(l.P0.Column,{children:[(0,n.jsx)(Bs,{labels:s,validatorId:t}),(0,n.jsx)(Ts,{labels:s,validatorId:t})]})]})})),$s=a.memo((function({className:e}){const{t:s}=w(),{api:t}=(0,c.h)(),{value:i}=(0,o.UO)(),[r,d]=(0,a.useState)(i||null),u=(0,m.W7)(t.derive.staking.erasHistoric),h=(0,a.useMemo)((()=>u?.map((e=>e.toHuman()))),[u]),p=(0,a.useCallback)((()=>function(e){e&&(window.location.hash=`/staking/query/${e}`)}(r)),[r]);return h?(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(l.bm,{className:"staking--queryInput",defaultValue:i,label:s("validator to query"),onChange:d,onEnter:p,children:(0,n.jsx)(l.zx,{icon:"play",isDisabled:!r,onClick:p})}),i&&(0,n.jsx)(Zs,{labels:h,validatorId:i})]}):(0,n.jsx)(l.$j,{})}));var Ls=t(30943),zs=t(70563),Ws=t(81190);const Hs=a.memo((function({index:e,isSelected:s,onSelect:t,slash:{era:o,isMine:i,slash:{others:r,own:d,payout:u,reporters:m,validator:h},total:p,totalOther:x}}){const{t:g}=w(),{api:b}=(0,c.h)(),j=(0,a.useCallback)((()=>t&&t(e)),[e,t]),v=(0,a.useCallback)((()=>r.map((([e,s],t)=>(0,n.jsx)(l.ax,{balance:s,value:e,withBalance:!0},t)))),[r]);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"badge",children:i&&(0,n.jsx)(l.Ct,{color:"red",icon:"skull-crossbones"})}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(l.N,{value:h})}),(0,n.jsx)("td",{className:"expand all",children:!!r.length&&(0,n.jsx)(l.n0,{renderChildren:v,summary:g("Nominators ({{count}})",{replace:{count:(0,I.u)(r.length)}})})}),(0,n.jsx)("td",{className:"address",children:m.map(((e,s)=>(0,n.jsx)(l.ax,{value:e},s)))}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:d})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:x})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:p})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:u})}),!b.query.staking.earliestUnappliedSlash&&!!b.consts.staking.slashDeferDuration&&(0,n.jsx)("td",{className:"number together",children:(0,I.u)(o)}),(0,n.jsx)("td",{children:(0,n.jsx)(l.XZ,{isDisabled:!t,onChange:j,value:s})})]})})),Us=a.memo((function({slash:{era:e,nominators:s,reporters:t,total:o,validators:i}}){const{t:r}=w(),{api:d}=(0,c.h)(),u=(0,m.W7)(d.derive.session?.progress),[h,p]=(0,a.useMemo)((()=>u?[u.activeEra.sub(e).isub(v.If).imul(u.eraLength).iadd(u.eraProgress),d.consts.staking.slashDeferDuration.mul(u.eraLength)]:[new(j())(0),new(j())(0)]),[d,e,u]);return(0,n.jsxs)(l.Ty,{children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(l.Jy,{label:r("validators"),children:(0,I.u)(i.length)}),(0,n.jsx)(l.Jy,{label:r("nominators"),children:(0,I.u)(s.length)}),(0,n.jsx)(l.Jy,{label:r("reporters"),children:(0,I.u)(t.length)})]}),h.gtn(0)&&(0,n.jsx)(l.Jy,{label:r("defer"),progress:{total:p,value:h,withTime:!0}}),(0,n.jsx)(l.Jy,{label:r("total"),children:(0,n.jsx)(f.Z,{value:o})})]})})),Js=a.memo((function({buttons:e,councilId:s,councilThreshold:t,slash:o}){const{t:i}=w(),{api:r}=(0,c.h)(),d=(0,Ws.m)("council"),[{selected:u,txAll:m,txSome:h},p]=(0,a.useState)((()=>{const e=r.tx.staking.cancelDeferredSlash(o.era,o.slashes.map(((e,s)=>s)));return{selected:[],txAll:d?{length:e.encodedLength,proposal:e}:null,txSome:null}})),x=(0,a.useRef)([[i("era {{era}}/unapplied",{replace:{era:r.query.staking.earliestUnappliedSlash||!r.consts.staking.slashDeferDuration?o.era.toString():o.era.sub(r.consts.staking.slashDeferDuration).sub(v.If).toString()}}),"start",3],[i("reporters"),"address"],[i("own")],[i("other")],[i("total")],[i("payout")],!r.query.staking.earliestUnappliedSlash&&!!r.consts.staking.slashDeferDuration&&[i("apply")],[]]),f=(0,a.useCallback)((e=>p((s=>{const t=s.selected.includes(e)?s.selected.filter((s=>s!==e)):s.selected.concat(e).sort(((e,s)=>e-s)),n=t.length?r.tx.staking.cancelDeferredSlash(o.era,t):null;return{selected:t,txAll:s.txAll,txSome:n&&d&&(0,g.m)(r.tx[d].propose)?{length:n.encodedLength,proposal:n}:null}}))),[r,d,o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Us,{slash:o}),(0,n.jsxs)(l.zx.Group,{children:[e,d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.cA,{accountId:s,isDisabled:!h,isToplevel:!0,label:i("Cancel selected"),params:h&&(3===r.tx[d].propose.meta.args.length?[t,h.proposal,h.length]:[t,h.proposal]),tx:r.tx[d].propose}),(0,n.jsx)(l.cA,{accountId:s,isDisabled:!m,isToplevel:!0,label:i("Cancel all"),params:m&&(3===r.tx[d].propose.meta.args.length?[t,m.proposal,m.length]:[t,m.proposal]),tx:r.tx[d].propose})]})]}),(0,n.jsx)(l.iA,{header:x.current,children:o.slashes.map(((e,t)=>(0,n.jsx)(Hs,{index:t,isSelected:u.includes(t),onSelect:s?f:void 0,slash:e},t)))})]})})),Gs=a.memo((function({ownStashes:e=[],slashes:s}){const{t}=w(),{api:o}=(0,c.h)(),{allAccounts:i}=(0,d.x)(),{members:r}=(0,zs.V)("council"),[u,m]=(0,a.useState)(0),h=(0,a.useMemo)((()=>function(e,s){const t=[];return e.reduce(((e,[t,n])=>n.reduce(((e,n)=>{const a=n.others.reduce(((e,[,s])=>e.add(s)),new(j())(0)),o=s.some((({stashId:e})=>n.validator.eq(e)||n.others.some((([s])=>s.eq(e)))));return e.push({era:t,isMine:o,slash:n,total:n.own.add(a),totalOther:a}),e}),e)),[]).forEach((e=>{let s=t.find((({era:s})=>s.eq(e.era)));s||(s={era:e.era,nominators:[],payout:new(j())(0),reporters:[],slashes:[],total:new(j())(0),validators:[]},t.push(s)),s.payout.iadd(e.slash.payout),s.total.iadd(e.total),s.slashes.push(e);const n=e.slash.validator.toString();s.validators.includes(n)||s.validators.push(n),e.slash.others.forEach((([e])=>{const t=e.toString();s&&!s.nominators.includes(t)&&s.nominators.push(t)})),e.slash.reporters.forEach((e=>{const t=e.toString();s&&!s.reporters.includes(t)&&s.reporters.push(t)}))})),t.sort(((e,s)=>s.era.cmp(e.era)))}(s,e)),[e,s]),p=(0,a.useMemo)((()=>h.map((({era:e})=>o.query.staking.earliestUnappliedSlash||!o.consts.staking.slashDeferDuration?e:e.sub(o.consts.staking.slashDeferDuration).sub(v.If))).map((e=>({text:t("era {{era}}",{replace:{era:(0,I.u)(e)}}),value:e.toString()})))),[o,h,t]),x=(0,a.useMemo)((()=>i.find((e=>r.includes(e)))||null),[i,r]),g=(0,a.useRef)([[t("unapplied"),"start"]]);if(!h.length)return(0,n.jsx)(l.iA,{empty:t("There are no unapplied/pending slashes"),header:g.current});const f=Math.ceil((r.length||0)*(0,Ls.FK)(o));return(0,n.jsx)(Js,{buttons:(0,n.jsx)(l.tX,{onChange:m,options:p,value:u}),councilId:x,councilThreshold:f,slash:h[u]},h[u].era.toString())}));var Qs=t(87292),Xs=t(49255),Ks=t(69250),Ys=t(85168),et=t(54371);const st=a.memo((function({children:e,className:s,nameFilter:t,setNameFilter:o,setWithIdentity:i,withIdentity:r}){const{t:d}=w(),{apiIdentity:u}=(0,c.h)();(0,a.useEffect)((()=>{const e=Ys.Z.parse(location.href.split("?")[1]).filter;(0,et.H)(e)&&o(e,!0)}),[]);const m=(0,a.useCallback)((e=>o(e,!1)),[o]);return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)(l.II,{autoFocus:!0,isFull:!0,label:d("filter by name, address or index"),onChange:m,value:t}),(e||i)&&(0,n.jsxs)("div",{className:"staking--optionsBar",children:[e,i&&u.query.identity&&(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:d("with an identity"),onChange:i,value:r})]})]})})),tt={transform:([[e],s])=>{const t={};for(let n=0;n<e.length;n++)t[e[n]]=s[n];return t},withParamsTransform:!0},nt=(0,S.e)("useIdentities",(function(e=[]){const{api:s}=(0,c.h)();return(0,m.W7)(s.derive.accounts.hasIdentityMulti,[e],tt)})),at=(0,l.zo)(l.u_)`
  .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,ot=a.memo((function({className:e="",isDisabled:s,ownNominators:t,targets:o}){const{t:i}=w(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(null),[m,h]=(0,N.O)(),p=(0,a.useMemo)((()=>(t||[]).map((({stashId:e})=>e))),[t]),x=(0,a.useCallback)((e=>{const s=t?.find((({stashId:s})=>s===e));u(s?{controllerId:s.controllerId,stashId:s.stashId}:null)}),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"hand-paper",isDisabled:s||!p.length||!o.length,label:i("Nominate selected"),onClick:h}),m&&(0,n.jsxs)(at,{className:e,header:i("Nominate validators"),onClose:h,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsxs)(l.u_.Columns,{hint:i("One of your available nomination accounts, keyed by the stash. The transaction will be sent from the controller."),children:[(0,n.jsx)(l.rp,{filter:p,label:i("the stash account to nominate with"),onChange:x,value:d?.stashId}),(0,n.jsx)(l.rp,{isDisabled:!0,label:i("the associated controller"),value:d?.controllerId})]}),(0,n.jsx)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:i('The selected validators to nominate, either via the "currently best algorithm" or via a manual selection.')}),(0,n.jsx)("p",{children:i("Once transmitted the new selection will only take effect in 2 eras since the selection criteria for the next era was done at the end of the previous era. Until then, the nominations will show as inactive.")})]}),children:(0,n.jsx)(l.qG,{label:i("selected validators"),value:o.map((e=>(0,n.jsx)(l.ax,{className:"addressStatic",value:e},e)))})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:d?.controllerId,label:i("Nominate"),onStart:h,params:[o],tx:r.tx.staking.nominate})})]})]})})),it={transform:e=>e.unwrapOrDefault()};function rt(e,s){return{hideValue:!0,isBlurred:!(e&&s),total:e&&s?s:v.Jo,value:e&&s?e:v.um}}const lt=(0,l.zo)(l.Ty)`
  .percent {
    font-size: var(--font-percent-tiny);
  }
`,ct=a.memo((function({avgStaked:e,className:s,lastEra:t,lowStaked:o,minNominated:i,minNominatorBond:r,stakedReturn:d,totalIssuance:u,totalStaked:h}){const{t:p}=w(),{api:x}=(0,c.h)(),g=(0,m.W7)(t&&x.query.staking.erasValidatorReward,[t],it),b=(0,a.useMemo)((()=>rt(h,u)),[u,h]),j=(0,a.useMemo)((()=>rt(o,e)),[e,o]),y=(0,n.jsx)("span",{className:"percent",children:"%"});return(0,n.jsxs)(lt,{className:s,children:[(0,n.jsx)("section",{className:"media--800",children:(0,n.jsx)(l.Jy,{label:p("total staked"),progress:b,children:(0,n.jsx)(f.Z,{className:b.isBlurred?"--tmp":"",value:b.value,withSi:!0})})}),(0,n.jsx)("section",{className:"media--800",children:(0,n.jsx)(l.Jy,{label:p("returns"),children:u&&d>0?Number.isFinite(d)?(0,n.jsxs)(n.Fragment,{children:[d.toFixed(1),y]}):"-.-%":(0,n.jsxs)("span",{className:"--tmp",children:["0.0",y]})})}),(0,n.jsx)("section",{className:"media--1000",children:(0,n.jsx)(l.Jy,{label:`${p("lowest / avg staked")}`,progress:j,children:(0,n.jsxs)("span",{className:j.isBlurred?"--tmp":"",children:[(0,n.jsx)(f.Z,{value:j.value,withCurrency:!1,withSi:!0})," / ",(0,n.jsx)(f.Z,{className:j.isBlurred?"--tmp":"",value:j.total,withSi:!0})]})})}),(0,n.jsx)("section",{className:"media--1600",children:i?.gt(v.nw)&&(0,n.jsxs)(l.Jy,{className:"media--1600",label:p(r?"min nominated / threshold":"min nominated"),children:[(0,n.jsx)(f.Z,{value:i,withCurrency:!r,withSi:!0}),r&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,n.jsx)(f.Z,{value:r,withSi:!0})]})]})}),(0,n.jsx)("section",{children:(0,n.jsx)(l.Jy,{label:p("last reward"),children:(0,n.jsx)(f.Z,{className:g?"":"--tmp",value:g||1,withSi:!0})})})]})})),dt=(0,S.e)("useOwnNominators",(function(e){return(0,a.useMemo)((()=>e?.filter((({isOwnController:e,isStashValidating:s})=>e&&!s))),[e])}));var ut=t(73477),mt=t(60773),ht=t(97794);const pt=a.memo((function({numNominators:e}){const{api:s}=(0,c.h)(),t=s.consts.staking?.maxNominatorRewardedPerValidator;return e&&t&&!t.gten(e)?(0,n.jsx)(l.Ct,{className:"media--1200",color:"red",icon:"balance-scale-right"}):null})),xt=a.memo((function({allSlashes:e,canSelect:s,filterName:t,info:{accountId:o,bondOther:i,bondOwn:r,bondTotal:d,commissionPer:u,isBlocking:m,isElected:h,isFavorite:p,key:x,lastPayout:g,numNominators:b,rankOverall:j,stakedReturnCmp:v},isNominated:y,isSelected:k,nominatedBy:C=[],toggleFavorite:N,toggleSelected:S}){const{t:A}=w(),{api:P,apiIdentity:E}=(0,c.h)(),M=(0,mt.Y)(o),[,,D]=(0,ht.h)(g),T=(0,a.useMemo)((()=>!M||(0,ut.r7)(E,x,M,t)),[M,t,E,x]),F=(0,a.useMemo)((()=>(e||[]).map((([e,s])=>({era:e,slashes:s.filter((({validator:e})=>e.eq(o)))}))).filter((({slashes:e})=>e.length))),[e,o]),q=(0,a.useCallback)((()=>{return e=x,void(window.location.hash=`/staking/query/${e}`);var e}),[x]),O=(0,a.useCallback)((()=>S(x)),[x,S]);return T?(0,n.jsxs)("tr",{children:[(0,n.jsx)(l.iA.Column.Favorite,{address:x,isFavorite:p,toggle:N}),(0,n.jsxs)("td",{className:"badge together",children:[y?(0,n.jsx)(l.Ct,{color:"green",icon:"hand-paper"}):(0,n.jsx)(l.Ct,{color:"transparent"}),h?(0,n.jsx)(l.Ct,{color:"blue",icon:"chevron-right"}):(0,n.jsx)(l.Ct,{color:"transparent"}),(0,n.jsx)(pt,{numNominators:b||C.length}),m&&(0,n.jsx)(l.Ct,{color:"red",icon:"user-slash"}),0!==F.length&&(0,n.jsx)(l.Ct,{color:"red",hover:A("Slashed in era {{eras}}",{replace:{eras:F.map((({era:e})=>(0,I.u)(e))).join(", ")}}),icon:"skull-crossbones"})]}),(0,n.jsx)("td",{className:"number",children:0!==j&&(0,I.u)(j)}),(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(l.N,{value:o})}),(0,n.jsx)("td",{className:"number media--1400",children:g&&(P.consts.babe?D.days?1===D.days?A("yesterday"):A("{{days}} days",{replace:{days:D.days}}):A("recently"):(0,I.u)(g))}),(0,n.jsx)("td",{className:"number media--1200 no-pad-right",children:b||""}),(0,n.jsx)("td",{className:"number media--1200 no-pad-left",children:C.length||""}),(0,n.jsxs)("td",{className:"number media--1100",children:[u.toFixed(2),"%"]}),(0,n.jsx)("td",{className:"number together",children:!d.isZero()&&(0,n.jsx)(f.Z,{value:d})}),(0,n.jsx)("td",{className:"number together media--900",children:!r.isZero()&&(0,n.jsx)(f.Z,{value:r})}),(0,n.jsx)("td",{className:"number together media--1600",children:!i.isZero()&&(0,n.jsx)(f.Z,{value:i})}),(0,n.jsx)("td",{className:"number together",children:v>0&&(0,n.jsxs)(n.Fragment,{children:[v.toFixed(2),"%"]})}),(0,n.jsx)("td",{children:!m&&(s||k)&&(0,n.jsx)(l.XZ,{onChange:O,value:k})}),(0,n.jsx)("td",{children:(0,n.jsx)(l.JO,{className:"staking--stats highlight--color",icon:"chart-line",onClick:q})})]}):null})),gt={rankBondOther:"media--1600",rankBondOwn:"media--900"},ft=["rankBondTotal","rankBondOwn","rankBondOther","rankOverall"],bt={withElected:!1,withGroup:!0,withIdentity:!1,withPayout:!1,withoutComm:!0,withoutOver:!0},jt={isQueryFiltered:!1,nameFilter:""},vt={sortBy:"rankOverall",sortFromMax:!0},yt=l.zo.div`
  text-align: center;

  th.isClickable {
    .ui--Icon {
      margin-left: 0.5rem;
    }
  }

  .ui--Table {
    overflow-x: auto;
  }
`,wt=a.memo((function({className:e="",isInElection:s,nominatedBy:t,ownStashes:o,targets:{avgStaked:i,inflation:{stakedReturn:r},lastEra:d,lowStaked:u,medianComm:m,minNominated:h,minNominatorBond:p,nominators:g,totalIssuance:f,totalStaked:b,validatorIds:j,validators:y},toggleFavorite:C,toggleLedger:N,toggleNominatedBy:I}){const{t:S}=w(),{api:A}=(0,c.h)(),P=(0,x.g)(),E=(0,Xs.u)(7),M=dt(o),D=nt(j),[T,F]=(0,a.useState)([]),[{isQueryFiltered:q,nameFilter:O},_]=(0,a.useState)(jt),[V,B]=(0,Ks.o)("staking:targets",bt),[{sortBy:R,sortFromMax:Z},$]=(0,a.useState)(vt),[L,z]=(0,a.useState)(),W=(0,a.useRef)({rankBondOther:S("other stake"),rankBondOwn:S("own stake"),rankBondTotal:S("total stake"),rankOverall:S("return")}),H=(0,a.useMemo)((()=>({...V,daysPayout:E,isBabe:!!A.consts.babe,isQueryFiltered:q,maxPaid:A.consts.staking?.maxNominatorRewardedPerValidator})),[A,E,q,V]),U=(0,a.useMemo)((()=>D&&y&&t&&function(e,s,t,{daysPayout:n,isBabe:a,maxPaid:o,withElected:i,withGroup:r,withIdentity:l,withPayout:c,withoutComm:d,withoutOver:u},m){const h=[],p=[];return e.filter((({accountId:e,commissionPer:s,isElected:x,isFavorite:g,lastPayout:f,numNominators:b})=>{if(g)return!0;const j=e.toString(),y=t[j],w=b||m?.[j]?.length||0;if((!i||x)&&(!l||y?.hasIdentity)&&(!c||!a||f&&n.gte(f))&&(!d||s<=10)&&(!u||!o||o.muln(100).div(v.S8).gten(w))){if(!r)return!0;if(!y||!y.hasIdentity)return p.push(j),!0;if(y.parentId){if(!p.includes(y.parentId))return p.push(y.parentId),!0}else if(!p.includes(j)){if(y.display){const e=y.display.replace(/[^\x20-\x7E]/g,"").replace(/-/g," ").replace(/_/g," ").split(" ").map((e=>e.trim())).filter((e=>!!e));if(function(e,s){return e.some((e=>e.length===s.length&&(1===e.length?e[0]===s[0]:e.reduce(((e,t,n)=>e+(t===s[n]?1:0)),0)>=s.length-1)))}(h,e))return!1;h.push(e)}return p.push(j),!0}}return!1}))}(y,0,D,H,t)),[D,H,m,t,y]);(0,a.useEffect)((()=>{U&&z(function(e,s,t){return t.slice(0).sort(((t,n)=>s?t[e]-n[e]:n[e]-t[e])).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}(R,Z,U))}),[U,R,Z]),(0,a.useEffect)((()=>{N(),I()}),[N,I]);const J=(0,a.useMemo)((()=>A.consts.staking.maxNominations?A.consts.staking.maxNominations.toNumber():16),[A]),G=(0,a.useMemo)((()=>function(e=[]){const s=[];return e.forEach((({nominating:e=[]})=>{e.forEach((e=>{!s.includes(e)&&s.push(e)}))})),s}(M)),[M]),Q=(0,a.useCallback)((e=>$((s=>({sortBy:e,sortFromMax:e!==s.sortBy||!s.sortFromMax})))),[]),X=(0,a.useCallback)((e=>F(T.includes(e)?T.filter((s=>e!==s)):[...T,e])),[T]),K=(0,a.useCallback)((()=>U&&F(function(e,s){const t=[];for(let n=0;n<e.length&&t.length<s;n++){const{isBlocking:s,isFavorite:a,key:o,stakedReturnCmp:i}=e[n];!s&&(a||i>0)&&t.push(o)}return t}(U,J))),[U,J]),Y=(0,a.useCallback)(((e,s)=>_({isQueryFiltered:s,nameFilter:e})),[]),ee=(0,a.useMemo)((()=>[[S("validators"),"start",4],[S("payout"),"media--1400"],[S("nominators"),"media--1200",2],[S("comm."),"media--1100"],...ft.map((e=>[(0,n.jsxs)(n.Fragment,{children:[W.current[e],(0,n.jsx)(l.JO,{icon:R===e?Z?"chevron-down":"chevron-up":"minus"})]}),`${L?`isClickable ${R===e?"highlight--border":""} number`:"number"} ${gt[e]||""}`,1,()=>Q(e)])),[],[]]),[Q,W,R,L,Z,S]),se=(0,a.useMemo)((()=>(0,n.jsx)("div",{children:(0,n.jsxs)(st,{nameFilter:O,setNameFilter:Y,setWithIdentity:B.withIdentity,withIdentity:V.withIdentity,children:[(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:S("one validator per operator"),onChange:B.withGroup,value:V.withGroup}),(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:S("comm. <= {{maxComm}}%",{replace:{maxComm:10}}),onChange:B.withoutComm,value:V.withoutComm}),(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:S("with capacity"),onChange:B.withoutOver,value:V.withoutOver}),A.consts.babe&&(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:S("recent payouts"),onChange:B.withPayout,value:V.withPayout}),(0,n.jsx)(l.ZD,{className:"staking--buttonToggle",label:S("currently elected"),onChange:B.withElected,value:V.withElected})]})})),[A,O,Y,B,S,V]),te=q?y:L,ne=T.length<J;return(0,n.jsxs)(yt,{className:e,children:[(0,n.jsx)(ct,{avgStaked:i,lastEra:d,lowStaked:u,minNominated:h,minNominatorBond:p,numNominators:g?.length,numValidators:y?.length,stakedReturn:r,totalIssuance:f,totalStaked:b}),(0,n.jsxs)(l.zx.Group,{children:[(0,n.jsx)(l.zx,{icon:"check",isDisabled:!y?.length||!M?.length,label:S("Most profitable"),onClick:K}),(0,n.jsx)(ot,{isDisabled:s||!y?.length,ownNominators:M,targets:T})]}),(0,n.jsx)(k,{isInElection:s}),(0,n.jsx)(l.iA,{empty:L&&S("No active validators to check"),emptySpinner:(0,n.jsxs)(n.Fragment,{children:[!(y&&D)&&(0,n.jsx)("div",{children:S("Retrieving validators")}),!t&&(0,n.jsx)("div",{children:S("Retrieving nominators")}),!te&&(0,n.jsx)("div",{children:S("Preparing target display")})]}),filter:se,header:ee,legend:(0,n.jsx)(Qs.Z,{}),children:te?.map((e=>(0,n.jsx)(xt,{allSlashes:P,canSelect:ne,filterName:O,info:e,isNominated:G.includes(e.key),isSelected:T.includes(e.key),nominatedBy:t?.[e.key],toggleFavorite:C,toggleSelected:X},e.key)))})]})}));var kt=t(75387);const Ct=a.memo((function(){const{t:e}=w();return(0,n.jsx)(l.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}));var Nt=t(47623);function It(e){return e.length?[e.length,()=>e.map((e=>(0,n.jsx)(l.ax,{value:e},e)))]:null}const St=a.memo((function({nominators:e,slashingSpans:s}){const{t}=w(),{api:o}=(0,c.h)(),{active:i,chilled:r}=(0,a.useMemo)((()=>function(e,s=[],t){const n=t&&!e.events.staking.SlashReported?s.filter((({submittedIn:e})=>t.lastNonzeroSlash.gt(e))).map((({nominatorId:e})=>e)):[];return{active:It(s.filter((({nominatorId:e})=>!n.includes(e))).map((({nominatorId:e})=>e))),chilled:It(n)}}(o,e,s)),[o,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[i&&(0,n.jsx)(l.n0,{renderChildren:i[1],summary:t("Nominations ({{count}})",{replace:{count:(0,I.u)(i[0])}})}),r&&(0,n.jsx)(l.n0,{renderChildren:r[1],summary:t("Renomination required ({{count}})",{replace:{count:(0,I.u)(r[0])}})})]})}));function At(e){return[e.length,()=>e.map((({nominatorId:e,value:s})=>(0,n.jsx)(l.ax,{bonded:s,value:e,withBonded:!0},e)))]}function Pt(e){const s=new(j())(0);for(let t=0,n=e.length;t<n;t++)s.iadd(e[t].value);return s}const Et=a.memo((function({nominators:e,stakeOther:s}){const{api:t}=(0,c.h)(),[o,i,r,d]=(0,a.useMemo)((()=>function(e,s,t){if(!s)return[null,v.nw,null,v.nw];const n=s.sort(((e,s)=>s.value.cmp(e.value)));if(!e||e.gtn(n.length))return[At(n),t||v.nw,null,v.nw];const a=e.toNumber(),o=n.slice(0,a),i=Pt(o),r=n.slice(a),l=Pt(r);return[At(o),i,At(r),l]}(t.consts.staking?.maxNominatorRewardedPerValidator,e,s)),[t,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[(!o||0!==o[0])&&(0,n.jsx)(l.n0,{className:o?"":"--tmp",renderChildren:o?.[1],summary:(0,n.jsx)(f.Z,{labelPost:` (${o?o[0]:"0"})`,value:i})}),r&&(0,n.jsx)(l.n0,{className:"stakeOver",renderChildren:r[1],summary:(0,n.jsx)(f.Z,{labelPost:` (${r[0]})`,value:d})})]})})),Mt=[],Dt=a.memo((function({isChilled:e,isElected:s,isMain:t,isPara:o,isRelay:i,nominators:r=Mt,onlineCount:c,onlineMessage:u}){const{allAccounts:m}=(0,d.x)(),h=c&&c.toNumber(),p=(0,a.useMemo)((()=>r.some((({nominatorId:e})=>m.includes(e)))),[m,r]);return(0,n.jsxs)(n.Fragment,{children:[p?(0,n.jsx)(l.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,n.jsx)(l.Ct,{className:"media--1100",color:"transparent"}),i&&(o?(0,n.jsx)(l.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,n.jsx)(l.Ct,{className:"media--1100",color:"transparent"})),e?(0,n.jsx)(l.Ct,{className:"media--1000",color:"red",icon:"cancel"}):s?(0,n.jsx)(l.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,n.jsx)(l.Ct,{className:"media--1000",color:"transparent"}),t&&(h?(0,n.jsx)(l.Ct,{className:"media--900",color:"green",info:h}):u?(0,n.jsx)(l.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,n.jsx)(l.Ct,{className:"media--900",color:"transparent"})),(0,n.jsx)(pt,{numNominators:r.length})]})})),Tt={transform:e=>e.unwrapOr(null)},Ft=a.memo((function({address:e,className:s="",filterName:t,hasQueries:o,isElected:i,isFavorite:r,isMain:d,isPara:u,lastBlock:h,minCommission:p,nominatedBy:x,points:g,recentlyOnline:b,toggleFavorite:j,validatorInfo:y,withIdentity:k}){const{t:C}=w(),{api:I,apiIdentity:S}=(0,c.h)(),[A,P]=(0,N.O)(!1),{accountInfo:E,slashingSpans:M}=function(e,s,t){const n=(0,a.useMemo)((()=>[s]),[s]);return{accountInfo:(0,mt.Y)(s),slashingSpans:(0,m.W7)(!t&&e.query.staking.slashingSpans,n,Tt)}}(I,e,d),{commission:D,isChilled:T,nominators:F,stakeOther:q,stakeOwn:O}=(0,a.useMemo)((()=>y?function({exposure:e,validatorPrefs:s},t){let n,a,o,i;e?.total&&(n=e.others.map((({value:e,who:s})=>({nominatorId:s.toString(),value:e.unwrap()}))),a=e.total?.unwrap()||v.nw,i=e.own.unwrap(),o=a.sub(i));const r=s?.commission?.unwrap();return{commission:r?.toHuman(),isChilled:r&&t&&r.isZero()&&r.lt(t),nominators:n,stakeOther:o,stakeOwn:i,stakeTotal:a}}(y,p):{}),[p,y]),_=(0,a.useMemo)((()=>!E||(0,ut.r7)(S,e,E,t,k)),[E,e,t,S,k]),V=(0,a.useMemo)((()=>`#/staking/query/${e}`),[e]),B=(0,a.useMemo)((()=>g&&"greyAnim-"+Date.now()%25),[g]);return _?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("tr",{className:`${s} isExpanded isFirst ${A?"packedBottom":"isLast"}`,children:[(0,n.jsx)(l.iA.Column.Favorite,{address:e,isFavorite:r,toggle:j}),(0,n.jsx)("td",{className:"badge together",children:(0,n.jsx)(Dt,{isChilled:T,isElected:i,isMain:d,isPara:u,isRelay:!!(I.query.parasShared||I.query.shared)?.activeValidatorIndices,nominators:d?F:x,onlineCount:b?.blockCount,onlineMessage:b?.hasMessage})}),(0,n.jsxs)("td",{className:"address all relative",children:[(0,n.jsx)(l.N,{value:e}),d&&B&&(0,n.jsx)(l.Vp,{className:`${B} absolute`,color:"lightgrey",label:g})]}),d?(0,n.jsx)(Et,{nominators:F,stakeOther:q}):(0,n.jsx)(St,{nominators:x,slashingSpans:M}),(0,n.jsx)("td",{className:"number",children:D||(0,n.jsx)("span",{className:"--tmp",children:"50.00%"})}),d&&(0,n.jsx)("td",{className:"number",children:h}),(0,n.jsx)(l.iA.Column.Expand,{isExpanded:A,toggle:P})]}),A&&(0,n.jsxs)("tr",{className:`${s} ${A?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,n.jsx)("td",{colSpan:2}),(0,n.jsxs)("td",{className:"columar",colSpan:d?4:3,children:[(0,n.jsxs)(l.P0,{size:"small",children:[(0,n.jsx)(l.P0.Column,{children:d&&O?.gtn(0)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:C("own stake")}),(0,n.jsx)(f.Z,{value:O})]})}),(0,n.jsx)(l.P0.Column,{children:o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:C("graphs")}),(0,n.jsxs)("a",{href:V,children:[(0,n.jsx)(l.JO,{className:"highlight--color",icon:"chart-line"})," ",C("historic results")]})]})})]}),(0,n.jsx)(l.P0,{is100:!0,children:(0,n.jsx)(l.P0.Column,{children:(0,n.jsx)(l.NR,{data:e,type:"validator",withTitle:!0})})})]}),(0,n.jsx)("td",{})]})]}):null}));function qt(e,s=[],t=[],n,a,o){return s.filter((s=>!o.includes(s)&&(!e||t.includes(s)))).map((e=>[e,n.includes(e),a.includes(e)])).sort((([e,,s],[n,,a])=>{const o=t.includes(e),i=t.includes(n);return s===a?o===i?0:o?-1:1:s?-1:1}))}function Ot(e){const s=new Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t].toString();return s}const _t={},Vt=a.memo((function({className:e,favorites:s,hasQueries:t,isIntentions:o,isOwn:i,minCommission:r,nominatedBy:d,ownStashIds:u,paraValidators:m=_t,recentlyOnline:h,stakingOverview:p,targets:x,toggleFavorite:g}){const{t:f}=w(),{api:b}=(0,c.h)(),{byAuthor:j,eraPoints:v}=(0,kt.E)(),[y,k]=(0,a.useState)(""),C=(0,Nt.q)(),{validators:N,waiting:I}=(0,a.useMemo)((()=>function(e,s,t,n,a){if(!s)return{};const o=Ot(s.nextElected),i=Ot(s.validators);return{validators:qt(e,i,a,o,t,[]),waiting:qt(e,o,a,o,t,i).concat(qt(e,n,a,[],t,o))}}(i,p,s,x.waitingIds,u)),[s,i,u,p,x]),S=(0,a.useMemo)((()=>C?o?d&&I:N:void 0),[o,C,d,N,I]),A=(0,a.useMemo)((()=>x.validators&&function(e){const s={};for(let t=0,n=e.length;t<n;t++){const n=e[t];s[n.key]=n}return s}(x.validators)),[x]),P=(0,a.useRef)(o?[[f("intentions"),"start",3],[f("nominators"),"expand"],[f("commission"),"number"],[]]:[[f("validators"),"start",3],[f("other stake"),"expand"],[f("commission")],[f("last #")],[]]);return(0,n.jsx)(l.iA,{className:e,empty:o?S&&f("No waiting validators found"):S&&h&&A&&f("No active validators found"),emptySpinner:(0,n.jsxs)(n.Fragment,{children:[!I&&(0,n.jsx)("div",{children:f("Retrieving validators")}),!A&&(0,n.jsx)("div",{children:f("Retrieving validator info")}),o?!d&&(0,n.jsx)("div",{children:f("Retrieving nominators")}):!h&&(0,n.jsx)("div",{children:f("Retrieving online status")}),!S&&(0,n.jsx)("div",{children:f("Preparing validator list")})]}),filter:(0,n.jsx)(st,{nameFilter:y,setNameFilter:k}),header:P.current,legend:(0,n.jsx)(Qs.Z,{isRelay:!o&&!!(b.query.parasShared||b.query.shared)?.activeValidatorIndices,minCommission:r}),children:S?.map((([e,s,a])=>(0,n.jsx)(Ft,{address:e,filterName:y,hasQueries:t,isElected:s,isFavorite:a,isMain:!o,isPara:m[e],lastBlock:j[e],minCommission:r,nominatedBy:d?.[e],points:v[e],recentlyOnline:h?.[e],toggleFavorite:g,validatorInfo:A?.[e]},e)))})}));var Bt=t(54705);const Rt=(0,l.zo)(l.Ty)`
  .validator--Account-block-icon {
    display: inline-block;
    margin-right: 0.75rem;
    margin-top: -0.25rem;
    vertical-align: middle;
  }

  .validator--Summary-authors {
    .validator--Account-block-icon+.validator--Account-block-icon {
      margin-left: -1.5rem;
    }
  }

  .percent {
    font-size: var(--font-percent-tiny);
  }
`,Zt=a.memo((function({className:e="",stakingOverview:s,targets:{counterForNominators:t,inflation:{idealStake:a,inflation:o,stakedFraction:i},nominators:r,waitingIds:c}}){const{t:d}=w(),u=(0,n.jsx)("span",{className:"percent",children:"%"});return(0,n.jsxs)(Rt,{className:e,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(l.Jy,{label:d("validators"),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,I.u)(s.validators.length)," / ",(0,I.u)(s.validatorCount)]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})}),(0,n.jsx)(l.Jy,{className:"media--900",label:d("waiting"),children:c?(0,I.u)(c.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(l.Jy,{className:"media--1000",label:d(t?"active / nominators":"nominators"),children:r?(0,n.jsxs)(n.Fragment,{children:[(0,I.u)(r.length),t&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,I.u)(t)]})]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})})]}),(0,n.jsxs)("section",{children:[a>0&&Number.isFinite(a)&&(0,n.jsx)(l.Jy,{className:"media--1400",label:d("ideal staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*a).toFixed(1),u]})}),i>0&&(0,n.jsx)(l.Jy,{className:"media--1300",label:d("staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*i).toFixed(1),u]})}),o>0&&Number.isFinite(o)&&(0,n.jsx)(l.Jy,{className:"media--1200",label:d("inflation"),children:(0,n.jsxs)(n.Fragment,{children:[o.toFixed(1),u]})})]}),(0,n.jsx)("section",{children:(0,n.jsx)(Bt.Z,{})})]})})),$t={},Lt={},zt={},Wt=a.memo((function({className:e="",favorites:s,hasAccounts:t,hasQueries:o,minCommission:i,nominatedBy:r,ownStashes:d,paraValidators:u,stakingOverview:h,targets:p,toggleFavorite:x,toggleLedger:g,toggleNominatedBy:f}){const{t:b}=w(),{api:j}=(0,c.h)(),{byAuthor:v,eraPoints:y}=(0,kt.E)(),[k,C]=(0,a.useState)(0),[N,I]=(0,a.useState)(1),S=(0,m.W7)(j.derive.imOnline?.receivedHeartbeats),A=(0,a.useCallback)((e=>{e&&f(),C(e)}),[f]),P=(0,a.useRef)([{text:b("Own validators"),value:"mine"},{text:b("All validators"),value:"all"}]),E=(0,a.useRef)([{text:b("Active"),value:"active"},{text:b("Waiting"),value:"waiting"}]),M=(0,a.useMemo)((()=>d?.map((({stashId:e})=>e))),[d]);(0,a.useEffect)((()=>{g&&g()}),[g]);const D=0===N;return(0,n.jsxs)("div",{className:`${e} staking--Overview`,children:[(0,n.jsx)(Zt,{stakingOverview:h,targets:p}),t&&0===d?.length&&(0,n.jsx)(Ct,{}),(0,n.jsxs)(l.zx.Group,{children:[(0,n.jsx)(l.tX,{onChange:I,options:P.current,value:N}),(0,n.jsx)(l.tX,{onChange:A,options:E.current,value:k})]}),(0,n.jsx)(Vt,{byAuthor:0===k?v:Lt,eraPoints:0===k?y:zt,favorites:s,hasQueries:o,isIntentions:1===k,isOwn:D,minCommission:0===k?i:void 0,nominatedBy:1===k?r:void 0,ownStashIds:M,paraValidators:0===k&&u||$t,recentlyOnline:0===k?S:void 0,stakingOverview:h,targets:p,toggleFavorite:x},k)]})})),Ht=(0,S.e)("useNominations",(function(e=!0){const{api:s}=(0,c.h)(),t=(0,m.W7)(e&&s.query.staking.nominators.entries);return(0,a.useMemo)((()=>t&&function(e){const s={};for(let t=0,n=e.length;t<n;t++){const[n,a]=e[t];if(a.isSome&&n.args.length){const e=n.args[0].toString(),{submittedIn:t,targets:o}=a.unwrap();for(let n=0,a=o.length;n<a;n++){const a=o[n].toString();s[a]||(s[a]=[]),s[a].push({index:n+1,nominatorId:e,submittedIn:t})}}}return s}(t)),[t])}));var Ut=t(57493),Jt=t(95209);const Gt={},Qt={withController:!0,withExposureErasStakersLegacy:!0,withPrefs:!0},Xt={withController:!0,withPrefs:!0},Kt={transform:({activeEra:e,eraLength:s,sessionLength:t})=>({activeEra:e,eraLength:s,lastEra:e.isZero()?v.nw:e.sub(v.If),sessionLength:t})},Yt={defaultValue:{},transform:([e,s,t,n,a,o,i,r])=>({counterForNominators:s,counterForValidators:t,historyDepth:e,maxNominatorsCount:n&&n.isSome?n.unwrap():void 0,maxValidatorsCount:a&&a.isSome?a.unwrap():void 0,minNominatorBond:o,minValidatorBond:i,totalIssuance:r})};function en(e){return(s,t)=>(s[e]=t+1,s)}function sn(e){return!e.nextElected}function tn(e){const s=[];return e.filter((({accountId:e})=>{const t=e.toString();return!s.includes(t)&&(s.push(t),!0)})).sort(((e,s)=>s.bondOther.cmp(e.bondOther))).map(en("rankBondOther")).sort(((e,s)=>s.bondOwn.cmp(e.bondOwn))).map(en("rankBondOwn")).sort(((e,s)=>s.bondTotal.cmp(e.bondTotal))).map(en("rankBondTotal")).sort(((e,s)=>e.stakedReturnCmp-s.stakedReturnCmp)).map(en("rankReward")).sort(((e,s)=>s.stakedReturnCmp-e.stakedReturnCmp||e.commissionPer-s.commissionPer||s.rankBondTotal-e.rankBondTotal)).map(en("rankOverall")).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}function nn(e,s,t,n,{activeEra:a,eraLength:o,lastEra:i,sessionLength:r},l,c){const d={},u=e.createType("Exposure"),m=l&&i.sub(l).iadd(v.If),h=new Array(t.info.length);for(let l=0;l<t.info.length;l++){const{accountId:x,exposureEraStakers:g=u,stakingLedger:f,validatorPrefs:b}=t.info[l];let[j,y]=g.total?[g.own.unwrap(),g.total.unwrap()]:[v.nw,v.nw];const w=y.isZero();w&&(y=j=f.total?.unwrap()||v.nw);const k=(g.others||[]).reduce(((s,{value:t=e.createType("Compact<Balance>")})=>{const n=t.unwrap();return s.isZero()||n.lt(s)?n:s}),v.nw),C=x.toString(),N=(p=f).legacyClaimedRewards||p.claimedRewards||[],I=i.isZero()?void 0:N[N.length-1];h[l]={accountId:x,bondOther:y.sub(j),bondOwn:j,bondShare:0,bondTotal:y,commissionPer:b.commission.unwrap().toNumber()/1e7,exposure:g,isActive:!w,isBlocking:!(!b.blocked||!b.blocked.isTrue),isElected:!sn(t)&&t.nextElected.some((e=>e.eq(x))),isFavorite:n.includes(C),isNominating:(g.others||[]).reduce(((e,t)=>{const n=t.who.toString();return d[n]=(d[n]||v.nw).add(t.value?.toBn()||v.nw),e||s.includes(n)}),s.includes(C)),key:C,knownLength:a.sub(N[0]||a),lastPayout:m&&I&&I.gt(m)&&!r.eq(v.If)?i.sub(I).mul(o):void 0,minNominated:k,numNominators:(g.others||[]).length,numRecentPayouts:m?N.filter((e=>e.gte(m))).length:0,rankBondOther:0,rankBondOwn:0,rankBondTotal:0,rankNumNominators:0,rankOverall:0,rankReward:0,skipRewards:w,stakedReturn:0,stakedReturnCmp:0,validatorPrefs:b,withReturns:c}}var p;return[h,d]}function an(e,s){const t=s.avgStaked,n=s.validators;return n?(t&&!t.isZero()&&n.forEach((s=>{if(!s.skipRewards&&s.withReturns){const n=t.mul(v.S8).imuln(e.stakedReturn).div(s.bondTotal);s.stakedReturn=(n.gt(v.Ew)?v.Ew:n).toNumber()/v.S8.toNumber(),s.stakedReturnCmp=s.stakedReturn*(100-s.commissionPer)/100}})),{...s,validators:tn(n)}):s}const on=(0,S.e)("useSortedTargets",(function(e,s){const{api:t}=(0,c.h)(),{allAccounts:n}=(0,d.x)(),{counterForNominators:o,counterForValidators:i,historyDepth:r,maxNominatorsCount:l,maxValidatorsCount:u,minNominatorBond:p,minValidatorBond:x,totalIssuance:g}=(0,h.L)([t.query.staking.historyDepth,t.query.staking.counterForNominators,t.query.staking.counterForValidators,t.query.staking.maxNominatorsCount,t.query.staking.maxValidatorsCount,t.query.staking.minNominatorBond,t.query.staking.minValidatorBond,t.query.balances?.totalIssuance],Yt),f=(0,m.W7)(t.derive.staking.electedInfo,[{...Qt,withLedger:s}]),b=(0,m.W7)(t.derive.staking.waitingInfo,[{...Xt,withLedger:s}]),y=(0,m.W7)(t.derive.session.info,void 0,Kt),w=(0,a.useMemo)((()=>f&&y&&g&&b?function(e,s,t,n,a,o,i,r){const[l,c]=nn(e,s,t,a,i,r,!0),[d]=nn(e,s,n,a,i),u=l.filter((({isActive:e})=>e)).map((({bondTotal:e})=>e)).sort(((e,s)=>e.cmp(s))),m=u.reduce(((e,s)=>e.iadd(s)),new(j())(0)),h=m.divn(u.length),p=Object.values(c).reduce(((e,s)=>e.isZero()||s.lt(e)?s:e),v.nw),x=(0,Jt.a)([l,d]),g=x.map((({commissionPer:e})=>e)).sort(((e,s)=>e-s)),f=Math.floor(g.length/2),b=g.length?g.length%2?g[f]:(g[f-1]+g[f])/2:0,y=d.map((({key:e})=>e)),w=(0,Jt.a)([l.map((({key:e})=>e)),y]),k=(0,Jt.a)([l.filter((({isBlocking:e})=>!e)).map((({key:e})=>e)),d.filter((({isBlocking:e})=>!e)).map((({key:e})=>e))]);return{avgStaked:h,lastEra:i.lastEra,lowStaked:u[0]||v.nw,medianComm:b,minNominated:p,nominateIds:k,nominators:Object.keys(c),totalIssuance:o,totalStaked:m,validatorIds:w,validators:x,waitingIds:y}}(t,n,f,b,e,g,y,t.consts.staking.historyDepth||r):Gt),[t,n,f,e,r,y,g,b]),k=(0,Ut.V)(w?.totalStaked);return(0,a.useMemo)((()=>({counterForNominators:o,counterForValidators:i,historyDepth:t.consts.staking.historyDepth||r,inflation:k,maxNominatorsCount:l,maxValidatorsCount:u,medianComm:0,minNominated:v.nw,minNominatorBond:p,minValidatorBond:x,...k?.stakedReturn?an(k,w):w})),[t,w,o,i,r,k,l,u,p,x])})),rn=["actions","payout"],ln={defaultValue:[!1,void 0,{}],transform:([e,s,t,n])=>[!!e&&e.isOpen,s&&!s.isZero()?s:void 0,t&&n?n.reduce(((e,s)=>({...e,[t[s.toNumber()].toString()]:!0})),{}):{}]},cn=l.zo.main`
  .staking--Chart {
    margin-top: 1.5rem;

    h1 {
      margin-bottom: 0.5rem;
    }

    .ui--Spinner {
      margin: 2.5rem auto;
    }
  }

  .staking--optionsBar {
    margin: 0.5rem 0 1rem;
    text-align: center;
    white-space: normal;

    .staking--buttonToggle {
      display: inline-block;
      margin-right: 1rem;
      margin-top: 0.5rem;
    }
  }

  .ui--Expander.stakeOver {
    .ui--Expander-summary {
      color: var(--color-error);
    }
  }
`,dn=a.memo((function({basePath:e,className:s=""}){const{t}=w(),{api:f}=(0,c.h)(),{areAccountsLoaded:b,hasAccounts:j}=(0,d.x)(),{pathname:v}=(0,o.TH)(),[y,k]=(0,a.useState)(!1),[C,N]=(0,u.r)(X),[I,S]=(0,a.useState)(!1),A=Ht(I),P=(0,m.W7)(f.derive.staking.overview),[E,M,D]=(0,h.L)([f.query.staking.eraElectionStatus,f.query.staking.minCommission,f.query.session.validators,(f.query.parasShared||f.query.shared)?.activeValidatorIndices],ln),T=(0,r.Z)(),F=(0,p.w)(),q=(0,x.g)(),O=on(C,y),_=(0,a.useMemo)((()=>j&&!!f.query.imOnline?.authoredBlocks&&!!f.query.staking.activeEra),[f,j]),V=(0,a.useMemo)((()=>j&&!!F&&0!==F.length),[j,F]),B=(0,a.useMemo)((()=>(F||[]).filter((({isStashValidating:e})=>e))),[F]),R=(0,a.useCallback)((()=>k(!0)),[]),Z=(0,a.useCallback)((()=>S(!0)),[]),$=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{name:"actions",text:t("Accounts")},V&&(0,g.m)(f.query.staking.activeEra)&&{name:"payout",text:t("Payouts")},(0,g.m)(f.query.nominationPools?.minCreateBond)&&{name:"pools",text:t("Pools")},{alias:"returns",name:"targets",text:t("Targets")},V&&(0,g.m)((f.query.voterBagsList||f.query.bagsList||f.query.voterList)?.counterForListNodes)&&{name:"bags",text:t("Bags")},{count:q.reduce(((e,[,s])=>e+s.length),0),name:"slashes",text:t("Slashes")},{hasParams:!0,name:"query",text:t("Validator stats")}].filter((e=>!!e))),[f,V,q,t]);return(0,n.jsxs)(cn,{className:`${s} staking--App`,children:[(0,n.jsx)(l.mQ,{basePath:e,hidden:b&&!j?rn:void 0,items:$}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(ms,{ownStashes:F}),path:"bags"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Is,{historyDepth:O.historyDepth,isInElection:E,ownPools:T,ownValidators:B}),path:"payout"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(i.Z,{ownPools:T}),path:"pools"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)($s,{}),path:"query/:value?"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Gs,{ownStashes:F,slashes:q}),path:"slashes"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(wt,{isInElection:E,nominatedBy:A,ownStashes:F,stakingOverview:P,targets:O,toggleFavorite:N,toggleLedger:R,toggleNominatedBy:Z}),path:"targets"})]})}),(0,n.jsx)(He,{className:v===`${e}/actions`?"":"--hidden",isInElection:E,minCommission:M,ownPools:T,ownStashes:F,targets:O}),(0,n.jsx)(Wt,{className:e===v?"":"--hidden",favorites:C,hasAccounts:j,hasQueries:_,minCommission:M,nominatedBy:A,ownStashes:F,paraValidators:D,stakingOverview:P,targets:O,toggleFavorite:N,toggleNominatedBy:Z})]})}))},64765:(e,s,t)=>{t.d(s,{Z:()=>D});var n=t(52322),a=t(2784),o=t(68235),i=t(57272),r=t(14681),l=t(90778),c=t(38894),d=t(79760),u=t(9118),m=t(11677);const h=(0,m.e)("useQueryModule",(function(){const{api:e}=(0,l.h)();return(0,a.useMemo)((()=>e.query.voterList||e.query.voterBagsList||e.query.bagsList),[e])})),p={transform:e=>e.filter((e=>e.isSome)).map((e=>e.unwrap())).reduce(((e,s)=>{const t=s.bagUpper.toString();return e[t]||(e[t]=[]),e[t].push({node:s,stashId:s.id.toString()}),e}),{})},x=(0,m.e)("useBagsNodes",(function(e){const s=h(),[t,n]=(0,a.useState)(),o=(0,u.W7)(s.listNodes.multi,[e],p);return(0,a.useEffect)((()=>{o&&n((e=>function(e,s){return Object.entries(s).reduce(((s,[t,n])=>(s[t]=e?.[t]&&JSON.stringify(n)===JSON.stringify(e[t])?e[t]:n,s)),{})}(e,o)))}),[o]),t})),g=a.memo((function({bagUpper:e,stashIds:s}){const{t}=(0,i.$)(),{api:r}=(0,l.h)(),[u,m]=(0,a.useState)(null),[h,p]=(0,c.O)(),g=x(s),f=(0,a.useMemo)((()=>g?function(e,s){return Object.values(e[s.toString()]||{}).map((({stashId:e})=>e))}(g,e):[]),[e,g]),[b,j]=(0,a.useState)([]),v=(0,a.useMemo)((()=>b.map((e=>(r.tx.voterBagsList||r.tx.bagsList||r.tx.voterList).rebag(e)))),[r,b]),y=(0,d.b)(v);return f.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"refresh",label:t("Rebag {{count}}",{replace:{count:f.length}}),onClick:p}),h&&(0,n.jsxs)(o.u_,{header:t("Rebag dislocated entries"),onClose:p,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:t("The account that will submit the rebag transaction."),children:(0,n.jsx)(o.rp,{label:t("rebag from account"),onChange:m,type:"account"})}),(0,n.jsx)(o.u_.Columns,{hint:t("The accounts that will be rebagged as a result of this operation."),children:(0,n.jsx)(o.m3,{available:f,availableLabel:t("unselected"),defaultValue:f,maxCount:Number.MAX_SAFE_INTEGER,onChange:j,valueLabel:t("to rebag")})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:u,extrinsic:y,icon:"refresh",isDisabled:!y||!b.length,label:t("Rebag"),onStart:p})})]})]}):null})),f=o.zo.div`
  .ui--AddressMini {
    vertical-align: middle;
  }
`,b=a.memo((function({bagLower:e,bagUpper:s,className:t,isLoading:r,list:c,stashId:d}){const{t:u}=(0,i.$)(),{api:m}=(0,l.h)(),{canJump:h,jumpCount:p,stashInfo:x}=(0,a.useMemo)((()=>function(e,s,t,n=[]){const a=n.find((e=>e.stashId===t))||null,o=a?.jump&&n.find((e=>e.stashId===a.jump))||null;return{canJump:!!o,jumpCount:a&&o?a.index-o.index:0,stashInfo:a}}(0,0,d,c)),[e,s,c,d]);return(0,n.jsxs)(f,{className:t,children:[(0,n.jsx)(o.ax,{value:d,withBonded:!0}),x&&(h?(0,n.jsx)(o.cA,{accountId:x.stashId,icon:"caret-up",isDisabled:r,label:u("Move up {{jumpCount}}",{replace:{jumpCount:p}}),params:[x.jump],tx:(m.tx.voterBagsList||m.tx.bagsList||m.tx.voterList).putInFrontOf}):null)]})})),j=[null,{isCompleted:!1,list:[]}],v=[],y=(0,m.e)("useBagEntries",(function(e,s){const t=h(),[[n,{isCompleted:o,list:i}],r]=(0,a.useState)(j),l=(0,u.W7)(!!n&&t.listNodes,[n]);return(0,a.useEffect)((()=>r(e&&s?[e,{isCompleted:!1,list:[e]}]:[null,{isCompleted:!0,list:[]}])),[e,s]),(0,a.useEffect)((()=>{if(l&&l.isSome){const{next:e}=l.unwrap();if(e.isSome){const s=e.unwrap();r((([,{list:e}])=>[s,{isCompleted:!1,list:[...e,s]}]))}else r((([e,{list:s}])=>[e,{isCompleted:!0,list:s}]))}}),[l]),[o,o?i:v]})),w={transform:e=>{const s=e.map((({stakingLedger:e,stashId:s},t)=>({bonded:e.active.unwrap(),index:t,jump:null,stashId:s.toString()})));return s.map((e=>{const t=s.find((({bonded:s,index:t})=>t<e.index&&s.lt(e.bonded)));return t&&(e.jump=t.stashId),e}))}},k=(0,m.e)("useBonded",(function(e){const{api:s}=(0,l.h)();return(0,u.W7)(e&&0!==e.length&&s.derive.staking.accounts,[e],w)})),C=a.memo((function({bagLower:e,bagUpper:s,info:t,nodesOwn:i}){const[[l,c],d]=(0,a.useState)([null,0]),[u,m]=(0,a.useState)([]),[h,p]=(0,a.useState)(!0),[x,f]=y(l,c),j=k(f);return(0,a.useEffect)((()=>{t&&i&&d((([,e])=>[t.head.unwrapOr(null),++e]))}),[t,i]),(0,a.useEffect)((()=>{p(!(!i?.length||x&&j))}),[j,x,i]),(0,a.useEffect)((()=>{!h&&j&&m(function(e,s,t){return e.filter((({bonded:e})=>e.gt(s)||e.lt(t))).map((({stashId:e})=>e))}(j,s,e))}),[e,s,j,h]),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"number"}),(0,n.jsx)(o.iA.Column.Balance,{value:s}),(0,n.jsx)(o.iA.Column.Balance,{value:e}),(0,n.jsx)("td",{className:"address",children:t.head.isSome&&(0,n.jsx)(o.ax,{value:t.head.unwrap()})}),(0,n.jsx)("td",{className:"address",children:t.tail.isSome&&(0,n.jsx)(o.ax,{value:t.tail.unwrap()})}),(0,n.jsx)("td",{className:"address",children:i?.map((({stashId:t})=>(0,n.jsx)(b,{bagLower:e,bagUpper:s,isLoading:h,list:j,stashId:t},t)))}),(0,n.jsx)("td",{className:"number",children:h?(0,n.jsx)("span",{className:"--tmp",children:"99"}):f.length?(0,r.u)(f.length):null}),(0,n.jsx)("td",{className:"button",children:!h&&(0,n.jsx)(g,{bagLower:e,bagUpper:s,stashIds:u})})]})}));var N=t(65968);const I=a.memo((function({bags:e,className:s="",mapOwn:t}){const{t:l}=(0,i.$)(),c=h(),d=(0,u.W7)(c.counterForListNodes),m=(0,a.useMemo)((()=>t&&Object.values(t).reduce(((e,s)=>e+s.length),0)),[t]);return(0,n.jsxs)(o.Ty,{className:s,children:[(0,n.jsx)(o.Jy,{label:l("total bags"),children:e?(0,r.u)(e.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsxs)("section",{children:[(0,n.jsx)(o.Jy,{label:l("total nodes"),children:t?(0,r.u)(d):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(o.Jy,{label:l("my nodes"),children:(0,N.h)(m)?(0,r.u)(m):(0,n.jsx)("span",{className:"--tmp",children:"99"})})]})]})}));var S=t(12298),A=t(95292);const P={transform:e=>e.map((({args:[e]})=>e))},E={transform:([[e],s])=>{const t=e.map(((e,t)=>[e,s[t]])).filter((([,e])=>e.isSome)).sort((([e],[s])=>s.cmp(e))).map((([e,s],t)=>({bagLower:A.nw,bagUpper:e,index:t,info:s.unwrap(),key:e.toString()})));return t.map(((e,s)=>s===t.length-1?e:{...e,bagLower:t[s+1].bagUpper}))},withParamsTransform:!0},M=(0,m.e)("useBagsList",(function(){const e=h(),[s,t]=(0,a.useState)(),n=(0,S.k)(e.listBags,[],P),o=(0,u.W7)(n&&0!==n.length&&e.listBags.multi,[n],E);return(0,a.useEffect)((()=>{o&&t((e=>function(e,s){return e&&s.length===e.length?s.map(((s,t)=>JSON.stringify(s)===JSON.stringify(e[t])?e[t]:s)):s}(e,o)))}),[o]),s})),D=a.memo((function({className:e,ownStashes:s}){const{t}=(0,i.$)(),r=(0,a.useMemo)((()=>s?s.map((({stashId:e})=>e)):[]),[s]),[l,c]=(0,a.useState)((()=>r.length?0:1)),d=M(),u=x(r),m=(0,a.useRef)([[t("bags")],[t("max"),"number"],[t("min"),"number"],[t("first"),"address"],[t("last"),"address"],[t("stashes"),"address"],[t("nodes"),"number"],[void 0,"mini"]]),h=(0,a.useMemo)((()=>[{isDisabled:!r.length,text:t("My bags"),value:"mine"},{text:t("All bags"),value:"all"}]),[r,t]),p=(0,a.useMemo)((()=>{return d&&u&&(e=u,s=!l,d.map((s=>[s,e[s.key]])).filter((([,e])=>!s||!!e)));var e,s}),[d,l,u]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(I,{bags:d,mapOwn:u}),(0,n.jsx)(o.zx.Group,{children:(0,n.jsx)(o.tX,{onChange:c,options:h,value:l})}),(0,n.jsxs)(o.Pd,{className:"warning centered",withIcon:!1,children:[(0,n.jsx)("p",{children:t("The All bags list is composed of bags that each describe a range of active bonded funds of the nominators. In each bag is a list of nodes that correspond to a nominator and their staked funds.")}),(0,n.jsx)("p",{children:t("Within the context of a single bag, nodes are not sorted by their stake, but instead placed in insertion order. In other words, the most recently inserted node will be the last node in the bag, regardless of stake. Events like staking rewards or slashes do not automatically put you in a different bag. The bags-list pallet comes with an important permissionless extrinsic: rebag. This allows anyone to specify another account that is in the wrong bag, and place it in the correct one.")})]}),(0,n.jsx)(o.iA,{empty:p&&t("No available bags"),emptySpinner:t("Retrieving all available bags, this will take some time"),header:m.current,children:p?.map((([{bagLower:e,bagUpper:s,index:t,info:a,key:o},i])=>(0,n.jsx)(C,{bagLower:e,bagUpper:s,index:t,info:a,nodesOwn:i},o)))})]})}))},568:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(52322),a=t(2784),o=t(68235),i=t(57272);const r=a.memo((function({isInElection:e}){const{t:s}=(0,i.$)();return e?(0,n.jsx)(o.Pd,{className:"warning centered",content:s("There is currently an ongoing election for new validator candidates. As such staking operations are not permitted.")}):null}))},34536:(e,s,t)=>{t.d(s,{Z:()=>d});var n=t(52322),a=t(85168),o=t(2784),i=t(68235),r=t(90778),l=t(54371),c=t(57272);const d=o.memo((function({children:e,className:s,nameFilter:t,setNameFilter:d,setWithIdentity:u,withIdentity:m}){const{t:h}=(0,c.$)(),{apiIdentity:p}=(0,r.h)();(0,o.useEffect)((()=>{const e=a.Z.parse(location.href.split("?")[1]).filter;(0,l.H)(e)&&d(e,!0)}),[]);const x=(0,o.useCallback)((e=>d(e,!1)),[d]);return(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)(i.II,{autoFocus:!0,isFull:!0,label:h("filter by name, address or index"),onChange:x,value:t}),(e||u)&&(0,n.jsxs)("div",{className:"staking--optionsBar",children:[e,u&&p.query.identity&&(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:h("with an identity"),onChange:u,value:m})]})]})}))},33378:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(52322),a=t(2784),o=t(68235),i=t(90778);const r=a.memo((function({numNominators:e}){const{api:s}=(0,i.h)(),t=s.consts.staking?.maxNominatorRewardedPerValidator;return e&&t&&!t.gten(e)?(0,n.jsx)(o.Ct,{className:"media--1200",color:"red",icon:"balance-scale-right"}):null}))},26939:(e,s,t)=>{t.d(s,{Z:()=>E});var n=t(52322),a=t(2784),o=t(68235),i=t(90778),r=t(9118),l=t(56360),c=t(59118),d=t(48801),u=t.n(d),m=t(95292),h=t(568),p=t(57272),x=t(38894),g=t(79760);function f(e,s){return s.sort(((e,s)=>e.era.cmp(s.era))).map((({era:s,validatorId:t})=>e.tx.staking.payoutStakers(t,s)))}function b(e,s){if(!Array.isArray(s)){const{eras:t,validatorId:n}=s;return t.every((e=>e.isClaimed))?null:1===t.length?[e.tx.staking.payoutStakers(n,t[0].era)]:f(e,t.filter((e=>!e.isClaimed)).map((e=>({era:e.era,validatorId:n}))))}return 1===s.length?s[0].eras.every((e=>e.isClaimed))?null:b(e,s[0]):s.some((e=>e.eras.some((e=>!e.isClaimed))))?f(e,s.reduce(((e,{eras:s,validatorId:t})=>(s.forEach((({era:s,isClaimed:n})=>{n||e.push({era:s,validatorId:t})})),e)),[])):null}const j=(0,o.zo)(o.u_)`
  .ui--AddressMini.padded.addressStatic {
    display: inline-block;
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,v=a.memo((function({className:e,isAll:s,isDisabled:t,payout:r}){const{t:l}=(0,p.$)(),{api:c}=(0,i.h)(),[d,u]=(0,x.O)(),[m,h]=(0,a.useState)(null),[f,v]=(0,a.useState)(null),y=(0,a.useMemo)((()=>({max:2304/(c.consts.staking.maxNominatorRewardedPerValidator?.toNumber()||64),type:"force"})),[c]),w=(0,g.b)(f,y);(0,a.useEffect)((()=>{r&&v((()=>b(c,r)))}),[c,r]);const k=!r||!Array.isArray(r)&&!r.eras.some((e=>!e.isClaimed))||Array.isArray(r)&&r.some((e=>!e.eras.some((e=>!e.isClaimed))))||Array.isArray(r)&&0===r.length;return(0,n.jsxs)(n.Fragment,{children:[r&&d&&(0,n.jsxs)(j,{className:e,header:l("Payout all stakers"),onClose:u,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:l("Any account can request payout for stakers, this is not limited to accounts that will be rewarded."),children:(0,n.jsx)(o.rp,{label:l("request payout from"),onChange:h,type:"account",value:m})}),(0,n.jsx)(o.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:l("All the listed validators and all their nominators will receive their rewards.")}),(0,n.jsx)("p",{children:l("The UI puts a limit of 40 payouts at a time, where each payout is a single validator for a single era.")})]}),children:Array.isArray(r)?(0,n.jsx)(o.qG,{label:l("payout stakers for (multiple)"),value:r.map((({validatorId:e})=>(0,n.jsx)(o.ax,{className:"addressStatic",value:e},e)))}):(0,n.jsx)(o.rp,{defaultValue:r.validatorId,isDisabled:!0,label:l("payout stakers for (single)")})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:m,extrinsic:w,icon:"credit-card",isDisabled:!w?.length||!m,label:l("Payout"),onStart:u})})]}),(0,n.jsx)(o.zx,{icon:"credit-card",isDisabled:t||k,label:s||Array.isArray(r)?l("Payout all"):l("Payout"),onClick:u})]})}));var y=t(65874);const w=(0,t(11677).e)("useEraBlocks",(function(e,s){const{api:t}=(0,i.h)(),n=(0,r.W7)(t.derive.session.progress),o=(0,r.W7)(t.query.staking.forceEra);return(0,a.useMemo)((()=>e&&s&&o&&n&&n.sessionLength.gt(m.If)?(o.isForceAlways?n.sessionLength:n.eraLength).mul(e.sub(n.activeEra).iadd(s).iadd(m.If)).isub(o.isForceAlways?n.sessionProgress:n.eraProgress):void 0),[s,o,e,n])}));var k=t(14681);function C(e){return!Array.isArray(e)}function N(e){if(!e.length)return"";const s=e.sort(((e,s)=>e.cmp(s))).reduce(((e,s)=>{if(0===e.length)return[s];{const t=e[e.length-1];C(t)?t.add(m.If).eq(s)?e[e.length-1]=[t,s]:e.push(s):t[1].add(m.If).eq(s)?t[1]=s:e.push(s)}return e}),[]).map((e=>C(e)?(0,k.u)(e):`${(0,k.u)(e[0])}-${(0,k.u)(e[1])}`));return(0,n.jsx)(n.Fragment,{children:s.map(((e,s)=>(0,n.jsxs)(a.Fragment,{children:[0!==s&&", ",(0,n.jsx)("span",{children:e})]},e)))})}const I=a.memo((function({className:e="",historyDepth:s,payout:{available:t,rewards:i,stashId:r}}){const[{eraStr:l,oldestEra:c},d]=(0,a.useState)({eraStr:""}),u=w(s,c);return(0,a.useEffect)((()=>{i&&d({eraStr:N(i.filter((({isClaimed:e})=>!e)).map((({era:e})=>e))),oldestEra:i[0]?.era})}),[i]),(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)("td",{className:"address",colSpan:2,children:(0,n.jsx)(o.N,{value:r})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)("span",{className:"payout-eras",children:l})}),(0,n.jsx)(o.iA.Column.Balance,{value:t}),(0,n.jsx)("td",{className:"number",children:(0,n.jsx)(y.Z,{className:u?"":"--tmp",value:u||m.uy})}),(0,n.jsx)("td",{className:"button",colSpan:3})]})})),S=a.memo((function({className:e="",historyDepth:s,isDisabled:t,payout:i}){const{t:r}=(0,p.$)(),{eraStr:l,nominators:c,numNominators:d,oldestEra:u}=(0,a.useMemo)((()=>function(e){const s=N(e.eras.filter((({isClaimed:e})=>!e)).map((({era:e})=>e))),t=e.eras.reduce(((e,{stashes:s})=>(Object.entries(s).forEach((([s,t])=>{e[s]?e[s]=e[s].add(t):e[s]=t})),e)),{});return{eraStr:s,nominators:t,numNominators:Object.keys(t).length,oldestEra:e.eras[0]?.era}}(i)),[i]),m=w(s,u);return(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)("td",{className:"address",colSpan:2,children:(0,n.jsx)(o.N,{value:i.validatorId})}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)("span",{className:"payout-eras",children:l})}),(0,n.jsx)(o.iA.Column.Balance,{value:i.available}),(0,n.jsx)("td",{className:"number",children:m&&(0,n.jsx)(y.Z,{value:m})}),(0,n.jsx)("td",{className:"expand",colSpan:2,children:(0,n.jsx)(o.xH,{summary:r("{{count}} own stashes",{replace:{count:d}}),children:Object.entries(c).map((([e,s])=>(0,n.jsx)(o.ax,{balance:s,value:e,withBalance:!0},e)))})}),(0,n.jsx)("td",{className:"button",children:(0,n.jsx)(v,{isDisabled:t,payout:i})})]})})),A=new(u())(864e5);const P=o.zo.div`
  .payout-eras {
    padding-left: 0.25rem;
    vertical-align: middle;

    span {
      white-space: nowrap;
    }
  }
`,E=a.memo((function({className:e="",historyDepth:s,isInElection:t,ownPools:d,ownValidators:x}){const{t:g}=(0,p.$)(),{api:f}=(0,i.h)(),[b]=(0,a.useState)((()=>0!==x.length)),[j,y]=(0,a.useState)((()=>b?0:1)),[w,k]=(0,a.useState)(0),C=(0,r.W7)(f.derive.session.eraLength),N=(0,l.n)(),E=(0,a.useMemo)((()=>d?.map((({stashId:e})=>e))),[d]),M=(0,a.useMemo)((()=>function(e,s,t,n){if(!s||!t)return[{text:"",value:0}];const a=A.div(e),o=s.mul(t),i=[],r=new(u())(2);for(;;){const e=a.mul(r);if(e.gte(o))break;i.push({text:n("{{days}} days",{replace:{days:r.toString()}}),value:e.div(s).toNumber()}),r.imul(m.Jo)}return i.push({text:n("Max, {{eras}} eras",{replace:{eras:t.toNumber()}}),value:t.toNumber()}),i}(N,C,s,g)),[N,C,s,g]),{allRewards:D,isLoadingRewards:T}=(0,c.Q)(M[w].value,j?void 0:x,E),{stashAvail:F,stashes:q,valAvail:O,validators:_}=(0,a.useMemo)((()=>function(e){if(e){const s=function(e){return Object.entries(e).map((([e,s])=>({available:s.reduce(((e,{validators:s})=>Object.values(s).reduce(((e,{value:s})=>e.iadd(s)),e)),new(u())(0)),rewards:s,stashId:e}))).filter((({available:e})=>!e.isZero())).filter((({rewards:e})=>e.some((e=>!e.isClaimed)))).sort(((e,s)=>s.available.cmp(e.available)))}(e),t=function(e){return Object.entries(e).reduce(((e,[s,t])=>(t.forEach((t=>{Object.entries(t.validators).forEach((([n,{total:a,value:o}])=>{const i=e.find((e=>e.validatorId===n));if(i){const e=i.eras.find((e=>e.era.eq(t.era)));e?e.stashes[s]=o:i.eras.push({era:t.era,isClaimed:t.isClaimed,stashes:{[s]:o}}),i.available=i.available.add(o),i.total=i.total.add(a)}else e.push({available:o,eras:[{era:t.era,isClaimed:t.isClaimed,stashes:{[s]:o}}],total:a,validatorId:n})}))})),e)),[]).sort(((e,s)=>s.available.cmp(e.available)))}(e),n=s.length?s.reduce(((e,{available:s})=>e.iadd(s)),new(u())(0)):null,[a,o]=t.length?t.reduce((([e,s],{available:t,total:n})=>[e.iadd(t),s.iadd(n)]),[new(u())(0),new(u())(0)]):[null,null];return{stashAvail:n,stashes:s,valAvail:a,valTotal:o,validators:t}}return{}}(D)),[D]),V=(0,a.useMemo)((()=>[[g(j?"payout/stash":"overall/validator"),"start",2],[g("eras"),"start"],[g(j?"own":"total")],["remaining"],[void 0,void 0,3]]),[j,g]),B=(0,a.useRef)([[g("payout/validator"),"start",2],[g("eras"),"start"],[g("own")],["remaining"],[void 0,void 0,3]]),R=(0,a.useMemo)((()=>[{isDisabled:!b,text:g("Own validators"),value:"val"},{text:g("Own stashes"),value:"all"}]),[b,g]),Z=(0,a.useMemo)((()=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:3}),(0,n.jsx)(o.iA.Column.Balance,{value:F}),(0,n.jsx)("td",{colSpan:4})]})),[F]),$=(0,a.useMemo)((()=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:3}),(0,n.jsx)(o.iA.Column.Balance,{value:O}),(0,n.jsx)("td",{colSpan:4})]})),[O]);return(0,n.jsxs)(P,{className:e,children:[(0,n.jsxs)(o.zx.Group,{children:[(0,n.jsx)(o.tX,{onChange:y,options:R,value:j}),(0,n.jsx)(o.tX,{onChange:k,options:M,value:w}),(0,n.jsx)(v,{isAll:!0,isDisabled:t,payout:_})]}),(0,n.jsx)(h.Z,{isInElection:t}),!T&&!q?.length&&(0,n.jsxs)(o.Pd,{className:"warning centered",withIcon:!1,children:[(0,n.jsx)("p",{children:g("Payouts of rewards for a validator can be initiated by any account. This means that as soon as a validator or nominator requests a payout for an era, all the nominators for that validator will be rewarded. Each user does not need to claim individually and the suggestion is that validators should claim rewards for everybody as soon as an era ends.")}),(0,n.jsx)("p",{children:g("If you have not claimed rewards straight after the end of the era, the validator is in the active set and you are seeing no rewards, this would mean that the reward payout transaction was made by another account on your behalf. Always check your favorite explorer to see any historic payouts made to your accounts.")})]}),(0,n.jsx)(o.iA,{empty:!T&&q&&g(j?"No pending payouts for your stashes":"No pending payouts for your validators"),emptySpinner:g("Retrieving info for the selected eras, this will take some time"),footer:Z,header:V,isFixed:!0,children:!T&&q?.map((e=>(0,n.jsx)(I,{historyDepth:s,payout:e},e.stashId)))}),1===j&&!T&&_&&0!==_.length&&_.filter((({eras:e})=>e.some((e=>!e.isClaimed)))).length>0&&(0,n.jsx)(o.iA,{footer:$,header:B.current,isFixed:!0,children:!T&&_.filter((({available:e})=>!e.isZero())).map((e=>(0,n.jsx)(S,{historyDepth:s,isDisabled:t,payout:e},e.validatorId)))})]})}))},74683:(e,s,t)=>{t.d(s,{Z:()=>E});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(9118),c=t(57272);const d=i.zo.div`
  &.isLoading {
    position: relative;

    canvas, h1 {
      opacity: 0.25;
    }

    .ui--Spinner {
      position: absolute;
      top: 34%;
      left: 0;
      right: 0;
    }
  }
`,u=a.memo((function({className:e="",colors:s,labels:t,legends:o,title:r,values:l}){const c=(0,a.useMemo)((()=>!t||0===t.length||!l||0===l.length||!l[0]?.length),[t,l]);return(0,n.jsxs)(d,{className:`${e} staking--Chart ${c?"isLoading":""}`,children:[(0,n.jsx)(i.kL.Line,{colors:s,labels:t,legends:o,title:r,values:l}),c&&(0,n.jsx)(i.$j,{})]})})),m=[void 0,"#acacac"],h=a.memo((function({labels:e,validatorId:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),d=(0,l.W7)(o.derive.staking.stakerPoints,i),[h,p]=(0,a.useState)([]);(0,a.useEffect)((()=>p([])),[s]),(0,a.useEffect)((()=>d&&p(function(e,s){const t=new Array(e.length),n=new Array(e.length),[a,o]=s.reduce((([e,s],{points:t})=>(t.gtn(0)&&(e+=t.toNumber(),s++),[e,s])),[0,0]);return s.forEach((({era:s,points:i})=>{const r=o>0?Math.ceil(100*a/o)/100:0,l=e.indexOf(s.toHuman());-1!==l&&(t[l]=r,n[l]=i.toNumber())})),[n,t]}(e,d))),[e,d]);const x=(0,a.useRef)([t("points"),t("average")]);return(0,n.jsx)(u,{colors:m,labels:e,legends:x.current,title:t("era points"),values:h})}));var p=t(48801),x=t.n(p),g=t(95292);const f=new(x())(1e4),b=[void 0,"#acacac"],j=a.memo((function({labels:e,validatorId:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),d=(0,l.W7)(o.derive.staking.stakerPrefs,i),[m,h]=(0,a.useState)([]);(0,a.useEffect)((()=>h([])),[s]),(0,a.useEffect)((()=>d&&h(function(e,s){const t=new Array(e.length),n=new Array(e.length),[a,o]=s.reduce((([e,s],{validatorPrefs:t})=>{const n=t.commission.unwrap().mul(f).div(g.ed).toNumber()/100;return 0!==n&&(e+=n,s++),[e,s]}),[0,0]);return s.forEach((({era:s,validatorPrefs:i})=>{const r=i.commission.unwrap().mul(f).div(g.ed).toNumber()/100,l=o>0?Math.ceil(100*a/o)/100:0,c=e.indexOf(s.toHuman());-1!==c&&(t[c]=l,n[c]=r)})),[n,t]}(e,d))),[e,d]);const p=(0,a.useRef)([t("commission"),t("average")]);return(0,n.jsx)(u,{colors:b,labels:e,legends:p.current,title:t("commission"),values:m})}));var v=t(92730),y=t(6485),w=t(33661);function k(e=g.nw,s){return((0,y.H)(e)?e:(0,w.m)(e.toBn)?e.toBn():g.nw).mul(g.D_).div(s).toNumber()/1e3}const C=["#8c2200","#008c22","#acacac"],N=a.memo((function({labels:e,validatorId:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),d=(0,l.W7)(o.derive.staking.ownSlashes,i),m=(0,l.W7)(o.derive.staking.erasRewards),h=(0,l.W7)(o.derive.staking.stakerPoints,i),[p,g]=(0,a.useState)([]),{currency:f,divisor:b}=(0,a.useMemo)((()=>({currency:v.a.getDefaults().unit,divisor:new(x())("1".padEnd(v.a.getDefaults().decimals+1,"0"))})),[]);(0,a.useEffect)((()=>g([])),[s]),(0,a.useEffect)((()=>m&&d&&h&&g(function(e,s,t,n,a){const o=new Array(e.length),i=new Array(e.length),r=new Array(e.length),[l,c]=s.reduce((([e,s],{era:t,eraReward:o})=>{const i=n.find((e=>e.era.eq(t))),r=i?.eraPoints.gtn(0)?k(i.points.mul(o).div(i.eraPoints),a):0;return r>0&&(e+=r,s++),[e,s]}),[0,0]);return s.forEach((({era:s,eraReward:d})=>{const u=n.find((e=>e.era.eq(s))),m=t.find((e=>e.era.eq(s))),h=u?.eraPoints.gtn(0)?k(u.points.mul(d).div(u.eraPoints),a):0,p=m?k(m.total,a):0,x=c>0?Math.ceil(100*l/c)/100:0,g=e.indexOf(s.toHuman());-1!==g&&(i[g]=h,r[g]=x,o[g]=p)})),[o,i,r]}(e,m,d,h,b))),[e,b,m,d,h]);const j=(0,a.useMemo)((()=>[t("{{currency}} slashed",{replace:{currency:f}}),t("{{currency}} rewards",{replace:{currency:f}}),t("{{currency}} average",{replace:{currency:f}})]),[f,t]);return(0,n.jsx)(u,{colors:C,labels:e,legends:j,title:t("rewards & slashes"),values:p})})),I=[void 0,"#8c2200","#acacac"],S=a.memo((function({labels:e,validatorId:s}){const{t}=(0,c.$)(),{api:o}=(0,r.h)(),i=(0,a.useMemo)((()=>[s,!1]),[s]),d=(0,l.W7)(o.derive.staking.ownExposures,i),[m,h]=(0,a.useState)([]),{currency:p,divisor:f}=(0,a.useMemo)((()=>({currency:v.a.getDefaults().unit,divisor:new(x())("1".padEnd(v.a.getDefaults().decimals+1,"0"))})),[]);(0,a.useEffect)((()=>h([])),[s]),(0,a.useEffect)((()=>d&&h(function(e,s,t){const n=new Array(e.length),a=new Array(e.length),o=new Array(e.length),[i,r]=s.reduce((([e,s],{exposureMeta:n})=>{const a=n.isSome&&n.unwrap(),o=k(a&&a.total?.unwrap()||g.nw,t);return o>0&&(e+=o,s++),[e,s]}),[0,0]);return s.forEach((({era:s,exposureMeta:l,exposurePaged:c})=>{const d=c.isSome&&c.unwrap(),u=l.isSome&&l.unwrap(),m=k(d&&d.pageTotal?.unwrap()||g.nw,t),h=k(u&&u.total?.unwrap()||g.nw,t),p=r>0?Math.ceil(100*i/r)/100:0,x=e.indexOf(s.toHuman());-1!==x&&(o[x]=p,n[x]=m,a[x]=h)})),[n,a,o]}(e,d,f))),[e,f,d]);const b=(0,a.useMemo)((()=>[t("{{currency}} paged",{replace:{currency:p}}),t("{{currency}} total",{replace:{currency:p}}),t("{{currency}} average",{replace:{currency:p}})]),[p,t]);return(0,n.jsx)(u,{colors:I,labels:e,legends:b,title:t("elected stake"),values:m})})),A=(0,i.zo)(i.P0)`
  .staking--Chart {
    background: var(--bg-table);
    border: 1px solid var(--border-table);
    border-radius: 0.25rem;
    padding: 1rem 1.5rem;
  }
`,P=a.memo((function({className:e="",labels:s,validatorId:t}){return(0,n.jsxs)(A,{className:e,children:[(0,n.jsxs)(i.P0.Column,{children:[(0,n.jsx)(h,{labels:s,validatorId:t}),(0,n.jsx)(N,{labels:s,validatorId:t})]}),(0,n.jsxs)(i.P0.Column,{children:[(0,n.jsx)(S,{labels:s,validatorId:t}),(0,n.jsx)(j,{labels:s,validatorId:t})]})]})})),E=a.memo((function({basePath:e,className:s}){const{t}=(0,c.$)(),{api:d}=(0,r.h)(),{value:u}=(0,o.UO)(),[m,h]=(0,a.useState)(u||null),p=(0,l.W7)(d.derive.staking.erasHistoric),x=(0,a.useMemo)((()=>p?.map((e=>e.toHuman()))),[p]),g=(0,a.useCallback)((()=>function(e,s){s&&(window.location.hash=`${e}/query/${s}`)}(e,m)),[e,m]);return x?(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)(i.bm,{className:"staking--queryInput",defaultValue:u,label:t("validator to query"),onChange:h,onEnter:g,children:(0,n.jsx)(i.zx,{icon:"play",isDisabled:!m,onClick:g})}),u&&(0,n.jsx)(P,{labels:x,validatorId:u})]}):(0,n.jsx)(i.$j,{})}))},94345:(e,s,t)=>{t.d(s,{Z:()=>w});var n=t(52322),a=t(2784),o=t(30943),i=t(68235),r=t(90778),l=t(34814),c=t(70563),d=t(48801),u=t.n(d),m=t(95292),h=t(14681),p=t(57272),x=t(81190),g=t(33661),f=t(58607);const b=a.memo((function({index:e,isSelected:s,onSelect:t,slash:{era:o,isMine:l,slash:{others:c,own:d,payout:u,reporters:m,validator:x},total:g,totalOther:b}}){const{t:j}=(0,p.$)(),{api:v}=(0,r.h)(),y=(0,a.useCallback)((()=>t&&t(e)),[e,t]),w=(0,a.useCallback)((()=>c.map((([e,s],t)=>(0,n.jsx)(i.ax,{balance:s,value:e,withBalance:!0},t)))),[c]);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"badge",children:l&&(0,n.jsx)(i.Ct,{color:"red",icon:"skull-crossbones"})}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(i.N,{value:x})}),(0,n.jsx)("td",{className:"expand all",children:!!c.length&&(0,n.jsx)(i.n0,{renderChildren:w,summary:j("Nominators ({{count}})",{replace:{count:(0,h.u)(c.length)}})})}),(0,n.jsx)("td",{className:"address",children:m.map(((e,s)=>(0,n.jsx)(i.ax,{value:e},s)))}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:d})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:b})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:g})}),(0,n.jsx)("td",{className:"number together",children:(0,n.jsx)(f.Z,{value:u})}),!v.query.staking.earliestUnappliedSlash&&!!v.consts.staking.slashDeferDuration&&(0,n.jsx)("td",{className:"number together",children:(0,h.u)(o)}),(0,n.jsx)("td",{children:(0,n.jsx)(i.XZ,{isDisabled:!t,onChange:y,value:s})})]})}));var j=t(9118);const v=a.memo((function({slash:{era:e,nominators:s,reporters:t,total:o,validators:l}}){const{t:c}=(0,p.$)(),{api:d}=(0,r.h)(),x=(0,j.W7)(d.derive.session?.progress),[g,b]=(0,a.useMemo)((()=>x?[x.activeEra.sub(e).isub(m.If).imul(x.eraLength).iadd(x.eraProgress),d.consts.staking.slashDeferDuration.mul(x.eraLength)]:[new(u())(0),new(u())(0)]),[d,e,x]);return(0,n.jsxs)(i.Ty,{children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:c("validators"),children:(0,h.u)(l.length)}),(0,n.jsx)(i.Jy,{label:c("nominators"),children:(0,h.u)(s.length)}),(0,n.jsx)(i.Jy,{label:c("reporters"),children:(0,h.u)(t.length)})]}),g.gtn(0)&&(0,n.jsx)(i.Jy,{label:c("defer"),progress:{total:b,value:g,withTime:!0}}),(0,n.jsx)(i.Jy,{label:c("total"),children:(0,n.jsx)(f.Z,{value:o})})]})})),y=a.memo((function({buttons:e,councilId:s,councilThreshold:t,slash:o}){const{t:l}=(0,p.$)(),{api:c}=(0,r.h)(),d=(0,x.m)("council"),[{selected:u,txAll:h,txSome:f},j]=(0,a.useState)((()=>{const e=c.tx.staking.cancelDeferredSlash(o.era,o.slashes.map(((e,s)=>s)));return{selected:[],txAll:d?{length:e.encodedLength,proposal:e}:null,txSome:null}})),y=(0,a.useRef)([[l("era {{era}}/unapplied",{replace:{era:c.query.staking.earliestUnappliedSlash||!c.consts.staking.slashDeferDuration?o.era.toString():o.era.sub(c.consts.staking.slashDeferDuration).sub(m.If).toString()}}),"start",3],[l("reporters"),"address"],[l("own")],[l("other")],[l("total")],[l("payout")],!c.query.staking.earliestUnappliedSlash&&!!c.consts.staking.slashDeferDuration&&[l("apply")],[]]),w=(0,a.useCallback)((e=>j((s=>{const t=s.selected.includes(e)?s.selected.filter((s=>s!==e)):s.selected.concat(e).sort(((e,s)=>e-s)),n=t.length?c.tx.staking.cancelDeferredSlash(o.era,t):null;return{selected:t,txAll:s.txAll,txSome:n&&d&&(0,g.m)(c.tx[d].propose)?{length:n.encodedLength,proposal:n}:null}}))),[c,d,o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{slash:o}),(0,n.jsxs)(i.zx.Group,{children:[e,d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.cA,{accountId:s,isDisabled:!f,isToplevel:!0,label:l("Cancel selected"),params:f&&(3===c.tx[d].propose.meta.args.length?[t,f.proposal,f.length]:[t,f.proposal]),tx:c.tx[d].propose}),(0,n.jsx)(i.cA,{accountId:s,isDisabled:!h,isToplevel:!0,label:l("Cancel all"),params:h&&(3===c.tx[d].propose.meta.args.length?[t,h.proposal,h.length]:[t,h.proposal]),tx:c.tx[d].propose})]})]}),(0,n.jsx)(i.iA,{header:y.current,children:o.slashes.map(((e,t)=>(0,n.jsx)(b,{index:t,isSelected:u.includes(t),onSelect:s?w:void 0,slash:e},t)))})]})})),w=a.memo((function({ownStashes:e=[],slashes:s}){const{t}=(0,p.$)(),{api:d}=(0,r.h)(),{allAccounts:x}=(0,l.x)(),{members:g}=(0,c.V)("council"),[f,b]=(0,a.useState)(0),j=(0,a.useMemo)((()=>function(e,s){const t=[];return e.reduce(((e,[t,n])=>n.reduce(((e,n)=>{const a=n.others.reduce(((e,[,s])=>e.add(s)),new(u())(0)),o=s.some((({stashId:e})=>n.validator.eq(e)||n.others.some((([s])=>s.eq(e)))));return e.push({era:t,isMine:o,slash:n,total:n.own.add(a),totalOther:a}),e}),e)),[]).forEach((e=>{let s=t.find((({era:s})=>s.eq(e.era)));s||(s={era:e.era,nominators:[],payout:new(u())(0),reporters:[],slashes:[],total:new(u())(0),validators:[]},t.push(s)),s.payout.iadd(e.slash.payout),s.total.iadd(e.total),s.slashes.push(e);const n=e.slash.validator.toString();s.validators.includes(n)||s.validators.push(n),e.slash.others.forEach((([e])=>{const t=e.toString();s&&!s.nominators.includes(t)&&s.nominators.push(t)})),e.slash.reporters.forEach((e=>{const t=e.toString();s&&!s.reporters.includes(t)&&s.reporters.push(t)}))})),t.sort(((e,s)=>s.era.cmp(e.era)))}(s,e)),[e,s]),v=(0,a.useMemo)((()=>j.map((({era:e})=>d.query.staking.earliestUnappliedSlash||!d.consts.staking.slashDeferDuration?e:e.sub(d.consts.staking.slashDeferDuration).sub(m.If))).map((e=>({text:t("era {{era}}",{replace:{era:(0,h.u)(e)}}),value:e.toString()})))),[d,j,t]),w=(0,a.useMemo)((()=>x.find((e=>g.includes(e)))||null),[x,g]),k=(0,a.useRef)([[t("unapplied"),"start"]]);if(!j.length)return(0,n.jsx)(i.iA,{empty:t("There are no unapplied/pending slashes"),header:k.current});const C=Math.ceil((g.length||0)*(0,o.FK)(d));return(0,n.jsx)(y,{buttons:(0,n.jsx)(i.tX,{onChange:b,options:v,value:f}),councilId:w,councilThreshold:C,slash:j[f]},j[f].era.toString())}))},19623:(e,s,t)=>{t.d(s,{Z:()=>Z});var n=t(52322),a=t(2784),o=t(87292),i=t(68235),r=t(90778),l=t(43223),c=t(49255),d=t(69250),u=t(95292),m=t(83139),h=t(568),p=t(34536),x=t(57272),g=t(9118),f=t(11677);const b={transform:([[e],s])=>{const t={};for(let n=0;n<e.length;n++)t[e[n]]=s[n];return t},withParamsTransform:!0},j=(0,f.e)("useIdentities",(function(e=[]){const{api:s}=(0,r.h)();return(0,g.W7)(s.derive.accounts.hasIdentityMulti,[e],b)}));var v=t(38894);const y=(0,i.zo)(i.u_)`
  .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }
`,w=a.memo((function({className:e="",isDisabled:s,ownNominators:t,targets:o}){const{t:l}=(0,x.$)(),{api:c}=(0,r.h)(),[d,u]=(0,a.useState)(null),[m,h]=(0,v.O)(),p=(0,a.useMemo)((()=>(t||[]).map((({stashId:e})=>e))),[t]),g=(0,a.useCallback)((e=>{const s=t?.find((({stashId:s})=>s===e));u(s?{controllerId:s.controllerId,stashId:s.stashId}:null)}),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"hand-paper",isDisabled:s||!p.length||!o.length,label:l("Nominate selected"),onClick:h}),m&&(0,n.jsxs)(y,{className:e,header:l("Nominate validators"),onClose:h,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsxs)(i.u_.Columns,{hint:l("One of your available nomination accounts, keyed by the stash. The transaction will be sent from the controller."),children:[(0,n.jsx)(i.rp,{filter:p,label:l("the stash account to nominate with"),onChange:g,value:d?.stashId}),(0,n.jsx)(i.rp,{isDisabled:!0,label:l("the associated controller"),value:d?.controllerId})]}),(0,n.jsx)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:l('The selected validators to nominate, either via the "currently best algorithm" or via a manual selection.')}),(0,n.jsx)("p",{children:l("Once transmitted the new selection will only take effect in 2 eras since the selection criteria for the next era was done at the end of the previous era. Until then, the nominations will show as inactive.")})]}),children:(0,n.jsx)(i.qG,{label:l("selected validators"),value:o.map((e=>(0,n.jsx)(i.ax,{className:"addressStatic",value:e},e)))})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:d?.controllerId,label:l("Nominate"),onStart:h,params:[o],tx:c.tx.staking.nominate})})]})]})}));var k=t(58607);const C={transform:e=>e.unwrapOrDefault()};function N(e,s){return{hideValue:!0,isBlurred:!(e&&s),total:e&&s?s:u.Jo,value:e&&s?e:u.um}}const I=(0,i.zo)(i.Ty)`
  .percent {
    font-size: var(--font-percent-tiny);
  }
`,S=a.memo((function({avgStaked:e,className:s,lastEra:t,lowStaked:o,minNominated:l,minNominatorBond:c,stakedReturn:d,totalIssuance:m,totalStaked:h}){const{t:p}=(0,x.$)(),{api:f}=(0,r.h)(),b=(0,g.W7)(t&&f.query.staking.erasValidatorReward,[t],C),j=(0,a.useMemo)((()=>N(h,m)),[m,h]),v=(0,a.useMemo)((()=>N(o,e)),[e,o]),y=(0,n.jsx)("span",{className:"percent",children:"%"});return(0,n.jsxs)(I,{className:s,children:[(0,n.jsx)("section",{className:"media--800",children:(0,n.jsx)(i.Jy,{label:p("total staked"),progress:j,children:(0,n.jsx)(k.Z,{className:j.isBlurred?"--tmp":"",value:j.value,withSi:!0})})}),(0,n.jsx)("section",{className:"media--800",children:(0,n.jsx)(i.Jy,{label:p("returns"),children:m&&d>0?Number.isFinite(d)?(0,n.jsxs)(n.Fragment,{children:[d.toFixed(1),y]}):"-.-%":(0,n.jsxs)("span",{className:"--tmp",children:["0.0",y]})})}),(0,n.jsx)("section",{className:"media--1000",children:(0,n.jsx)(i.Jy,{label:`${p("lowest / avg staked")}`,progress:v,children:(0,n.jsxs)("span",{className:v.isBlurred?"--tmp":"",children:[(0,n.jsx)(k.Z,{value:v.value,withCurrency:!1,withSi:!0})," / ",(0,n.jsx)(k.Z,{className:v.isBlurred?"--tmp":"",value:v.total,withSi:!0})]})})}),(0,n.jsx)("section",{className:"media--1600",children:l?.gt(u.nw)&&(0,n.jsxs)(i.Jy,{className:"media--1600",label:p(c?"min nominated / threshold":"min nominated"),children:[(0,n.jsx)(k.Z,{value:l,withCurrency:!c,withSi:!0}),c&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,n.jsx)(k.Z,{value:c,withSi:!0})]})]})}),(0,n.jsx)("section",{children:(0,n.jsx)(i.Jy,{label:p("last reward"),children:(0,n.jsx)(k.Z,{className:b?"":"--tmp",value:b||1,withSi:!0})})})]})})),A=(0,f.e)("useOwnNominators",(function(e){return(0,a.useMemo)((()=>e?.filter((({isOwnController:e,isStashValidating:s})=>e&&!s))),[e])}));var P=t(73477),E=t(60773),M=t(97794),D=t(14681),T=t(33378);const F=a.memo((function({allSlashes:e,canSelect:s,filterName:t,info:{accountId:o,bondOther:l,bondOwn:c,bondTotal:d,commissionPer:u,isBlocking:m,isElected:h,isFavorite:p,key:g,lastPayout:f,numNominators:b,rankOverall:j,stakedReturnCmp:v},isNominated:y,isSelected:w,nominatedBy:C=[],toggleFavorite:N,toggleSelected:I}){const{t:S}=(0,x.$)(),{api:A,apiIdentity:F}=(0,r.h)(),q=(0,E.Y)(o),[,,O]=(0,M.h)(f),_=(0,a.useMemo)((()=>!q||(0,P.r7)(F,g,q,t)),[q,F,t,g]),V=(0,a.useMemo)((()=>(e||[]).map((([e,s])=>({era:e,slashes:s.filter((({validator:e})=>e.eq(o)))}))).filter((({slashes:e})=>e.length))),[e,o]),B=(0,a.useCallback)((()=>{return e=g,void(window.location.hash=`/staking/query/${e}`);var e}),[g]),R=(0,a.useCallback)((()=>I(g)),[g,I]);return _?(0,n.jsxs)("tr",{children:[(0,n.jsx)(i.iA.Column.Favorite,{address:g,isFavorite:p,toggle:N}),(0,n.jsxs)("td",{className:"badge together",children:[y?(0,n.jsx)(i.Ct,{color:"green",icon:"hand-paper"}):(0,n.jsx)(i.Ct,{color:"transparent"}),h?(0,n.jsx)(i.Ct,{color:"blue",icon:"chevron-right"}):(0,n.jsx)(i.Ct,{color:"transparent"}),(0,n.jsx)(T.Z,{numNominators:b||C.length}),m&&(0,n.jsx)(i.Ct,{color:"red",icon:"user-slash"}),0!==V.length&&(0,n.jsx)(i.Ct,{color:"red",hover:S("Slashed in era {{eras}}",{replace:{eras:V.map((({era:e})=>(0,D.u)(e))).join(", ")}}),icon:"skull-crossbones"})]}),(0,n.jsx)("td",{className:"number",children:0!==j&&(0,D.u)(j)}),(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:o})}),(0,n.jsx)("td",{className:"number media--1400",children:f&&(A.consts.babe?O.days?1===O.days?S("yesterday"):S("{{days}} days",{replace:{days:O.days}}):S("recently"):(0,D.u)(f))}),(0,n.jsx)("td",{className:"number media--1200 no-pad-right",children:b||""}),(0,n.jsx)("td",{className:"number media--1200 no-pad-left",children:C.length||""}),(0,n.jsxs)("td",{className:"number media--1100",children:[u.toFixed(2),"%"]}),(0,n.jsx)("td",{className:"number together",children:!d.isZero()&&(0,n.jsx)(k.Z,{value:d})}),(0,n.jsx)("td",{className:"number together media--900",children:!c.isZero()&&(0,n.jsx)(k.Z,{value:c})}),(0,n.jsx)("td",{className:"number together media--1600",children:!l.isZero()&&(0,n.jsx)(k.Z,{value:l})}),(0,n.jsx)("td",{className:"number together",children:v>0&&(0,n.jsxs)(n.Fragment,{children:[v.toFixed(2),"%"]})}),(0,n.jsx)("td",{children:!m&&(s||w)&&(0,n.jsx)(i.XZ,{onChange:R,value:w})}),(0,n.jsx)("td",{children:(0,n.jsx)(i.JO,{className:"staking--stats highlight--color",icon:"chart-line",onClick:B})})]}):null})),q={rankBondOther:"media--1600",rankBondOwn:"media--900"},O=["rankBondTotal","rankBondOwn","rankBondOther","rankOverall"],_={withElected:!1,withGroup:!0,withIdentity:!1,withPayout:!1,withoutComm:!0,withoutOver:!0},V={isQueryFiltered:!1,nameFilter:""},B={sortBy:"rankOverall",sortFromMax:!0},R=i.zo.div`
  text-align: center;

  th.isClickable {
    .ui--Icon {
      margin-left: 0.5rem;
    }
  }

  .ui--Table {
    overflow-x: auto;
  }
`,Z=a.memo((function({className:e="",isInElection:s,nominatedBy:t,ownStashes:g,targets:{avgStaked:f,inflation:{stakedReturn:b},lastEra:v,lowStaked:y,medianComm:k,minNominated:C,minNominatorBond:N,nominators:I,totalIssuance:P,totalStaked:E,validatorIds:M,validators:D},toggleFavorite:T,toggleLedger:Z,toggleNominatedBy:$}){const{t:L}=(0,x.$)(),{api:z}=(0,r.h)(),W=(0,l.g)(),H=(0,c.u)(7),U=A(g),J=j(M),[G,Q]=(0,a.useState)([]),[{isQueryFiltered:X,nameFilter:K},Y]=(0,a.useState)(V),[ee,se]=(0,d.o)("staking:targets",_),[{sortBy:te,sortFromMax:ne},ae]=(0,a.useState)(B),[oe,ie]=(0,a.useState)(),re=(0,a.useRef)({rankBondOther:L("other stake"),rankBondOwn:L("own stake"),rankBondTotal:L("total stake"),rankOverall:L("return")}),le=(0,a.useMemo)((()=>({...ee,daysPayout:H,isBabe:!!z.consts.babe,isQueryFiltered:X,maxPaid:z.consts.staking?.maxNominatorRewardedPerValidator})),[z,H,X,ee]),ce=(0,a.useMemo)((()=>J&&D&&t&&function(e,s,t,{daysPayout:n,isBabe:a,maxPaid:o,withElected:i,withGroup:r,withIdentity:l,withPayout:c,withoutComm:d,withoutOver:m},h){const p=[],x=[];return e.filter((({accountId:e,commissionPer:s,isElected:g,isFavorite:f,lastPayout:b,numNominators:j})=>{if(f)return!0;const v=e.toString(),y=t[v],w=j||h?.[v]?.length||0;if((!i||g)&&(!l||y?.hasIdentity)&&(!c||!a||b&&n.gte(b))&&(!d||s<=10)&&(!m||!o||o.muln(100).div(u.S8).gten(w))){if(!r)return!0;if(!y||!y.hasIdentity)return x.push(v),!0;if(y.parentId){if(!x.includes(y.parentId))return x.push(y.parentId),!0}else if(!x.includes(v)){if(y.display){const e=y.display.replace(/[^\x20-\x7E]/g,"").replace(/-/g," ").replace(/_/g," ").split(" ").map((e=>e.trim())).filter((e=>!!e));if(function(e,s){return e.some((e=>e.length===s.length&&(1===e.length?e[0]===s[0]:e.reduce(((e,t,n)=>e+(t===s[n]?1:0)),0)>=s.length-1)))}(p,e))return!1;p.push(e)}return x.push(v),!0}}return!1}))}(D,0,J,le,t)),[J,le,k,t,D]);(0,a.useEffect)((()=>{ce&&ie(function(e,s,t){return t.slice(0).sort(((t,n)=>s?t[e]-n[e]:n[e]-t[e])).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}(te,ne,ce))}),[ce,te,ne]),(0,a.useEffect)((()=>{Z(),$()}),[Z,$]);const de=(0,a.useMemo)((()=>z.consts.staking.maxNominations?z.consts.staking.maxNominations.toNumber():m.E),[z]),ue=(0,a.useMemo)((()=>function(e=[]){const s=[];return e.forEach((({nominating:e=[]})=>{e.forEach((e=>{!s.includes(e)&&s.push(e)}))})),s}(U)),[U]),me=(0,a.useCallback)((e=>ae((s=>({sortBy:e,sortFromMax:e!==s.sortBy||!s.sortFromMax})))),[]),he=(0,a.useCallback)((e=>Q(G.includes(e)?G.filter((s=>e!==s)):[...G,e])),[G]),pe=(0,a.useCallback)((()=>ce&&Q(function(e,s){const t=[];for(let n=0;n<e.length&&t.length<s;n++){const{isBlocking:s,isFavorite:a,key:o,stakedReturnCmp:i}=e[n];!s&&(a||i>0)&&t.push(o)}return t}(ce,de))),[ce,de]),xe=(0,a.useCallback)(((e,s)=>Y({isQueryFiltered:s,nameFilter:e})),[]),ge=(0,a.useMemo)((()=>[[L("validators"),"start",4],[L("payout"),"media--1400"],[L("nominators"),"media--1200",2],[L("comm."),"media--1100"],...O.map((e=>[(0,n.jsxs)(n.Fragment,{children:[re.current[e],(0,n.jsx)(i.JO,{icon:te===e?ne?"chevron-down":"chevron-up":"minus"})]}),`${oe?`isClickable ${te===e?"highlight--border":""} number`:"number"} ${q[e]||""}`,1,()=>me(e)])),[],[]]),[me,re,te,oe,ne,L]),fe=(0,a.useMemo)((()=>(0,n.jsx)("div",{children:(0,n.jsxs)(p.Z,{nameFilter:K,setNameFilter:xe,setWithIdentity:se.withIdentity,withIdentity:ee.withIdentity,children:[(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:L("one validator per operator"),onChange:se.withGroup,value:ee.withGroup}),(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:L("comm. <= {{maxComm}}%",{replace:{maxComm:10}}),onChange:se.withoutComm,value:ee.withoutComm}),(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:L("with capacity"),onChange:se.withoutOver,value:ee.withoutOver}),z.consts.babe&&(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:L("recent payouts"),onChange:se.withPayout,value:ee.withPayout}),(0,n.jsx)(i.ZD,{className:"staking--buttonToggle",label:L("currently elected"),onChange:se.withElected,value:ee.withElected})]})})),[z,K,xe,se,L,ee]),be=X?D:oe,je=G.length<de;return(0,n.jsxs)(R,{className:e,children:[(0,n.jsx)(S,{avgStaked:f,lastEra:v,lowStaked:y,minNominated:C,minNominatorBond:N,numNominators:I?.length,numValidators:D?.length,stakedReturn:b,totalIssuance:P,totalStaked:E}),(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(i.zx,{icon:"check",isDisabled:!D?.length||!U?.length,label:L("Most profitable"),onClick:pe}),(0,n.jsx)(w,{isDisabled:s||!D?.length,ownNominators:U,targets:G})]}),(0,n.jsx)(h.Z,{isInElection:s}),(0,n.jsx)(i.iA,{empty:oe&&L("No active validators to check"),emptySpinner:(0,n.jsxs)(n.Fragment,{children:[!(D&&J)&&(0,n.jsx)("div",{children:L("Retrieving validators")}),!t&&(0,n.jsx)("div",{children:L("Retrieving nominators")}),!be&&(0,n.jsx)("div",{children:L("Preparing target display")})]}),filter:fe,header:ge,legend:(0,n.jsx)(o.Z,{}),children:be?.map((e=>(0,n.jsx)(F,{allSlashes:W,canSelect:je,filterName:K,info:e,isNominated:ue.includes(e.key),isSelected:G.includes(e.key),nominatedBy:t?.[e.key],toggleFavorite:T,toggleSelected:he},e.key)))})]})}))},83139:(e,s,t)=>{t.d(s,{E:()=>n,M:()=>a});const n=16,a="staking:favorites"},66776:(e,s,t)=>{t.d(s,{Z:()=>Ds});var n=t(52322),a=t(2784),o=t(73557),i=t(75030),r=t(65857),l=t(68235),c=t(90778),d=t(34814),u=t(54131),m=t(9118),h=t(54890),p=t(12213),x=t(43223),g=t(33661),f=t(58607),b=t(48801),j=t.n(b),v=t(95292),y=t(568),w=t(57272),k=t(86135),C=t(38894),N=t(14681),I=t(11677);const S={transform:e=>e.isNone?0:e.unwrap().prior.length+1},A=(0,I.e)("useSlashingSpans",(function(e){const{api:s}=(0,c.h)();return(0,m.W7)(s.query.staking.slashingSpans,[e],S)||0}));var P=t(36609),E=t(92730);function M(e){let s=(e.mul(v.D_).div(v.aP.pow(new(j())(E.a.getDefaults().decimals))).toNumber()/1e3).toFixed(3);for(;1!==s.length&&[".","0"].includes(s[s.length-1]);){const e=s.endsWith(".");if(s=s.substring(0,s.length-1),e)break}return s}const D=a.memo((function({currentAmount:e,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onError:r,stashId:d,value:u}){const{t:h}=(0,w.$)(),{api:p}=(0,c.h)(),x=(0,m.W7)(p.derive.balances?.all,[d]),[{error:g,warning:f},b]=(0,a.useState)({error:null,warning:null});return(0,a.useEffect)((()=>{if(x&&u){const n=u.add(e||v.nw),a=p.consts.balances.existentialDeposit,l=x.freeBalance.sub(a.divn(2));let c=null,d=null;n.gte(l)?d=h("The specified value is large and may not allow enough funds to pay future transaction fees."):n.lt(a)?c=h("The bonded amount is less than the minimum bond amount of {{existentialDeposit}}",{replace:{existentialDeposit:M(a)}}):s?o&&n.lt(o)?c=h("The bonded amount is less than the minimum threshold of {{minBond}} for nominators",{replace:{minBond:(0,E.a)(o)}}):t&&n.lt(t)&&(d=h("The bonded amount is less than the current active minimum nominated amount of {{minNomination}} and depending on the network state, may not be selected to participate",{replace:{minNomination:(0,E.a)(t)}})):i&&n.lt(i)&&(c=h("The bonded amount is less than the minimum threshold of {{minBond}} for validators",{replace:{minBond:(0,E.a)(i)}})),b((e=>{const s=e.error!==c?c:e.error,t=e.warning!==d?d:e.warning;return r(s||t?{error:s,warning:t}:null),{error:s,warning:t}}))}}),[p,e,s,t,o,i,r,x,h,u]),g?(0,n.jsx)(l.oy,{content:g}):f?(0,n.jsx)(l.Pd,{content:f}):null})),T=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(null),[h,p]=(0,a.useState)(),x=(0,m.W7)(r.derive.balances?.all,[o]),g=(0,a.useMemo)((()=>t?.stakingLedger?.active?.unwrap()),[t]),f=(0,a.useMemo)((()=>function(e,s,t){if(s?.stakingLedger&&t){const n=(s.unlocking||[]).reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)),a=s.redeemable||v.nw,o=t.freeBalance.sub(s.stakingLedger.active?.unwrap()||v.nw).sub(n).sub(a);return o.gt(e.consts.balances.existentialDeposit)?o.sub(e.consts.balances.existentialDeposit):v.nw}return null}(r,t,x)),[r,t,x]);return(0,n.jsxs)(l.u_,{header:i("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:i("Since this transaction deals with funding, the stash account will be used."),children:(0,n.jsx)(l.rp,{defaultValue:o,isDisabled:!0,label:i("stash account")})}),f&&(0,n.jsxs)(l.u_.Columns,{hint:i("The amount placed at-stake should allow some free funds for future transactions."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:f,isError:!!d?.error||!h||h.isZero(),label:i("additional funds to bond"),labelExtra:(0,n.jsx)(P.Z,{label:(0,n.jsx)("span",{className:"label",children:i("balance")}),params:o}),onChange:p}),(0,n.jsx)(D,{controllerId:e,currentAmount:g,onError:u,stashId:o,value:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:o,icon:"sign-in-alt",isDisabled:!h?.gt(v.nw)||!!d?.error,label:i("Bond more"),onStart:s,params:[h],tx:r.tx.staking.bondExtra})})]})}));var F=t(69187),q=t(48731),O=t(55858),_=t(6851),V=t(46186);const B={aura:["ed25519","sr25519"],babe:["sr25519"],gran:["ed25519"],imon:["ed25519","sr25519"],para:["sr25519"]},R=a.memo((function({onClose:e}){const{t:s}=(0,w.$)(),{queueRpc:t}=(0,k.L)(),[o,i]=(0,a.useState)("sr25519"),[r,c]=(0,a.useState)("0x"),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)("babe"),p=(0,a.useRef)([{text:s("Aura"),value:"aura"},{text:s("Babe"),value:"babe"},{text:s("Grandpa"),value:"gran"},{text:s("I'm Online"),value:"imon"},{text:s("Parachains"),value:"para"}]);(0,a.useEffect)((()=>{i(B[m][0])}),[m]),(0,a.useEffect)((()=>{try{const{phrase:e}=(0,_.Q)(d);(0,q.hu)((0,V.S)(e),"Invalid mnemonic phrase"),c((0,O.c)(F.Nn.createFromUri(d,{},o).publicKey))}catch{c("0x")}}),[o,d]);const x=(0,a.useCallback)((()=>t({rpc:{method:"insertKey",section:"author"},values:[m,d,r]})),[m,r,t,d]),g=(0,a.useMemo)((()=>B[m].map((e=>({text:s("ed25519"===e?"ed25519, Edwards":"sr15519, Schnorrkel"),value:e})))),[m,s]);return(0,n.jsxs)(l.u_,{header:s("Inject Keys"),onClose:e,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.Pd,{content:s("This operation will be performed on the relay chain.")})}),(0,n.jsxs)(l.u_.Columns,{hint:s("The seed and derivation path will be submitted to the validator node. this is an advanced operation, only to be performed when you are sure of the security and connection risks."),children:[(0,n.jsx)(l.II,{autoFocus:!0,isError:66!==r.length,label:s("suri (seed & derivation)"),onChange:u,value:d}),(0,n.jsx)(l.Pd,{content:s("This operation will submit the seed via an RPC call. Do not perform this operation on a public RPC node, but ensure that the node is local, connected to your validator and secure.")})]}),(0,n.jsxs)(l.u_.Columns,{hint:s("The key type and crypto type to use for this key. Be aware that different keys have different crypto requirements. You should be familiar with the type requirements for the different keys."),children:[(0,n.jsx)(l.Lt,{label:s("key type to set"),onChange:h,options:p.current,value:m}),(0,n.jsx)(l.Lt,{isDisabled:1===g.length,label:s("crypto type to use"),onChange:i,options:g,value:o})]}),(0,n.jsx)(l.u_.Columns,{hint:s("This pubic key is what will be visible in your queued keys list. It is generated based on the seed and the crypto used."),children:(0,n.jsx)(l.II,{isDisabled:!0,label:s("generated public key"),value:r})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.zx,{icon:"sign-in-alt",label:s("Submit key"),onClick:x})})]})})),Z=a.memo((function({className:e="",controllerId:s,stashId:t}){const{t:a}=(0,w.$)();if(!t||!s)return null;const o=t!==s;return(0,n.jsxs)(l.u_.Columns,{className:e,hint:a(o?"The stash that is to be affected. The transaction will be sent from the associated controller account.":"The stash that is to be affected."),children:[(0,n.jsx)(l.rp,{defaultValue:t,isDisabled:!0,label:a("stash account")}),o&&(0,n.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:a("controller account")})]})})),$={withExposure:!0},L=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,stashId:i}){const{t:r}=(0,w.$)(),{api:d}=(0,c.h)(),[u,h]=(0,a.useState)([]),[{kickTx:p},x]=(0,a.useState)({}),g=(0,m.W7)(d.derive.staking.query,[i,$]),f=(0,a.useMemo)((()=>g?.exposurePaged.isSome&&g?.exposurePaged.unwrap().others.map((({who:e})=>e.toString()))),[g]);return(0,a.useEffect)((()=>{try{x({kickTx:u.length?d.tx.staking.kick(u):null})}catch{x({kickTx:null})}}),[d,u]),(0,n.jsxs)(l.u_,{className:e,header:r("Remove nominees"),onClose:o,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(Z,{controllerId:s,stashId:i}),f?(0,n.jsx)(l.m3,{available:f,availableLabel:r("existing/active nominators"),defaultValue:t,maxCount:128,onChange:h,valueLabel:r("nominators to be removed")}):(0,n.jsx)(l.$j,{label:r("Retrieving active nominators")})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,extrinsic:p,icon:"user-slash",isDisabled:!p,label:r("Remove"),onStart:o})})]})}));var z=t(3871),W=t(74065);function H(e){const{activeEra:s,activeValidators:t,allNominators:n,api:a,exposures:o,nominees:i,slashes:r,stashId:l,submittedIn:c,version:d}=e;if(d&&d>=14&&!n&&!t||!s||!d)return{nomsActive:[],nomsChilled:[],nomsInactive:[],nomsOver:[],nomsWaiting:[]};const u=a.consts.staking?.maxNominatorRewardedPerValidator||new(j())(512),m=a.events.staking.SlashReported?[]:i.filter(((e,s)=>!r[s].isNone&&r[s].unwrap().lastNonzeroSlash.gt(c))),h=o.map((({others:e})=>e.sort(((e,s)=>(s.value?.unwrap()||v.nw).cmp(e.value?.unwrap()||v.nw))))).map(((e,s)=>!u||u.gtn(e.map((({who:e})=>e.toString())).indexOf(l))?null:i[s])).filter((e=>!!e&&!m.includes(e))),p=o.map(((e,s)=>e.others.some((({who:e})=>e.eq(l)))?null:i[s])).filter((e=>!!e));let x=[],g=[],f=[];return c.eq(s)?{nomsActive:[],nomsChilled:m,nomsInactive:[],nomsOver:h,nomsWaiting:i}:d>=14?(x=p.filter((e=>!t?.[e]&&!m.includes(e)&&!h.includes(e))),g=n?.[l]?[n?.[l][0].validatorId]:[],f=p.filter((e=>!(x.includes(e)||m.includes(e)||h.includes(e)||g.includes(e)))),{nomsActive:g,nomsChilled:m,nomsInactive:f,nomsOver:h,nomsWaiting:x}):(x=o.map(((e,t)=>e.total?.unwrap().isZero()||p.includes(i[t])&&c.gte(s)?i[t]:null)).filter((e=>!!e)).filter((e=>!m.includes(e)&&!h.includes(e))),g=i.filter((e=>!f.includes(e)&&!m.includes(e)&&!h.includes(e))),f=p.filter((e=>!(x.includes(e)||m.includes(e)||h.includes(e)||g.includes(e)))),{nomsActive:g,nomsChilled:m,nomsInactive:f,nomsOver:h,nomsWaiting:x})}const U=(0,I.e)("useInactives",(function(e,s,t){const{api:n}=(0,c.h)(),o=(0,W.X)(),[i,r]=(0,a.useState)({}),[l,d]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[p,x]=(0,a.useState)(),g=(0,m.W7)(n.derive.session.indexes),f=(0,m.W7)(n.query.staking.palletVersion)?.toNumber();return(0,a.useEffect)((()=>{if(f&&f>=14&&!t)return;const a=s?.map((e=>t?.validators?.[e])).filter((e=>e));o.current&&a?.length&&s?.length&&p&&r(H({activeEra:g?.activeEra,activeValidators:t?.validators,allNominators:t?.nominators,api:n,exposures:a,nominees:s,slashes:u,stashId:e,submittedIn:p,version:f}))}),[n,e,u,s,g,p,t,f,o]),(0,a.useEffect)((()=>{let t;return o.current&&s?.length&&g&&n.queryMulti([[n.query.staking.nominators,e]].concat(s.map((e=>[n.query.staking.slashingSpans,e]))),(([e,...s])=>{x(e.unwrapOrDefault().submittedIn),h(s)})).then((e=>{t=e})).catch(console.error),()=>{t&&t()}}),[n,g,o,s,e]),(0,a.useEffect)((()=>{let e;return f&&f<14&&o.current&&s?.length&&g&&n.queryMulti(n.query.staking.erasStakers?s.map((e=>[n.query.staking.erasStakers,[g?.activeEra,e]])):s.map((e=>[n.query.staking.stakers,e])),(e=>d(e))).then((s=>{e=s})).catch(console.error),()=>{e&&e()}}),[n,g,o,s,e,f]),(0,a.useEffect)((()=>{l.length&&u.length&&s?.length&&p&&o.current&&r(H({activeEra:g?.activeEra,api:n,exposures:l,nominees:s,slashes:u,stashId:e,submittedIn:p,version:f}))}),[n,e,u,s,g,p,l,f,o]),i})),J={};function G(e,s=[],t){return s.length?[s.length,()=>{const a=function(e,s,t){if(!t?.validators)return J;const n={};return s.forEach((s=>{t.validators[s]?.others.some((t=>!(!t.who.eq(e)||!(0,z.S)(t.value)||(n[s]=t.value.toBn(),0))))})),n}(e,s,t);return s.map(((e,s)=>(0,n.jsx)(l.ax,{balance:a[e],value:e,withBalance:!!t&&!!a[e]},s)))}]:null}const Q=a.memo((function({nominating:e,stashId:s}){const{t}=(0,w.$)(),{api:o}=(0,c.h)(),i=(0,m.W7)(o.query.staking&&o.derive.session?.indexes),r=(0,m.W7)((0,g.m)(o.query.staking.erasStakers)&&o.derive.staking.eraExposure,[i?.activeEra]),{nomsActive:d,nomsChilled:u,nomsInactive:h,nomsOver:p,nomsWaiting:x}=U(s,e,r),[f,b,j,v,y]=(0,a.useMemo)((()=>[G(s,d,r),G(s,u),G(s,h),G(s,p),G(s,x)]),[r,d,u,h,p,x,s]);return h||x?(0,n.jsxs)(n.Fragment,{children:[v&&(0,n.jsx)(l.n0,{className:"stakeOver",renderChildren:v[1],summary:t("Oversubscribed nominations ({{count}})",{replace:{count:v[0]}})}),f&&(0,n.jsx)(l.n0,{renderChildren:f[1],summary:t("Active nominations ({{count}})",{replace:{count:f[0]}})}),j&&(0,n.jsx)(l.n0,{renderChildren:j[1],summary:t("Inactive nominations ({{count}})",{replace:{count:j[0]}})}),b&&(0,n.jsx)(l.n0,{renderChildren:b[1],summary:t("Renomination required ({{count}})",{replace:{count:b[0]}})}),y&&(0,n.jsx)(l.n0,{renderChildren:y[1],summary:t("Waiting nominations ({{count}})",{replace:{count:y[0]}})}),d&&h&&0===d.length&&0!==h.length&&(0,n.jsx)(l.Pd,{content:t("This could mean your nomination has not been applied to any validator in the active set by the election algorithm or it has been applied against a validator who is either oversubscribed or chilled.")})]}):(0,n.jsx)(l.$j,{label:"Checking validators",variant:"app"})}));var X=t(83139);const K=a.memo((function({className:e="",controllerId:s,poolId:t}){const{t:a}=(0,w.$)();return t&&s?(0,n.jsxs)(l.u_.Columns,{className:e,hint:a("The pool and pool member that is to be affected. The transaction will be sent from the associated pool member account."),children:[(0,n.jsx)(l.Rn,{defaultValue:t,isDisabled:!0,label:a("pool id")}),(0,n.jsx)(l.rp,{defaultValue:s,isDisabled:!0,label:a("member account")})]}):null})),Y=l.zo.div`
  article.warning {
    margin-top: 0;
  }

  .auto--toggle {
    margin: 0.5rem 0 0;
    text-align: right;
    width: 100%;
  }

  .ui--Static .ui--AddressMini.padded.addressStatic {
    padding-top: 0.5rem;

    .ui--AddressMini-info {
      min-width: 10rem;
      max-width: 10rem;
    }
  }

  .shortlist {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;

    .candidate {
      border: 1px solid #eee;
      border-radius: 0.25rem;
      margin: 0.25rem;
      padding-bottom: 0.25rem;
      padding-right: 0.5rem;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        border-color: transparent;
        border-style: solid;
        border-radius: 0.25em;
        border-width: 0.25em;
      }

      &.isAye {
        background: #fff;
        border-color: #ccc;
      }

      &.member::after {
        border-color: green;
      }

      &.runnerup::after {
        border-color: steelblue;
      }

      .ui--AddressMini-icon {
        z-index: 1;
      }

      .candidate-right {
        text-align: right;
      }
    }
  }
`,ee=a.memo((function({className:e="",controllerId:s,nominating:t,onChange:o,poolId:i,stashId:r,targets:{nominateIds:d=[]},withSenders:m}){const{t:h}=(0,w.$)(),{api:p}=(0,c.h)(),[x]=(0,u.r)(X.M),[g,f]=(0,a.useState)(t||[]),[b]=(0,a.useState)((()=>{const e=[...x.filter((e=>d.includes(e))),...(t||[]).filter((e=>!x.includes(e)))];return e.concat(...d.filter((s=>!e.includes(s))))}));(0,a.useEffect)((()=>{try{o({nominateTx:g?.length?i?p.tx.nominationPools.nominate(i,g):p.tx.staking.nominate(g):null})}catch{o({nominateTx:null})}}),[p,o,i,g]);const j=p.consts.staking.maxNominatorRewardedPerValidator?p.consts.staking.maxNominatorRewardedPerValidator.toNumber():p.consts.staking.maxNominations?p.consts.staking.maxNominations.toNumber():X.E;return(0,n.jsxs)(Y,{className:e,children:[m&&(i?(0,n.jsx)(K,{controllerId:s,poolId:i}):(0,n.jsx)(Z,{controllerId:s,stashId:r})),(0,n.jsxs)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:h("Nominators can be selected manually from the list of all currently available validators.")}),(0,n.jsx)("p",{children:h("Once transmitted the new selection will only take effect in 2 eras taking the new validator election cycle into account. Until then, the nominations will show as inactive.")})]}),children:[(0,n.jsx)(l.m3,{available:b,availableLabel:h("candidate accounts"),defaultValue:t,maxCount:j,onChange:f,valueLabel:h("nominated accounts")}),(0,n.jsx)(l.Pd,{content:h("You should trust your nominations to act competently and honest; basing your decision purely on their current profitability could lead to reduced profits or even loss of funds.")})]})]})})),se=(0,l.zo)(l.u_)`
  .nominatePartial {
    .ui--Static .ui--AddressMini .ui--AddressMini-info {
      max-width: 10rem;
      min-width: 10rem;
    }
  }
`,te=a.memo((function({className:e="",controllerId:s,nominating:t,onClose:o,poolId:i,stashId:r,targets:c}){const{t:d}=(0,w.$)(),[{nominateTx:u},m]=(0,a.useState)({});return(0,n.jsxs)(se,{className:e,header:d("Nominate Validators"),onClose:o,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(ee,{className:"nominatePartial",controllerId:s,nominating:t,onChange:m,poolId:i,stashId:r,targets:c,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,extrinsic:u,icon:"hand-paper",isDisabled:!u,label:d("Nominate"),onStart:o})})]})})),ne=a.memo((function({controllerId:e,onClose:s,stakingInfo:t,stashId:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(),m=(0,a.useMemo)((()=>t?.unlocking?t.unlocking.reduce(((e,{value:s})=>e.iadd(s)),new(j())(0)):v.nw),[t]);return(0,n.jsxs)(l.u_,{header:i("Bond more funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(Z,{controllerId:e,stashId:o}),m&&(0,n.jsx)(l.u_.Columns,{hint:i("The amount the is to be rebonded from the value currently unlocking, i.e. previously unbonded"),children:(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:m,isError:!d||d.eqn(0)||d.gt(m),label:i("rebonded amount"),onChange:u})})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!d||d.isZero()||!m||d.gt(m),label:i("Rebond"),onStart:s,params:[d],tx:r.tx.staking.rebond})})]})})),ae={transform:e=>e.isSome?e.unwrap().toString():null},oe={transform:e=>e.isSome?e.unwrap().stash.toString():null},ie=a.memo((function({accountId:e,controllerId:s,defaultController:t,onError:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),d=(0,m.W7)(s?r.query.staking.bonded:null,[s],ae),u=(0,m.W7)(s?r.query.staking.ledger:null,[s],oe),h=(0,m.W7)(s?r.derive.balances?.all:null,[s]),[{error:p,isFatal:x},g]=(0,a.useState)({error:null,isFatal:!1});return(0,a.useEffect)((()=>{if(t!==s){let t=null,n=!1;d&&s!==e?(n=!0,t=i("A controller account should not map to another stash. This selected controller is a stash, controlled by {{bondedId}}",{replace:{bondedId:d}})):u?(n=!0,t=i("A controller account should not be set to manage multiple stashes. The selected controller is already controlling {{stashId}}",{replace:{stashId:u}})):h?.freeBalance.isZero()?(n=!0,t=i("The controller does not have sufficient funds available to cover transaction fees. Ensure that a funded controller is used.")):s===e&&(t=i("Distinct stash and controller accounts are recommended to ensure fund security. You will be allowed to make the transaction, but take care to not tie up all funds, only use a portion of the available funds during this period.")),o(t,n),g((e=>e.error!==t?{error:t,isFatal:n}:e))}}),[e,h,d,s,t,o,u,i]),p&&e?x?(0,n.jsx)(l.oy,{content:p}):(0,n.jsx)(l.Pd,{content:p}):null})),re=a.memo((function({defaultControllerId:e,onClose:s,stashId:t}){const{t:o}=(0,w.$)(),{api:i}=(0,c.h)(),[r,d]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),h=(0,a.useCallback)(((e,s)=>d(s)),[]),p=(0,a.useMemo)((()=>1===i.tx.staking.setController.meta.args.length),[i]);return(0,n.jsxs)(l.u_,{header:o("Change controller account"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(l.u_.Columns,{hint:o("The stash account that is used. This will allow the controller to perform all non-funds related operations on behalf of the account."),children:(0,n.jsx)(l.rp,{isDisabled:!0,label:o("stash account"),value:t})}),p&&(0,n.jsxs)(l.u_.Columns,{hint:o("The selected controller tied to this stash. Once set, this account will be able to control the actions performed by the stash account."),children:[(0,n.jsx)(l.rp,{defaultValue:e,label:o("controller account"),onChange:m,type:"account",value:u}),(0,n.jsx)(ie,{accountId:t,controllerId:u,defaultController:e,onError:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:t,icon:"sign-in-alt",isDisabled:r||!!p&&!u,label:o("Set controller"),onStart:s,params:p?[u]:[],tx:i.tx.staking.setController})})]})}));function le(e){return function(e){return[{text:e("Stash account (increase the amount at stake)"),value:"Staked"},{text:e("Stash account (do not increase the amount at stake)"),value:"Stash"},{text:e("Controller account"),value:"Controller"}]}(e).concat({text:e("Specified payment account"),value:"Account"})}const ce=a.memo((function({controllerId:e,defaultDestination:s,onClose:t,stashId:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)((()=>(s?.isAccount?"Account":s?.toString())||"Staked")),[h,p]=(0,a.useState)((()=>s?.isAccount?s.asAccount.toString():null)),x=(0,m.W7)(r.derive.balances?.all,[h]),g=(0,a.useMemo)((()=>le(i)),[i]),f="Account"===d,b=f&&x&&x.accountId.eq(h)&&x.freeBalance.isZero();return(0,n.jsxs)(l.u_,{header:i("Bonding Preferences"),onClose:t,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(Z,{controllerId:e,stashId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("All rewards will go towards the selected output destination when a payout is made."),children:[(0,n.jsx)(l.Lt,{defaultValue:s?.toString(),label:i("payment destination"),onChange:u,options:g,value:d}),f&&(0,n.jsx)(l.rp,{label:i("the payment account"),onChange:p,type:"account",value:h}),b&&(0,n.jsx)(l.oy,{content:i("The selected destination account does not exist and cannot be used to receive rewards")})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"sign-in-alt",isDisabled:!e||f&&(!h||b),label:i("Set reward destination"),onStart:t,params:[f?{Account:h}:d],tx:r.tx.staking.setPayee})})]})}));var de=t(46257),ue=t(74076);const me=new Uint8Array,he=a.memo((function({className:e="",controllerId:s,onChange:t,stashId:o,withFocus:i,withSenders:r}){const{t:d}=(0,w.$)(),{api:u}=(0,c.h)(),{isStakingAsync:m,rcApi:h}=(0,de._)(),[p,x]=(0,a.useState)(null);return(0,a.useEffect)((()=>{try{t({sessionTx:(0,ue.vq)(p)?(m?h:u)?.tx.session.setKeys(p,me):null})}catch{t({sessionTx:null})}}),[u,m,p,t,h]),(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.Pd,{content:d("This operation will be performed on the relay chain.")})}),r&&(0,n.jsx)(Z,{controllerId:s,stashId:o}),(0,n.jsx)(l.u_.Columns,{hint:d("The hex output from author_rotateKeys, as executed on the validator node. The keys will show as pending until applied at the start of a new session."),children:(0,n.jsx)(l.II,{autoFocus:i,isError:!p,label:d("Keys from rotateKeys"),onChange:x,placeholder:"0x..."})})]})})),pe=a.memo((function({controllerId:e,onClose:s,stashId:t}){const{t:o}=(0,w.$)(),[{sessionTx:i},r]=(0,a.useState)({});return(0,n.jsxs)(l.u_,{header:o("Set Session Key"),onClose:s,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(he,{controllerId:e,onChange:r,stashId:t,withFocus:!0,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,extrinsic:i,icon:"sign-in-alt",isDisabled:!i,label:o("Set Session Key"),onStart:s})})]})}));var xe=t(65874);const ge=(0,I.e)("useUnbondDuration",(function(){const{api:e}=(0,c.h)(),s=(0,m.W7)(e.derive.session.info);return(0,a.useMemo)((()=>s&&s.sessionLength.gt(v.If)?s.eraLength.mul(e.consts.staking.bondingDuration):void 0),[e,s])})),fe=(0,l.zo)(l.u_)`
  .staking--Unbond--max > div {
    justify-content: flex-end;

    & .column {
      flex: 0;
    }
  }
`,be=a.memo((function({controllerId:e,onClose:s,stakingLedger:t,stashId:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),d=ge(),[u]=(0,a.useState)((()=>t?.active?.unwrap()||null)),[m,h]=(0,a.useState)();return(0,n.jsxs)(fe,{header:i("Unbond funds"),onClose:s,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(Z,{controllerId:e,stashId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("The funds will only be available for withdrawal after the unbonding period, however will not be part of the staked amount after the next validator election. You can follow the unlock countdown in the UI."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:u,label:i("unbond amount"),labelExtra:(0,n.jsx)(f.Z,{label:(0,n.jsx)("span",{className:"label",children:i("bonded")}),value:u}),maxValue:u,onChange:h,withMax:!0}),d?.gtn(0)&&(0,n.jsx)(l.qG,{label:i("on-chain bonding duration"),children:(0,n.jsx)(xe.Z,{value:d})})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,icon:"unlock",isDisabled:!m?.gt(v.nw),label:i("Unbond"),onStart:s,params:[m],tx:r.tx.staking.unbond})})]})}));var je=t(52107);const ve=new(j())(1e7),ye=a.memo((function({className:e="",controllerId:s,minCommission:t,onChange:o,stashId:i,withFocus:r,withSenders:d}){const{t:u}=(0,w.$)(),{api:m}=(0,c.h)(),[h,p]=(0,a.useState)(v.If),[x,f]=(0,a.useState)(!0),b=(0,a.useMemo)((()=>t?(0,je.x)(t.div(ve),v.If):v.If),[t]),j=(0,a.useRef)([{text:u("Yes, allow nominations"),value:!0},{text:u("No, block all nominations"),value:!1}]);(0,a.useEffect)((()=>{try{o({validateTx:m.tx.staking.validate({blocked:!x,commission:h})})}catch{o({validateTx:null})}}),[m,x,h,o]);const y=(0,a.useCallback)((e=>e&&p(e.isZero()?v.If:e.mul(ve))),[]),k=!!t&&h.lt(t);return(0,n.jsxs)("div",{className:e,children:[d&&(0,n.jsx)(Z,{controllerId:s,stashId:i}),(0,n.jsxs)(l.u_.Columns,{hint:u("The commission is deducted from all rewards before the remainder is split with nominators."),children:[(0,n.jsx)(l.Rn,{autoFocus:r,defaultValue:b,isError:k,isZeroable:!0,label:u("reward commission percentage"),maxValue:v.S8,onChange:y}),k&&(0,n.jsx)(l.oy,{content:u("The commission is below the on-chain minimum of {{p}}%",{replace:{p:(t.mul(v.S8).div(ve).toNumber()/100).toFixed(2)}})})]}),(0,g.m)(m.tx.staking.kick)&&(0,n.jsx)(l.u_.Columns,{hint:u("The validator can block any new nominations. By default it is set to allow all nominations."),children:(0,n.jsx)(l.Lt,{defaultValue:!0,label:u("allows new nominations"),onChange:f,options:j.current})})]})})),we=a.memo((function({controllerId:e,minCommission:s,onClose:t,stashId:o}){const{t:i}=(0,w.$)(),[{validateTx:r},c]=(0,a.useState)({});return(0,n.jsxs)(l.u_,{header:i("Set validator preferences"),onClose:t,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(ye,{controllerId:e,minCommission:s,onChange:c,stashId:o,withFocus:!0,withSenders:!0})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:e,extrinsic:r,icon:"certificate",isDisabled:!r,label:i("Validate"),onStart:t})})]})})),ke=a.memo((function({minBond:e,stakingInfo:s}){const{t}=(0,w.$)();return(0,a.useMemo)((()=>e&&s&&s.stakingLedger.active.unwrap().lt(e)),[e,s])?(0,n.jsx)(l.Pd,{content:t("Your bonded amount is below the on-chain minimum threshold of {{minBond}} and may be chilled. Bond extra funds to increase the bonded amount.",{replace:{minBond:(0,E.a)(e)}})}):null})),Ce=l.zo.tr`
  .ui--Button-Group {
    display: inline-block;
    margin-right: 0.25rem;
    vertical-align: inherit;
  }
`,Ne=a.memo((function({allSlashes:e,className:s="",info:{controllerId:t,destination:o,hexSessionIdNext:i,hexSessionIdQueue:r,isLoading:d,isOwnController:u,isOwnStash:h,isStashNominating:p,isStashValidating:x,nominating:f,sessionIds:b,stakingLedger:j,stashId:v},isDisabled:y,minCommission:I,targets:S}){const{t:P}=(0,w.$)(),{api:E}=(0,c.h)(),{queueExtrinsic:M}=(0,k.L)(),[D,F]=(0,C.O)(),[q,O]=(0,C.O)(),[_,V]=(0,C.O)(),[B,Z]=(0,C.O)(),[$,z]=(0,C.O)(),[W,H]=(0,C.O)(),[U,J]=(0,C.O)(),[G,X]=(0,C.O)(),[K,Y]=(0,C.O)(),[ee,se]=(0,C.O)(),{balancesAll:ae,spanCount:oe,stakingAccount:ie}=function(e,s){const t=(0,a.useMemo)((()=>[s]),[s]),n=(0,m.W7)(e.derive.balances?.all,t),o=(0,m.W7)(e.derive.staking.account,t);return{balancesAll:n,spanCount:A(s),stakingAccount:o}}(E,v),le=(0,a.useMemo)((()=>1===E.tx.staking.setController.meta.args.length||v!==t),[E,t,v]),de=(0,a.useMemo)((()=>function(e,s=[]){return s.map((([s,t])=>({era:s,slashes:t.filter((({others:s,validator:t})=>t.eq(e)||s.some((([s])=>s.eq(e)))))}))).filter((({slashes:e})=>e.length))}(v,e)),[e,v]),ue=(0,a.useCallback)((()=>M({accountId:t,extrinsic:1===E.tx.staking.withdrawUnbonded.meta.args.length?E.tx.staking.withdrawUnbonded(oe):E.tx.staking.withdrawUnbonded()})),[E,t,M,oe]),me=!!ie?.stakingLedger&&!ie.stakingLedger.active?.isEmpty;return(0,n.jsxs)(Ce,{className:s,children:[(0,n.jsx)("td",{className:"badge together",children:0!==de.length&&(0,n.jsx)(l.Ct,{color:"red",hover:P("Slashed in era {{eras}}",{replace:{eras:de.map((({era:e})=>(0,N.u)(e))).join(", ")}}),icon:"skull-crossbones"})}),(0,n.jsxs)("td",{className:"address",children:[(0,n.jsx)(l.N,{value:v}),D&&(0,n.jsx)(T,{controllerId:t,onClose:F,stakingInfo:ie,stashId:v}),q&&(0,n.jsx)(R,{onClose:O}),_&&t&&(0,n.jsx)(L,{controllerId:t,onClose:V,stashId:v}),B&&t&&(0,n.jsx)(te,{controllerId:t,nominating:f,onClose:Z,stashId:v,targets:S}),$&&(0,n.jsx)(ne,{controllerId:t,onClose:z,stakingInfo:ie,stashId:v}),U&&t&&(0,n.jsx)(re,{defaultControllerId:t,onClose:J,stashId:v}),W&&t&&(0,n.jsx)(ce,{controllerId:t,defaultDestination:o,onClose:H,stashId:v}),G&&t&&(0,n.jsx)(pe,{controllerId:t,onClose:X,stashId:v}),K&&(0,n.jsx)(be,{controllerId:t,onClose:Y,stakingLedger:j,stashId:v}),ee&&t&&(0,n.jsx)(we,{controllerId:t,minCommission:I,onClose:se,stashId:v})]}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(l.ax,{value:t})}),(0,n.jsx)("td",{className:"start media--1200",children:o?.isAccount?(0,n.jsx)(l.ax,{value:o.asAccount}):o?.toString()}),(0,n.jsxs)("td",{className:"number",children:[(0,n.jsx)(l.d4,{stakingInfo:ie}),(0,n.jsx)(l.JM,{stakingInfo:ie}),(0,n.jsx)(l.by,{stakingInfo:ie})]}),x?(0,n.jsxs)("td",{className:"all",children:[(0,n.jsx)(l.hl,{address:v,withBalance:!1,withHexSessionId:"0x"!==i&&[r,i],withValidatorPrefs:!0}),(0,n.jsx)(ke,{minBond:S.minValidatorBond,stakingInfo:ie})]}):(0,n.jsx)("td",{className:"all expand",children:p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{nominating:f,stashId:v}),(0,n.jsx)(ke,{minBond:S.minNominatorBond,stakingInfo:ie})]})}),(0,n.jsx)("td",{className:"button",children:!d&&(0,n.jsxs)(n.Fragment,{children:[p||x?(0,n.jsx)(l.cA,{accountId:t,icon:"stop",isDisabled:!u||y,label:P("Stop"),tx:E.tx.staking.chill},"stop"):(0,n.jsxs)(l.zx.Group,{children:[b.length&&"0x"!==i?(0,n.jsx)(l.zx,{icon:"certificate",isDisabled:!u||y||!me,label:P("Validate"),onClick:se},"validate"):(0,n.jsx)(l.zx,{icon:"sign-in-alt",isDisabled:!u||y,label:P("Session Key"),onClick:X},"set"),(0,n.jsx)(l.zx,{icon:"hand-paper",isDisabled:!u||y||!me,label:P("Nominate"),onClick:Z},"nominate")]}),(0,n.jsx)(l.GI,{isDisabled:y,value:(0,n.jsxs)(l.v2,{children:[(0,n.jsx)(l.v2.Item,{isDisabled:!h||!ae?.freeBalance.gtn(0),label:P("Bond more funds"),onClick:F}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.stakingLedger||ie.stakingLedger.active?.isEmpty,label:P("Unbond funds"),onClick:Y}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.unlocking?.length,label:P("Rebond funds"),onClick:z}),(0,n.jsx)(l.v2.Item,{isDisabled:!u||!ie?.redeemable||!ie.redeemable.gtn(0),label:P("Withdraw unbonded funds"),onClick:ue}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!h||!le,label:P("Change controller account"),onClick:J}),(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:P("Change reward destination"),onClick:H}),x&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:P("Change validator preferences"),onClick:se}),(0,g.m)(E.tx.staking.kick)&&(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:P("Remove nominees"),onClick:V})]}),(0,n.jsx)(l.v2.Divider,{}),!p&&(0,n.jsx)(l.v2.Item,{isDisabled:!u,label:P("Change session keys"),onClick:X}),p&&(0,n.jsx)(l.v2.Item,{isDisabled:!u||!S.validators?.length,label:P("Set nominees"),onClick:Z}),!p&&(0,n.jsx)(l.v2.Item,{label:P("Inject session keys (advanced)"),onClick:O})]})},"settings")]})})]})})),Ie=a.memo((function({allSlashes:e,className:s,footer:t,isInElection:o,list:i,minCommission:r,targets:c}){const{t:d}=(0,w.$)(),u=(0,a.useRef)([[d("stashes"),"start",2],[d("controller"),"address"],[d("rewards"),"start media--1200"],[d("bonded"),"number"],[],[]]);return(0,n.jsx)(l.iA,{className:s,empty:i&&d("No funds staked yet. Bond funds to validate or nominate a validator"),footer:t,header:u.current,children:i?.map((s=>(0,n.jsx)(Ne,{allSlashes:e,info:s,isDisabled:o,minCommission:r,targets:c},s.stashId)))})})),Se={bondTx:null,controllerId:null,controllerTx:null,stashId:null},Ae=a.memo((function({className:e="",isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onChange:r}){const{t:d}=(0,w.$)(),{api:u}=(0,c.h)(),[h,p]=(0,a.useState)(),[x,g]=(0,a.useState)(null),[f,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),[k,C]=(0,a.useState)("Staked"),[N,I]=(0,a.useState)(null),[S,A]=(0,a.useState)(null),[E,M]=(0,a.useState)(null),T=(0,m.W7)(u.derive.balances?.all,[S]),F=(0,m.W7)(u.derive.balances?.all,[N]),q=ge(),O=(0,a.useMemo)((()=>3===u.tx.staking.bond.meta.args.length),[u]),_=(0,a.useMemo)((()=>le(d)),[d]),V=(0,a.useCallback)(((e,s)=>b(s)),[]);(0,a.useEffect)((()=>{T&&M(T.freeBalance.gt(u.consts.balances.existentialDeposit)?T.freeBalance.sub(u.consts.balances.existentialDeposit):v.nw)}),[u,T]),(0,a.useEffect)((()=>{M(null)}),[S]),(0,a.useEffect)((()=>{const e="Account"===k?{Account:N}:k,[s,t]=O?[j,f]:[S,null];r(h&&h.gtn(0)&&!x?.error&&!t&&s&&S?{bondTx:O?u.tx.staking.bond(S,h,e):u.tx.staking.bond(h,e),controllerId:s,controllerTx:O?u.tx.staking.setController(s):null,stashId:S}:Se)}),[u,h,x,f,j,k,N,O,r,S]);const B=!!h?.gtn(0),R="Account"===k,Z=R&&F&&F.accountId.eq(N)&&F.freeBalance.isZero();return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(l.u_.Columns,{hint:O?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("Think of the stash as your cold wallet and the controller as your hot wallet. Funding operations are controlled by the stash, any other non-funding actions by the controller itself.")}),(0,n.jsx)("p",{children:d("To ensure optimal fund security using the same stash/controller is strongly discouraged, but not forbidden.")})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The stash should be treated as a cold wallet.")}),(0,n.jsx)("p",{children:d("As such it is recommended that you setup a proxy to control operations via the stash.")})]}),children:[(0,n.jsx)(l.rp,{label:d("stash account"),onChange:A,type:"account",value:S}),O&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.rp,{label:d("controller account"),onChange:y,type:"account",value:j}),(0,n.jsx)(ie,{accountId:S,controllerId:j,onError:V})]})]}),E&&(0,n.jsxs)(l.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:d("The amount placed at-stake should not be your full available amount to allow for transaction fees.")}),(0,n.jsx)("p",{children:d("Once bonded, it will need to be unlocked/withdrawn and will be locked for at least the bonding duration.")})]}),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:E,isError:!B||!!x?.error,label:d("value bonded"),labelExtra:(0,n.jsx)(P.Z,{label:(0,n.jsx)("span",{className:"label",children:d("balance")}),params:S}),onChange:p}),(0,n.jsx)(D,{controllerId:j,isNominating:s,minNominated:t,minNominatorBond:o,minValidatorBond:i,onError:g,stashId:S,value:h}),q?.gtn(0)&&(0,n.jsx)(l.qG,{label:d("on-chain bonding duration"),children:(0,n.jsx)(xe.Z,{value:q})})]}),(0,n.jsxs)(l.u_.Columns,{hint:d("Rewards (once paid) can be deposited to either the stash or controller, with different effects."),children:[(0,n.jsx)(l.Lt,{defaultValue:0,label:d("payment destination"),onChange:C,options:_,value:k}),R&&(0,n.jsx)(l.rp,{label:d("the payment account"),onChange:I,type:"account",value:N}),Z&&(0,n.jsx)(l.oy,{content:d("The selected destination account does not exist and cannot be used to receive rewards")})]})]})})),Pe=[],Ee=a.memo((function({isInElection:e,targets:s}){const{t}=(0,w.$)(),{api:o}=(0,c.h)(),[i,r]=(0,C.O)(),[{bondTx:d,controllerId:u,controllerTx:m,stashId:h},p]=(0,a.useState)({}),[{nominateTx:x},f]=(0,a.useState)({}),[b,j]=(0,a.useState)(1),v=e||!(0,g.m)(o.tx.utility?.batch),y=(0,a.useCallback)((()=>j((e=>e+1))),[]),k=(0,a.useCallback)((()=>j((e=>e-1))),[]),N=(0,a.useCallback)((()=>{p({}),f({}),j(1),r()}),[r]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",isDisabled:v||!s.validators?.length,label:t("Nominator"),onClick:N},"new-nominator"),i&&(0,n.jsxs)(l.u_,{header:t("Setup Nominator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:b}}),onClose:N,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[1===b&&(0,n.jsx)(Ae,{isNominating:!0,minNominated:s.minNominated,minNominatorBond:s.minNominatorBond,onChange:p}),u&&h&&2===b&&(0,n.jsx)(ee,{controllerId:u,nominating:Pe,onChange:f,stashId:h,targets:s}),(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.RN,{})})]}),(0,n.jsxs)(l.u_.Actions,{children:[(0,n.jsx)(l.zx,{icon:"step-backward",isDisabled:1===b,label:t("prev"),onClick:k}),2===b?(0,n.jsx)(l.cA,{accountId:h,icon:"sign-in-alt",isDisabled:!(d&&x&&h&&u),label:t("Bond & Nominate"),onStart:N,params:[h===u?[d,x]:[d,x,m]],tx:o.tx.utility.batchAll||o.tx.utility.batch}):(0,n.jsx)(l.zx,{icon:"step-forward",isDisabled:!d,label:t("next"),onClick:y})]})]})]})})),Me=a.memo((function(){const{t:e}=(0,w.$)(),[s,t]=(0,C.O)(),[{bondTx:o,stashId:i},r]=(0,a.useState)({}),c=(0,a.useCallback)((()=>{r({}),t()}),[t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",label:e("Stash"),onClick:c},"new-stash"),s&&(0,n.jsxs)(l.u_,{header:e("Bonding Preferences"),onClose:c,size:"large",children:[(0,n.jsx)(l.u_.Content,{children:(0,n.jsx)(Ae,{onChange:r})}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:i,extrinsic:o,icon:"sign-in-alt",isDisabled:!o||!i,label:e("Bond"),onStart:c})})]})]})})),De=a.memo((function({isInElection:e,minCommission:s,targets:t}){const{t:o}=(0,w.$)(),{api:i}=(0,c.h)(),[r,d]=(0,C.O)(),[{bondTx:u,controllerId:m,controllerTx:h,stashId:p},x]=(0,a.useState)({}),[{sessionTx:f},b]=(0,a.useState)({}),[{validateTx:j},v]=(0,a.useState)({}),[y,k]=(0,a.useState)(1),N=e||!(0,g.m)(i.tx.utility?.batch),I=(0,a.useCallback)((()=>k((e=>e+1))),[]),S=(0,a.useCallback)((()=>k((e=>e-1))),[]),A=(0,a.useCallback)((()=>{x({}),b({}),v({}),k(1),d()}),[d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{icon:"plus",isDisabled:N,label:o("Validator"),onClick:A},"new-validator"),r&&(0,n.jsxs)(l.u_,{header:o("Setup Validator {{step}}/{{NUM_STEPS}}",{replace:{NUM_STEPS:2,step:y}}),onClose:A,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[1===y&&(0,n.jsx)(Ae,{minValidatorBond:t.minValidatorBond,onChange:x}),m&&p&&2===y&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(he,{controllerId:m,onChange:b,stashId:p,withFocus:!0}),(0,n.jsx)(ye,{controllerId:m,minCommission:s,onChange:v,stashId:p})]}),(0,n.jsx)(l.u_.Columns,{children:(0,n.jsx)(l.RN,{})})]}),(0,n.jsxs)(l.u_.Actions,{children:[(0,n.jsx)(l.zx,{icon:"step-backward",isDisabled:1===y,label:o("prev"),onClick:S}),2===y?(0,n.jsx)(l.cA,{accountId:p,icon:"sign-in-alt",isDisabled:!u||!f||!j,label:o("Bond & Validate"),onStart:A,params:[m===p?[u,f,j]:[u,f,j,h]],tx:i.tx.utility.batchAll||i.tx.utility.batch}):(0,n.jsx)(l.zx,{icon:"step-forward",isDisabled:!u,label:o("next"),onClick:I})]})]})]})}));var Te=t(19042),Fe=t(63985);const qe="rewards",Oe=a.memo((function({className:e,controllerId:s,onClose:t,poolId:o}){const{t:i}=(0,w.$)(),{api:r}=(0,c.h)(),[d,u]=(0,a.useState)(qe),[m,h]=(0,a.useState)(),p=(0,Fe.Z)(s,m,v.nw),x=(0,a.useRef)([{text:i("Free balance"),value:"free"},{text:i("Pool rewards"),value:"rewards"}]);return(0,n.jsxs)(l.u_,{className:e,header:i("Bond extra into pool"),onClose:t,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(K,{controllerId:s,poolId:o}),(0,n.jsxs)(l.u_.Columns,{hint:i("You can either bond a specific amount from your free balance, or all of the accumulated rewards."),children:[(0,n.jsx)(l.Lt,{defaultValue:qe,label:i("type of funds to bond"),onChange:u,options:x.current}),"free"===d&&(0,n.jsx)(l.H,{autoFocus:!0,isError:p,label:i("additional free funds to bond"),labelExtra:(0,n.jsx)(P.Z,{label:(0,n.jsx)("span",{className:"label",children:i("balance")}),params:s}),onChange:h})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,icon:"sign-in-alt",isDisabled:"free"===d&&p,label:i("Bond Extra"),onStart:t,params:["free"===d?{FreeBalance:m}:"Rewards"],tx:r.tx.nominationPools.bondExtra})})]})})),_e=a.memo((function({className:e,controllerId:s,maxUnbond:t,onClose:o,poolId:i}){const{t:r}=(0,w.$)(),{api:d}=(0,c.h)(),[u,m]=(0,a.useState)(),h=ge(),p=!u||!t||u.gt(t);return(0,n.jsxs)(l.u_,{className:e,header:r("Unbond funds from pool"),onClose:o,size:"large",children:[(0,n.jsxs)(l.u_.Content,{children:[(0,n.jsx)(K,{controllerId:s,poolId:i}),(0,n.jsxs)(l.u_.Columns,{hint:r("The amount to unbond. It should be less or equal to the full bonded amount."),children:[(0,n.jsx)(l.H,{autoFocus:!0,defaultValue:t,isError:p,label:r("amount to unbond"),labelExtra:(0,n.jsx)(f.Z,{label:(0,n.jsx)("span",{className:"label",children:r("bonded")}),value:t}),maxValue:t,onChange:m,withMax:!0}),h?.gtn(0)&&(0,n.jsx)(l.qG,{label:r("on-chain bonding duration"),children:(0,n.jsx)(xe.Z,{value:h})})]})]}),(0,n.jsx)(l.u_.Actions,{children:(0,n.jsx)(l.cA,{accountId:s,icon:"unlock",isDisabled:p,label:r("Unbond"),onStart:o,params:[s,u],tx:d.tx.nominationPools.unbond})})]})})),Ve={transform:e=>e.unwrapOr(null)},Be=(0,I.e)("useAccountInfo",(function(e){const{api:s}=(0,c.h)(),t=(0,W.X)(),[n,o]=(0,a.useState)(null),i=(0,m.W7)(s.query.nominationPools.poolMembers,[e],Ve);return(0,a.useEffect)((()=>{i&&s.call.nominationPoolsApi?.pendingRewards(e).then((e=>t.current&&o({claimable:e,member:i}))).catch(console.error)}),[e,i,s,t]),n})),Re=a.memo((function({accountId:e,className:s,info:{bonded:{roles:t},metadata:o,nominating:i,stashId:r},isFirst:d,poolId:u,sessionProgress:m,targets:h}){const{t:p}=(0,w.$)(),{api:x}=(0,c.h)(),g=A(r),{queueExtrinsic:b}=(0,k.L)(),[v,y]=(0,C.O)(),[I,S]=(0,C.O)(),[P,E]=(0,C.O)(),M=Be(e),D=(0,a.useMemo)((()=>m&&M?.member.unbondingEras&&!M.member.unbondingEras.isEmpty?function(e,s,{activeEra:t},{unbondingEras:n}){const a=[],o=new(j())(0);for(const[e,s]of n.entries())e.lte(t)?o.iadd(s):a.push({remainingEras:e.sub(t),value:s});return{accountId:e,controllerId:e,redeemable:o,stashId:s,unlocking:a}}(e,r,m,M.member):null),[M,e,r,m]),T=(0,a.useCallback)((()=>b({accountId:e,extrinsic:x.tx.nominationPools.claimPayout()})),[x,e,b]),F=(0,a.useCallback)((()=>b({accountId:e,extrinsic:x.tx.nominationPools.withdrawUnbonded(e,g)})),[x,e,g,b]),{isNominator:q}=(0,a.useMemo)((()=>function(e,{nominator:s,root:t}){return{isNominator:s.eq(e)||t.eq(e)}}(e,t)),[e,t]);return(0,n.jsxs)("tr",{className:s,children:[(0,n.jsx)("td",{className:"number",children:(0,n.jsx)("h1",{children:d&&(0,N.u)(u)})}),(0,n.jsx)("td",{className:"start",children:d&&o}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(l.N,{value:e})}),(0,n.jsx)("td",{className:"number",children:M&&(0,n.jsxs)(n.Fragment,{children:[!M.member.points.isZero()&&(0,n.jsx)(f.Z,{value:M.member.points}),D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.JM,{stakingInfo:D}),(0,n.jsx)(l.by,{isPool:!0,stakingInfo:D})]})]})}),(0,n.jsx)("td",{className:"number",children:M&&!M.claimable.isZero()&&(0,n.jsx)(f.Z,{value:M.claimable})}),(0,n.jsx)("td",{className:"number",children:d&&i&&(0,n.jsx)(Q,{nominating:i,stashId:r})}),(0,n.jsxs)("td",{className:"button",children:[(0,n.jsx)(l.Ct,{color:q?"green":"transparent",icon:"hand-paper"}),v&&(0,n.jsx)(Oe,{controllerId:e,onClose:y,poolId:u}),I&&(0,n.jsx)(te,{controllerId:e,nominating:i,onClose:S,poolId:u,stashId:e,targets:h}),M&&P&&(0,n.jsx)(_e,{controllerId:e,maxUnbond:M.member.points,onClose:E,poolId:u}),(0,n.jsx)(l.GI,{value:(0,n.jsxs)(l.v2,{children:[(0,n.jsx)(l.v2.Item,{label:p("Bond more funds"),onClick:y}),(0,n.jsx)(l.v2.Item,{isDisabled:!M||M.member.points.isZero(),label:p("Unbond funds"),onClick:E}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!M||M.claimable.isZero(),label:p("Withdraw claimable"),onClick:T}),(0,n.jsx)(l.v2.Item,{isDisabled:!D||D.redeemable.isZero(),label:p("Withdraw unbonded"),onClick:F}),(0,n.jsx)(l.v2.Divider,{}),(0,n.jsx)(l.v2.Item,{isDisabled:!q,label:p("Set nominees"),onClick:S})]})},"settings")]})]})})),Ze=a.memo((function({className:e,count:s,members:t,poolId:a,sessionProgress:o,targets:i}){const r=(0,Te.Z)(a);return r?(0,n.jsx)(n.Fragment,{children:Object.keys(t).map(((t,l)=>(0,n.jsx)(Re,{accountId:t,className:`${e||""} ${s%2?"isEven":"isOdd"}`,info:r,isFirst:0===l,poolId:a,sessionProgress:o,targets:i},`${a.toString()}:${t}`)))}):null})),$e=a.memo((function({className:e,list:s,targets:t}){const{t:o}=(0,w.$)(),{api:i}=(0,c.h)(),r=(0,m.W7)(i.derive.session.progress),d=(0,a.useRef)([[o("pools"),"start",2],[o("account"),"address"],[o("bonded")],[o("claimable")],[],[]]);return(0,n.jsx)(l.iA,{className:e,empty:s&&o("Not participating in any pools. Join a pool first."),header:d.current,children:s?.map((({members:e,poolId:s},a)=>(0,n.jsx)(Ze,{count:a,members:e,poolId:s,sessionProgress:r,targets:t},s.toString())))})}));function Le({isStashNominating:e,isStashValidating:s}){return s?1:e?5:99}function ze(e,s){return Le(e)-Le(s)}function We(e,s){return s.filter((({isStashNominating:s,isStashValidating:t})=>{switch(e){case 1:return s;case 2:return t;case 3:return!s&&!t;default:return!0}}))}function He(e,s){const t=function(e,{bondedNoms:s,bondedNone:t,bondedTotal:n,bondedVals:a}){switch(e){case 0:default:return n;case 1:return s;case 2:return a;case 3:return t}}(e,s);return t&&(0,n.jsx)(f.Z,{value:t})}const Ue=a.memo((function({className:e="",isInElection:s,minCommission:t,ownPools:o,ownStashes:i,targets:r}){const{t:d}=(0,w.$)(),{api:u}=(0,c.h)(),m=(0,x.g)(),[h,p]=(0,a.useState)(0),[g,f]=(0,a.useState)(0),b=(0,a.useRef)([{text:d("Stashed"),value:"stash"},{text:d("Pooled"),value:"pool"}]),k=(0,a.useRef)([{text:d("All stashes"),value:"all"},{text:d("Nominators"),value:"noms"},{text:d("Validators"),value:"vals"},{text:d("Inactive"),value:"chill"}]),C=(0,a.useMemo)((()=>function(e){if(!e)return{};const s=new(j())(0),t=new(j())(0),n=new(j())(0),a=new(j())(0);return e.forEach((({isStashNominating:e,isStashValidating:o,stakingLedger:i})=>{const r=i?.total?i.total.unwrap():v.nw;a.iadd(r),e?s.iadd(r):o?n.iadd(r):t.iadd(r)})),{bondedNoms:s,bondedNone:t,bondedTotal:a,bondedVals:n,foundStashes:e.sort(ze)}}(i)),[i]),[N,I]=(0,a.useMemo)((()=>[C.foundStashes&&We(g,C.foundStashes),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{colSpan:4}),(0,n.jsx)("td",{className:"number",children:He(g,C)}),(0,n.jsx)("td",{colSpan:2})]},"footer")]),[C,g]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(l.zx.Group,{children:[u.consts.nominationPools&&(0,n.jsx)(l.tX,{onChange:p,options:b.current,value:h}),0===h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.tX,{onChange:f,options:k.current,value:g}),(0,n.jsx)(Ee,{isInElection:s,targets:r}),(0,n.jsx)(De,{isInElection:s,minCommission:t,targets:r}),(0,n.jsx)(Me,{})]})]}),(0,n.jsx)(y.Z,{isInElection:s}),0===h?(0,n.jsx)(Ie,{allSlashes:m,footer:I,isInElection:s,list:N,minCommission:t,targets:r}):(0,n.jsx)($e,{allSlashes:m,list:o,targets:r})]})}));var Je=t(64765),Ge=t(26939),Qe=t(74683),Xe=t(94345),Ke=t(19623),Ye=t(75387);const es=a.memo((function(){const{t:e}=(0,w.$)();return(0,n.jsx)(l.Pd,{className:"warning centered",content:e("Use the account actions to create a new validator/nominator stash and bond it to participate in staking. Do not send funds directly via a transfer to a validator.")})}));var ss=t(87292),ts=t(47623),ns=t(34536),as=t(73477),os=t(60773);function is(e){return e.length?[e.length,()=>e.map((e=>(0,n.jsx)(l.ax,{value:e},e)))]:null}const rs=a.memo((function({nominators:e,slashingSpans:s}){const{t}=(0,w.$)(),{api:o}=(0,c.h)(),{active:i,chilled:r}=(0,a.useMemo)((()=>function(e,s=[],t){const n=t&&!e.events.staking.SlashReported?s.filter((({submittedIn:e})=>t.lastNonzeroSlash.gt(e))).map((({nominatorId:e})=>e)):[];return{active:is(s.filter((({nominatorId:e})=>!n.includes(e))).map((({nominatorId:e})=>e))),chilled:is(n)}}(o,e,s)),[o,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[i&&(0,n.jsx)(l.n0,{renderChildren:i[1],summary:t("Nominations ({{count}})",{replace:{count:(0,N.u)(i[0])}})}),r&&(0,n.jsx)(l.n0,{renderChildren:r[1],summary:t("Renomination required ({{count}})",{replace:{count:(0,N.u)(r[0])}})})]})}));function ls(e){return[e.length,()=>e.map((({nominatorId:e,value:s})=>(0,n.jsx)(l.ax,{bonded:s,value:e,withBonded:!0},e)))]}function cs(e){const s=new(j())(0);for(let t=0,n=e.length;t<n;t++)s.iadd(e[t].value);return s}const ds=a.memo((function({nominators:e,stakeOther:s}){const{api:t}=(0,c.h)(),[o,i,r,d]=(0,a.useMemo)((()=>function(e,s,t){if(!s)return[null,v.nw,null,v.nw];const n=s.sort(((e,s)=>s.value.cmp(e.value)));if(!e||e.gtn(n.length))return[ls(n),t||v.nw,null,v.nw];const a=e.toNumber(),o=n.slice(0,a),i=cs(o),r=n.slice(a),l=cs(r);return[ls(o),i,ls(r),l]}(t.consts.staking?.maxNominatorRewardedPerValidator,e,s)),[t,e,s]);return(0,n.jsxs)("td",{className:"expand all",children:[(!o||0!==o[0])&&(0,n.jsx)(l.n0,{className:o?"":"--tmp",renderChildren:o?.[1],summary:(0,n.jsx)(f.Z,{labelPost:` (${o?o[0]:"0"})`,value:i})}),r&&(0,n.jsx)(l.n0,{className:"stakeOver",renderChildren:r[1],summary:(0,n.jsx)(f.Z,{labelPost:` (${r[0]})`,value:d})})]})}));var us=t(33378);const ms=[],hs=a.memo((function({isChilled:e,isElected:s,isMain:t,isPara:o,isRelay:i,nominators:r=ms,onlineCount:c,onlineMessage:u}){const{allAccounts:m}=(0,d.x)(),h=c&&c.toNumber(),p=(0,a.useMemo)((()=>r.some((({nominatorId:e})=>m.includes(e)))),[m,r]);return(0,n.jsxs)(n.Fragment,{children:[p?(0,n.jsx)(l.Ct,{className:"media--1100",color:"green",icon:"hand-paper"}):(0,n.jsx)(l.Ct,{className:"media--1100",color:"transparent"}),i&&(o?(0,n.jsx)(l.Ct,{className:"media--1100",color:"purple",icon:"vector-square"}):(0,n.jsx)(l.Ct,{className:"media--1100",color:"transparent"})),e?(0,n.jsx)(l.Ct,{className:"media--1000",color:"red",icon:"cancel"}):s?(0,n.jsx)(l.Ct,{className:"media--1000",color:"blue",icon:"chevron-right"}):(0,n.jsx)(l.Ct,{className:"media--1000",color:"transparent"}),t&&(h?(0,n.jsx)(l.Ct,{className:"media--900",color:"green",info:h}):u?(0,n.jsx)(l.Ct,{className:"media--900",color:"green",icon:"envelope"}):(0,n.jsx)(l.Ct,{className:"media--900",color:"transparent"})),(0,n.jsx)(us.Z,{numNominators:r.length})]})})),ps={transform:e=>e.unwrapOr(null)},xs=a.memo((function({address:e,className:s="",filterName:t,hasQueries:o,isElected:i,isFavorite:r,isMain:d,isPara:u,lastBlock:h,minCommission:p,nominatedBy:x,points:g,recentlyOnline:b,toggleFavorite:j,validatorInfo:y,withIdentity:k}){const{t:N}=(0,w.$)(),{api:I,apiIdentity:S}=(0,c.h)(),[A,P]=(0,C.O)(!1),{accountInfo:E,slashingSpans:M}=function(e,s,t){const n=(0,a.useMemo)((()=>[s]),[s]);return{accountInfo:(0,os.Y)(s),slashingSpans:(0,m.W7)(!t&&e.query.staking.slashingSpans,n,ps)}}(I,e,d),{commission:D,isChilled:T,nominators:F,stakeOther:q,stakeOwn:O}=(0,a.useMemo)((()=>y?function({exposureMeta:e,exposurePaged:s,validatorPrefs:t},n){let a,o,i,r;e?.total&&(a=s.others.map((({value:e,who:s})=>({nominatorId:s.toString(),value:e.unwrap()}))),o=e.total?.unwrap()||v.nw,r=e.own.unwrap(),i=o.sub(r));const l=t?.commission?.unwrap();return{commission:l?.toHuman(),isChilled:l&&n&&l.isZero()&&l.lt(n),nominators:a,stakeOther:i,stakeOwn:r,stakeTotal:o}}(y,p):{}),[p,y]),_=(0,a.useMemo)((()=>!E||(0,as.r7)(S,e,E,t,k)),[E,e,t,S,k]),V=(0,a.useMemo)((()=>`#/staking/query/${e}`),[e]),B=(0,a.useMemo)((()=>g&&"greyAnim-"+Date.now()%25),[g]);return _?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("tr",{className:`${s} isExpanded isFirst ${A?"packedBottom":"isLast"}`,children:[(0,n.jsx)(l.iA.Column.Favorite,{address:e,isFavorite:r,toggle:j}),(0,n.jsx)("td",{className:"badge together",children:(0,n.jsx)(hs,{isChilled:T,isElected:i,isMain:d,isPara:u,isRelay:!!(I.query.parasShared||I.query.shared)?.activeValidatorIndices,nominators:d?F:x,onlineCount:b?.blockCount,onlineMessage:b?.hasMessage})}),(0,n.jsxs)("td",{className:"address all relative",children:[(0,n.jsx)(l.N,{value:e}),d&&B&&(0,n.jsx)(l.Vp,{className:`${B} absolute`,color:"lightgrey",label:g})]}),d?(0,n.jsx)(ds,{nominators:F,stakeOther:q}):(0,n.jsx)(rs,{nominators:x,slashingSpans:M}),(0,n.jsx)("td",{className:"number",children:D||(0,n.jsx)("span",{className:"--tmp",children:"50.00%"})}),d&&(0,n.jsx)("td",{className:"number",children:h}),(0,n.jsx)(l.iA.Column.Expand,{isExpanded:A,toggle:P})]}),A&&(0,n.jsxs)("tr",{className:`${s} ${A?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,n.jsx)("td",{colSpan:2}),(0,n.jsxs)("td",{className:"columar",colSpan:d?4:3,children:[(0,n.jsxs)(l.P0,{size:"small",children:[(0,n.jsx)(l.P0.Column,{children:d&&O?.gtn(0)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:N("own stake")}),(0,n.jsx)(f.Z,{value:O})]})}),(0,n.jsx)(l.P0.Column,{children:o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h5",{children:N("graphs")}),(0,n.jsxs)("a",{href:V,children:[(0,n.jsx)(l.JO,{className:"highlight--color",icon:"chart-line"})," ",N("historic results")]})]})})]}),(0,n.jsx)(l.P0,{is100:!0,children:(0,n.jsx)(l.P0.Column,{children:(0,n.jsx)(l.NR,{data:e,type:"validator",withTitle:!0})})})]}),(0,n.jsx)("td",{})]})]}):null}));function gs(e,s=[],t=[],n,a,o){return s.filter((s=>!o.includes(s)&&(!e||t.includes(s)))).map((e=>[e,n.includes(e),a.includes(e)])).sort((([e,,s],[n,,a])=>{const o=t.includes(e),i=t.includes(n);return s===a?o===i?0:o?-1:1:s?-1:1}))}function fs(e){const s=new Array(e.length);for(let t=0;t<e.length;t++)s[t]=e[t].toString();return s}const bs={},js=a.memo((function({className:e,favorites:s,hasQueries:t,isIntentions:o,isOwn:i,minCommission:r,nominatedBy:d,ownStashIds:u,paraValidators:m=bs,recentlyOnline:h,stakingOverview:p,targets:x,toggleFavorite:g}){const{t:f}=(0,w.$)(),{api:b}=(0,c.h)(),{byAuthor:j,eraPoints:v}=(0,Ye.E)(),[y,k]=(0,a.useState)(""),C=(0,ts.q)(),{validators:N,waiting:I}=(0,a.useMemo)((()=>function(e,s,t,n,a){if(!s)return{};const o=fs(s.nextElected),i=fs(s.validators);return{validators:gs(e,i,a,o,t,[]),waiting:gs(e,o,a,o,t,i).concat(gs(e,n,a,[],t,o))}}(i,p,s,x.waitingIds,u)),[s,i,u,p,x]),S=(0,a.useMemo)((()=>C?o?d&&I:N:void 0),[o,C,d,N,I]),A=(0,a.useMemo)((()=>x.validators&&function(e){const s={};for(let t=0,n=e.length;t<n;t++){const n=e[t];s[n.key]=n}return s}(x.validators)),[x]),P=(0,a.useRef)(o?[[f("intentions"),"start",3],[f("nominators"),"expand"],[f("commission"),"number"],[]]:[[f("validators"),"start",3],[f("other stake"),"expand"],[f("commission")],[f("last #")],[]]);return(0,n.jsx)(l.iA,{className:e,empty:o?S&&f("No waiting validators found"):S&&h&&A&&f("No active validators found"),emptySpinner:(0,n.jsxs)(n.Fragment,{children:[!I&&(0,n.jsx)("div",{children:f("Retrieving validators")}),!A&&(0,n.jsx)("div",{children:f("Retrieving validator info")}),o?!d&&(0,n.jsx)("div",{children:f("Retrieving nominators")}):!h&&(0,n.jsx)("div",{children:f("Retrieving online status")}),!S&&(0,n.jsx)("div",{children:f("Preparing validator list")})]}),filter:(0,n.jsx)(ns.Z,{nameFilter:y,setNameFilter:k}),header:P.current,legend:(0,n.jsx)(ss.Z,{isRelay:!o&&!!(b.query.parasShared||b.query.shared)?.activeValidatorIndices,minCommission:r}),children:S?.map((([e,s,a])=>(0,n.jsx)(xs,{address:e,filterName:y,hasQueries:t,isElected:s,isFavorite:a,isMain:!o,isPara:m[e],lastBlock:j[e],minCommission:r,nominatedBy:d?.[e],points:v[e],recentlyOnline:h?.[e],toggleFavorite:g,validatorInfo:A?.[e]},e)))})}));var vs=t(54705);const ys=(0,l.zo)(l.Ty)`
  .validator--Account-block-icon {
    display: inline-block;
    margin-right: 0.75rem;
    margin-top: -0.25rem;
    vertical-align: middle;
  }

  .validator--Summary-authors {
    .validator--Account-block-icon+.validator--Account-block-icon {
      margin-left: -1.5rem;
    }
  }

  .percent {
    font-size: var(--font-percent-tiny);
  }
`,ws=a.memo((function({className:e="",stakingOverview:s,targets:{counterForNominators:t,inflation:{idealStake:a,inflation:o,stakedFraction:i},nominators:r,waitingIds:c}}){const{t:d}=(0,w.$)(),u=(0,n.jsx)("span",{className:"percent",children:"%"});return(0,n.jsxs)(ys,{className:e,children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(l.Jy,{label:d("validators"),children:s?(0,n.jsxs)(n.Fragment,{children:[(0,N.u)(s.validators.length)," / ",(0,N.u)(s.validatorCount)]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})}),(0,n.jsx)(l.Jy,{className:"media--900",label:d("waiting"),children:c?(0,N.u)(c.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(l.Jy,{className:"media--1000",label:d(t?"active / nominators":"nominators"),children:r?(0,n.jsxs)(n.Fragment,{children:[(0,N.u)(r.length),t&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,N.u)(t)]})]}):(0,n.jsx)("span",{className:"--tmp",children:"999 / 999"})})]}),(0,n.jsxs)("section",{children:[a>0&&Number.isFinite(a)&&(0,n.jsx)(l.Jy,{className:"media--1400",label:d("ideal staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*a).toFixed(1),u]})}),i>0&&(0,n.jsx)(l.Jy,{className:"media--1300",label:d("staked"),children:(0,n.jsxs)(n.Fragment,{children:[(100*i).toFixed(1),u]})}),o>0&&Number.isFinite(o)&&(0,n.jsx)(l.Jy,{className:"media--1200",label:d("inflation"),children:(0,n.jsxs)(n.Fragment,{children:[o.toFixed(1),u]})})]}),(0,n.jsx)("section",{children:(0,n.jsx)(vs.Z,{})})]})})),ks={},Cs={},Ns={},Is=a.memo((function({className:e="",favorites:s,hasAccounts:t,hasQueries:o,minCommission:i,nominatedBy:r,ownStashes:d,paraValidators:u,stakingOverview:h,targets:p,toggleFavorite:x,toggleLedger:g,toggleNominatedBy:f}){const{t:b}=(0,w.$)(),{api:j}=(0,c.h)(),{byAuthor:v,eraPoints:y}=(0,Ye.E)(),[k,C]=(0,a.useState)(0),[N,I]=(0,a.useState)(1),S=(0,m.W7)(j.derive.imOnline?.receivedHeartbeats),A=(0,a.useCallback)((e=>{e&&f(),C(e)}),[f]),P=(0,a.useRef)([{text:b("Own validators"),value:"mine"},{text:b("All validators"),value:"all"}]),E=(0,a.useRef)([{text:b("Active"),value:"active"},{text:b("Waiting"),value:"waiting"}]),M=(0,a.useMemo)((()=>d?.map((({stashId:e})=>e))),[d]);(0,a.useEffect)((()=>{g&&g()}),[g]);const D=0===N;return(0,n.jsxs)("div",{className:`${e} staking--Overview`,children:[(0,n.jsx)(ws,{stakingOverview:h,targets:p}),t&&0===d?.length&&(0,n.jsx)(es,{}),(0,n.jsxs)(l.zx.Group,{children:[(0,n.jsx)(l.tX,{onChange:I,options:P.current,value:N}),(0,n.jsx)(l.tX,{onChange:A,options:E.current,value:k})]}),(0,n.jsx)(js,{byAuthor:0===k?v:Cs,eraPoints:0===k?y:Ns,favorites:s,hasQueries:o,isIntentions:1===k,isOwn:D,minCommission:0===k?i:void 0,nominatedBy:1===k?r:void 0,ownStashIds:M,paraValidators:0===k&&u||ks,recentlyOnline:0===k?S:void 0,stakingOverview:h,targets:p,toggleFavorite:x},k)]})}));var Ss=t(125),As=t(27877);const Ps=["actions","payout"],Es={defaultValue:[!1,void 0,{}],transform:([e,s,t,n])=>[!!e&&e.isOpen,s&&!s.isZero()?s:void 0,t&&n?n.reduce(((e,s)=>({...e,[t[s.toNumber()].toString()]:!0})),{}):{}]},Ms=l.zo.main`
  .staking--Chart {
    margin-top: 1.5rem;

    h1 {
      margin-bottom: 0.5rem;
    }

    .ui--Spinner {
      margin: 2.5rem auto;
    }
  }

  .staking--optionsBar {
    margin: 0.5rem 0 1rem;
    text-align: center;
    white-space: normal;

    .staking--buttonToggle {
      display: inline-block;
      margin-right: 1rem;
      margin-top: 0.5rem;
    }
  }

  .ui--Expander.stakeOver {
    .ui--Expander-summary {
      color: var(--color-error);
    }
  }
`,Ds=a.memo((function({basePath:e,className:s=""}){const{t}=(0,w.$)(),{api:f}=(0,c.h)(),{areAccountsLoaded:b,hasAccounts:j}=(0,d.x)(),{pathname:v}=(0,o.TH)(),[y,k]=(0,a.useState)(!1),[C,N]=(0,u.r)(X.M),[I,S]=(0,a.useState)(!1),A=(0,Ss.Z)(I),P=(0,m.W7)(f.derive.staking.overview),[E,M,D]=(0,h.L)([f.query.staking.eraElectionStatus,f.query.staking.minCommission,f.query.session.validators,(f.query.parasShared||f.query.shared)?.activeValidatorIndices],Es),T=(0,r.Z)(),F=(0,p.w)(),q=(0,x.g)(),O=(0,As.Z)(C,y),_=(0,a.useMemo)((()=>j&&!!f.query.imOnline?.authoredBlocks&&!!f.query.staking.activeEra),[f,j]),V=(0,a.useMemo)((()=>j&&!!F&&0!==F.length),[j,F]),B=(0,a.useMemo)((()=>(F||[]).filter((({isStashValidating:e})=>e))),[F]),R=(0,a.useCallback)((()=>k(!0)),[]),Z=(0,a.useCallback)((()=>S(!0)),[]),$=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:t("Overview")},{name:"actions",text:t("Accounts")},V&&(0,g.m)(f.query.staking.activeEra)&&{name:"payout",text:t("Payouts")},(0,g.m)(f.query.nominationPools?.minCreateBond)&&{name:"pools",text:t("Pools")},{alias:"returns",name:"targets",text:t("Targets")},V&&(0,g.m)((f.query.voterBagsList||f.query.bagsList||f.query.voterList)?.counterForListNodes)&&{name:"bags",text:t("Bags")},{count:q.reduce(((e,[,s])=>e+s.length),0),name:"slashes",text:t("Slashes")},{hasParams:!0,name:"query",text:t("Validator stats")}].filter((e=>!!e))),[f,V,q,t]);return(0,n.jsxs)(Ms,{className:`${s} staking--App`,children:[(0,n.jsx)(l.mQ,{basePath:e,hidden:b&&!j?Ps:void 0,items:$}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(Je.Z,{ownStashes:F}),path:"bags"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Ge.Z,{historyDepth:O.historyDepth,isInElection:E,ownPools:T,ownValidators:B}),path:"payout"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(i.Z,{ownPools:T}),path:"pools"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Qe.Z,{basePath:e}),path:"query/:value?"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Xe.Z,{ownStashes:F,slashes:q}),path:"slashes"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(Ke.Z,{isInElection:E,nominatedBy:A,ownStashes:F,stakingOverview:P,targets:O,toggleFavorite:N,toggleLedger:R,toggleNominatedBy:Z}),path:"targets"})]})}),(0,n.jsx)(Ue,{className:v===`${e}/actions`?"":"--hidden",isInElection:E,minCommission:M,ownPools:T,ownStashes:F,targets:O}),(0,n.jsx)(Is,{className:e===v?"":"--hidden",favorites:C,hasAccounts:j,hasQueries:_,minCommission:M,nominatedBy:A,ownStashes:F,paraValidators:D,stakingOverview:P,targets:O,toggleFavorite:N,toggleNominatedBy:Z})]})}))},57272:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-staking")}},125:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(2784),a=t(90778),o=t(9118);const i=(0,t(11677).e)("useNominations",(function(e=!0){const{api:s}=(0,a.h)(),t=(0,o.W7)(e&&s.query.staking.nominators.entries);return(0,n.useMemo)((()=>t&&function(e){const s={};for(let t=0,n=e.length;t<n;t++){const[n,a]=e[t];if(a.isSome&&n.args.length){const e=n.args[0].toString(),{submittedIn:t,targets:o}=a.unwrap();for(let n=0,a=o.length;n<a;n++){const a=o[n].toString();s[a]||(s[a]=[]),s[a].push({index:n+1,nominatorId:e,submittedIn:t})}}}return s}(t)),[t])}))},27877:(e,s,t)=>{t.d(s,{Z:()=>N});var n=t(2784),a=t(90778),o=t(34814),i=t(54890),r=t(9118),l=t(57493),c=t(11677),d=t(95292),u=t(48801),m=t.n(u),h=t(95209);const p={},x={withController:!0,withExposure:!0,withExposureMeta:!0,withPrefs:!0},g={withController:!0,withPrefs:!0},f={transform:({activeEra:e,eraLength:s,sessionLength:t})=>({activeEra:e,eraLength:s,lastEra:e.isZero()?d.nw:e.sub(d.If),sessionLength:t})},b={defaultValue:{},transform:([e,s,t,n,a,o,i,r])=>({counterForNominators:s,counterForValidators:t,historyDepth:e,maxNominatorsCount:n&&n.isSome?n.unwrap():void 0,maxValidatorsCount:a&&a.isSome?a.unwrap():void 0,minNominatorBond:o,minValidatorBond:i,totalIssuance:r})};function j(e,s){return(e.legacyClaimedRewards||e.claimedRewards||[]).concat(s.toArray())}function v(e){return(s,t)=>(s[e]=t+1,s)}function y(e){return!e.nextElected}function w(e){const s=[];return e.filter((({accountId:e})=>{const t=e.toString();return!s.includes(t)&&(s.push(t),!0)})).sort(((e,s)=>s.bondOther.cmp(e.bondOther))).map(v("rankBondOther")).sort(((e,s)=>s.bondOwn.cmp(e.bondOwn))).map(v("rankBondOwn")).sort(((e,s)=>s.bondTotal.cmp(e.bondTotal))).map(v("rankBondTotal")).sort(((e,s)=>e.stakedReturnCmp-s.stakedReturnCmp)).map(v("rankReward")).sort(((e,s)=>s.stakedReturnCmp-e.stakedReturnCmp||e.commissionPer-s.commissionPer||s.rankBondTotal-e.rankBondTotal)).map(v("rankOverall")).sort(((e,s)=>e.isFavorite===s.isFavorite?0:e.isFavorite?-1:1))}function k(e,s,t,n,{activeEra:a,eraLength:o,lastEra:i,sessionLength:r},l,c){const u={},m=e.createType("SpStakingExposurePage"),h=e.createType("SpStakingPagedExposureMetadata"),p=l&&i.sub(l).iadd(d.If),x=new Array(t.info.length);for(let l=0;l<t.info.length;l++){const{accountId:g,claimedRewardsEras:f,exposureMeta:b,exposurePaged:v,stakingLedger:w,validatorPrefs:k}=t.info[l],C=v.isSome&&v.unwrap(),N=b.isSome&&b.unwrap();let[I,S]=C&&N?[N.own.unwrap(),N.total.unwrap()]:[d.nw,d.nw];const A=S.isZero();A&&(S=I=w.total?.unwrap()||d.nw);const P=(C&&C.others||[]).reduce(((s,{value:t=e.createType("Compact<Balance>")})=>{const n=t.unwrap();return s.isZero()||n.lt(s)?n:s}),d.nw),E=g.toString(),M=j(w,f),D=i.isZero()?void 0:M[M.length-1];x[l]={accountId:g,bondOther:S.sub(I),bondOwn:I,bondShare:0,bondTotal:S,commissionPer:k.commission.unwrap().toNumber()/1e7,exposureMeta:N||h,exposurePaged:C||m,isActive:!A,isBlocking:!(!k.blocked||!k.blocked.isTrue),isElected:!y(t)&&t.nextElected.some((e=>e.eq(g))),isFavorite:n.includes(E),isNominating:(C&&C.others||[]).reduce(((e,t)=>{const n=t.who.toString();return u[n]=(u[n]||d.nw).add(t.value?.toBn()||d.nw),e||s.includes(n)}),s.includes(E)),key:E,knownLength:a.sub(M[0]||a),lastPayout:p&&D&&D.gt(p)&&!r.eq(d.If)?i.sub(D).mul(o):void 0,minNominated:P,numNominators:(C&&C.others||[]).length,numRecentPayouts:p?M.filter((e=>e.gte(p))).length:0,rankBondOther:0,rankBondOwn:0,rankBondTotal:0,rankNumNominators:0,rankOverall:0,rankReward:0,skipRewards:A,stakedReturn:0,stakedReturnCmp:0,validatorPrefs:k,withReturns:c}}return[x,u]}function C(e,s){const t=s.avgStaked,n=s.validators;return n?(t&&!t.isZero()&&n.forEach((s=>{if(!s.skipRewards&&s.withReturns){const n=t.mul(d.S8).imuln(e.stakedReturn).div(s.bondTotal);s.stakedReturn=(n.gt(d.Ew)?d.Ew:n).toNumber()/d.S8.toNumber(),s.stakedReturnCmp=s.stakedReturn*(100-s.commissionPer)/100}})),{...s,validators:w(n)}):s}const N=(0,c.e)("useSortedTargets",(function(e,s){const{api:t}=(0,a.h)(),{allAccounts:c}=(0,o.x)(),{counterForNominators:u,counterForValidators:j,historyDepth:v,maxNominatorsCount:y,maxValidatorsCount:w,minNominatorBond:N,minValidatorBond:I,totalIssuance:S}=(0,i.L)([t.query.staking.historyDepth,t.query.staking.counterForNominators,t.query.staking.counterForValidators,t.query.staking.maxNominatorsCount,t.query.staking.maxValidatorsCount,t.query.staking.minNominatorBond,t.query.staking.minValidatorBond,t.query.balances?.totalIssuance],b),A=(0,r.W7)(t.derive.staking.electedInfo,[{...x,withClaimedRewardsEras:s,withLedger:s}]),P=(0,r.W7)(t.derive.staking.waitingInfo,[{...g,withClaimedRewardsEras:s,withLedger:s}]),E=(0,r.W7)(t.derive.session.info,void 0,f),M=(0,n.useMemo)((()=>A&&E&&S&&P?function(e,s,t,n,a,o,i,r){const[l,c]=k(e,s,t,a,i,r,!0),[u]=k(e,s,n,a,i),p=l.filter((({isActive:e})=>e)).map((({bondTotal:e})=>e)).sort(((e,s)=>e.cmp(s))),x=p.reduce(((e,s)=>e.iadd(s)),new(m())(0)),g=x.divn(p.length),f=Object.values(c).reduce(((e,s)=>e.isZero()||s.lt(e)?s:e),d.nw),b=(0,h.a)([l,u]),j=b.map((({commissionPer:e})=>e)).sort(((e,s)=>e-s)),v=Math.floor(j.length/2),y=j.length?j.length%2?j[v]:(j[v-1]+j[v])/2:0,w=u.map((({key:e})=>e)),C=(0,h.a)([l.map((({key:e})=>e)),w]),N=(0,h.a)([l.filter((({isBlocking:e})=>!e)).map((({key:e})=>e)),u.filter((({isBlocking:e})=>!e)).map((({key:e})=>e))]);return{avgStaked:g,lastEra:i.lastEra,lowStaked:p[0]||d.nw,medianComm:y,minNominated:f,nominateIds:N,nominators:Object.keys(c),totalIssuance:o,totalStaked:x,validatorIds:C,validators:b,waitingIds:w}}(t,c,A,P,e,S,E,t.consts.staking.historyDepth||v):p),[t,c,A,e,v,E,S,P]),D=(0,l.V)(M?.totalStaked);return(0,n.useMemo)((()=>({counterForNominators:u,counterForValidators:j,historyDepth:t.consts.staking.historyDepth||v,inflation:D,maxNominatorsCount:y,maxValidatorsCount:w,medianComm:0,minNominated:d.nw,minNominatorBond:N,minValidatorBond:I,...D?.stakedReturn?C(D,M):M})),[t,M,u,j,v,D,y,w,N,I])}))},87292:(e,s,t)=>{t.d(s,{Z:()=>l});var n=t(52322),a=t(2784),o=t(68235),i=t(90760);const r=o.zo.div`
  font-size: var(--font-size-small);
  padding: 1rem 0.5rem;
  text-align: center;

  .ui--Badge, .ui--Tag {
    margin-right: 0.5rem;
  }

  span {
    vertical-align: middle;

    * {
      vertical-align: middle;
    }

    + span {
      margin-left: 1rem;
    }
  }
`,l=a.memo((function({className:e,isRelay:s,minCommission:t}){const{t:a}=(0,i.$)();return(0,n.jsxs)(r,{className:e,children:[(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"blue",icon:"chevron-right"}),(0,n.jsx)("span",{children:a("Next session")})]}),t&&(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"red",icon:"cancel"}),(0,n.jsx)("span",{children:a("Chilled")})]}),s&&(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"purple",icon:"vector-square"}),(0,n.jsx)("span",{children:a("Para validator")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"green",info:"5"}),(0,n.jsx)("span",{children:a("Produced blocks")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"green",icon:"envelope"}),(0,n.jsx)("span",{children:a("Online message")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"green",icon:"hand-paper"}),(0,n.jsx)("span",{children:a("Nominating")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"red",icon:"balance-scale-right"}),(0,n.jsx)("span",{children:a("Oversubscribed")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"red",icon:"skull-crossbones"}),(0,n.jsx)("span",{children:a("Slashed")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Ct,{color:"red",icon:"user-slash"}),(0,n.jsx)("span",{children:a("Blocks nominations")})]}),(0,n.jsxs)("span",{children:[(0,n.jsx)(o.Vp,{color:"lightgrey",label:"1,220"}),(0,n.jsx)("span",{children:a("Era points")})]})]})}))},75030:(e,s,t)=>{t.d(s,{Z:()=>R});var n=t(52322),a=t(2784),o=t(68235),i=t(95209),r=t(90760),l=t(90778),c=t(38894),d=t(52107),u=t(63985);const m=a.memo((function({className:e,isDisabled:s,ownAccounts:t,params:{minCreateBond:i,minNominatorBond:m,nextPoolId:h}}){const{t:p}=(0,r.$)(),{api:x}=(0,l.h)(),[g,f]=(0,c.O)(),[b,j]=(0,a.useState)(null),[v,y]=(0,a.useState)(),[w,k]=(0,a.useState)(""),C=(0,a.useMemo)((()=>i&&m&&(0,d.x)(i,m,x.consts.balances.existentialDeposit)),[x,i,m]),N=(0,u.Z)(b,v,C),I=(0,a.useMemo)((()=>!w||w.length<3||w.length>32),[w]),S=(0,a.useMemo)((()=>v&&b&&!N&&h?x.tx.utility.batch([x.tx.nominationPools.create(v,b,b,b),x.tx.nominationPools.setMetadata(h,w)]):null),[x,b,v,N,w,h]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"plus",isDisabled:s||!C,label:p("Add pool"),onClick:f}),g&&(0,n.jsxs)(o.u_,{className:e,header:p("Create nomination pool"),onClose:f,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:p("The origin account will also be set as the pool admin, nominator and state toggler."),children:(0,n.jsx)(o.rp,{filter:t,label:p("create pool from"),onChange:j,type:"account",value:b,withExclude:!0})}),(0,n.jsx)(o.u_.Columns,{hint:p("The initial value to assign to the pool. It is set to the maximum of the minimum bond and the minimum nomination value."),children:(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:C,isError:N,label:p("initial value"),onChange:y})}),(0,n.jsx)(o.u_.Columns,{hint:p("The metadata description to set for this pool"),children:(0,n.jsx)(o.II,{isError:I,label:p("description"),maxLength:32,onChange:k})}),(0,n.jsx)(o.u_.Columns,{hint:p("The id that will be assigned to this nomination pool."),children:(0,n.jsx)(o.Rn,{defaultValue:h,isDisabled:!0,label:p("pool id")})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:b,extrinsic:S,icon:"plus",isDisabled:!b||N||I,label:p("Create"),onStart:f})})]})]})}));var h=t(58607);const p=a.memo((function({className:e,isDisabled:s,ownAccounts:t,params:{minMemberBond:i},poolId:d}){const{t:m}=(0,r.$)(),{api:h}=(0,l.h)(),[p,x]=(0,c.O)(),[g,f]=(0,a.useState)(null),[b,j]=(0,a.useState)(),v=(0,u.Z)(g,b,i);return s?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.zx,{icon:"plus",isDisabled:!i,label:m("Join"),onClick:x}),p&&(0,n.jsxs)(o.u_,{className:e,header:m("Join nomination pool"),onClose:x,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:m("The account that will join the pool."),children:(0,n.jsx)(o.rp,{filter:t,label:m("join pool from"),onChange:f,type:"account",value:g,withExclude:!0})}),(0,n.jsx)(o.u_.Columns,{hint:m("The initial value to assign to the pool. It is set to the minimum value required to join a pool."),children:(0,n.jsx)(o.H,{autoFocus:!0,defaultValue:i,isError:v,label:m("initial value"),onChange:j})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:g,icon:"plus",isDisabled:!g||v,label:m("Join"),onStart:x,params:[b,d],tx:h.tx.nominationPools.join})})]})]})}));var x=t(19042);const g=o.zo.tr`
  .label-column-right,
  .label-column-left{
    display: flex;
    align-items: center;

    .label {
      width: 50%;
    }
  }

  .label {
    text-align: right;
    padding: 0 1.7rem 0 0;
    line-height: normal;
    color: var(--color-label);
    text-transform: lowercase;
  }

  .clamp {
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
    box-orient: vertical;
    display: -webkit-box;
    line-clamp: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,f=a.memo((function({className:e="",members:s,ownAccounts:t,params:i,poolId:l}){const{t:d}=(0,r.$)(),u=(0,x.Z)(l),[m,f]=(0,c.O)(!1),b=(0,a.useCallback)((()=>s.map((({accountId:e,member:s},t)=>(0,n.jsx)(o.ax,{balance:s.points,value:e,withBalance:!0,withShrink:!0},`${t}:${e}`)))),[s]),j=(0,a.useCallback)((()=>u?.nominating.map(((e,s)=>(0,n.jsx)(o.ax,{value:e,withShrink:!0},`${s}:${e}`)))),[u]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g,{className:`${e} isFirst isExpanded ${m?"":"isLast"}`,children:[(0,n.jsx)(o.iA.Column.Id,{value:l}),(0,n.jsx)("td",{className:"start",children:(0,n.jsx)("div",{className:m?"":"clamp",children:u?u.metadata:(0,n.jsx)("span",{className:"--tmp",children:"This is a pool placeholder"})})}),(0,n.jsx)("td",{className:"number media--1100",children:u?u.bonded.state.type:(0,n.jsx)("span",{className:"--tmp",children:"Destroying"})}),(0,n.jsx)(o.iA.Column.Balance,{value:u?.bonded.points,withLoading:!0}),(0,n.jsx)("td",{className:"number media--1400",children:u&&!u.rewardClaimable.isZero()&&(0,n.jsx)(h.Z,{value:u.rewardClaimable})}),(0,n.jsx)("td",{className:"number",children:u&&u.bonded.commission.current.value&&(0,n.jsx)("div",{children:u.bonded.commission.current.value[0]?.toHuman()})}),(0,n.jsx)("td",{className:"number",children:u&&0!==u.nominating.length&&(0,n.jsx)(o.n0,{className:"media--1300",empty:d("No nominees"),renderChildren:j,summary:d("Nominees ({{count}})",{replace:{count:u.nominating.length}})})}),(0,n.jsx)("td",{className:"number",children:s&&0!==s.length&&(0,n.jsx)(o.n0,{className:"media--1200",empty:d("No members"),renderChildren:b,summary:d("Members ({{count}})",{replace:{count:s.length}})})}),(0,n.jsx)("td",{className:"button",children:u?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p,{isDisabled:!u.bonded.state.isOpen||!!i.maxMembersPerPool&&!u.bonded.memberCounter.ltn(i.maxMembersPerPool),ownAccounts:t,params:i,poolId:l}),(0,n.jsx)(o.Vh,{expanded:m,onClick:f})]}):(0,n.jsx)(o.$j,{noLabel:!0})})]}),u&&m&&(0,n.jsxs)(g,{className:`${e} isExpanded isLast`,children:[(0,n.jsxs)("td",{colSpan:4,children:[(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("creator")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.bonded.roles.depositor})})]}),u.bonded.roles.root.isSome&&(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("root")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.bonded.roles.root.unwrap()})})]}),u.bonded.roles.nominator.isSome&&(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("nominator")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.bonded.roles.nominator.unwrap()})})]}),u.bonded.roles.stateToggler?.isSome&&(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("toggler")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.bonded.roles.stateToggler.unwrap()})})]})]}),(0,n.jsxs)("td",{colSpan:4,children:[(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("stash")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.stashId})})]}),(0,n.jsxs)("div",{className:"label-column-right",children:[(0,n.jsx)("div",{className:"label",children:d("rewards")}),(0,n.jsx)("div",{className:"inline-balance",children:(0,n.jsx)(o.ax,{value:u.rewardId})})]})]})]})]})}));var b=t(51240),j=t(39824),v=t(9118),y=t(11677);const w=[],k={transform:e=>e.reduce(((e,[{args:[s]},t])=>{if(t.isSome){const n=t.unwrap(),a=n.poolId.toString();e[a]||(e[a]=[]),e[a].push({accountId:s.toString(),member:n})}return e}),{})},C={transform:([[e],s])=>e.filter(((e,t)=>s[t].isSome)).map(((e,t)=>({accountId:e.toString(),member:s[t].unwrap()}))),withParamsTransform:!0};function N(e){const s=[];return e.forEach((({event:{data:e,method:t}})=>{if("Bonded"===t){const[t,,,n]=e;n.isTrue&&s.push(t)}})),{added:s,removed:[]}}const I=(0,y.e)("useMembers",(function(){const{api:e}=(0,l.h)(),[s,t]=(0,a.useState)(),n=(0,b.t)(e.query.nominationPools.poolMembers,[],k),o=(0,j.N)([e.events.nominationPools.Bonded],N,w),i=(0,v.W7)(o&&0!==o.length&&e.query.nominationPools.poolMembers.multi,[o],C);return(0,a.useEffect)((()=>{n&&t(n)}),[n]),(0,a.useEffect)((()=>{i&&t((e=>e&&function(e,s){return s.reduce(((e,s)=>{const t=s.member.poolId.toString(),n=[];return e[t]&&e[t].forEach((e=>{e.accountId!==s.accountId&&n.push(e)})),n.push(s),e[t]=n,e}),{...e})}(e,i)))}),[i]),s})),S=a.memo((function({className:e,ids:s,ownPools:t,params:l}){const{t:c}=(0,r.$)(),d=I(),[u,h]=(0,a.useState)((()=>t?.length?0:1)),p=(0,a.useMemo)((()=>t&&(0,i.a)(t.map((({members:e})=>Object.keys(e))))),[t]),x=(0,a.useMemo)((()=>!s||!!l.maxPools&&s.length>l.maxPools),[s,l]),g=(0,a.useMemo)((()=>t&&s?u?s:s.filter((e=>t.some((({poolId:s})=>e.eq(s))))):void 0),[s,t,u]),b=(0,a.useMemo)((()=>[[c("pools"),"start",2],[c("state"),"media--1100"],[c("points")],[c("claimable"),"media--1400"],[c("commission")],[void 0,void 0,3]]),[c]),j=(0,a.useRef)([{text:c("Own pools"),value:"mine"},{text:c("All pools"),value:"all"}]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o.zx.Group,{children:[(0,n.jsx)(o.tX,{onChange:h,options:j.current,value:u}),(0,n.jsx)(m,{isDisabled:x,ownAccounts:p,params:l})]}),(0,n.jsx)(o.iA,{className:e,empty:d&&g&&c("No available nomination pools"),emptySpinner:c("Retrieving nomination pools"),header:b,children:d&&g?.map((e=>(0,n.jsx)(f,{members:d[e.toString()],ownAccounts:p,params:l,poolId:e},e.toString())))})]})}));var A=t(65968),P=t(14681);const E=a.memo((function({className:e,params:{maxMembers:s,maxMembersPerPool:t,maxPools:a},poolCount:i}){const{t:l}=(0,r.$)();return(0,n.jsxs)(o.Ty,{className:e,children:[(0,n.jsx)(o.Jy,{label:l("pools"),children:(0,A.h)(i)&&(0,n.jsxs)(n.Fragment,{children:[(0,P.u)(i),a>0&&(0,n.jsxs)(n.Fragment,{children:[" / ",(0,P.u)(a)]})]})}),(0,n.jsxs)("section",{children:[s>0&&(0,n.jsx)(o.Jy,{label:l("max. members"),children:(0,P.u)(s)}),t>0&&(0,n.jsx)(o.Jy,{label:l("max. members / pool"),children:(0,P.u)(t)})]})]})}));var M=t(65857),D=t(54890),T=t(95292);const F={defaultValue:{lastPoolId:T.nw,maxMembers:0,maxMembersPerPool:0,maxPools:0,nextPoolId:T.If},transform:([e,s,t,n,a,o,i])=>({lastPoolId:e,maxMembers:s.unwrapOr(T.nw).toNumber(),maxMembersPerPool:t.unwrapOr(T.nw).toNumber(),maxPools:n.unwrapOr(T.nw).toNumber(),minCreateBond:a,minJoinBond:o,minMemberBond:o,minNominatorBond:i,nextPoolId:e.add(T.If)})},q=(0,y.e)("useParams",(function(){const{api:e}=(0,l.h)();return(0,D.L)([e.query.nominationPools.lastPoolId,e.query.nominationPools.maxPoolMembers,e.query.nominationPools.maxPoolMembersPerPool,e.query.nominationPools.maxPools,e.query.nominationPools.minCreateBond,e.query.nominationPools.minJoinBond,e.query.staking.minNominatorBond],F)}));var O=t(12298);const _={transform:e=>e.map((({args:[e]})=>e)).sort(((e,s)=>e.cmp(s)))};function V(e){const s=[],t=[];return e.forEach((({event:{data:e,method:n}})=>{"Created"===n?s.push(e[1]):t.push(e[0])})),{added:s,removed:t}}const B=(0,y.e)("usePoolIds",(function(){const{api:e}=(0,l.h)(),s=(0,O.k)(e.query.nominationPools.bondedPools,[],_);return(0,j.N)([e.events.nominationPools.Created,e.events.nominationPools.Destroyed],V,s)})),R=a.memo((function({className:e,ownPools:s}){const t=B(),a=(0,M.Z)(),o=q();return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(E,{params:o,poolCount:t?.length}),(0,n.jsx)(S,{ids:t,ownPools:a||s,params:o})]})}))},63985:(e,s,t)=>{t.d(s,{Z:()=>d});var n=t(2784),a=t(90778),o=t(9118),i=t(11677),r=t(94158),l=t(95292);const c=["referenda","convictionVoting","pyconvot"],d=(0,i.e)("useAmountError",(function(e,s,t){const{api:i}=(0,a.h)(),d=(0,o.W7)(!!e&&i.derive.balances.all,[e]);return(0,n.useMemo)((()=>{if(!s||s.isZero()||!t||t.gt(s)||!d)return!0;const e=d.lockedBreakdown.filter((e=>c.includes((0,r.r)(e.id.toHex())))).reduce(((e,s)=>e.add(s.amount)),l.nw),n=(d.transferable||d.availableBalance).add(e).sub(i.consts.balances.existentialDeposit);return s.gt(n)}),[i,s,d,t])}))},65857:(e,s,t)=>{t.d(s,{Z:()=>d});var n=t(2784),a=t(90778),o=t(34814),i=t(9118),r=t(11677),l=t(43002);const c={transform:([[e],s])=>{const t=[];for(let n=0;n<e.length;n++)if(s[n].isSome){const a=s[n].unwrap();let o=t.find((({poolId:e})=>e.eq(a.poolId)));o||(o={members:{},poolId:a.poolId},t.push(o)),o.members[e[n]]=a}return t},withParamsTransform:!0},d=(0,r.e)("useOwnPools",(function(){const{api:e}=(0,a.h)(),{allAccounts:s}=(0,o.x)(),t=(0,i.W7)(e.query.nominationPools?.poolMembers.multi,[s],c);return(0,n.useMemo)((()=>t?.map((s=>({...s,...(0,l.i)(e,s.poolId)})))),[e,t])}))},43002:(e,s,t)=>{t.d(s,{Z:()=>p,i:()=>h});var n=t(2784),a=t(90778),o=t(11677),i=t(64021),r=t(51330),l=t(57928);const c=new Uint8Array(32),d=(0,i.d)("modl"),u={bitLength:32,isLe:!0};function m(e,s,t,n){return e.registry.createType("AccountId32",(0,r.e)(d,s,new Uint8Array([n]),(0,l.a)(t,u),c)).toString()}function h(e,s){const t=e.consts.nominationPools.palletId.toU8a();return{rewardId:m(e,t,s,1),stashId:m(e,t,s,0)}}const p=(0,o.e)("usePoolAccounts",(function(e){const{api:s}=(0,a.h)();return(0,n.useMemo)((()=>h(s,e)),[s,e])}))},19042:(e,s,t)=>{t.d(s,{Z:()=>u});var n=t(2784),a=t(90778),o=t(54890),i=t(11677),r=t(52107),l=t(95292),c=t(43002);const d={defaultValue:null,transform:([e,s,t,n,a])=>{return e.isSome&&t.isSome?{bonded:e.unwrap(),metadata:s.length?(o=s.isUtf8?s.toUtf8():s.toString(),o.replace(/[^\x20-\x7E]/g,"")):null,nominating:n.unwrapOr({targets:[]}).targets.map((e=>e.toString())),reward:t.unwrap(),rewardClaimable:a.data.free}:null;var o}},u=(0,i.e)("usePoolInfo",(function(e){const{api:s}=(0,a.h)(),t=(0,c.Z)(e),i=(0,o.L)([[s.query.nominationPools.bondedPools,e],[s.query.nominationPools.metadata,e],[s.query.nominationPools.rewardPools,e],[s.query.staking.nominators,t.stashId],[s.query.system.account,t.rewardId]],d);return(0,n.useMemo)((()=>i&&{...t,...i,rewardClaimable:(0,r.x)(l.nw,i.rewardClaimable.sub(s.consts.balances.existentialDeposit))}),[s,i,t])}))},97473:(e,s,t)=>{t.d(s,{Z:()=>pe});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(54131),c=t(33661),d=t(75030),u=t(87292),m=t(90760),h=t(9118),p=t(11677),x=t(33403);const g={useExposure:{},useHeartbeat:{}},f={useElectedValidators:{},usePoints:{},useValidatorsActive:{},useValidatorsAll:{},useValidatorsWaiting:{}};function b(e,s,t){return(0,a.useEffect)((()=>{t&&(g[e][s]={value:t})}),[s,e,t]),t||g[e][s]?.value}function j(e,s){return(0,a.useEffect)((()=>{s&&(f[e]={value:s})}),[e,s]),s||f[e]?.value}var v=t(34814),y=t(12298);const w={transform:e=>e.map((({args:[,e]})=>e.toString()))},k=(0,p.e)("useElectedValidators",(function({currentEra:e}){const{api:s}=(0,r.h)(),t=(0,a.useMemo)((()=>e&&[e]),[e]);return j("useElectedValidators",(0,y.k)(t&&s.query.staking.erasStakers,t,w))}));function C(e,s){return e.isFavorite===s.isFavorite?e.isOwned===s.isOwned?e.isElected===s.isElected?0:e.isElected?-1:1:e.isOwned?-1:1:e.isFavorite?-1:1}const N=(0,p.e)("useTaggedValidators",(function(e,s,t){const{allAccounts:n}=(0,v.x)(),o=k(s),i=(0,a.useMemo)((()=>o&&t&&function(e,s){return e.map((e=>{const t=s.includes(e.stashId);return e.isElected!==t?(0,x.Z)({},e,{isElected:t}):e}))}(t,o)),[o,t]);return(0,a.useMemo)((()=>i&&function(e,s,t){return t.map((t=>{const n=s.includes(t.stashId),a=e.includes(t.stashId);return t.isFavorite!==n||t.isOwned!==a?(0,x.Z)({},t,{isFavorite:n,isOwned:a}):t})).sort(C)}(n,e,i)),[n,e,i])})),I={transform:e=>e.map(((e,s)=>{const t=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${t}:${s}`,stashId:t,stashIndex:s}}))},S={transform:e=>e.map((e=>e.toNumber()))},A=(0,p.e)("useValidatorsActive",(function(e,s){const{api:t}=(0,r.h)(),n=(0,h.W7)(t.query.session.validators,void 0,I),o=(0,h.W7)((t.query.parasShared||t.query.shared)?.activeValidatorIndices,void 0,S),i=(0,a.useMemo)((()=>o&&n?n.map(((e,s)=>o.includes(s)?(0,x.Z)({isPara:!0},e):e)):n),[o,n]);return j("useValidatorsActive",N(e,s,i))}));var P=t(47623),E=t(38894),M=t(58607),D=t(14681),T=t(48801),F=t.n(T);const q={transform:({others:e,own:s,total:t})=>({others:e.map((({value:e,who:s})=>({value:e.unwrap(),who:s.toString()}))).sort(((e,s)=>s.value.cmp(e.value))),own:s.unwrap(),total:t.unwrap()})},O=(0,p.e)("useExposure",(function({stashId:e},{activeEra:s}){const{api:t}=(0,r.h)(),n=(0,a.useMemo)((()=>s&&[s,e]),[s,e]),o=(0,h.W7)(n&&t.query.staking.erasStakers,n,q),i=(0,h.W7)(n&&t.query.staking.erasStakersClipped,n,q),l=(0,a.useMemo)((()=>o&&i&&function(e,s){let t;const n=e.others.filter((({who:e})=>!s.others.find((s=>e===s.who))));return n.length&&(t={others:n,total:n.reduce(((e,{value:s})=>e.iadd(s)),new(F())(0))}),{clipped:s,exposure:e,waiting:t}}(o,i)),[i,o]);return b("useExposure",e,l)}));var _=t(65968),V=t(47538);const B={},R={transform:e=>e.toNumber()},Z={transform:e=>e.isSome},$=(0,p.e)("useHeartbeat",(function({stashId:e,stashIndex:s},{currentSession:t}){const{api:n}=(0,r.h)(),o=(0,a.useMemo)((()=>-1===s?void 0:t&&{authoredBlocks:[t,e],receivedHeartbeats:[t,s]}),[t,e,s]),i=(0,h.W7)(o&&n.query.imOnline.authoredBlocks,o?.authoredBlocks,R),l=(0,h.W7)(o&&n.query.imOnline.receivedHeartbeats,o?.receivedHeartbeats,Z),c=(0,a.useMemo)((()=>(0,_.h)(i)&&(0,V.j)(l)&&{authoredBlocks:i,isOnline:!(!i&&!l)}),[i,l]);return b("useHeartbeat",e,c)||B})),L=a.memo((function({children:e,className:s="",isExpanded:t}){return t?(0,n.jsxs)("tr",{className:`${s} isExpanded isLast`,children:[(0,n.jsx)("td",{}),(0,n.jsx)("td",{}),e,(0,n.jsx)("td",{})]}):null})),z=a.memo((function({children:e,className:s="",isExpanded:t}){return(0,n.jsxs)("tr",{className:`${s} isExpanded ${t?"":"isLast"} packedTop`,children:[(0,n.jsx)("td",{}),e,(0,n.jsx)("td",{})]})})),W=i.zo.div`
  .authoredBlocks {
    vertical-align: top;
    font-size: var(--font-percent-tiny);
  }
`,H=a.memo((function({className:e,heartbeat:{authoredBlocks:s,isOnline:t}={},isChilled:o,nominators:r,validator:{isElected:l,isPara:c}}){const{allAccounts:d}=(0,v.x)(),u=(0,a.useMemo)((()=>r&&r.some((e=>d.includes(e)))),[d,r]),m=(0,n.jsx)(i.Ct,{className:"opaque",color:"gray"});return(0,n.jsxs)(W,{className:e,children:[u?(0,n.jsx)(i.Ct,{color:"green",icon:"hand-paper"}):m,c?(0,n.jsx)(i.Ct,{color:"purple",icon:"vector-square"}):m,o?(0,n.jsx)(i.Ct,{color:"red",icon:"cancel"}):l?(0,n.jsx)(i.Ct,{color:"blue",icon:"chevron-right"}):m,t?s?(0,n.jsx)(i.Ct,{color:"green",info:(0,n.jsx)("span",{className:"authoredBlocks",children:s})}):(0,n.jsx)(i.Ct,{color:"green",icon:"envelope"}):m]})})),U=a.memo((function({children:e,className:s="",heartbeat:t,isExpanded:a,toggleExpanded:o,toggleFavorite:r,validator:l}){return(0,n.jsxs)("tr",{className:`${s} isExpanded isFirst packedBottom`,children:[(0,n.jsx)(i.iA.Column.Favorite,{address:l.stashId,isFavorite:l.isFavorite,toggle:r}),(0,n.jsx)("td",{className:"statusInfo",rowSpan:2,children:(0,n.jsx)(H,{heartbeat:t,validator:l})}),(0,n.jsxs)("td",{className:"address relative all",children:[(0,n.jsx)(i.N,{value:l.stashId}),e]}),(0,n.jsx)(i.iA.Column.Expand,{isExpanded:a,toggle:o})]})}));function J({className:e=""}){return(0,n.jsx)("td",{className:e})}const G=a.memo((function({className:e="",points:s,sessionInfo:t,toggleFavorite:o,validator:r}){const[l,c]=(0,E.O)(),d=(0,a.useRef)({counter:0,points:0}),u=O(r,t),m=$(r,t),h=(0,a.useMemo)((()=>s&&d.current.points!==s?(d.current.points=s,d.current.counter=(d.current.counter+1)%25,`greyAnim-${d.current.counter}`):""),[s,d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{className:e,heartbeat:m,isExpanded:l,toggleExpanded:c,toggleFavorite:o,validator:r,children:s&&(0,n.jsx)(i.Vp,{className:`${h} absolute`,color:"lightgrey",label:(0,D.u)(s)})}),(0,n.jsx)(z,{className:e,isExpanded:l,children:(0,n.jsx)(i.iA.Column.Balance,{className:"relative",label:u?.waiting&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"("}),(0,n.jsx)(M.Z,{value:u.waiting.total}),(0,n.jsxs)("span",{children:[", ",u.waiting.others.length,")"]})]}),value:u?.clipped?.total,withLoading:!0})}),(0,n.jsx)(L,{className:e,isExpanded:l,children:(0,n.jsx)(J,{validator:r})})]})})),Q=a.memo((function({className:e="",legend:s,points:t,sessionInfo:o,toggleFavorite:r,validatorsActive:l}){const{t:c}=(0,m.$)(),d=(0,P.q)(),u=(0,a.useRef)([[c("validators"),"start",4]]);return(0,n.jsx)(i.iA,{className:e,empty:d&&l&&c("No session validators found"),emptySpinner:c("Retrieving session validators"),header:u.current,isSplit:!0,legend:s,children:d&&l?.map((e=>(0,n.jsx)(G,{points:t?.[e.stashId],sessionInfo:o,toggleFavorite:r,validator:e},e.key)))})}));var X=t(39824);const K=[],Y={transform:e=>e.map((({args:[e]})=>e))};function ee(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"Bonded"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const se=(0,p.e)("useValidatorsAll",(function(e,s){const{api:t}=(0,r.h)(),n=(0,y.k)(t.query.staking.validators,K,Y),o=(0,X.N)([t.events.staking.Bonded],ee,n),i=(0,a.useMemo)((()=>function(e){return e?.map((e=>{const s=e.toString();return{isElected:!1,isFavorite:!1,isOwned:!1,key:`${s}::-1`,stashId:s,stashIndex:-1}}))}(o)),[o]);return j("useValidatorsAll",N(e,s,i))})),te=(0,p.e)("useValidatorsWaiting",(function(e,s,t){const n=se(e,s);return j("useValidatorsWaiting",(0,a.useMemo)((()=>{return n&&t&&(e=t,n.filter((({stashId:s})=>!e.some((e=>e.stashId===s)))));var e}),[t,n]))}));function ne({className:e=""}){return(0,n.jsx)("td",{className:e})}const ae=a.memo((function({className:e="",toggleFavorite:s,validator:t}){const[a,o]=(0,E.O)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U,{className:e,isExpanded:a,toggleExpanded:o,toggleFavorite:s,validator:t}),(0,n.jsx)(z,{className:e,isExpanded:a,children:(0,n.jsx)("td",{})}),(0,n.jsx)(L,{className:e,isExpanded:a,children:(0,n.jsx)(ne,{validator:t})})]})})),oe=a.memo((function({className:e="",favorites:s,legend:t,sessionInfo:o,toggleFavorite:r,validatorsActive:l}){const{t:c}=(0,m.$)(),d=(0,P.q)(),u=te(s,o,l),h=(0,a.useRef)([[c("waiting"),"start",4]]);return(0,n.jsx)(i.iA,{className:e,empty:d&&u&&c("No waiting validators found"),emptySpinner:c("Retrieving waiting validators"),header:h.current,isSplit:!0,legend:t,children:d&&u?.map((e=>(0,n.jsx)(ae,{toggleFavorite:r,validator:e},e.key)))})}));var ie=t(95292);const re={transform:({individual:e})=>[...e.entries()].filter((([,e])=>e.gt(ie.nw))).reduce(((e,[s,t])=>(e[s.toString()]=t.toNumber(),e)),{})},le=(0,p.e)("usePoints",(function({activeEra:e}){const{api:s}=(0,r.h)(),t=(0,a.useMemo)((()=>e&&[e]),[e]);return j("usePoints",(0,h.W7)(t&&s.query.staking.erasRewardPoints,t,re))})),ce=i.zo.div`
  .ui--Table table {
    td.statusInfo {
      padding: 0 0 0 0.5rem;
      vertical-align: middle;

      > div {
        display: inline-block;
        max-width: 3.6rem;
        min-width: 3.6rem;

        .ui--Badge {
          margin: 0.125rem;

          &.opaque {
            opacity: var(--opacity-gray);
          }
        }
      }

      + td.address {
        padding-left: 0.5rem;
      }
    }
  }
`,de=a.memo((function({className:e="",favorites:s,isRelay:t,sessionInfo:o,toggleFavorite:r}){const{t:l}=(0,m.$)(),[c,d]=(0,a.useState)(0),h=A(s,o),p=le(o),x=(0,a.useRef)([{text:l("Active"),value:"active"},{text:l("Waiting"),value:"waiting"}]),g=(0,n.jsx)(u.Z,{isRelay:t});return(0,n.jsxs)(ce,{className:e,children:[(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.tX,{onChange:d,options:x.current,value:c})}),0===c?(0,n.jsx)(Q,{legend:g,points:p,sessionInfo:o,toggleFavorite:r,validatorsActive:h}):(0,n.jsx)(oe,{favorites:s,legend:g,sessionInfo:o,toggleFavorite:r,validatorsActive:h})]})})),ue={transform:e=>e.isSome?e.unwrap().index:null},me={transform:e=>e.unwrapOr(null)},he=(0,p.e)("useSessionInfo",(function(){const{api:e}=(0,r.h)(),s=(0,h.W7)(e.query.staking.activeEra,void 0,ue),t=(0,h.W7)(e.query.staking.currentEra,void 0,me),n=(0,h.W7)(e.query.session.currentIndex);return(0,a.useMemo)((()=>({activeEra:s,currentEra:t,currentSession:n})),[s,t,n])})),pe=a.memo((function({basePath:e}){const{t:s}=(0,m.$)(),{api:t}=(0,r.h)();(0,a.useEffect)((()=>()=>{!function(){for(const e of Object.keys(g))g[e]={};for(const e of Object.keys(f))f[e]={}}()}),[]);const[u,h]=(0,l.r)("staking:favorites"),p=he(),x=(0,a.useMemo)((()=>!!(t.query.parasShared||t.query.shared)?.activeValidatorIndices),[t]),b=(0,a.useRef)([{isRoot:!0,name:"sign",text:s("Validators")},(0,c.m)(t.query.nominationPools?.minCreateBond)&&{name:"pools",text:s("Pools")}]);return(0,n.jsxs)("main",{className:"staking--App",children:[(0,n.jsx)(i.mQ,{basePath:e,items:b.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(d.Z,{}),path:"pools"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(de,{favorites:u,isRelay:x,sessionInfo:p,toggleFavorite:h}),index:!0})]})})]})}))},90760:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-staking")}},46717:(e,s,t)=>{t.d(s,{Z:()=>z});var n=t(52322),a=t(2784),o=t(68235),i=t(73557),r=t(61349);function l(){return(0,r.$G)("app-storage")}var c=t(90778);const d=a.memo((function({onAdd:e}){const{t:s}=l(),{api:t}=(0,c.h)(),[i]=(0,a.useState)((()=>{const e=Object.keys(t.consts)[0],s=Object.keys(t.consts[e])[0];return{meta:t.consts[e][s].meta,method:s,section:e}})),[r,d]=(0,a.useState)(i),u=(0,a.useCallback)((()=>e({isConst:!0,key:r})),[e,r]);return(0,n.jsxs)("section",{className:"storage--actionrow",children:[(0,n.jsx)("div",{className:"storage--actionrow-value",children:(0,n.jsx)(o.eV,{defaultValue:i,label:s("selected constant query"),onChange:d})}),(0,n.jsx)("div",{className:"storage--actionrow-buttons",children:(0,n.jsx)(o.zx,{icon:"plus",onClick:u})})]})}));var u=t(89176),m=t(6046),h=t(44055),p=t(23601),x=t(1346),g=t(17751),f=t(55858),b=t(84789),j=t(74076);function v({creator:{meta:{type:e}}},s){return s.reduce(((e,s)=>e&&!(0,x.o)(s)&&!(0,x.o)(s.value)&&s.isValid),s.length===(e.isPlain?0:e.asMap.hashers.length))}function y(e,s,t){let n=[];if(s.isMap){const{hashers:t,key:a}=s.asMap;n=1===t.length?[(0,h.I)(e.lookup,a)]:e.lookup.getSiType(a).def.asTuple.map((s=>(0,h.I)(e.lookup,s)))}return n.map(((e,s)=>{let a;return t&&s===n.length-1?(a=(0,m.s)(`Option<${e}>`),a.withOptionActive=!0):a=(0,m.s)(e),{name:void 0,type:a}}))}function w(e,s){const t=s.filter((({value:t},n)=>!e||n!==s.length-1||!(0,g.F)(t)));return[t,t.length===s.length]}const k=o.zo.section`
  .ui--Column:last-child .ui--Labelled {
    padding-left: 0.5rem;

    label {
      left: 2.05rem; /* 3.55 - 1.5 (diff from padding above) */
    }
  }
`,C=a.memo((function({className:e="",onAdd:s}){const{t}=l(),{api:i}=(0,c.h)(),[{defaultValues:r,isIterable:d,key:m,params:h},x]=(0,a.useState)((()=>({defaultValues:void 0,isHeadKey:!0,isIterable:!1,key:i.query.timestamp?.now||i.query.system.events,params:[]}))),[{isValid:g,values:C},N]=(0,a.useState)((()=>({isValid:!0,values:[]}))),[{blockHash:I,textHash:S},A]=(0,a.useState)({blockHash:null,textHash:""}),P=(0,a.useMemo)((()=>i.query.timestamp?.now||i.query.system?.events||i.query.substrate.changesTrieConfig),[i]),[E,M,D]=(0,a.useMemo)((()=>{if(g)try{const[e]=w(d,C),s=e.map((({value:e})=>e)),t=s.length!==(m.creator.meta.type.isPlain?0:m.creator.meta.type.asMap.hashers.length);return[t,t&&m.creator.iterKey?m.creator.iterKey(...s).toHex():(0,f.c)((0,b.o)(m.creator(...s))[1]),t?null:m.creator.inspect(...s)]}catch{}return[!1,"0x",null]}),[d,g,m,C]),T=(0,a.useCallback)((()=>{const[e,t]=w(d,C);g&&s({blockHash:t?I:null,isConst:!1,key:m,params:e})}),[I,d,g,m,s,C]),F=(0,a.useCallback)((e=>A({blockHash:(0,j.vq)(e,256)?e:null,textHash:e})),[]),q=(0,a.useCallback)((e=>N({isValid:v(m,e),values:e})),[m]),O=(0,a.useCallback)((e=>{x(function(e,s){const{creator:{meta:{type:t},section:n}}=s,a=function(e,s){if(s.isPlain)return!0;const{hashers:t,key:n}=s.asMap;if(1===t.length)return e.lookup.getTypeDef(n).info!==p.u.Option;const a=e.lookup.getSiType(n).def.asTuple;return e.lookup.getTypeDef(a[a.length-1]).info!==p.u.Option}(e.registry,t);return{defaultValues:"session"===n&&t.isMap&&e.consts.session?.dedupKeyPrefix?[{isValid:!0,value:e.consts.session.dedupKeyPrefix.toHex()}]:null,isIterable:a,key:s,params:y(e.registry,t,a)}}(i,e)),q([])}),[q,i]),_=(0,a.useMemo)((()=>!!g&&w(d,C)[1]),[d,g,C]),{creator:{method:V,section:B}}=m;return(0,n.jsxs)(k,{className:`${e} storage--actionrow`,children:[(0,n.jsxs)("div",{className:"storage--actionrow-value",children:[(0,n.jsx)(o.nU,{defaultValue:P,label:t("selected state query"),onChange:O}),(0,n.jsx)(u.ZP,{onChange:q,onEnter:T,params:h,values:r},`${B}.${V}:params`),(0,n.jsx)(o.II,{isDisabled:!g||!_,isError:!!S&&!I,label:t("blockhash to query at"),onChange:F,placeholder:t("0x...")}),(0,n.jsxs)(o.P0,{className:"keyColumar",isPadded:!1,children:[(0,n.jsx)(o.P0.Column,{children:(0,n.jsx)(o.r_,{isDisabled:!0,label:t(E?"encoded partial key":"encoded storage key"),value:M,withCopy:!0})}),(0,n.jsx)(o.P0.Column,{children:(0,n.jsx)(o.R2,{inspect:D,label:t("encoded key details")})})]})]}),(0,n.jsx)("div",{className:"storage--actionrow-buttons",children:(0,n.jsx)(o.zx,{icon:"plus",isDisabled:!g,onClick:T})})]})}));var N=t(46610),I=t(88311);const S=a.memo((function({onAdd:e}){const{t:s}=l(),[{isValid:t,key:i},r]=(0,a.useState)((()=>({isValid:!1,key:new Uint8Array([])}))),c=(0,a.useCallback)((()=>{t&&e({isConst:!1,key:i})}),[t,i,e]),d=(0,a.useCallback)((e=>{const s=(0,N.Y)(e);r({isValid:0!==s.length,key:(0,I.N)(s)})}),[]);return(0,n.jsxs)("section",{className:"storage--actionrow",children:[(0,n.jsx)("div",{className:"storage--actionrow-value",children:(0,n.jsx)(o.II,{autoFocus:!0,label:s("hex-encoded storage key"),onChange:d,onEnter:c})}),(0,n.jsx)("div",{className:"storage--actionrow-buttons",children:(0,n.jsx)(o.zx,{icon:"plus",isDisabled:!t,onClick:c})})]})}));let A=-1;const P=a.memo((function({basePath:e,onAdd:s}){const{t}=l(),r=(0,a.useRef)([{isRoot:!0,name:"modules",text:t("Storage")},{name:"constants",text:t("Constants")},{name:"raw",text:t("Raw storage")}]),c=(0,a.useCallback)((e=>s({...e,id:++A})),[s]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.mQ,{basePath:e,items:r.current}),(0,n.jsx)(i.Z5,{children:(0,n.jsxs)(i.AW,{path:e,children:[(0,n.jsx)(i.AW,{element:(0,n.jsx)(d,{onAdd:c}),path:"constants"}),(0,n.jsx)(i.AW,{element:(0,n.jsx)(S,{onAdd:c}),path:"raw"}),(0,n.jsx)(i.AW,{element:(0,n.jsx)(C,{onAdd:c}),index:!0})]})})]})}));var E=t(69356),M=t(83488),D=t(19729),T=t(48358),F=t(56623);const q=[];function O(e,s){if(e){const e=s;return`const ${e.section}.${e.method}`}const t=s;if((0,T.U)(t)){const[,e]=(0,b.o)(t);return 58===e[0]?(0,F.z)(e):(0,f.c)(e)}return`${t.creator.section}.${t.creator.method}`}function _(e,{meta:s}){return(0,h.I)(e.lookup,s.type)}function V(e,{creator:{meta:{modifier:s,type:t}}}){const n=(0,D.P)(e,t);return s.isOptional?`Option<${n}>`:n}function B(e,s){const{blockHash:t,id:a,isConst:o,key:i,params:r=[]}=s;if(!q[a]){let a,l;if(o){const{method:s,section:t}=i;a=(0,E.withCallDiv)(`consts.${t}.${s}`,{withIndicator:!0}),l=_(e,i)}else{if((0,T.U)(i))a=(0,E.withCallDiv)("rpc.state.subscribeStorage",{paramName:"params",paramValid:!0,params:[[i]],transform:([e])=>e,withIndicator:!0});else{const e=r.map((({value:e})=>e)),{creator:{meta:{type:s}}}=i,n=s.isPlain?0:s.asMap.hashers.length,o=e.length!==n;a=(0,E.withCallDiv)("subscribe",{paramName:"params",paramValid:!0,params:o?[i.entries,...e]:t?[i.at,t,...e]:[i,...e],withIndicator:!0})}l=i.creator?.meta?V(e,i):"Raw"}const c={className:"ui--output"},d=a((e=>(0,n.jsx)("pre",{children:(0,M.Z)(l,e)})),c);q[s.id]=function(e,s,t,a){return{Component:s,refresh:()=>a((s=>(0,n.jsx)("pre",{children:(0,M.Z)(e,s)})),t),render:e=>a(e,t)}}(l,d,c,a)}return q[a]}const R=o.zo.div`
  margin-bottom: 0.25em;

  label {
    text-transform: none !important;
  }

  .ui.disabled.dropdown.selection {
    color: #aaa;
    opacity: 1;
  }

  .ui--IdentityIcon {
    margin: -10px 0;
    vertical-align: middle;
  }

  pre {
    margin: 0.5;

    .ui--Param-text {
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }

  .storage--actionrow-buttons {
    margin-top: -0.25rem; /* offset parent spacing for buttons */
  }
`,Z=a.memo((function({className:e="",onRemove:s,value:t}){const{api:i}=(0,c.h)(),[{Component:r},l,d]=(0,a.useMemo)((()=>[B(i.registry,t),O(t.isConst,t.key),t.isConst?_(i.registry,t.key):(0,T.U)(t.key)?"Raw":V(i.registry,t.key)]),[i,t]),u=(0,a.useCallback)((()=>{delete q[t.id],s(t.id)}),[s,t]);return r?(0,n.jsxs)(R,{className:`${e} storage--Query storage--actionrow`,children:[(0,n.jsx)("div",{className:"storage--actionrow-value",children:(0,n.jsx)(o.jN,{label:(0,n.jsxs)("div",{className:"storage--actionrow-label",children:[l,": ",d]}),children:(0,n.jsx)(r,{})})}),(0,n.jsx)("div",{className:"storage--actionrow-buttons",children:(0,n.jsx)(o.zx,{icon:"times",onClick:u},"close")})]}):null})),$=a.memo((function({onRemove:e,value:s}){return s?.length?(0,n.jsx)("section",{className:"storage--Queries",children:s.map((s=>(0,n.jsx)(Z,{onRemove:e,value:s},s.id)))}):null})),L=o.zo.main`
  .storage--actionrow {
    align-items: flex-start;
    display: flex;

    .ui--Button {
      margin: 0.25rem;
    }

    &.head {
      flex: 1 1 100%;
      margin: 0 auto;
      max-width: 620px;
    }
  }

  .storage--actionrow-value {
    flex: 1;
    min-width: 0;

    .ui--output {
      word-break: break-all;
    }
  }

  .storage--actionrow-buttons {
    flex: 0;
    padding: 0.5rem 0.25rem;
  }
`,z=a.memo((function({basePath:e,className:s=""}){const[t,o]=(0,a.useState)([]),i=(0,a.useCallback)((e=>o((s=>[e,...s]))),[]),r=(0,a.useCallback)((e=>o((s=>s.filter((s=>s.id!==e))))),[]);return(0,n.jsxs)(L,{className:`${s} storage--App`,children:[(0,n.jsx)(P,{basePath:e,onAdd:i}),(0,n.jsx)($,{onRemove:r,value:t})]})}))},54676:(e,s,t)=>{t.d(s,{Z:()=>b});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(74421),l=t(90778),c=t(61349);function d(){return(0,c.$G)("app-sudo")}const u=i.zo.section`
  align-items: flex-end;
  justify-content: center;

  .summary {
    text-align: center;
  }

  .sudoInputAddress {
    margin: -0.25rem 0.5rem -0.25rem 0;
  }

  .sudoLabelled {
    align-items: center;
  }
`,m=a.memo((function({allAccounts:e,className:s="",isMine:t,sudoKey:o}){const{t:r}=d(),{api:c}=(0,l.h)(),[m,h]=(0,a.useState)(null);(0,a.useEffect)((()=>{o&&!m&&h(o)}),[m,o]);const p=t&&!!m&&m!==o&&e.some((e=>e===m));return(0,n.jsxs)("section",{children:[(0,n.jsx)(u,{className:`${s} ui--row`,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.rp,{className:"sudoInputAddress",isInput:!0,label:r("sudo key"),onChange:h,type:"all",value:m}),(0,n.jsx)(i.cA,{accountId:o,icon:"sign-in-alt",isDisabled:!t||o===m,label:r("Reassign"),params:[m],tx:c.tx.sudo.setKey})]}):(0,n.jsx)(i.jN,{className:"ui--Dropdown sudoLabelled",label:r("sudo key"),withLabel:!0,children:(0,n.jsx)(i.ax,{value:o})})}),p&&(0,n.jsx)("article",{className:"warning padded",children:(0,n.jsx)("div",{children:r("You will no longer have sudo access")})})]})}));var h=t(38894),p=t(60404),x=t(33661);const g=i.zo.section`
  .sudoToggle {
    width: 100%;
    text-align: right;
    padding-top: 1rem;
  }
`,f=a.memo((function({className:e,isMine:s,sudoKey:t}){const{t:o}=d(),{api:r}=(0,l.h)(),[c,u]=(0,h.O)(),[m,f]=(0,a.useState)(null),b=(0,a.useCallback)((e=>{f((()=>e||null))}),[]);return s?(0,n.jsxs)(g,{className:e,children:[(0,n.jsx)(p.Z,{defaultValue:c?r.tx.sudo.sudoUncheckedWeight:r.tx.sudo.sudo,isDisabled:!0,label:o("submit the following change"),onChange:b},String(c)),(0,x.m)(r.tx.sudo.sudoUncheckedWeight)&&(0,n.jsx)(i.ZD,{className:"sudoToggle",label:o("with weight override"),onChange:u,value:c}),(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(i.cA,{accountId:t,extrinsic:m,icon:"sign-in-alt",isDisabled:!m,label:o(c?"Submit Sudo Unchecked":"Submit Sudo")})})]}):(0,n.jsx)("article",{className:"error padded",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(i.JO,{icon:"ban"}),o("You do not have access to the current sudo key")]})})})),b=a.memo((function({basePath:e}){const{t:s}=d(),{allAccounts:t,hasSudoKey:l,sudoKey:c}=(0,r.p)(),u=(0,a.useRef)([{isRoot:!0,name:"index",text:s("Sudo access")},{name:"key",text:s("Set sudo key")}]);return(0,n.jsxs)("main",{children:[(0,n.jsx)(i.mQ,{basePath:e,items:u.current}),l?(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(m,{allAccounts:t,isMine:l,sudoKey:c}),path:"key"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(f,{isMine:l,sudoKey:c}),index:!0})]})}):(0,n.jsx)("article",{className:"error padded",children:(0,n.jsxs)("div",{children:[(0,n.jsx)(i.JO,{icon:"ban"}),s("You do not have access to the current sudo key")]})})]})}))},95499:(e,s,t)=>{t.d(s,{Z:()=>b});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(70563),c=t(9118),d=t(51985);const u=a.memo((function({className:e="",members:s,prime:t}){const{t:o}=(0,d.$)(),r=(0,a.useRef)([[o("members"),"start",3]]);return(0,n.jsx)(i.iA,{className:e,empty:s&&o("No members found"),header:r.current,isSplit:!0,children:s?.map((e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(i.N,{value:e})}),(0,n.jsx)("td",{children:t===e&&(0,n.jsx)(i.Vp,{color:"green",hover:o("Committee prime member, default voting"),label:o("prime member")})}),(0,n.jsx)("td",{className:"all",children:" "})]},e)))})}));var m=t(14681);const h=a.memo((function({className:e="",members:s,proposalHashes:t,type:a}){const{t:o}=(0,d.$)(),{api:l}=(0,r.h)(),u=(0,c.W7)(l.derive[a].proposalCount);return(0,n.jsxs)(i.Ty,{className:e,children:[(0,n.jsx)(i.Jy,{label:o("members"),children:(0,m.u)(s.length)}),(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{label:o("proposals"),children:t?(0,m.u)(t?.length):(0,n.jsx)("span",{className:"--tmp",children:"99"})}),(0,n.jsx)(i.Jy,{label:o("total"),children:u?(0,m.u)(u):(0,n.jsx)("span",{className:"--tmp",children:"99"})})]})]})})),p=a.memo((function({className:e="",isMember:s,members:t,prime:a,proposalHashes:o,type:i}){return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(h,{isMember:s,members:t,proposalHashes:o,type:i}),(0,n.jsx)(u,{members:t,prime:a})]})}));var x=t(92858);const g=[],f=["proposals"],b=a.memo((function({basePath:e,className:s,type:t}){const{t:u}=(0,d.$)(),{api:m}=(0,r.h)(),{isMember:h,members:b,prime:j}=(0,l.V)(t),v=(0,c.W7)(m.derive[t].hasProposals),y=(0,c.W7)(m.derive[t].proposalHashes),w=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:u("Overview")},{name:"proposals",text:u("Proposals ({{count}})",{replace:{count:y?.length||0}})}]),[y,u]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,hidden:v?g:f,items:w}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(x.Z,{isMember:h,members:b,prime:j,proposalHashes:y,type:t}),path:"proposals"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(p,{isMember:h,members:b,prime:j,proposalHashes:y,type:t}),index:!0})]})})]})}))},92858:(e,s,t)=>{t.d(s,{Z:()=>I});var n=t(52322),a=t(2784),o=t(68235),i=t(51985),r=t(92914),l=t(90778),c=t(9118),d=t(87660),u=t(81190),m=t(65874),h=t(14681),p=t(38894),x=t(56949),g=t(81661);const f=a.memo((function({hasFailed:e,hash:s,idNumber:t,proposal:r,type:c}){const{t:d}=(0,i.$)(),{api:m}=(0,l.h)(),[h,f]=(0,p.O)(),[b,j]=(0,a.useState)(null),{encodedCallLength:v,weight:y}=(0,x.h7)(r),w=(0,u.m)(c);return w?(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)(o.u_,{header:d("Close proposal"),onClose:f,size:"large",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.u_.Columns,{hint:d("The proposal that will be affected. Once closed for the current voting round, it would need to be re-submitted for a subsequent voting round."),children:(0,n.jsx)(g.Z,{idNumber:t,proposal:r})}),(0,n.jsx)(o.u_.Columns,{hint:d("The committee account that will apply the close for the current round."),children:(0,n.jsx)(o.rp,{label:d("close from account"),onChange:j,type:"account"})})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:b,isDisabled:!e&&!v,onStart:f,params:4===m.tx[w].close.meta.args.length?e?[s,t,0,0]:[s,t,y,v]:[s,t],tx:m.tx[w].closeOperational||m.tx[w].close})})]}),(0,n.jsx)(o.zx,{icon:"times",label:d("Close"),onClick:f})]}):null}));var b=t(34814);const j=a.memo((function({hash:e,isMember:s,members:t,prime:r,proposalId:c,type:d}){const{t:m}=(0,i.$)(),{api:h}=(0,l.h)(),{hasAccounts:x}=(0,b.x)(),[g,f]=(0,a.useState)(null),[j,v]=(0,p.O)(),y=(0,u.m)(d);return y&&x?(0,n.jsxs)(n.Fragment,{children:[j&&(0,n.jsxs)(o.u_,{header:m("Vote on proposal"),onClose:v,size:"small",children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.UE,{filter:t,onChange:f}),g===r&&(0,n.jsx)(o.Pd,{content:m("You are voting with this collective's prime account. The vote will be the default outcome in case of any abstentions.")})]}),(0,n.jsxs)(o.u_.Actions,{children:[(0,n.jsx)(o.cA,{accountId:g,icon:"ban",label:m("Vote Nay"),onStart:v,params:[e,c,!1],tx:h.tx[y].vote}),(0,n.jsx)(o.cA,{accountId:g,icon:"check",label:m("Vote Aye"),onStart:v,params:[e,c,!0],tx:h.tx[y].vote})]})]}),(0,n.jsx)(o.zx,{icon:"check",isDisabled:!s,label:m("Vote"),onClick:v})]}):null})),v=a.memo((function({className:e="",imageHash:s,isMember:t,members:a,prime:i,type:p}){const{api:x}=(0,l.h)(),g=(0,c.W7)(x.derive[p].proposal,[s]),{hasFailed:b,isCloseable:v,isVoteable:y,remainingBlocks:w}=(0,d.I)(g?.votes,a.length,p);if(!(0,u.m)(p)||!g?.votes)return null;const{ayes:k,end:C,index:N,nays:I,threshold:S}=g.votes;return(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)(o.iA.Column.Id,{value:N}),(0,n.jsx)(r.Z,{imageHash:s,isCollective:!0,proposal:g.proposal}),(0,n.jsxs)("td",{className:"number",children:[(0,h.u)(k.length),"/",(0,h.u)(S)]}),(0,n.jsx)("td",{className:"number together",children:w&&C&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{value:w}),"#",(0,h.u)(C)]})}),(0,n.jsx)("td",{className:"address",children:k.map(((e,s)=>(0,n.jsx)(o.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,n.jsx)("td",{className:"address",children:I.map(((e,s)=>(0,n.jsx)(o.ax,{value:e,withBalance:!1},`${s}:${e.toHex()}`)))}),(0,n.jsxs)("td",{className:"button",children:[y&&!v&&(0,n.jsx)(j,{hash:s,isMember:t,members:a,prime:i,proposalId:N,type:p}),v&&(0,n.jsx)(f,{hasFailed:b,hash:s,idNumber:N,proposal:g.proposal,type:p})]})]})}));var y=t(65121),w=t(60404),k=t(48801),C=t.n(k);const N=a.memo((function({defaultThreshold:e=.5,defaultValue:s,filter:t,isMember:r,members:c,type:d}){const{t:m}=(0,i.$)(),{api:h,apiDefaultTxSudo:p}=(0,l.h)(),{isOpen:x,onClose:g,onOpen:f}=(0,y.d)(),[b,j]=(0,a.useState)(null),[{proposal:v,proposalLength:k},N]=(0,a.useState)({proposalLength:0}),[[I,S],A]=(0,a.useState)([new(C())(Math.min(c.length,c.length*e+1)),!0]),P=(0,u.m)(d),E=(0,a.useCallback)((e=>!!e&&!e.isZero()&&e.lten(c.length)),[c]),M=(0,a.useCallback)((e=>N({proposal:e,proposalLength:e?.length||0})),[]),D=(0,a.useCallback)((e=>A([e||null,E(e)])),[E]);return P?(0,n.jsxs)(n.Fragment,{children:[x&&(0,n.jsxs)(o.u_,{header:m("Propose a committee motion"),onClose:g,children:[(0,n.jsxs)(o.u_.Content,{children:[(0,n.jsx)(o.rp,{filter:c,label:m("propose from account"),onChange:j,type:"account",withLabel:!0}),(0,n.jsx)(o.Rn,{className:"medium",isError:!S,label:m("threshold"),onChange:D,placeholder:m("Positive number between 1 and {{count}}",{replace:{count:c.length}}),value:I||void 0}),(0,n.jsx)(w.Z,{defaultValue:s||p,filter:t,label:m("proposal"),onChange:M})]}),(0,n.jsx)(o.u_.Actions,{children:(0,n.jsx)(o.cA,{accountId:b,isDisabled:!S||!v,onStart:g,params:3===h.tx[P].propose.meta.args.length?[I,v,k]:[I,v],tx:h.tx[P].propose})})]}),(0,n.jsx)(o.zx,{icon:"plus",isDisabled:!r,label:m("Submit proposal"),onClick:f})]}):null})),I=a.memo((function({className:e="",defaultProposal:s,defaultThreshold:t,filter:r,isMember:l,members:c,prime:d,proposalHashes:u,type:m}){const{t:h}=(0,i.$)(),p=(0,a.useRef)([[h("proposals"),"start",2],[h("threshold")],[h("voting end")],[h("aye"),"address"],[h("nay"),"address"],[]]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(o.zx.Group,{children:(0,n.jsx)(N,{defaultThreshold:t,defaultValue:s,filter:r,isMember:l,members:c,type:m})}),(0,n.jsx)(o.iA,{empty:u&&h("No committee proposals"),header:p.current,children:u?.map((e=>(0,n.jsx)(v,{imageHash:e,isMember:l,members:c,prime:d,type:m},e.toHex())))})]})}))},75509:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(52322),a=t(2784),o=t(95499);const i=a.memo((function({basePath:e,className:s}){return(0,n.jsx)(o.Z,{basePath:e,className:s,type:"technicalCommittee"})}))},51985:(e,s,t)=>{t.d(s,{$:()=>a});var n=t(61349);function a(){return(0,n.$G)("app-tech-comm")}},87340:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(90778),a=t(9118),o=t(11677);const i={transform:e=>e.length},r=(0,o.e)("useCounter",(function(){const{api:e,isApiReady:s}=(0,n.h)();return(0,a.W7)(s&&e.derive.technicalCommittee?.proposals,void 0,i)||0}))},74425:(e,s,t)=>{t.d(s,{Z:()=>Q});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(90778),l=t(70563),c=t(33661),d=t(9118),u=t(38894),m=t(95292),h=t(48801),p=t.n(h),x=t(61349);function g(){return(0,x.$G)("app-treasury")}const f=a.memo((function({className:e}){const{t:s}=g(),{api:t}=(0,r.h)(),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[h,x]=(0,u.O)(),[f,b]=(0,a.useState)(),j=f?.gtn(0),[v,y,w]=(0,a.useMemo)((()=>[t.consts.treasury.proposalBondMinimum?t.consts.treasury.proposalBondMinimum.toString():null,t.consts.treasury.proposalBondMaximum?.isSome?t.consts.treasury.proposalBondMaximum.unwrap().toString():null,t.consts.treasury.proposalBond?`${t.consts.treasury.proposalBond.mul(m.S8).div(m.uy).toNumber().toFixed(2)}%`:`${new(p())(0).toNumber().toFixed(2)}%`]),[t]);return(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsxs)(i.u_,{className:e,header:s("Submit treasury proposal"),onClose:x,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:s("This account will make the proposal and be responsible for the bond."),children:(0,n.jsx)(i.rp,{label:s("submit with account"),onChange:l,type:"account",withLabel:!0})}),(0,n.jsx)(i.u_.Columns,{hint:s("The beneficiary will receive the full amount if the proposal passes."),children:(0,n.jsx)(i.rp,{label:s("beneficiary"),onChange:d,type:"allPlus"})}),(0,n.jsxs)(i.u_.Columns,{hint:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:s("The value is the amount that is being asked for and that will be allocated to the beneficiary if the proposal is approved.")}),y?(0,n.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount and no more than maximum on-chain bond would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:w}})}):(0,n.jsx)("p",{children:s("Of the beneficiary amount, no less than the minimum bond amount would need to be put up as collateral. This is calculated from {{bondPercentage}} of the requested amount.",{replace:{bondPercentage:w}})})]}),children:[(0,n.jsx)(i.H,{isError:!j,label:s("value"),onChange:b}),(0,n.jsx)(i.qG,{label:s("proposal bond"),children:w}),v&&(0,n.jsx)(i.H,{defaultValue:v,isDisabled:!0,label:s("minimum bond")}),y&&(0,n.jsx)(i.H,{defaultValue:y,isDisabled:!0,label:s("maximum bond")}),(0,n.jsx)(i.Pd,{content:s("Be aware that once submitted the proposal will be put to a vote. If the proposal is rejected due to a lack of info, invalid requirements or non-benefit to the network as a whole, the full bond posted (as describe above) will be lost.")})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:o,icon:"plus",isDisabled:!o||!j,label:s("Submit proposal"),onStart:x,params:[f,c],tx:t.tx.treasury.spendLocal??t.tx.treasury.proposeSpend})})]}),(0,n.jsx)(i.zx,{icon:"plus",label:s("Submit proposal"),onClick:x})]})}));var b=t(30943),j=t(81190);const v=a.memo((function({id:e,isDisabled:s,members:t}){const{t:o}=g(),{api:l}=(0,r.h)(),[c,d]=(0,u.O)(),[m,h]=(0,a.useState)(null),[p,x]=(0,a.useState)("accept"),[{proposal:f,proposalLength:v},y]=(0,a.useState)((()=>({proposalLength:0}))),w=(0,j.m)("council"),k=Math.ceil((t?.length||0)*(0,b.mo)(l)),C=(0,a.useRef)([{text:o("Acceptance proposal to council"),value:"accept"},{text:o("Rejection proposal to council"),value:"reject"}]);return(0,a.useEffect)((()=>{const s="reject"===p?l.tx.treasury.rejectProposal(e):l.tx.treasury.approveProposal(e);y({proposal:s,proposalLength:s.length})}),[l,e,p]),w?(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(i.u_,{header:o("Send to council"),onClose:d,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:o('The council member that is proposing this, submission equates to an "aye" vote.'),children:(0,n.jsx)(i.rp,{filter:t,label:o("submit with council account"),onChange:h,type:"account",withLabel:!0})}),(0,n.jsx)(i.u_.Columns,{hint:o("Proposal can either be to approve or reject this spend. Once approved, the change is applied by either removing the proposal or scheduling payout."),children:(0,n.jsx)(i.Lt,{label:o("council proposal type"),onChange:x,options:C.current,value:p})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:m,icon:"check",isDisabled:!m||!k,label:o("Send to council"),onStart:d,params:3===l.tx[w].propose.meta.args.length?[k,f,v]:[k,f],tx:l.tx[w].propose})})]}),(0,n.jsx)(i.zx,{icon:"step-forward",isDisabled:s,label:o("To council"),onClick:d})]}):null})),y=a.memo((function({className:e="",isMember:s,members:t,proposal:{council:o,id:l,proposal:d},withSend:m}){const{t:h}=g(),{api:p}=(0,r.h)(),[x,f]=(0,u.O)(!1),b=(0,c.m)(p.tx.council?.propose),j=(0,a.useMemo)((()=>!!o.map((({votes:e})=>e?e.index.toNumber():-1)).filter((e=>-1!==e)).length),[o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("tr",{className:`${e} isExpanded isFirst ${x?"":"isLast"}`,children:[(0,n.jsx)(i.iA.Column.Id,{value:l}),(0,n.jsx)("td",{className:"address all",children:(0,n.jsx)(i.N,{value:d.beneficiary})}),(0,n.jsx)(i.iA.Column.Balance,{value:d.value}),(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(i.ax,{balance:d.bond,value:d.proposer,withBalance:!0})}),(0,n.jsx)("td",{className:j?"middle":"button",children:b?j?(0,n.jsx)("a",{href:"#/council/motions",children:h("Voting")}):m&&(0,n.jsx)(v,{id:l,isDisabled:!s,members:t}):null}),(0,n.jsx)(i.iA.Column.Expand,{isExpanded:x,toggle:f})]}),(0,n.jsxs)("tr",{className:`${e} ${x?"isExpanded isLast":"isCollapsed"} packedTop`,children:[(0,n.jsx)("td",{}),(0,n.jsx)("td",{className:"columar",colSpan:4,children:(0,n.jsx)(i.P0,{is100:!0,children:(0,n.jsx)(i.P0.Column,{children:(0,n.jsx)(i.NR,{data:l,type:"treasury",withTitle:!0})})})}),(0,n.jsx)("td",{})]})]})})),w=a.memo((function({className:e="",isApprovals:s,isMember:t,members:o,proposals:r}){const{t:l}=g(),c=(0,a.useMemo)((()=>[[l(s?"Approved":"Proposals"),"start",2],[],[l("proposer"),"address"],[],[]]),[s,l]);return(0,n.jsx)(i.iA,{className:e,empty:r&&l(s?"No approved proposals":"No pending proposals"),header:c,children:r?.map((e=>(0,n.jsx)(y,{isMember:t,members:o,proposal:e,withSend:!s},e.id.toString())))})}));var k=t(54383),C=t(68920),N=t(58607),I=t(14681);const S=a.memo((function({approvalCount:e,proposalCount:s}){const{t}=g(),{api:o}=(0,r.h)(),l=(0,k.C)(),c=(0,d.W7)(o.query.treasury.proposalCount),{burn:u,pendingBounties:h,pendingProposals:p,spendPeriod:x,value:f}=(0,C._)(),b=(0,a.useMemo)((()=>f?.sub(h).sub(p)),[f,h,p]),j=!(!f||!b);return(0,n.jsxs)(i.Ty,{children:[(0,n.jsxs)("section",{children:[(0,n.jsx)(i.Jy,{className:"media--1700",label:t("open"),children:void 0===s?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(s)}),(0,n.jsx)(i.Jy,{className:"media--1600",label:t("approved"),children:void 0===e?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(e)}),(0,n.jsx)(i.Jy,{className:"media--1400",label:t("total"),children:void 0===c?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,I.u)(c)})]}),(0,n.jsxs)("section",{children:[!p.isZero()&&(0,n.jsx)(i.Jy,{className:"media--1100",label:t("approved"),children:(0,n.jsx)(N.Z,{value:p,withSi:!0})}),!h.isZero()&&(0,n.jsx)(i.Jy,{className:"media--1200",label:t("bounties"),children:(0,n.jsx)(N.Z,{value:h,withSi:!0})}),(0,n.jsx)(i.Jy,{className:"media--1300",label:t("next burn"),children:(0,n.jsx)(N.Z,{className:u?"":"--tmp",value:u||1,withSi:!0})})]}),(0,n.jsx)("section",{children:(0,n.jsx)(i.Jy,{label:t("spendable / available"),progress:{hideValue:!0,isBlurred:!j,total:j?f:m.Jo,value:j?b:m.um},children:(0,n.jsxs)("span",{className:j?"":"--tmp",children:[(0,n.jsx)(N.Z,{value:b||m.um,withSi:!0}),(0,n.jsx)(n.Fragment,{children:" / "}),(0,n.jsx)(N.Z,{value:f||m.Jo,withSi:!0})]})})}),l&&x.gt(m.nw)&&(0,n.jsx)("section",{children:(0,n.jsx)(i.Jy,{label:t("spend period"),progress:{total:x,value:l.mod(x),withTime:!0}})})]})})),A=a.memo((function({className:e,isMember:s,members:t}){const{api:a}=(0,r.h)(),o=(0,d.W7)(a.derive.treasury.proposals);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(S,{approvalCount:o?.approvals.length,proposalCount:o?.proposals.length}),a.tx.treasury.proposeSpend||a.tx.treasury.spendLocal?(0,n.jsx)(i.zx.Group,{children:(0,n.jsx)(f,{})}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(w,{isMember:s,members:t,proposals:o?.proposals}),(0,n.jsx)(w,{isApprovals:!0,isMember:s,members:t,proposals:o?.approvals})]})}));var P=t(34814),E=t(79760);const M=a.memo((function({members:e}){const{t:s}=g(),{api:t}=(0,r.h)(),[o,l]=(0,u.O)(),[c,d]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[x,f]=(0,a.useState)(""),[b,j]=(0,a.useState)(),v=(0,a.useMemo)((()=>Math.min(256,(t.consts.tips||t.consts.treasury)?.maximumReasonLength?.toNumber()||256)),[t]),y=(0,a.useMemo)((()=>!!c&&e.includes(c)),[c,e]),w=!!b&&b.gt(m.nw),k=!!x&&x.length>=5&&x.length<=v;return t.tx.tips.tipNew||t.tx.treasury.tipNew?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"plus",label:s("Propose tip"),onClick:l}),o&&(0,n.jsxs)(i.u_,{header:s("Submit tip request"),onClose:l,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:s("Use this account to request the tip from. This can be a normal or council account."),children:(0,n.jsx)(i.rp,{label:s("submit with account"),onChange:d,type:"account",withLabel:!0})}),(0,n.jsx)(i.u_.Columns,{hint:s("The beneficiary will received the tip as approved by council members."),children:(0,n.jsx)(i.rp,{label:s("beneficiary"),onChange:p,type:"allPlus"})}),(0,n.jsx)(i.u_.Columns,{hint:s("A reason (to be stored-on-chain) as to why the recipient deserves a tip payout."),children:(0,n.jsx)(i.II,{autoFocus:!0,isError:!k,label:s("tip reason"),onChange:f})}),y&&(0,n.jsx)(i.u_.Columns,{hint:s("As a council member, you can suggest an initial value for the tip, each other council member can suggest their own."),children:(0,n.jsx)(i.H,{isError:!w,label:s("tip value"),onChange:j})})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:c,icon:"plus",isDisabled:!c||y&&!w||!k,label:s("Propose tip"),onStart:l,params:y?[x,h,b]:[x,h],tx:y?(t.tx.tips||t.tx.treasury).tipNew:(t.tx.tips||t.tx.treasury).reportAwesome})})]})]}):null}));var D=t(65874);const T={transform:({freeBalance:e,reservedBalance:s})=>e.add(s)},F=a.memo((function({defaultId:e,hash:s,isMember:t,isTipped:o,median:l,members:c,recipient:m}){const{t:h}=g(),{api:p}=(0,r.h)(),[x,f]=(0,u.O)(),[b,j]=(0,a.useState)(e),[v,y]=(0,a.useState)(),w=(0,d.W7)(p.derive.balances?.all,[m],T),k=(p.tx.tips||p.tx.treasury).tip;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.zx,{icon:"check",isDisabled:!t,label:h("Tip"),onClick:f}),(0,n.jsx)(i.cA,{accountId:e,className:"media--1600",icon:"fighter-jet",isDisabled:!t||!o,isIcon:!0,params:[s,l],tx:k,withoutLink:!0}),x&&(0,n.jsxs)(i.u_,{header:h("Submit tip endorsement"),onClose:f,size:"large",children:[(0,n.jsxs)(i.u_.Content,{children:[(0,n.jsx)(i.u_.Columns,{hint:h("Your endorsement will be applied for this account."),children:(0,n.jsx)(i.rp,{filter:c,label:h("submit with account"),onChange:j,type:"account",withLabel:!0})}),(0,n.jsxs)(i.u_.Columns,{hint:h("Allocate a suggested tip amount. With enough endorsements, the suggested values are averaged and sent to the beneficiary."),children:[(0,n.jsx)(i.H,{autoFocus:!0,defaultValue:l,isZeroable:!0,label:h("value"),onChange:y}),w&&w.isZero()&&(0,n.jsx)(i.Pd,{content:h("The recipient account has no balance, ensure the tip is more than the existential deposit to create the account.")})]})]}),(0,n.jsx)(i.u_.Actions,{children:(0,n.jsx)(i.cA,{accountId:b,icon:"plus",isDisabled:!b,label:h("Submit tip"),onStart:f,params:[s,v],tx:k})})]})]})}));var q=t(94158);const O={transform:e=>e.isSome?(0,q.r)(e.unwrap().toHex()):null},_=a.memo((function({hash:e}){const{api:s}=(0,r.h)(),t=(0,d.W7)((s.query.tips||s.query.treasury).reasons,[e],O);return(0,n.jsx)("td",{className:"start all",children:t||e.toHex()})})),V=i.zo.tr`
  .closingTimer {
    display: inline-block;
    padding: 0 0.5rem;
  }
`,B=a.memo((function({bestNumber:e,className:s="",defaultId:t,hash:o,isMember:l,members:c,onSelect:d,onlyUntipped:u,tip:h}){const{api:p}=(0,r.h)(),{t:x}=g(),{allAccounts:f}=(0,P.x)(),{closesAt:b,finder:j,isFinder:v,isTipped:y,isTipper:w,median:k}=(0,a.useMemo)((()=>function(e,s){const t=e.closes.unwrapOr(null);let n=null,a=null;if(function(e){return!!e?.findersFee}(e))n=e.finder,a=e.deposit;else if(e.finder.isSome){const s=e.finder.unwrap();n=s[0],a=s[1]}const o=e.tips.map((([,e])=>e)).sort(((e,s)=>e.cmp(s))),i=Math.floor(o.length/2),r=o.length?o.length%2?o[i]:o[i-1].add(o[i]).divn(2):m.nw;return{closesAt:t,deposit:a,finder:n,isFinder:!!n&&s.includes(n.toString()),isTipped:!!o.length,isTipper:e.tips.some((([e])=>s.includes(e.toString()))),median:r}}(h,f)),[f,h]),C=(0,a.useMemo)((()=>f.find((e=>c.includes(e)))||null),[f,c]),[S,A]=(0,a.useState)(!1),E=(0,a.useCallback)((()=>h.tips.map((([e,s])=>(0,n.jsx)(i.ax,{balance:s,value:e,withBalance:!0},e.toString())))),[h]);if((0,a.useEffect)((()=>{d(o,S,k)}),[o,S,k,d]),(0,a.useEffect)((()=>{A(l&&!w)}),[l,w]),u&&!b&&w)return null;const{reason:M,tips:T,who:q}=h,O=q.toString();return(0,n.jsxs)(V,{className:s,children:[(0,n.jsx)("td",{className:"address",children:(0,n.jsx)(i.N,{value:q})}),(0,n.jsx)("td",{className:"address media--1400",children:j&&(0,n.jsx)(i.ax,{value:j})}),(0,n.jsx)(_,{hash:M}),(0,n.jsx)("td",{className:"expand media--1100",children:0!==T.length&&(0,n.jsx)(i.n0,{renderChildren:E,summary:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:x("Tippers ({{count}})",{replace:{count:T.length}})}),(0,n.jsx)(N.Z,{value:k})]})})}),(0,n.jsxs)("td",{className:"button together",children:[b?e&&b.gt(e)&&(0,n.jsxs)("div",{className:"closingTimer",children:[(0,n.jsx)(D.Z,{value:b.sub(e)}),"#",(0,I.u)(b)]}):j&&v&&(0,n.jsx)(i.cA,{accountId:j,className:"media--1400",icon:"times",label:x("Cancel"),params:[o],tx:(p.tx.tips||p.tx.treasury).retractTip}),b&&e&&!b.gt(e)?(0,n.jsx)(i.cA,{accountId:C,icon:"times",label:x("Close"),params:[o],tx:(p.tx.tips||p.tx.treasury).closeTip}):(0,n.jsx)(F,{defaultId:t,hash:o,isMember:l,isTipped:y,median:k,members:c,recipient:O})]}),(0,n.jsx)("td",{className:"badge media--1700",children:l&&(0,n.jsx)(i.JO,{color:w?"green":"gray",icon:"asterisk"})}),(0,n.jsx)("td",{children:(0,n.jsx)(i.XZ,{isDisabled:!l,onChange:A,value:S})}),(0,n.jsx)("td",{className:"links media--1700",children:(0,n.jsx)(i.NR,{data:o,type:"tip"})})]})})),R={withParams:!0},Z=(0,i.zo)(i.iA)`
  .tipsFilter {
    text-align: right;

    .ui--Toggle {
      margin-right: 1rem;
      margin-top: 0.75rem;
    }
  }
`,$=a.memo((function({className:e="",defaultId:s,hashes:t,isMember:o,members:l,onSelectTip:c}){const{t:u}=g(),{api:m}=(0,r.h)(),[h,p]=(0,a.useState)(!1),x=(0,k.C)(),f=(0,d.W7)(t&&(m.query.tips||m.query.treasury).tips.multi,[t],R),b=(0,a.useMemo)((()=>function(e,s){if(!e||!s)return;const[[t],n]=e;return n.map(((e,s)=>[t[s],e.unwrapOr(null)])).filter((e=>s.includes(e[0])&&!!e[1])).sort(((e,s)=>e[1].closes.isNone?s[1].closes.isNone?0:-1:s[1].closes.isSome?s[1].closes.unwrap().cmp(e[1].closes.unwrap()):1))}(f,t)),[t,f]),j=(0,a.useRef)([[u("tips"),"start"],[u("finder"),"address media--1400"],[u("reason"),"start"],[void 0,"media--1100"],[],[void 0,"badge media--1700"],[],[void 0,"media--1700"]]);return(0,n.jsx)(Z,{className:e,empty:b&&u("No open tips"),filter:o&&(0,n.jsx)("div",{className:"tipsFilter",children:(0,n.jsx)(i.ZD,{label:u("show only untipped/closing"),onChange:p,value:h})}),header:j.current,children:b?.map((([e,t])=>(0,n.jsx)(B,{bestNumber:x,defaultId:s,hash:e,isMember:o,members:l,onSelect:c,onlyUntipped:h,tip:t},e)))})})),L={quickTips:{},quickTxs:[]},z=a.memo((function({className:e,hashes:s,isMember:t,members:o}){const{t:l}=g(),{allAccounts:c}=(0,P.x)(),{api:d}=(0,r.h)(),[{quickTxs:u},m]=(0,a.useState)(L),h=(0,E.b)(u),p=(0,a.useMemo)((()=>o.find((e=>c.includes(e)))||null),[c,o]),x=(0,a.useCallback)(((e,s,t)=>m((({quickTips:n})=>(n[e]=s?t:null,{quickTips:n,quickTxs:Object.entries(n).map((([e,s])=>s&&(d.tx.tips||d.tx.treasury).tip(e,s))).filter((e=>!!e))})))),[d]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsxs)(i.zx.Group,{children:[(0,n.jsx)(M,{members:o}),(0,n.jsx)(i.cA,{accountId:p,extrinsic:h,icon:"fighter-jet",isDisabled:!t||!h,label:l("Median tip selected")})]}),(0,n.jsx)($,{defaultId:p,hashes:s,isMember:t,members:o,onSelectTip:x})]})}));var W=t(24305),H=t(12298),U=t(11677);const J={transform:e=>e.map((({args:[e]})=>e.toHex()))},G=(0,U.e)("useTipHashes",(function(){const{api:e}=(0,r.h)(),s=(0,W.b)([e.events.tips?.NewTip,e.events.tips?.TipClosed,e.events.tips?.TipRetracted]);return(0,H.k)((e.query.tips||e.query.treasury)?.tips,[],J,s.blockHash)})),Q=a.memo((function({basePath:e}){const{t:s}=g(),{api:t}=(0,r.h)(),{isMember:d,members:u}=(0,l.V)("council"),m=G(),h=(0,a.useMemo)((()=>[{isRoot:!0,name:"overview",text:s("Overview")},(0,c.m)((t.query.tips||t.query.treasury)?.tips)&&{count:m?.length,name:"tips",text:s("Tips")}].filter((e=>!!e))),[t,s,m]);return(0,n.jsxs)("main",{className:"treasury--App",children:[(0,n.jsx)(i.mQ,{basePath:e,items:h}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(z,{hashes:m,isMember:d,members:u}),path:"tips"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(A,{isMember:d,members:u}),index:!0})]})})]})}))},9039:(e,s,t)=>{t.d(s,{Z:()=>r});var n=t(2784),a=t(34814),o=t(90778),i=t(9118);const r=(0,t(11677).e)("useCounter",(function(){const{hasAccounts:e}=(0,a.x)(),{api:s,isApiReady:t}=(0,o.h)(),r=(0,i.W7)(t&&e&&s.derive.treasury?.proposals);return(0,n.useMemo)((()=>r?.proposals.length||0),[r])}))},27008:(e,s,t)=>{t.d(s,{Z:()=>D});var n=t(52322),a=t(2784),o=t(73557),i=t(68235),r=t(35189),l=t(9242),c=t(72570),d=t(90778),u=t(55858),m=t(14681),h=t(61162),p=t(70416),x=t(66850),g=t(94175),f=t(90107),b=t(61349);function j(){return(0,b.$G)("app-utilities")}const v=a.memo((function({className:e}){const{t:s}=j(),{chainSS58:t}=(0,d.h)(),[{inputSS58:o,publicKey:b},v]=(0,a.useState)({inputSS58:42,publicKey:null}),[y,w]=(0,a.useState)(-1),k=(0,a.useCallback)((e=>v(function(e){try{if(e&&(0,h.U)(e)){const s=(0,p.MW)(e),[,,,t]=(0,x.l)(s),n=(0,g.m)(e);return{inputSS58:t,publicKey:(0,u.c)(n)}}}catch{}return{inputSS58:42,publicKey:null}}(e))),[]),C=(0,a.useMemo)((()=>{const e=c.FA.find((({prefix:e})=>e===t));return(0,l.M)(s).map((s=>(0,r.SX)(s,["default"],"empty",-1===s.value?e?` (${e.displayName}, ${t||0})`:` (${t||0})`:` (${s.value})`)))}),[t,s]),N=(0,a.useMemo)((()=>b&&(0,f.m)(b,-1===y?t:y)),[t,y,b]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.bm,{autoFocus:!0,isError:!b,label:s("address to convert"),noConvert:!0,onChange:k})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.Lt,{defaultValue:y,label:s("address prefix"),onChange:w,options:C})}),b&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.qG,{className:"medium",label:s("input ss58 prefix"),value:(0,m.u)(o)})}),N&&(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.bm,{defaultValue:N,isDisabled:!0,label:s("converted address")},N)}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.qG,{className:"full",label:s("hex public key"),value:b})})]})]})}));var y=t(64021),w=t(74076),k=t(48533),C=t(80809);const N=a.memo((function({className:e}){const{t:s}=j(),[{data:t,hash:o,isHexData:r},l]=(0,a.useState)({data:"",hash:(0,C.$)((0,y.d)(""),256),isHexData:!1}),c=(0,a.useCallback)((e=>{const s=(0,w.vq)(e);l({data:e,hash:(0,C.$)(s?(0,k.G)(e):(0,y.d)(e),256),isHexData:s})}),[]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.II,{autoFocus:!0,className:"full",label:s("from the following data"),onChange:c,value:t})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.qG,{className:"medium",label:s("hex input data"),value:s(r?"Yes":"No")})}),(0,n.jsx)("div",{className:"ui--row",children:(0,n.jsx)(i.r_,{className:"full",isHidden:0===o.length,isMonospace:!0,label:s("the resulting hash is"),value:o,withCopy:!0})})]})}));var I=t(57139),S=t(37245),A=t(44605),P=t(68202),E=t(6046);const M=a.memo((function(){const e=(0,E.s)("XcmVersionedXcm"),[s,t]=(0,a.useState)("0x"),o=(0,a.useCallback)(((s,n)=>{const a=I.statics.api.createType(e.type,n.value);t((0,u.c)(a.toU8a()))}),[e.type]);return(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(A.Z,{defaultValue:(0,P.y)(I.statics.api.registry,{type:e}),index:0,onChange:o,registry:I.statics.api.registry,type:e}),(0,n.jsx)(i.r_,{isDisabled:!0,value:s,withCopy:!0})]})})),D=a.memo((function({basePath:e,className:s}){const{t}=j(),r=(0,a.useRef)([{isRoot:!0,name:"convert",text:t("Convert address")},{name:"hash",text:t("Hash data")},{name:"xcm",text:t("Encode XCM")}]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(i.mQ,{basePath:e,items:r.current}),(0,n.jsx)(o.Z5,{children:(0,n.jsxs)(o.AW,{path:e,children:[(0,n.jsx)(o.AW,{element:(0,n.jsx)(M,{}),path:"xcm"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(N,{}),path:"hash"}),(0,n.jsx)(o.AW,{element:(0,n.jsx)(v,{}),index:!0})]})})]})}))},7644:(e,s,t)=>{t.d(s,{Z:()=>w});var n=t(52322),a=t(2784),o=t(68235),i=t(61349);function r(){return(0,i.$G)("app-whitelist")}var l=t(90778),c=t(12298),d=t(39824),u=t(11677);const m={transform:e=>e.map((({args:[e]})=>e))};function h(e){const s=[],t=[];return e.forEach((({event:{data:[e],method:n}})=>{"CallWhitelisted"===n?s.push(e):t.push(e)})),{added:s,removed:t}}const p=(0,u.e)("useHashes",(function(){const{api:e}=(0,l.h)(),s=(0,c.k)(e.query.whitelist.whitelistedCall,[],m),t=(0,d.N)([e.events.whitelist.CallWhitelisted,e.events.whitelist.WhitelistedCallRemoved],h,s);return(0,a.useMemo)((()=>t?.map((e=>e.toHex()))),[t])}));var x=t(69338),g=t(74525),f=t(31313);const b=a.memo((function({className:e,value:s}){const t=(0,f.CH)(s);return(0,n.jsxs)("tr",{className:e,children:[(0,n.jsx)(g.Z,{value:s}),(0,n.jsx)(x.Z,{value:t})]})}));var j=t(14681);const v=a.memo((function({className:e,hashes:s}){const{t}=r();return(0,n.jsx)(o.Ty,{className:e,children:(0,n.jsx)(o.Jy,{label:t("hashes"),children:void 0===s?(0,n.jsx)("span",{className:"--tmp",children:"99"}):(0,j.u)(s.length)})})})),y=a.memo((function({className:e}){const{t:s}=r(),t=p(),i=(0,a.useRef)([[s("calls"),"start"],[void 0,"all"],[void 0,"media--1300"]]);return(0,n.jsxs)("div",{className:e,children:[(0,n.jsx)(v,{hashes:t}),(0,n.jsx)(o.iA,{className:e,empty:t&&s("No call hashes found"),header:i.current,children:t?.map((e=>(0,n.jsx)(b,{value:e},e)))})]})})),w=a.memo((function({basePath:e,className:s}){const{t}=r(),i=(0,a.useRef)([{isRoot:!0,name:"overview",text:t("Overview")}]);return(0,n.jsxs)("main",{className:s,children:[(0,n.jsx)(o.mQ,{basePath:e,items:i.current}),(0,n.jsx)(y,{})]})}))}}]);